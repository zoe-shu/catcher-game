"use strict";(self.webpackChunkzoe_catcher_app=self.webpackChunkzoe_catcher_app||[]).push([[179],{6376:(Tt,Se,L)=>{L.d(Se,{$:()=>os,A:()=>re,G:()=>qe,K:()=>iu,L:()=>Hi,N:()=>ir,P:()=>Ah,R:()=>uo,U:()=>Xt,V:()=>Ls,W:()=>sr,X:()=>pa,Y:()=>Si,Z:()=>Vr,_:()=>Fs,a:()=>nt,a0:()=>Vc,a1:()=>Vs,a2:()=>vi,a3:()=>Cs,a4:()=>wo,a5:()=>Ku,a6:()=>Go,a7:()=>bs,a8:()=>ya,a9:()=>Uc,aA:()=>wn,aB:()=>Ne,aC:()=>ie,aD:()=>na,aE:()=>st,aF:()=>kt,aG:()=>yd,aH:()=>pd,aI:()=>ea,aJ:()=>$n,aN:()=>Aa,aQ:()=>Qr,aa:()=>hs,ab:()=>So,ac:()=>uu,ad:()=>Zu,ae:()=>Ea,af:()=>D,ag:()=>P,ah:()=>se,ak:()=>Mn,al:()=>Vn,am:()=>gn,ap:()=>qu,aq:()=>dn,as:()=>sd,at:()=>qo,au:()=>Pt,av:()=>Dr,aw:()=>Mr,ax:()=>me,ay:()=>fc,az:()=>rl,b:()=>Ko,c:()=>Qc,d:()=>Jc,e:()=>Yc,f:()=>Ma,g:()=>Sh,h:()=>uc,i:()=>C,j:()=>el,k:()=>pc,l:()=>Kc,m:()=>gc,o:()=>Nh,p:()=>Te,r:()=>Jo,s:()=>qc,u:()=>_u});var _=L(5861),G=L(534),Y=L(9058),le=L(7879),ae=L(7582),ce=L(4537);const Te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},re={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const qe=function _e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},at=function Je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),et=new le.Yd("@firebase/auth");function wt(y,...d){et.logLevel<=le.in.ERROR&&et.error(`Auth (${G.SDK_VERSION}): ${y}`,...d)}function me(y,...d){throw lt(y,...d)}function Ne(y,...d){return lt(y,...d)}function we(y,d,f){const T=Object.assign(Object.assign({},at()),{[d]:f});return new Y.LL("auth","Firebase",T).create(d,{appName:y.name})}function Be(y){return we(y,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qe(y,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&me(y,"argument-error"),we(y,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lt(y,...d){if("string"!=typeof y){const f=d[0],T=[...d.slice(1)];return T[0]&&(T[0].appName=y.name),y._errorFactory.create(f,...T)}return Ze.create(y,...d)}function ie(y,d,...f){if(!y)throw lt(d,...f)}function ut(y){const d="INTERNAL ASSERTION FAILED: "+y;throw wt(d),new Error(d)}function Pt(y,d){y||ut(d)}function ar(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function gt(){return"http:"===ft()||"https:"===ft()}function ft(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class he{constructor(d,f){this.shortDelay=d,this.longDelay=f,Pt(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function _t(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Z(y,d){Pt(y.emulator,"Emulator should always be set here");const{url:f}=y.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class ve{static initialize(d,f,T){this.fetchImpl=d,f&&(this.headersImpl=f),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ve={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},je=new he(3e4,6e4);function We(y,d){return y.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:y.tenantId}):d}function Ge(y,d,f,T){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.Z)(function*(y,d,f,T,O={}){return yt(y,O,(0,_.Z)(function*(){let H={},fe={};T&&("GET"===d?fe=T:H={body:JSON.stringify(T)});const Fe=(0,Y.xO)(Object.assign({key:y.config.apiKey},fe)).slice(1),rt=yield y._getAdditionalHeaders();return rt["Content-Type"]="application/json",y.languageCode&&(rt["X-Firebase-Locale"]=y.languageCode),ve.fetch()(qt(y,y.config.apiHost,f,Fe),Object.assign({method:d,headers:rt,referrerPolicy:"no-referrer"},H))}))})).apply(this,arguments)}function yt(y,d,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,_.Z)(function*(y,d,f){y._canInitEmulator=!1;const T=Object.assign(Object.assign({},Ve),d);try{const O=new Et(y),H=yield Promise.race([f(),O.promise]);O.clearNetworkTimeout();const fe=yield H.json();if("needConfirmation"in fe)throw yn(y,"account-exists-with-different-credential",fe);if(H.ok&&!("errorMessage"in fe))return fe;{const Fe=H.ok?fe.errorMessage:fe.error.message,[rt,Nt]=Fe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw yn(y,"credential-already-in-use",fe);if("EMAIL_EXISTS"===rt)throw yn(y,"email-already-in-use",fe);if("USER_DISABLED"===rt)throw yn(y,"user-disabled",fe);const Gt=T[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(Nt)throw we(y,Gt,Nt);me(y,Gt)}}catch(O){if(O instanceof Y.ZR)throw O;me(y,"network-request-failed",{message:String(O)})}})).apply(this,arguments)}function Vt(y,d,f,T){return An.apply(this,arguments)}function An(){return(An=(0,_.Z)(function*(y,d,f,T,O={}){const H=yield Ge(y,d,f,T,O);return"mfaPendingCredential"in H&&me(y,"multi-factor-auth-required",{_serverResponse:H}),H})).apply(this,arguments)}function qt(y,d,f,T){const O=`${d}${f}?${T}`;return y.config.emulator?Z(y.config,O):`${y.config.apiScheme}://${O}`}function zr(y){switch(y){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Et{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,T)=>{this.timer=setTimeout(()=>T(Ne(this.auth,"network-request-failed")),je.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yn(y,d,f){const T={appName:y.name};f.email&&(T.email=f.email),f.phoneNumber&&(T.phoneNumber=f.phoneNumber);const O=Ne(y,d,T);return O.customData._tokenResponse=f,O}function Cn(y){return void 0!==y&&void 0!==y.getResponse}function mt(y){return void 0!==y&&void 0!==y.enterprise}class vt{constructor(d){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===d.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=d.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=d.recaptchaEnforcementState}getProviderEnforcementState(d){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const f of this.recaptchaEnforcementState)if(f.provider&&f.provider===d)return zr(f.enforcementState);return null}isProviderEnabled(d){return"ENFORCE"===this.getProviderEnforcementState(d)||"AUDIT"===this.getProviderEnforcementState(d)}}function $t(){return($t=(0,_.Z)(function*(y){return(yield Ge(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Wr(y,d){return rn.apply(this,arguments)}function rn(){return(rn=(0,_.Z)(function*(y,d){return Ge(y,"GET","/v2/recaptchaConfig",We(y,d))})).apply(this,arguments)}function Ut(){return(Ut=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function Bt(){return(Bt=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function kn(y,d){return zn.apply(this,arguments)}function zn(){return(zn=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function Jn(y){if(y)try{const d=new Date(Number(y));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function Gr(){return(Gr=(0,_.Z)(function*(y,d=!1){const f=(0,Y.m9)(y),T=yield f.getIdToken(d),O=Pr(T);ie(O&&O.exp&&O.auth_time&&O.iat,f.auth,"internal-error");const H="object"==typeof O.firebase?O.firebase:void 0,fe=H?.sign_in_provider;return{claims:O,token:T,authTime:Jn(Ct(O.auth_time)),issuedAtTime:Jn(Ct(O.iat)),expirationTime:Jn(Ct(O.exp)),signInProvider:fe||null,signInSecondFactor:H?.sign_in_second_factor||null}})).apply(this,arguments)}function Ct(y){return 1e3*Number(y)}function Pr(y){const[d,f,T]=y.split(".");if(void 0===d||void 0===f||void 0===T)return wt("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,Y.tV)(f);return O?JSON.parse(O):(wt("Failed to decode base64 JWT payload"),null)}catch(O){return wt("Caught error parsing JWT payload as JSON",O?.toString()),null}}function cn(y){const d=Pr(y);return ie(d,"internal-error"),ie(typeof d.exp<"u","internal-error"),ie(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}function hr(y,d){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,_.Z)(function*(y,d,f=!1){if(f)return d;try{return yield d}catch(T){throw T instanceof Y.ZR&&function xt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(T)&&y.auth.currentUser===y&&(yield y.auth.signOut()),T}})).apply(this,arguments)}class te{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const O=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,O)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const T=this.getInterval(d);this.timerId=setTimeout((0,_.Z)(function*(){yield f.iteration()}),T)}iteration(){var d=this;return(0,_.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&d.schedule(!0))}d.schedule()})()}}class Dt{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jn(this.lastLoginAt),this.creationTime=Jn(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function jt(y){return sn.apply(this,arguments)}function sn(){return(sn=(0,_.Z)(function*(y){var d;const f=y.auth,T=yield y.getIdToken(),O=yield hr(y,kn(f,{idToken:T}));ie(O?.users.length,f,"internal-error");const H=O.users[0];y._notifyReloadListener(H);const fe=null!==(d=H.providerUserInfo)&&void 0!==d&&d.length?qr(H.providerUserInfo):[],Fe=function Kn(y,d){return[...y.filter(T=>!d.some(O=>O.providerId===T.providerId)),...d]}(y.providerData,fe),Gt=!!y.isAnonymous&&!(y.email&&H.passwordHash||Fe?.length),Sn={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Fe,metadata:new Dt(H.createdAt,H.lastLoginAt),isAnonymous:Gt};Object.assign(y,Sn)})).apply(this,arguments)}function Hn(){return(Hn=(0,_.Z)(function*(y){const d=(0,Y.m9)(y);yield jt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function qr(y){return y.map(d=>{var{providerId:f}=d,T=(0,ae._T)(d,["providerId"]);return{providerId:f,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function Xr(){return(Xr=(0,_.Z)(function*(y,d){const f=yield yt(y,{},(0,_.Z)(function*(){const T=(0,Y.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:O,apiKey:H}=y.config,fe=qt(y,O,"/v1/token",`key=${H}`),Fe=yield y._getAdditionalHeaders();return Fe["Content-Type"]="application/x-www-form-urlencoded",ve.fetch()(fe,{method:"POST",headers:Fe,body:T})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}function B(){return(B=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v2/accounts:revokeToken",We(y,d))})).apply(this,arguments)}class V{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){ie(d.idToken,"internal-error"),ie(typeof d.idToken<"u","internal-error"),ie(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):cn(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}updateFromIdToken(d){ie(0!==d.length,"internal-error");const f=cn(d);this.updateTokensAndExpiration(d,null,f)}getToken(d,f=!1){var T=this;return(0,_.Z)(function*(){return f||!T.accessToken||T.isExpired?(ie(T.refreshToken,d,"user-token-expired"),T.refreshToken?(yield T.refresh(d,T.refreshToken),T.accessToken):null):T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var T=this;return(0,_.Z)(function*(){const{accessToken:O,refreshToken:H,expiresIn:fe}=yield function ur(y,d){return Xr.apply(this,arguments)}(d,f);T.updateTokensAndExpiration(O,H,Number(fe))})()}updateTokensAndExpiration(d,f,T){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(d,f){const{refreshToken:T,accessToken:O,expirationTime:H}=f,fe=new V;return T&&(ie("string"==typeof T,"internal-error",{appName:d}),fe.refreshToken=T),O&&(ie("string"==typeof O,"internal-error",{appName:d}),fe.accessToken=O),H&&(ie("number"==typeof H,"internal-error",{appName:d}),fe.expirationTime=H),fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new V,this.toJSON())}_performRefresh(){return ut("not implemented")}}function q(y,d){ie("string"==typeof y||typeof y>"u","internal-error",{appName:d})}class J{constructor(d){var{uid:f,auth:T,stsTokenManager:O}=d,H=(0,ae._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new te(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=T,this.stsTokenManager=O,this.accessToken=O.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.providerData=H.providerData?[...H.providerData]:[],this.metadata=new Dt(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,_.Z)(function*(){const T=yield hr(f,f.stsTokenManager.getToken(f.auth,d));return ie(T,f.auth,"internal-error"),f.accessToken!==T&&(f.accessToken=T,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),T})()}getIdTokenResult(d){return function Tr(y){return Gr.apply(this,arguments)}(this,d)}reload(){return function on(y){return Hn.apply(this,arguments)}(this)}_assign(d){this!==d&&(ie(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){const f=new J(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(d){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var T=this;return(0,_.Z)(function*(){let O=!1;d.idToken&&d.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(d),O=!0),f&&(yield jt(T)),yield T.auth._persistUserIfCurrent(T),O&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var d=this;return(0,_.Z)(function*(){if((0,G._isFirebaseServerApp)(d.auth.app))return Promise.reject(Be(d.auth));const f=yield d.getIdToken();return yield hr(d,function it(y,d){return Ut.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var T,O,H,fe,Fe,rt,Nt,Gt;const Sn=null!==(T=f.displayName)&&void 0!==T?T:void 0,ys=null!==(O=f.email)&&void 0!==O?O:void 0,aa=null!==(H=f.phoneNumber)&&void 0!==H?H:void 0,cl=null!==(fe=f.photoURL)&&void 0!==fe?fe:void 0,ll=null!==(Fe=f.tenantId)&&void 0!==Fe?Fe:void 0,Oh=null!==(rt=f._redirectEventId)&&void 0!==rt?rt:void 0,_c=null!==(Nt=f.createdAt)&&void 0!==Nt?Nt:void 0,Au=null!==(Gt=f.lastLoginAt)&&void 0!==Gt?Gt:void 0,{uid:Va,emailVerified:bd,isAnonymous:dl,providerData:Ua,stsTokenManager:Sd}=f;ie(Va&&Sd,d,"internal-error");const kh=V.fromJSON(this.name,Sd);ie("string"==typeof Va,d,"internal-error"),q(Sn,d.name),q(ys,d.name),ie("boolean"==typeof bd,d,"internal-error"),ie("boolean"==typeof dl,d,"internal-error"),q(aa,d.name),q(cl,d.name),q(ll,d.name),q(Oh,d.name),q(_c,d.name),q(Au,d.name);const ua=new J({uid:Va,auth:d,email:ys,emailVerified:bd,displayName:Sn,isAnonymous:dl,photoURL:cl,phoneNumber:aa,tenantId:ll,stsTokenManager:kh,createdAt:_c,lastLoginAt:Au});return Ua&&Array.isArray(Ua)&&(ua.providerData=Ua.map(Cu=>Object.assign({},Cu))),Oh&&(ua._redirectEventId=Oh),ua}static _fromIdTokenResponse(d,f,T=!1){return(0,_.Z)(function*(){const O=new V;O.updateFromServerResponse(f);const H=new J({uid:f.localId,auth:d,stsTokenManager:O,isAnonymous:T});return yield jt(H),H})()}static _fromGetAccountInfoResponse(d,f,T){return(0,_.Z)(function*(){const O=f.users[0];ie(void 0!==O.localId,"internal-error");const H=void 0!==O.providerUserInfo?qr(O.providerUserInfo):[],fe=!(O.email&&O.passwordHash||H?.length),Fe=new V;Fe.updateFromIdToken(T);const rt=new J({uid:O.localId,auth:d,stsTokenManager:Fe,isAnonymous:fe}),Nt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:H,metadata:new Dt(O.createdAt,O.lastLoginAt),isAnonymous:!(O.email&&O.passwordHash||H?.length)};return Object.assign(rt,Nt),rt})()}}const $e=new Map;function st(y){Pt(y instanceof Function,"Expected a class definition");let d=$e.get(y);return d?(Pt(d instanceof y,"Instance stored in cache mismatched with class"),d):(d=new y,$e.set(y,d),d)}const Xt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(f,T){var O=this;return(0,_.Z)(function*(){O.storage[f]=T})()}_get(f){var T=this;return(0,_.Z)(function*(){const O=T.storage[f];return void 0===O?null:O})()}_remove(f){var T=this;return(0,_.Z)(function*(){delete T.storage[f]})()}_addListener(f,T){}_removeListener(f,T){}}return y.type="NONE",y})();function kt(y,d,f){return`firebase:${y}:${d}:${f}`}class mn{constructor(d,f,T){this.persistence=d,this.auth=f,this.userKey=T;const{config:O,name:H}=this.auth;this.fullUserKey=kt(this.userKey,O.apiKey,H),this.fullPersistenceKey=kt("persistence",O.apiKey,H),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,_.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?J._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,_.Z)(function*(){if(f.persistence===d)return;const T=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,T?f.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,T="authUser"){return(0,_.Z)(function*(){if(!f.length)return new mn(st(Xt),d,T);const O=(yield Promise.all(f.map(function(){var Nt=(0,_.Z)(function*(Gt){if(yield Gt._isAvailable())return Gt});return function(Gt){return Nt.apply(this,arguments)}}()))).filter(Nt=>Nt);let H=O[0]||st(Xt);const fe=kt(T,d.config.apiKey,d.name);let Fe=null;for(const Nt of f)try{const Gt=yield Nt._get(fe);if(Gt){const Sn=J._fromJSON(d,Gt);Nt!==H&&(Fe=Sn),H=Nt;break}}catch{}const rt=O.filter(Nt=>Nt._shouldAllowMigration);return H._shouldAllowMigration&&rt.length?(H=rt[0],Fe&&(yield H._set(fe,Fe.toJSON())),yield Promise.all(f.map(function(){var Nt=(0,_.Z)(function*(Gt){if(Gt!==H)try{yield Gt._remove(fe)}catch{}});return function(Gt){return Nt.apply(this,arguments)}}())),new mn(H,d,T)):new mn(H,d,T)})()}}function en(y){const d=y.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(ji(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if(cr(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Es(d))return"Blackberry";if(wi(d))return"Webos";if(fr(d))return"Safari";if((d.includes("chrome/")||ai(d))&&!d.includes("edge/"))return"Chrome";if(Mr(d))return"Android";{const T=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function cr(y=(0,Y.z$)()){return/firefox\//i.test(y)}function fr(y=(0,Y.z$)()){const d=y.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function ai(y=(0,Y.z$)()){return/crios\//i.test(y)}function ji(y=(0,Y.z$)()){return/iemobile/i.test(y)}function Mr(y=(0,Y.z$)()){return/android/i.test(y)}function Es(y=(0,Y.z$)()){return/blackberry/i.test(y)}function wi(y=(0,Y.z$)()){return/webos/i.test(y)}function Dr(y=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function wn(y=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}function Ke(y=(0,Y.z$)()){return Dr(y)||Mr(y)||wi(y)||Es(y)||/windows phone/i.test(y)||ji(y)}function Ht(y,d=[]){let f;switch(y){case"Browser":f=en((0,Y.z$)());break;case"Worker":f=`${en((0,Y.z$)())}-${y}`;break;default:f=y}const T=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${G.SDK_VERSION}/${T}`}class Zt{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const T=H=>new Promise((fe,Fe)=>{try{fe(d(H))}catch(rt){Fe(rt)}});T.onAbort=f,this.queue.push(T);const O=this.queue.length-1;return()=>{this.queue[O]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,_.Z)(function*(){if(f.auth.currentUser===d)return;const T=[];try{for(const O of f.queue)yield O(d),O.onAbort&&T.push(O.onAbort)}catch(O){T.reverse();for(const H of T)try{H()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:O?.message})}})()}}function Xn(){return(Xn=(0,_.Z)(function*(y,d={}){return Ge(y,"GET","/v2/passwordPolicy",We(y,d))})).apply(this,arguments)}class ei{constructor(d){var f,T,O,H;const fe=d.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(f=fe.minPasswordLength)&&void 0!==f?f:6,fe.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=fe.maxPasswordLength),void 0!==fe.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=fe.containsLowercaseCharacter),void 0!==fe.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=fe.containsUppercaseCharacter),void 0!==fe.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=fe.containsNumericCharacter),void 0!==fe.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=fe.containsNonAlphanumericCharacter),this.enforcementState=d.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(O=null===(T=d.allowedNonAlphanumericCharacters)||void 0===T?void 0:T.join(""))&&void 0!==O?O:"",this.forceUpgradeOnSignin=null!==(H=d.forceUpgradeOnSignin)&&void 0!==H&&H,this.schemaVersion=d.schemaVersion}validatePassword(d){var f,T,O,H,fe,Fe;const rt={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(d,rt),this.validatePasswordCharacterOptions(d,rt),rt.isValid&&(rt.isValid=null===(f=rt.meetsMinPasswordLength)||void 0===f||f),rt.isValid&&(rt.isValid=null===(T=rt.meetsMaxPasswordLength)||void 0===T||T),rt.isValid&&(rt.isValid=null===(O=rt.containsLowercaseLetter)||void 0===O||O),rt.isValid&&(rt.isValid=null===(H=rt.containsUppercaseLetter)||void 0===H||H),rt.isValid&&(rt.isValid=null===(fe=rt.containsNumericCharacter)||void 0===fe||fe),rt.isValid&&(rt.isValid=null===(Fe=rt.containsNonAlphanumericCharacter)||void 0===Fe||Fe),rt}validatePasswordLengthOptions(d,f){const T=this.customStrengthOptions.minPasswordLength,O=this.customStrengthOptions.maxPasswordLength;T&&(f.meetsMinPasswordLength=d.length>=T),O&&(f.meetsMaxPasswordLength=d.length<=O)}validatePasswordCharacterOptions(d,f){let T;this.updatePasswordCharacterOptionsStatuses(f,!1,!1,!1,!1);for(let O=0;O<d.length;O++)T=d.charAt(O),this.updatePasswordCharacterOptionsStatuses(f,T>="a"&&T<="z",T>="A"&&T<="Z",T>="0"&&T<="9",this.allowedNonAlphanumericCharacters.includes(T))}updatePasswordCharacterOptionsStatuses(d,f,T,O,H){this.customStrengthOptions.containsLowercaseLetter&&(d.containsLowercaseLetter||(d.containsLowercaseLetter=f)),this.customStrengthOptions.containsUppercaseLetter&&(d.containsUppercaseLetter||(d.containsUppercaseLetter=T)),this.customStrengthOptions.containsNumericCharacter&&(d.containsNumericCharacter||(d.containsNumericCharacter=O)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(d.containsNonAlphanumericCharacter||(d.containsNonAlphanumericCharacter=H))}}class ns{constructor(d,f,T,O){this.app=d,this.heartbeatServiceProvider=f,this.appCheckServiceProvider=T,this.config=O,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ms(this),this.idTokenSubscription=new Ms(this),this.beforeStateQueue=new Zt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=O.sdkClientVersion}_initializeWithPersistence(d,f){var T=this;return f&&(this._popupRedirectResolver=st(f)),this._initializationPromise=this.queue((0,_.Z)(function*(){var O,H;if(!T._deleted&&(T.persistenceManager=yield mn.create(T,d),!T._deleted)){if(null!==(O=T._popupRedirectResolver)&&void 0!==O&&O._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(f),T.lastNotifiedUid=(null===(H=T.currentUser)||void 0===H?void 0:H.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,_.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUserFromIdToken(d){var f=this;return(0,_.Z)(function*(){try{const T=yield kn(f,{idToken:d}),O=yield J._fromGetAccountInfoResponse(f,T,d);yield f.directlySetCurrentUser(O)}catch(T){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",T),yield f.directlySetCurrentUser(null)}})()}initializeCurrentUser(d){var f=this;return(0,_.Z)(function*(){var T;if((0,G._isFirebaseServerApp)(f.app)){const Fe=f.app.settings.authIdToken;return Fe?new Promise(rt=>{setTimeout(()=>f.initializeCurrentUserFromIdToken(Fe).then(rt,rt))}):f.directlySetCurrentUser(null)}const O=yield f.assertedPersistence.getCurrentUser();let H=O,fe=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const Fe=null===(T=f.redirectUser)||void 0===T?void 0:T._redirectEventId,rt=H?._redirectEventId,Nt=yield f.tryRedirectSignIn(d);(!Fe||Fe===rt)&&Nt?.user&&(H=Nt.user,fe=!0)}if(!H)return f.directlySetCurrentUser(null);if(!H._redirectEventId){if(fe)try{yield f.beforeStateQueue.runMiddleware(H)}catch(Fe){H=O,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(Fe))}return H?f.reloadAndSetCurrentUserOrClear(H):f.directlySetCurrentUser(null)}return ie(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===H._redirectEventId?f.directlySetCurrentUser(H):f.reloadAndSetCurrentUserOrClear(H)})()}tryRedirectSignIn(d){var f=this;return(0,_.Z)(function*(){let T=null;try{T=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,_.Z)(function*(){try{yield jt(d)}catch(T){if("auth/network-request-failed"!==T?.code)return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var d=this;return(0,_.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,_.Z)(function*(){if((0,G._isFirebaseServerApp)(f.app))return Promise.reject(Be(f));const T=d?(0,Y.m9)(d):null;return T&&ie(T.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(T&&T._clone(f))})()}_updateCurrentUser(d,f=!1){var T=this;return(0,_.Z)(function*(){if(!T._deleted)return d&&ie(T.tenantId===d.tenantId,T,"tenant-id-mismatch"),f||(yield T.beforeStateQueue.runMiddleware(d)),T.queue((0,_.Z)(function*(){yield T.directlySetCurrentUser(d),T.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,_.Z)(function*(){return(0,G._isFirebaseServerApp)(d.app)?Promise.reject(Be(d)):(yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0))})()}setPersistence(d){var f=this;return(0,G._isFirebaseServerApp)(this.app)?Promise.reject(Be(this)):this.queue((0,_.Z)(function*(){yield f.assertedPersistence.setPersistence(st(d))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(d){var f=this;return(0,_.Z)(function*(){f._getPasswordPolicyInternal()||(yield f._updatePasswordPolicy());const T=f._getPasswordPolicyInternal();return T.schemaVersion!==f.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(f._errorFactory.create("unsupported-password-policy-schema-version",{})):T.validatePassword(d)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var d=this;return(0,_.Z)(function*(){const f=yield function fn(y){return Xn.apply(this,arguments)}(d),T=new ei(f);null===d.tenantId?d._projectPasswordPolicy=T:d._tenantPasswordPolicies[d.tenantId]=T})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new Y.LL("auth","Firebase",d())}onAuthStateChanged(d,f,T){return this.registerStateListener(this.authStateSubscription,d,f,T)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,T){return this.registerStateListener(this.idTokenSubscription,d,f,T)}authStateReady(){return new Promise((d,f)=>{if(this.currentUser)d();else{const T=this.onAuthStateChanged(()=>{T(),d()},f)}})}revokeAccessToken(d){var f=this;return(0,_.Z)(function*(){if(f.currentUser){const T=yield f.currentUser.getIdToken(),O={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:d,idToken:T};null!=f.tenantId&&(O.tenantId=f.tenantId),yield function W(y,d){return B.apply(this,arguments)}(f,O)}})()}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var T=this;return(0,_.Z)(function*(){const O=yield T.getOrInitRedirectPersistenceManager(f);return null===d?O.removeCurrentUser():O.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,_.Z)(function*(){if(!f.redirectPersistenceManager){const T=d&&st(d)||f._popupRedirectResolver;ie(T,f,"argument-error"),f.redirectPersistenceManager=yield mn.create(f,[st(T._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,_.Z)(function*(){var T,O;return f._isInitialized&&(yield f.queue((0,_.Z)(function*(){}))),(null===(T=f._currentUser)||void 0===T?void 0:T._redirectEventId)===d?f._currentUser:(null===(O=f.redirectUser)||void 0===O?void 0:O._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,_.Z)(function*(){if(d===f.currentUser)return f.queue((0,_.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,T,O){if(this._deleted)return()=>{};const H="function"==typeof f?f:f.next.bind(f);let fe=!1;const Fe=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(Fe,this,"internal-error"),Fe.then(()=>{fe||H(this.currentUser)}),"function"==typeof f){const rt=d.addObserver(f,T,O);return()=>{fe=!0,rt()}}{const rt=d.addObserver(f);return()=>{fe=!0,rt()}}}directlySetCurrentUser(d){var f=this;return(0,_.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=Ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,_.Z)(function*(){var f;const T={"X-Client-Version":d.clientVersion};d.app.options.appId&&(T["X-Firebase-gmpid"]=d.app.options.appId);const O=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();O&&(T["X-Firebase-Client"]=O);const H=yield d._getAppCheckToken();return H&&(T["X-Firebase-AppCheck"]=H),T})()}_getAppCheckToken(){var d=this;return(0,_.Z)(function*(){var f;const T=yield null===(f=d.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getToken();return T?.error&&function Ft(y,...d){et.logLevel<=le.in.WARN&&et.warn(`Auth (${G.SDK_VERSION}): ${y}`,...d)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function $n(y){return(0,Y.m9)(y)}class Ms{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,Y.ne)(f=>this.observer=f)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let rs={loadJS:()=>(0,_.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Is(y){return rs.loadJS(y)}function xs(y){return`__${y}${Math.floor(1e6*Math.random())}`}class fi{constructor(d){this.type="recaptcha-enterprise",this.auth=$n(d)}verify(d="verify",f=!1){var T=this;return(0,_.Z)(function*(){function H(){return H=(0,_.Z)(function*(Fe){if(!f){if(null==Fe.tenantId&&null!=Fe._agentRecaptchaConfig)return Fe._agentRecaptchaConfig.siteKey;if(null!=Fe.tenantId&&void 0!==Fe._tenantRecaptchaConfigs[Fe.tenantId])return Fe._tenantRecaptchaConfigs[Fe.tenantId].siteKey}return new Promise(function(){var rt=(0,_.Z)(function*(Nt,Gt){Wr(Fe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Sn=>{if(void 0!==Sn.recaptchaKey){const ys=new vt(Sn);return null==Fe.tenantId?Fe._agentRecaptchaConfig=ys:Fe._tenantRecaptchaConfigs[Fe.tenantId]=ys,Nt(ys.siteKey)}Gt(new Error("recaptcha Enterprise site key undefined"))}).catch(Sn=>{Gt(Sn)})});return function(Nt,Gt){return rt.apply(this,arguments)}}())}),H.apply(this,arguments)}function fe(Fe,rt,Nt){const Gt=window.grecaptcha;mt(Gt)?Gt.enterprise.ready(()=>{Gt.enterprise.execute(Fe,{action:d}).then(Sn=>{rt(Sn)}).catch(()=>{rt("NO_RECAPTCHA")})}):Nt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Fe,rt)=>{(function O(Fe){return H.apply(this,arguments)})(T.auth).then(Nt=>{if(!f&&mt(window.grecaptcha))fe(Nt,Fe,rt);else{if(typeof window>"u")return void rt(new Error("RecaptchaVerifier is only supported in browser"));let Gt=function vo(){return rs.recaptchaEnterpriseScript}();0!==Gt.length&&(Gt+=Nt),Is(Gt).then(()=>{fe(Nt,Fe,rt)}).catch(Sn=>{rt(Sn)})}}).catch(Nt=>{rt(Nt)})})})()}}function Nr(y,d,f){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,_.Z)(function*(y,d,f,T=!1){const O=new fi(y);let H;try{H=yield O.verify(f)}catch{H=yield O.verify(f,!0)}const fe=Object.assign({},d);return Object.assign(fe,T?{captchaResp:H}:{captchaResponse:H}),Object.assign(fe,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(fe,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),fe})).apply(this,arguments)}function is(y,d,f,T){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,_.Z)(function*(y,d,f,T){var O;if(null!==(O=y._getRecaptchaConfig())&&void 0!==O&&O.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const H=yield Nr(y,d,f,"getOobCode"===f);return T(y,H)}return T(y,d).catch(function(){var H=(0,_.Z)(function*(fe){if("auth/missing-recaptcha-token"===fe.code){console.log(`${f} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const Fe=yield Nr(y,d,f,"getOobCode"===f);return T(y,Fe)}return Promise.reject(fe)});return function(fe){return H.apply(this,arguments)}}())}),Ts.apply(this,arguments)}function iu(y,d,f){const T=$n(y);ie(T._canInitEmulator,T,"emulator-config-failed"),ie(/^https?:\/\//.test(d),T,"invalid-emulator-scheme");const O=!!f?.disableWarnings,H=$i(d),{host:fe,port:Fe}=function gr(y){const d=$i(y),f=/(\/\/)?([^?#/]+)/.exec(y.substr(d.length));if(!f)return{host:"",port:null};const T=f[2].split("@").pop()||"",O=/^(\[[^\]]+\])(:|$)/.exec(T);if(O){const H=O[1];return{host:H,port:zi(T.substr(H.length+1))}}{const[H,fe]=T.split(":");return{host:H,port:zi(fe)}}}(d);T.config.emulator={url:`${H}//${fe}${null===Fe?"":`:${Fe}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:fe,port:Fe,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:O})}),O||function Eo(){function y(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}function $i(y){const d=y.indexOf(":");return d<0?"":y.substr(0,d+1)}function zi(y){if(!y)return null;const d=Number(y);return isNaN(d)?null:d}class Hi{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return ut("not implemented")}_getIdTokenResponse(d){return ut("not implemented")}_linkToIdToken(d,f){return ut("not implemented")}_getReauthenticationResolver(d){return ut("not implemented")}}function Ds(y,d){return In.apply(this,arguments)}function In(){return(In=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:resetPassword",We(y,d))})).apply(this,arguments)}function wr(){return(wr=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ss(y,d){return rr.apply(this,arguments)}function rr(){return(rr=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:signUp",d)})).apply(this,arguments)}function Wi(){return(Wi=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:update",We(y,d))})).apply(this,arguments)}function pi(y,d){return yi.apply(this,arguments)}function yi(){return(yi=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithPassword",We(y,d))})).apply(this,arguments)}function ti(y,d){return er.apply(this,arguments)}function er(){return(er=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:sendOobCode",We(y,d))})).apply(this,arguments)}function Qt(){return(Qt=(0,_.Z)(function*(y,d){return ti(y,d)})).apply(this,arguments)}function Ln(y,d){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,_.Z)(function*(y,d){return ti(y,d)})).apply(this,arguments)}function Io(y,d){return Or.apply(this,arguments)}function Or(){return(Or=(0,_.Z)(function*(y,d){return ti(y,d)})).apply(this,arguments)}function Gn(){return(Gn=(0,_.Z)(function*(y,d){return ti(y,d)})).apply(this,arguments)}function Ki(){return(Ki=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithEmailLink",We(y,d))})).apply(this,arguments)}function Zi(){return(Zi=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithEmailLink",We(y,d))})).apply(this,arguments)}class Ns extends Hi{constructor(d,f,T,O=null){super("password",T),this._email=d,this._password=f,this._tenantId=O}static _fromEmailAndPassword(d,f){return new Ns(d,f,"password")}static _fromEmailAndCode(d,f,T=null){return new Ns(d,f,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,_.Z)(function*(){switch(f.signInMethod){case"password":return is(d,{returnSecureToken:!0,email:f._email,password:f._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",pi);case"emailLink":return function qi(y,d){return Ki.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:me(d,"internal-error")}})()}_linkToIdToken(d,f){var T=this;return(0,_.Z)(function*(){switch(T.signInMethod){case"password":return is(d,{idToken:f,returnSecureToken:!0,email:T._email,password:T._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ss);case"emailLink":return function tn(y,d){return Zi.apply(this,arguments)}(d,{idToken:f,email:T._email,oobCode:T._password});default:me(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Un(y,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithIdp",We(y,d))})).apply(this,arguments)}class ir extends Hi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new ir(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):me("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:O}=f,H=(0,ae._T)(f,["providerId","signInMethod"]);if(!T||!O)return null;const fe=new ir(T,O);return fe.idToken=H.idToken||void 0,fe.accessToken=H.accessToken||void 0,fe.secret=H.secret,fe.nonce=H.nonce,fe.pendingToken=H.pendingToken||null,fe}_getIdTokenResponse(d){return Un(d,this.buildRequest())}_linkToIdToken(d,f){const T=this.buildRequest();return T.idToken=f,Un(d,T)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Un(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,Y.xO)(f)}return d}}function ws(){return(ws=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:sendVerificationCode",We(y,d))})).apply(this,arguments)}function Ci(){return(Ci=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,d))})).apply(this,arguments)}function un(){return(un=(0,_.Z)(function*(y,d){const f=yield Vt(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,d));if(f.temporaryProof)throw yn(y,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const Fn={USER_NOT_FOUND:"user-not-found"};function $o(){return($o=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithPhoneNumber",We(y,Object.assign(Object.assign({},d),{operation:"REAUTH"})),Fn)})).apply(this,arguments)}class Yi extends Hi{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new Yi({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new Yi({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function Os(y,d){return Ci.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function Qi(y,d){return un.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ln(y,d){return $o.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:T,verificationCode:O}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:T,code:O}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:T,phoneNumber:O,temporaryProof:H}=d;return T||f||O||H?new Yi({verificationId:f,verificationCode:T,phoneNumber:O,temporaryProof:H}):null}}class ks{constructor(d){var f,T,O,H,fe,Fe;const rt=(0,Y.zd)((0,Y.pd)(d)),Nt=null!==(f=rt.apiKey)&&void 0!==f?f:null,Gt=null!==(T=rt.oobCode)&&void 0!==T?T:null,Sn=function To(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(O=rt.mode)&&void 0!==O?O:null);ie(Nt&&Gt&&Sn,"argument-error"),this.apiKey=Nt,this.operation=Sn,this.code=Gt,this.continueUrl=null!==(H=rt.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(fe=rt.languageCode)&&void 0!==fe?fe:null,this.tenantId=null!==(Fe=rt.tenantId)&&void 0!==Fe?Fe:null}static parseLink(d){const f=function bi(y){const d=(0,Y.zd)((0,Y.pd)(y)).link,f=d?(0,Y.zd)((0,Y.pd)(d)).deep_link_id:null,T=(0,Y.zd)((0,Y.pd)(y)).deep_link_id;return(T?(0,Y.zd)((0,Y.pd)(T)).link:null)||T||f||d||y}(d);try{return new ks(f)}catch{return null}}}let Ls=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(f,T){return Ns._fromEmailAndPassword(f,T)}static credentialWithLink(f,T){const O=ks.parseLink(T);return ie(O,"argument-error"),Ns._fromEmailAndCode(f,O.code,O.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class _r{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class zo extends _r{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Vr extends zo{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return ie("providerId"in f&&"signInMethod"in f,"argument-error"),ir._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return ie(d.idToken||d.accessToken,"argument-error"),ir._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Vr.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Vr.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:T,oauthTokenSecret:O,pendingToken:H,nonce:fe,providerId:Fe}=d;if(!T&&!O&&!f&&!H||!Fe)return null;try{return new Vr(Fe)._credential({idToken:f,accessToken:T,nonce:fe,pendingToken:H})}catch{return null}}}let sr=(()=>{class y extends zo{constructor(){super("facebook.com")}static credential(f){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),pa=(()=>{class y extends zo{constructor(){super("google.com"),this.addScope("profile")}static credential(f,T){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:T})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:T,oauthAccessToken:O}=f;if(!T&&!O)return null;try{return y.credential(T,O)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Si=(()=>{class y extends zo{constructor(){super("github.com")}static credential(f){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return y.credential(f.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Qr extends Hi{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return Un(d,this.buildRequest())}_linkToIdToken(d,f){const T=this.buildRequest();return T.idToken=f,Un(d,T)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,Un(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:T,signInMethod:O,pendingToken:H}=f;return T&&O&&H&&T===O?new Qr(T,H):null}static _create(d,f){return new Qr(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fs extends _r{constructor(d){ie(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Fs.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Fs.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=Qr.fromJSON(d);return ie(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:T}=d;if(!f||!T)return null;try{return Qr._create(T,f)}catch{return null}}}let os=(()=>{class y extends zo{constructor(){super("twitter.com")}static credential(f,T){return ir._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:T})}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:T,oauthTokenSecret:O}=f;if(!T||!O)return null;try{return y.credential(T,O)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ho(y,d){return Js.apply(this,arguments)}function Js(){return(Js=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signUp",We(y,d))})).apply(this,arguments)}class Ur{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,T,O=!1){return(0,_.Z)(function*(){const H=yield J._fromIdTokenResponse(d,T,O),fe=Xs(T);return new Ur({user:H,providerId:fe,_tokenResponse:T,operationType:f})})()}static _forOperation(d,f,T){return(0,_.Z)(function*(){yield d._updateTokensIfNecessary(T,!0);const O=Xs(T);return new Ur({user:d,providerId:O,_tokenResponse:T,operationType:f})})()}}function Xs(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Vc(y){return as.apply(this,arguments)}function as(){return(as=(0,_.Z)(function*(y){var d;if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const f=$n(y);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new Ur({user:f.currentUser,providerId:null,operationType:"signIn"});const T=yield Ho(f,{returnSecureToken:!0}),O=yield Ur._fromIdTokenResponse(f,"signIn",T,!0);return yield f._updateCurrentUser(O.user),O})).apply(this,arguments)}class Zn extends Y.ZR{constructor(d,f,T,O){var H;super(f.code,f.message),this.operationType=T,this.user=O,Object.setPrototypeOf(this,Zn.prototype),this.customData={appName:d.name,tenantId:null!==(H=d.tenantId)&&void 0!==H?H:void 0,_serverResponse:f.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(d,f,T,O){return new Zn(d,f,T,O)}}function us(y,d,f,T){return("reauthenticate"===d?f._getReauthenticationResolver(y):f._getIdTokenResponse(y)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?Zn._fromErrorAndOperation(y,H,d,T):H})}function Gu(y){return new Set(y.map(({providerId:d})=>d).filter(d=>!!d))}function qu(y,d){return eo.apply(this,arguments)}function eo(){return eo=(0,_.Z)(function*(y,d){const f=(0,Y.m9)(y);yield ma(!0,f,d);const{providerUserInfo:T}=yield function Kt(y,d){return Bt.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),O=Gu(T||[]);return f.providerData=f.providerData.filter(H=>O.has(H.providerId)),O.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),eo.apply(this,arguments)}function Yr(y,d){return ou.apply(this,arguments)}function ou(){return(ou=(0,_.Z)(function*(y,d,f=!1){const T=yield hr(y,d._linkToIdToken(y.auth,yield y.getIdToken()),f);return Ur._forOperation(y,"link",T)})).apply(this,arguments)}function ma(y,d,f){return _a.apply(this,arguments)}function _a(){return(_a=(0,_.Z)(function*(y,d,f){yield jt(d);const O=!1===y?"provider-already-linked":"no-such-provider";ie(Gu(d.providerData).has(f)===y,d.auth,O)})).apply(this,arguments)}function Do(y,d){return As.apply(this,arguments)}function As(){return(As=(0,_.Z)(function*(y,d,f=!1){const{auth:T}=y;if((0,G._isFirebaseServerApp)(T.app))return Promise.reject(Be(T));const O="reauthenticate";try{const H=yield hr(y,us(T,O,d,y),f);ie(H.idToken,T,"internal-error");const fe=Pr(H.idToken);ie(fe,T,"internal-error");const{sub:Fe}=fe;return ie(y.uid===Fe,T,"user-mismatch"),Ur._forOperation(y,O,H)}catch(H){throw"auth/user-not-found"===H?.code&&me(T,"user-mismatch"),H}})).apply(this,arguments)}function Wo(y,d){return gi.apply(this,arguments)}function gi(){return(gi=(0,_.Z)(function*(y,d,f=!1){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T="signIn",O=yield us(y,T,d),H=yield Ur._fromIdTokenResponse(y,T,O);return f||(yield y._updateCurrentUser(H.user)),H})).apply(this,arguments)}function Vs(y,d){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,_.Z)(function*(y,d){return Wo($n(y),d)})).apply(this,arguments)}function vi(y,d){return to.apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(y,d){const f=(0,Y.m9)(y);return yield ma(!1,f,d.providerId),Yr(f,d)})).apply(this,arguments)}function Cs(y,d){return jr.apply(this,arguments)}function jr(){return(jr=(0,_.Z)(function*(y,d){return Do((0,Y.m9)(y),d)})).apply(this,arguments)}function Jr(){return(Jr=(0,_.Z)(function*(y,d){return Vt(y,"POST","/v1/accounts:signInWithCustomToken",We(y,d))})).apply(this,arguments)}function wo(y,d){return Ao.apply(this,arguments)}function Ao(){return Ao=(0,_.Z)(function*(y,d){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const f=$n(y),T=yield function $r(y,d){return Jr.apply(this,arguments)}(f,{token:d,returnSecureToken:!0}),O=yield Ur._fromIdTokenResponse(f,"signIn",T);return yield f._updateCurrentUser(O.user),O}),Ao.apply(this,arguments)}class ni{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?cs._fromServerResponse(d,f):"totpInfo"in f?ls._fromServerResponse(d,f):me(d,"internal-error")}}class cs extends ni{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new cs(f)}}class ls extends ni{constructor(d){super("totp",d)}static _fromServerResponse(d,f){return new ls(f)}}function ds(y,d,f){var T;ie((null===(T=f.url)||void 0===T?void 0:T.length)>0,y,"invalid-continue-uri"),ie(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(ie(f.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(ie(f.android.packageName.length>0,y,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function Co(y){return an.apply(this,arguments)}function an(){return(an=(0,_.Z)(function*(y){const d=$n(y);d._getPasswordPolicyInternal()&&(yield d._updatePasswordPolicy())})).apply(this,arguments)}function Ku(y,d,f){return bo.apply(this,arguments)}function bo(){return(bo=(0,_.Z)(function*(y,d,f){const T=$n(y),O={requestType:"PASSWORD_RESET",email:d,clientType:"CLIENT_TYPE_WEB"};f&&ds(T,O,f),yield is(T,O,"getOobCode",Ln)})).apply(this,arguments)}function Go(y,d,f){return no.apply(this,arguments)}function no(){return no=(0,_.Z)(function*(y,d,f){yield Ds((0,Y.m9)(y),{oobCode:d,newPassword:f}).catch(function(){var T=(0,_.Z)(function*(O){throw"auth/password-does-not-meet-requirements"===O.code&&Co(y),O});return function(O){return T.apply(this,arguments)}}())}),no.apply(this,arguments)}function bs(y,d){return Ri.apply(this,arguments)}function Ri(){return Ri=(0,_.Z)(function*(y,d){yield function _i(y,d){return Wi.apply(this,arguments)}((0,Y.m9)(y),{oobCode:d})}),Ri.apply(this,arguments)}function ya(y,d){return au.apply(this,arguments)}function au(){return(au=(0,_.Z)(function*(y,d){const f=(0,Y.m9)(y),T=yield Ds(f,{oobCode:d}),O=T.requestType;switch(ie(O,f,"internal-error"),O){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ie(T.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ie(T.mfaInfo,f,"internal-error");default:ie(T.email,f,"internal-error")}let H=null;return T.mfaInfo&&(H=ni._fromServerResponse($n(f),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:H},operation:O}})).apply(this,arguments)}function Uc(y,d){return ro.apply(this,arguments)}function ro(){return(ro=(0,_.Z)(function*(y,d){const{data:f}=yield ya((0,Y.m9)(y),d);return f.email})).apply(this,arguments)}function hs(y,d,f){return va.apply(this,arguments)}function va(){return(va=(0,_.Z)(function*(y,d,f){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T=$n(y),fe=yield is(T,{returnSecureToken:!0,email:d,password:f,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ho).catch(rt=>{throw"auth/password-does-not-meet-requirements"===rt.code&&Co(y),rt}),Fe=yield Ur._fromIdTokenResponse(T,"signIn",fe);return yield T._updateCurrentUser(Fe.user),Fe})).apply(this,arguments)}function So(y,d,f){return(0,G._isFirebaseServerApp)(y.app)?Promise.reject(Be(y)):Vs((0,Y.m9)(y),Ls.credential(d,f)).catch(function(){var T=(0,_.Z)(function*(O){throw"auth/password-does-not-meet-requirements"===O.code&&Co(y),O});return function(O){return T.apply(this,arguments)}}())}function uu(y,d,f){return fs.apply(this,arguments)}function fs(){return(fs=(0,_.Z)(function*(y,d,f){const T=$n(y),O={requestType:"EMAIL_SIGNIN",email:d,clientType:"CLIENT_TYPE_WEB"};(function H(fe,Fe){ie(Fe.handleCodeInApp,T,"argument-error"),Fe&&ds(T,fe,Fe)})(O,f),yield is(T,O,"getOobCode",Io)})).apply(this,arguments)}function Zu(y,d){const f=ks.parseLink(d);return"EMAIL_SIGNIN"===f?.operation}function Ea(y,d,f){return io.apply(this,arguments)}function io(){return(io=(0,_.Z)(function*(y,d,f){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T=(0,Y.m9)(y),O=Ls.credentialWithLink(d,f||ar());return ie(O._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Vs(T,O)})).apply(this,arguments)}function Ia(){return(Ia=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:createAuthUri",We(y,d))})).apply(this,arguments)}function D(y,d){return U.apply(this,arguments)}function U(){return U=(0,_.Z)(function*(y,d){const T={identifier:d,continueUri:gt()?ar():"http://localhost"},{signinMethods:O}=yield function cu(y,d){return Ia.apply(this,arguments)}((0,Y.m9)(y),T);return O||[]}),U.apply(this,arguments)}function P(y,d){return F.apply(this,arguments)}function F(){return F=(0,_.Z)(function*(y,d){const f=(0,Y.m9)(y),O={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};d&&ds(f.auth,O,d);const{email:H}=yield function bt(y,d){return Qt.apply(this,arguments)}(f.auth,O);H!==y.email&&(yield y.reload())}),F.apply(this,arguments)}function se(y,d,f){return Le.apply(this,arguments)}function Le(){return Le=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:d};f&&ds(T.auth,H,f);const{email:fe}=yield function Gi(y,d){return Gn.apply(this,arguments)}(T.auth,H);fe!==y.email&&(yield y.reload())}),Le.apply(this,arguments)}function Lt(){return(Lt=(0,_.Z)(function*(y,d){return Ge(y,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Mn(y,d){return pn.apply(this,arguments)}function pn(){return pn=(0,_.Z)(function*(y,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const T=(0,Y.m9)(y),H={idToken:yield T.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},fe=yield hr(T,function Xe(y,d){return Lt.apply(this,arguments)}(T.auth,H));T.displayName=fe.displayName||null,T.photoURL=fe.photoUrl||null;const Fe=T.providerData.find(({providerId:rt})=>"password"===rt);Fe&&(Fe.displayName=T.displayName,Fe.photoURL=T.photoURL),yield T._updateTokensIfNecessary(fe)}),pn.apply(this,arguments)}function Vn(y,d){const f=(0,Y.m9)(y);return(0,G._isFirebaseServerApp)(f.auth.app)?Promise.reject(Be(f.auth)):yr(f,d,null)}function gn(y,d){return yr((0,Y.m9)(y),null,d)}function yr(y,d,f){return xn.apply(this,arguments)}function xn(){return xn=(0,_.Z)(function*(y,d,f){const{auth:T}=y,H={idToken:yield y.getIdToken(),returnSecureToken:!0};d&&(H.email=d),f&&(H.password=f);const fe=yield hr(y,function nr(y,d){return wr.apply(this,arguments)}(T,H));yield y._updateTokensIfNecessary(fe,!0)}),xn.apply(this,arguments)}class Kr{constructor(d,f,T={}){this.isNewUser=d,this.providerId=f,this.profile=T}}class ui extends Kr{constructor(d,f,T,O){super(d,f,T),this.username=O}}class Ss extends Kr{constructor(d,f){super(d,"facebook.com",f)}}class ci extends ui{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Us extends Kr{constructor(d,f){super(d,"google.com",f)}}class bn extends ui{constructor(d,f,T){super(d,"twitter.com",f,T)}}function dn(y){const{user:d,_tokenResponse:f}=y;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Ar(y){var d,f;if(!y)return null;const{providerId:T}=y,O=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},H=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!T&&y?.idToken){const fe=null===(f=null===(d=Pr(y.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(fe)return new Kr(H,"anonymous"!==fe&&"custom"!==fe?fe:null)}if(!T)return null;switch(T){case"facebook.com":return new Ss(H,O);case"github.com":return new ci(H,O);case"google.com":return new Us(H,O);case"twitter.com":return new bn(H,O,y.screenName||null);case"custom":case"anonymous":return new Kr(H,null);default:return new Kr(H,T,O)}}(f)}class js{constructor(d,f,T){this.type=d,this.credential=f,this.user=T}static _fromIdtoken(d,f){return new js("enroll",d,f)}static _fromMfaPendingCredential(d){return new js("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,T;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return js._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(T=d.multiFactorSession)&&void 0!==T&&T.idToken)return js._fromIdtoken(d.multiFactorSession.idToken)}return null}}class wa{constructor(d,f,T){this.session=d,this.hints=f,this.signInResolver=T}static _fromError(d,f){const T=$n(d),O=f.customData._serverResponse,H=(O.mfaInfo||[]).map(Fe=>ni._fromServerResponse(T,Fe));ie(O.mfaPendingCredential,T,"internal-error");const fe=js._fromMfaPendingCredential(O.mfaPendingCredential);return new wa(fe,H,function(){var Fe=(0,_.Z)(function*(rt){const Nt=yield rt._process(T,fe);delete O.mfaInfo,delete O.mfaPendingCredential;const Gt=Object.assign(Object.assign({},O),{idToken:Nt.idToken,refreshToken:Nt.refreshToken});switch(f.operationType){case"signIn":const Sn=yield Ur._fromIdTokenResponse(T,f.operationType,Gt);return yield T._updateCurrentUser(Sn.user),Sn;case"reauthenticate":return ie(f.user,T,"internal-error"),Ur._forOperation(f.user,f.operationType,Gt);default:me(T,"internal-error")}});return function(rt){return Fe.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,_.Z)(function*(){return f.signInResolver(d)})()}}function sd(y,d){var f;const T=(0,Y.m9)(y),O=d;return ie(d.customData.operationType,T,"argument-error"),ie(null===(f=O.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,T,"argument-error"),wa._fromError(T,O)}class Yu{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(T=>ni._fromServerResponse(d.auth,T)))})}static _fromUser(d){return new Yu(d)}getSession(){var d=this;return(0,_.Z)(function*(){return js._fromIdtoken(yield d.user.getIdToken(),d.user)})()}enroll(d,f){var T=this;return(0,_.Z)(function*(){const O=d,H=yield T.getSession(),fe=yield hr(T.user,O._process(T.user.auth,H,f));return yield T.user._updateTokensIfNecessary(fe),T.user.reload()})()}unenroll(d){var f=this;return(0,_.Z)(function*(){const T="string"==typeof d?d:d.uid,O=yield f.user.getIdToken();try{const H=yield hr(f.user,function od(y,d){return Ge(y,"POST","/v2/accounts/mfaEnrollment:withdraw",We(y,d))}(f.user.auth,{idToken:O,mfaEnrollmentId:T}));f.enrolledFactors=f.enrolledFactors.filter(({uid:fe})=>fe!==T),yield f.user._updateTokensIfNecessary(H),yield f.user.reload()}catch(H){throw H}})()}}const Pi=new WeakMap;function qo(y){const d=(0,Y.m9)(y);return Pi.has(d)||Pi.set(d,Yu._fromUser(d)),Pi.get(d)}const du="__sak";class Wc{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(du,"1"),this.storage.removeItem(du),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ko=(()=>{class y extends Wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,T)=>this.onStorageEvent(f,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cr(){const y=(0,Y.z$)();return fr(y)||Dr(y)}()&&function At(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ke(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const T of Object.keys(this.listeners)){const O=this.storage.getItem(T),H=this.localCache[T];O!==H&&f(T,H,O)}}onStorageEvent(f,T=!1){if(!f.key)return void this.forAllChangedKeys((Fe,rt,Nt)=>{this.notifyListeners(Fe,Nt)});const O=f.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Fe=this.storage.getItem(O);if(f.newValue!==Fe)null!==f.newValue?this.storage.setItem(O,f.newValue):this.storage.removeItem(O);else if(this.localCache[O]===f.newValue&&!T)return}const H=()=>{const Fe=this.storage.getItem(O);!T&&this.localCache[O]===Fe||this.notifyListeners(O,Fe)},fe=this.storage.getItem(O);!function De(){return(0,Y.w1)()&&10===document.documentMode}()||fe===f.newValue||f.newValue===f.oldValue?H():setTimeout(H,10)}notifyListeners(f,T){this.localCache[f]=T;const O=this.listeners[f];if(O)for(const H of Array.from(O))H(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,T,O)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:T,newValue:O}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,T){var O=()=>super._set,H=this;return(0,_.Z)(function*(){yield O().call(H,f,T),H.localCache[f]=JSON.stringify(T)})()}_get(f){var T=()=>super._get,O=this;return(0,_.Z)(function*(){const H=yield T().call(O,f);return O.localCache[f]=JSON.stringify(H),H})()}_remove(f){var T=()=>super._remove,O=this;return(0,_.Z)(function*(){yield T().call(O,f),delete O.localCache[f]})()}}return y.type="LOCAL",y})(),nt=(()=>{class y extends Wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,T){}_removeListener(f,T){}}return y.type="SESSION",y})();let Xu=(()=>{class y{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const T=this.receivers.find(H=>H.isListeningto(f));if(T)return T;const O=new y(f);return this.receivers.push(O),O}isListeningto(f){return this.eventTarget===f}handleEvent(f){var T=this;return(0,_.Z)(function*(){const O=f,{eventId:H,eventType:fe,data:Fe}=O.data,rt=T.handlersMap[fe];if(!rt?.size)return;O.ports[0].postMessage({status:"ack",eventId:H,eventType:fe});const Nt=Array.from(rt).map(function(){var Sn=(0,_.Z)(function*(ys){return ys(O.origin,Fe)});return function(ys){return Sn.apply(this,arguments)}}()),Gt=yield function Nn(y){return Promise.all(y.map(function(){var d=(0,_.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(T){return{fulfilled:!1,reason:T}}});return function(f){return d.apply(this,arguments)}}()))}(Nt);O.ports[0].postMessage({status:"done",eventId:H,eventType:fe,response:Gt})})()}_subscribe(f,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(T)}_unsubscribe(f,T){this.handlersMap[f]&&T&&this.handlersMap[f].delete(T),(!T||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Aa(y="",d=10){let f="";for(let T=0;T<d;T++)f+=Math.floor(10*Math.random());return y+f}class ri{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,T=50){var O=this;return(0,_.Z)(function*(){const H=typeof MessageChannel<"u"?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let fe,Fe;return new Promise((rt,Nt)=>{const Gt=Aa("",20);H.port1.start();const Sn=setTimeout(()=>{Nt(new Error("unsupported_event"))},T);Fe={messageChannel:H,onMessage(ys){const aa=ys;if(aa.data.eventId===Gt)switch(aa.data.status){case"ack":clearTimeout(Sn),fe=setTimeout(()=>{Nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(fe),rt(aa.data.response);break;default:clearTimeout(Sn),clearTimeout(fe),Nt(new Error("invalid_response"))}}},O.handlers.add(Fe),H.port1.addEventListener("message",Fe.onMessage),O.target.postMessage({eventType:d,eventId:Gt,data:f},[H.port2])}).finally(()=>{Fe&&O.removeMessageHandler(Fe)})})()}}function Br(){return window}function gs(){return typeof Br().WorkerGlobalScope<"u"&&"function"==typeof Br().importScripts}function Po(){return(Po=(0,_.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zo="firebaseLocalStorageDb",Mi="firebaseLocalStorage",ec="fbase_key";class ms{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function xi(y,d){return y.transaction([Mi],d?"readwrite":"readonly").objectStore(Mi)}function tc(){const y=indexedDB.open(Zo,1);return new Promise((d,f)=>{y.addEventListener("error",()=>{f(y.error)}),y.addEventListener("upgradeneeded",()=>{const T=y.result;try{T.createObjectStore(Mi,{keyPath:ec})}catch(O){f(O)}}),y.addEventListener("success",(0,_.Z)(function*(){const T=y.result;T.objectStoreNames.contains(Mi)?d(T):(T.close(),yield function cd(){const y=indexedDB.deleteDatabase(Zo);return new ms(y).toPromise()}(),d(yield tc()))}))})}function ao(y,d,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(y,d,f){const T=xi(y,!0).put({[ec]:d,value:f});return new ms(T).toPromise()})).apply(this,arguments)}function pu(){return(pu=(0,_.Z)(function*(y,d){const f=xi(y,!1).get(d),T=yield new ms(f).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function rc(y,d){const f=xi(y,!0).delete(d);return new ms(f).toPromise()}const C=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,_.Z)(function*(){return f.db||(f.db=yield tc()),f.db})()}_withRetries(f){var T=this;return(0,_.Z)(function*(){let O=0;for(;;)try{const H=yield T._openDb();return yield f(H)}catch(H){if(O++>3)throw H;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,_.Z)(function*(){return gs()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,_.Z)(function*(){f.receiver=Xu._getInstance(function ud(){return gs()?self:null}()),f.receiver._subscribe("keyChanged",function(){var T=(0,_.Z)(function*(O,H){return{keyProcessed:(yield f._poll()).includes(H.key)}});return function(O,H){return T.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var T=(0,_.Z)(function*(O,H){return["keyChanged"]});return function(O,H){return T.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,_.Z)(function*(){var T,O;if(f.activeServiceWorker=yield function oo(){return Po.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new ri(f.activeServiceWorker);const H=yield f.sender._send("ping",{},800);H&&null!==(T=H[0])&&void 0!==T&&T.fulfilled&&null!==(O=H[0])&&void 0!==O&&O.value.includes("keyChanged")&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var T=this;return(0,_.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function ad(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:f},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const f=yield tc();return yield ao(f,du,"1"),yield rc(f,du),!0}catch{}return!1})()}_withPendingWrite(f){var T=this;return(0,_.Z)(function*(){T.pendingWrites++;try{yield f()}finally{T.pendingWrites--}})()}_set(f,T){var O=this;return(0,_.Z)(function*(){return O._withPendingWrite((0,_.Z)(function*(){return yield O._withRetries(H=>ao(H,f,T)),O.localCache[f]=T,O.notifyServiceWorker(f)}))})()}_get(f){var T=this;return(0,_.Z)(function*(){const O=yield T._withRetries(H=>function nc(y,d){return pu.apply(this,arguments)}(H,f));return T.localCache[f]=O,O})()}_remove(f){var T=this;return(0,_.Z)(function*(){return T._withPendingWrite((0,_.Z)(function*(){return yield T._withRetries(O=>rc(O,f)),delete T.localCache[f],T.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,_.Z)(function*(){const T=yield f._withRetries(fe=>{const Fe=xi(fe,!1).getAll();return new ms(Fe).toPromise()});if(!T)return[];if(0!==f.pendingWrites)return[];const O=[],H=new Set;if(0!==T.length)for(const{fbase_key:fe,value:Fe}of T)H.add(fe),JSON.stringify(f.localCache[fe])!==JSON.stringify(Fe)&&(f.notifyListeners(fe,Fe),O.push(fe));for(const fe of Object.keys(f.localCache))f.localCache[fe]&&!H.has(fe)&&(f.notifyListeners(fe,null),O.push(fe));return O})()}notifyListeners(f,T){this.localCache[f]=T;const O=this.listeners[f];if(O)for(const H of Array.from(O))H(T)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(T)}_removeListener(f,T){this.listeners[f]&&(this.listeners[f].delete(T),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})(),St=1e12;class hn{constructor(d){this.auth=d,this.counter=St,this._widgets=new Map}render(d,f){const T=this.counter;return this._widgets.set(T,new _n(d,this.auth.name,f||{})),this.counter++,T}reset(d){var f;const T=d||St;null===(f=this._widgets.get(T))||void 0===f||f.delete(),this._widgets.delete(T)}getResponse(d){var f;return(null===(f=this._widgets.get(d||St))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,_.Z)(function*(){var T;return null===(T=f._widgets.get(d||St))||void 0===T||T.execute(),""})()}}class _n{constructor(d,f,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const O="string"==typeof d?document.getElementById(d):d;ie(O,"argument-error",{appName:f}),this.container=O,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tn(y){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<y;T++)d.push(f.charAt(Math.floor(62*Math.random())));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Bn=xs("rcb"),ba=new he(3e4,6e4);class Qo{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=Br().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return ie(function gu(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(f),d,"argument-error"),this.shouldResolveImmediately(f)&&Cn(Br().grecaptcha)?Promise.resolve(Br().grecaptcha):new Promise((T,O)=>{const H=Br().setTimeout(()=>{O(Ne(d,"network-request-failed"))},ba.get());Br()[Bn]=()=>{Br().clearTimeout(H),delete Br()[Bn];const Fe=Br().grecaptcha;if(!Fe||!Cn(Fe))return void O(Ne(d,"internal-error"));const rt=Fe.render;Fe.render=(Nt,Gt)=>{const Sn=rt(Nt,Gt);return this.counter++,Sn},this.hostLanguage=f,T(Fe)},Is(`${function Lr(){return rs.recaptchaV2Script}()}?${(0,Y.xO)({onload:Bn,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(H),O(Ne(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=Br().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class zs{load(d){return(0,_.Z)(function*(){return new hn(d)})()}clearedOneInstance(){}}const xo="recaptcha",wh={theme:"light",type:"image"};class uo{constructor(d,f,T=Object.assign({},wh)){this.parameters=T,this.type=xo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(d),this.isInvisible="invisible"===this.parameters.size,ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const O="string"==typeof f?document.getElementById(f):f;ie(O,this.auth,"argument-error"),this.container=O,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new zs:new Qo,this.validateStartingState()}verify(){var d=this;return(0,_.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),T=d.getAssertedRecaptcha();return T.getResponse(f)||new Promise(H=>{const fe=Fe=>{Fe&&(d.tokenChangeListeners.delete(fe),H(Fe))};d.tokenChangeListeners.add(fe),d.isInvisible&&T.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){ie(!this.parameters.sitekey,this.auth,"argument-error"),ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(T=>T(f)),"function"==typeof d)d(f);else if("string"==typeof d){const T=Br()[d];"function"==typeof T&&T(f)}}}assertNotDestroyed(){ie(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,_.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const T=document.createElement("div");f.appendChild(T),f=T}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,_.Z)(function*(){ie(gt()&&!gs(),d.auth,"internal-error"),yield function Yo(){let y=null;return new Promise(d=>{"complete"!==document.readyState?(y=()=>d(),window.addEventListener("load",y)):d()}).catch(d=>{throw y&&window.removeEventListener("load",y),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Hr(y){return $t.apply(this,arguments)}(d.auth);ie(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gc{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=Yi._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function qc(y,d,f){return mu.apply(this,arguments)}function mu(){return(mu=(0,_.Z)(function*(y,d,f){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T=$n(y),O=yield ic(T,d,(0,Y.m9)(f));return new Gc(O,H=>Vs(T,H))})).apply(this,arguments)}function Kc(y,d,f){return No.apply(this,arguments)}function No(){return(No=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);yield ma(!1,T,"phone");const O=yield ic(T.auth,d,(0,Y.m9)(f));return new Gc(O,H=>vi(T,H))})).apply(this,arguments)}function Jo(y,d,f){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);if((0,G._isFirebaseServerApp)(T.auth.app))return Promise.reject(Be(T.auth));const O=yield ic(T.auth,d,(0,Y.m9)(f));return new Gc(O,H=>Cs(T,H))})).apply(this,arguments)}function ic(y,d,f){return Oo.apply(this,arguments)}function Oo(){return Oo=(0,_.Z)(function*(y,d,f){var T;const O=yield f.verify();try{let H;if(ie("string"==typeof O,y,"argument-error"),ie(f.type===xo,y,"argument-error"),H="string"==typeof d?{phoneNumber:d}:d,"session"in H){const fe=H.session;if("phoneNumber"in H)return ie("enroll"===fe.type,y,"internal-error"),(yield function zc(y,d){return Ge(y,"POST","/v2/accounts/mfaEnrollment:start",We(y,d))}(y,{idToken:fe.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:O}})).phoneSessionInfo.sessionInfo;{ie("signin"===fe.type,y,"internal-error");const Fe=(null===(T=H.multiFactorHint)||void 0===T?void 0:T.uid)||H.multiFactorUid;return ie(Fe,y,"missing-multi-factor-info"),(yield function M(y,d){return Ge(y,"POST","/v2/accounts/mfaSignIn:start",We(y,d))}(y,{mfaPendingCredential:fe.credential,mfaEnrollmentId:Fe,phoneSignInInfo:{recaptchaToken:O}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:fe}=yield function Ai(y,d){return ws.apply(this,arguments)}(y,{phoneNumber:H.phoneNumber,recaptchaToken:O});return fe}}finally{f._reset()}}),Oo.apply(this,arguments)}function _u(y,d){return ld.apply(this,arguments)}function ld(){return(ld=(0,_.Z)(function*(y,d){const f=(0,Y.m9)(y);if((0,G._isFirebaseServerApp)(f.auth.app))return Promise.reject(Be(f.auth));yield Yr(f,d)})).apply(this,arguments)}let Ah=(()=>{class y{constructor(f){this.providerId=y.PROVIDER_ID,this.auth=$n(f)}verifyPhoneNumber(f,T){return ic(this.auth,f,(0,Y.m9)(T))}static credential(f,T){return Yi._fromVerification(f,T)}static credentialFromResult(f){return y.credentialFromTaggedObject(f)}static credentialFromError(f){return y.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:T,temporaryProof:O}=f;return T&&O?Yi._fromTokenResponse(T,O):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ws(y,d){return d?st(d):(ie(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class dd extends Hi{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Un(d,this._buildIdpRequest())}_linkToIdToken(d,f){return Un(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return Un(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function hd(y){return Wo(y.auth,new dd(y),y.bypassAuthState)}function fd(y){const{auth:d,user:f}=y;return ie(f,d,"internal-error"),Do(f,new dd(y),y.bypassAuthState)}function ip(y){return sc.apply(this,arguments)}function sc(){return(sc=(0,_.Z)(function*(y){const{auth:d,user:f}=y;return ie(f,d,"internal-error"),Yr(f,new dd(y),y.bypassAuthState)})).apply(this,arguments)}class Zc{constructor(d,f,T,O,H=!1){this.auth=d,this.resolver=T,this.user=O,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,_.Z)(function*(T,O){d.pendingPromise={resolve:T,reject:O};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(H){d.reject(H)}});return function(T,O){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,_.Z)(function*(){const{urlResponse:T,sessionId:O,postBody:H,tenantId:fe,error:Fe,type:rt}=d;if(Fe)return void f.reject(Fe);const Nt={auth:f.auth,requestUri:T,sessionId:O,tenantId:fe||void 0,postBody:H||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(rt)(Nt))}catch(Gt){f.reject(Gt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return hd;case"linkViaPopup":case"linkViaRedirect":return ip;case"reauthViaPopup":case"reauthViaRedirect":return fd;default:me(this.auth,"internal-error")}}resolve(d){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sa=new he(2e3,1e4);function Qc(y,d,f){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,_.Z)(function*(y,d,f){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Ne(y,"operation-not-supported-in-this-environment"));const T=$n(y);Qe(y,d,_r);const O=Ws(T,f);return new oc(T,"signInViaPopup",d,O).executeNotNull()})).apply(this,arguments)}function Yc(y,d,f){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);if((0,G._isFirebaseServerApp)(T.auth.app))return Promise.reject(Ne(T.auth,"operation-not-supported-in-this-environment"));Qe(T.auth,d,_r);const O=Ws(T.auth,f);return new oc(T.auth,"reauthViaPopup",d,O,T).executeNotNull()})).apply(this,arguments)}function Jc(y,d,f){return ko.apply(this,arguments)}function ko(){return(ko=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);Qe(T.auth,d,_r);const O=Ws(T.auth,f);return new oc(T.auth,"linkViaPopup",d,O,T).executeNotNull()})).apply(this,arguments)}let oc=(()=>{class y extends Zc{constructor(f,T,O,H,fe){super(f,T,H,fe),this.provider=O,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var f=this;return(0,_.Z)(function*(){const T=yield f.execute();return ie(T,f.auth,"internal-error"),T})()}onExecution(){var f=this;return(0,_.Z)(function*(){Pt(1===f.filter.length,"Popup operations only handle one event");const T=Aa();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],T),f.authWindow.associatedEvent=T,f.resolver._originValidation(f.auth).catch(O=>{f.reject(O)}),f.resolver._isIframeWebStorageSupported(f.auth,O=>{O||f.reject(Ne(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Ne(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const f=()=>{var T,O;this.pollId=null!==(O=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==O&&O.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ne(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Sa.get())};f()}}return y.currentPopupAction=null,y})();const Ch="pendingRedirect",dr=new Map;class bh extends Zc{constructor(d,f,T=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,T),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,_.Z)(function*(){let T=dr.get(f.auth._key());if(!T){try{const H=(yield function Pa(y,d){return Xo.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;T=()=>Promise.resolve(H)}catch(O){T=()=>Promise.reject(O)}dr.set(f.auth._key(),T)}return f.bypassAuthState||dr.set(f.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,T=this;return(0,_.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(T,d);if("unknown"!==d.type){if(d.eventId){const O=yield T.auth._redirectUserForId(d.eventId);if(O)return T.user=O,f().call(T,d);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Xo(){return(Xo=(0,_.Z)(function*(y,d){const f=gd(d),T=Lo(y);if(!(yield T._isAvailable()))return!1;const O="true"===(yield T._get(f));return yield T._remove(f),O})).apply(this,arguments)}function ac(y,d){return _s.apply(this,arguments)}function _s(){return(_s=(0,_.Z)(function*(y,d){return Lo(y)._set(gd(d),"true")})).apply(this,arguments)}function ea(){dr.clear()}function pd(y,d){dr.set(y._key(),d)}function Lo(y){return st(y._redirectPersistence)}function gd(y){return kt(Ch,y.config.apiKey,y.name)}function Ma(y,d,f){return function md(y,d,f){return co.apply(this,arguments)}(y,d,f)}function co(){return(co=(0,_.Z)(function*(y,d,f){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T=$n(y);Qe(y,d,_r),yield T._initializationPromise;const O=Ws(T,f);return yield ac(O,T),O._openRedirect(T,d,"signInViaRedirect")})).apply(this,arguments)}function uc(y,d,f){return function xa(y,d,f){return Xc.apply(this,arguments)}(y,d,f)}function Xc(){return(Xc=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);if(Qe(T.auth,d,_r),(0,G._isFirebaseServerApp)(T.auth.app))return Promise.reject(Be(T.auth));yield T.auth._initializationPromise;const O=Ws(T.auth,f);yield ac(O,T.auth);const H=yield tl(T);return O._openRedirect(T.auth,d,"reauthViaRedirect",H)})).apply(this,arguments)}function Sh(y,d,f){return function _d(y,d,f){return Na.apply(this,arguments)}(y,d,f)}function Na(){return(Na=(0,_.Z)(function*(y,d,f){const T=(0,Y.m9)(y);Qe(T.auth,d,_r),yield T.auth._initializationPromise;const O=Ws(T.auth,f);yield ma(!1,T,d.providerId),yield ac(O,T.auth);const H=yield tl(T);return O._openRedirect(T.auth,d,"linkViaRedirect",H)})).apply(this,arguments)}function el(y,d){return di.apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(y,d){return yield $n(y)._initializationPromise,yd(y,d,!1)})).apply(this,arguments)}function yd(y,d){return cc.apply(this,arguments)}function cc(){return(cc=(0,_.Z)(function*(y,d,f=!1){if((0,G._isFirebaseServerApp)(y.app))return Promise.reject(Be(y));const T=$n(y),O=Ws(T,d),fe=yield new bh(T,O,f).execute();return fe&&!f&&(delete fe.user._redirectEventId,yield T._persistUserIfCurrent(fe.user),yield T._setRedirectUser(null,d)),fe})).apply(this,arguments)}function tl(y){return nl.apply(this,arguments)}function nl(){return(nl=(0,_.Z)(function*(y){const d=Aa(`${y.uid}:::`);return y._redirectEventId=d,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),d})).apply(this,arguments)}class na{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(d,T)&&(f=!0,this.sendToConsumer(d,T),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function yu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ia(y);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var T;if(d.error&&!ia(d)){const O=(null===(T=d.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";f.onError(Ne(this.auth,O))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const T=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&T}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ra(d))}saveEventToCache(d){this.cachedEventUids.add(ra(d)),this.lastProcessedEventTime=Date.now()}}function ra(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(d=>d).join("-")}function ia({type:y,error:d}){return"unknown"===y&&"auth/no-auth-event"===d?.code}function rl(y){return lc.apply(this,arguments)}function lc(){return(lc=(0,_.Z)(function*(y,d={}){return Ge(y,"GET","/v1/projects",d)})).apply(this,arguments)}const vu=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Hg=/^https?/;function ii(){return(ii=(0,_.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:d}=yield rl(y);for(const f of d)try{if(Wg(f))return}catch{}me(y,"unauthorized-domain")})).apply(this,arguments)}function Wg(y){const d=ar(),{protocol:f,hostname:T}=new URL(d);if(y.startsWith("chrome-extension://")){const fe=new URL(y);return""===fe.hostname&&""===T?"chrome-extension:"===f&&y.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&fe.hostname===T}if(!Hg.test(f))return!1;if(vu.test(y))return T===y;const O=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+O+"|"+O+")$","i").test(T)}const Gg=new he(3e4,6e4);function sp(){const y=Br().___jsl;if(y?.H)for(const d of Object.keys(y.H))if(y.H[d].r=y.H[d].r||[],y.H[d].L=y.H[d].L||[],y.H[d].r=[...y.H[d].L],y.CP)for(let f=0;f<y.CP.length;f++)y.CP[f]=null}let dc=null;const il=new he(5e3,15e3),sl="__/auth/iframe",si="emulator/auth/iframe",Rh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Oa=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ed(y){const d=y.config;ie(d.authDomain,y,"auth-domain-config-required");const f=d.emulator?Z(d,si):`https://${y.config.authDomain}/${sl}`,T={apiKey:d.apiKey,appName:y.name,v:G.SDK_VERSION},O=Oa.get(y.config.apiHost);O&&(T.eid=O);const H=y._getFrameworks();return H.length&&(T.fw=H.join(",")),`${f}?${(0,Y.xO)(T).slice(1)}`}function qs(){return qs=(0,_.Z)(function*(y){const d=yield function Eu(y){return dc=dc||function qg(y){return new Promise((d,f)=>{var T,O,H;function fe(){sp(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{sp(),f(Ne(y,"network-request-failed"))},timeout:Gg.get()})}if(null!==(O=null===(T=Br().gapi)||void 0===T?void 0:T.iframes)&&void 0!==O&&O.Iframe)d(gapi.iframes.getContext());else{if(null===(H=Br().gapi)||void 0===H||!H.load){const Fe=xs("iframefcb");return Br()[Fe]=()=>{gapi.load?fe():f(Ne(y,"network-request-failed"))},Is(`${function xr(){return rs.gapiScript}()}?onload=${Fe}`).catch(rt=>f(rt))}fe()}}).catch(d=>{throw dc=null,d})}(y),dc}(y),f=Br().gapi;return ie(f,y,"internal-error"),d.open({where:document.body,url:Ed(y),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rh,dontclear:!0},T=>new Promise(function(){var O=(0,_.Z)(function*(H,fe){yield T.restyle({setHideOnLeave:!1});const Fe=Ne(y,"network-request-failed"),rt=Br().setTimeout(()=>{fe(Fe)},il.get());function Nt(){Br().clearTimeout(rt),H(T)}T.ping(Nt).then(Nt,()=>{fe(Fe)})});return function(H,fe){return O.apply(this,arguments)}}()))}),qs.apply(this,arguments)}const ol={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Id{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Td="__/auth/handler",ka="emulator/auth/handler",Zg=encodeURIComponent("fac");function fc(y,d,f,T,O,H){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,_.Z)(function*(y,d,f,T,O,H){ie(y.config.authDomain,y,"auth-domain-config-required"),ie(y.config.apiKey,y,"invalid-api-key");const fe={apiKey:y.config.apiKey,appName:y.name,authType:f,redirectUrl:T,v:G.SDK_VERSION,eventId:O};if(d instanceof _r){d.setDefaultLanguage(y.languageCode),fe.providerId=d.providerId||"",(0,Y.xb)(d.getCustomParameters())||(fe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Gt,Sn]of Object.entries(H||{}))fe[Gt]=Sn}if(d instanceof zo){const Gt=d.getScopes().filter(Sn=>""!==Sn);Gt.length>0&&(fe.scopes=Gt.join(","))}y.tenantId&&(fe.tid=y.tenantId);const Fe=fe;for(const Gt of Object.keys(Fe))void 0===Fe[Gt]&&delete Fe[Gt];const rt=yield y._getAppCheckToken(),Nt=rt?`#${Zg}=${encodeURIComponent(rt)}`:"";return`${function Tu({config:y}){return y.emulator?Z(y,ka):`https://${y.authDomain}/${Td}`}(y)}?${(0,Y.xO)(Fe).slice(1)}${Nt}`})).apply(this,arguments)}const sa="webStorageSupport",pc=class wd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nt,this._completeRedirectFn=yd,this._overrideRedirectResult=pd}_openPopup(d,f,T,O){var H=this;return(0,_.Z)(function*(){var fe;Pt(null===(fe=H.eventManagers[d._key()])||void 0===fe?void 0:fe.manager,"_initialize() not called before _openPopup()");const Fe=yield fc(d,f,T,ar(),O);return function op(y,d,f,T=500,O=600){const H=Math.max((window.screen.availHeight-O)/2,0).toString(),fe=Math.max((window.screen.availWidth-T)/2,0).toString();let Fe="";const rt=Object.assign(Object.assign({},ol),{width:T.toString(),height:O.toString(),top:H,left:fe}),Nt=(0,Y.z$)().toLowerCase();f&&(Fe=ai(Nt)?"_blank":f),cr(Nt)&&(d=d||"http://localhost",rt.scrollbars="yes");const Gt=Object.entries(rt).reduce((ys,[aa,cl])=>`${ys}${aa}=${cl},`,"");if(function Ue(y=(0,Y.z$)()){var d;return Dr(y)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Nt)&&"_self"!==Fe)return function Ni(y,d){const f=document.createElement("a");f.href=y,f.target=d;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(T)}(d||"",Fe),new Id(null);const Sn=window.open(d||"",Fe,Gt);ie(Sn,y,"popup-blocked");try{Sn.focus()}catch{}return new Id(Sn)}(d,Fe,Aa())})()}_openRedirect(d,f,T,O){var H=this;return(0,_.Z)(function*(){return yield H._originValidation(d),function Ca(y){Br().location.href=y}(yield fc(d,f,T,ar(),O)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:O,promise:H}=this.eventManagers[f];return O?Promise.resolve(O):(Pt(H,"If manager is not set, promise should be"),H)}const T=this.initAndGetManager(d);return this.eventManagers[f]={promise:T},T.catch(()=>{delete this.eventManagers[f]}),T}initAndGetManager(d){var f=this;return(0,_.Z)(function*(){const T=yield function Ii(y){return qs.apply(this,arguments)}(d),O=new na(d);return T.register("authEvent",H=>(ie(H?.authEvent,d,"invalid-auth-event"),{status:O.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:O},f.iframes[d._key()]=T,O})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(sa,{type:sa},O=>{var H;const fe=null===(H=O?.[0])||void 0===H?void 0:H[sa];void 0!==fe&&f(!!fe),me(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function vd(y){return ii.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return Ke()||fr()||Dr()}};class Mh{constructor(d){this.factorId=d}_process(d,f,T){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,T);case"signin":return this._finalizeSignIn(d,f.credential);default:return ut("unexpected MultiFactorSessionType")}}}class Du extends Mh{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Du(d)}_finalizeEnroll(d,f,T){return function Qu(y,d){return Ge(y,"POST","/v2/accounts/mfaEnrollment:finalize",We(y,d))}(d,{idToken:f,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function $(y,d){return Ge(y,"POST","/v2/accounts/mfaSignIn:finalize",We(y,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gc=(()=>{class y{constructor(){}static assertion(f){return Du._fromCredential(f)}}return y.FACTOR_ID="phone",y})();var Ad="@firebase/auth";class mc{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,_.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(T=>{d(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);f&&(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Cd=(0,Y.Pz)("authIdTokenMaxAge")||300;let Vo=null;const Fa=y=>function(){var d=(0,_.Z)(function*(f){const T=f&&(yield f.getIdTokenResult()),O=T&&((new Date).getTime()-Date.parse(T.issuedAtTime))/1e3;if(O&&O>Cd)return;const H=T?.token;Vo!==H&&(Vo=H,yield fetch(y,{method:H?"POST":"DELETE",headers:H?{Authorization:`Bearer ${H}`}:{}}))});return function(f){return d.apply(this,arguments)}}();function Nh(y=(0,G.getApp)()){const d=(0,G._getProvider)(y,"auth");if(d.isInitialized())return d.getImmediate();const f=function ru(y,d){const f=(0,G._getProvider)(y,"auth");if(f.isInitialized()){const O=f.getImmediate(),H=f.getOptions();if((0,Y.vZ)(H,d??{}))return O;me(O,"already-initialized")}return f.initialize({options:d})}(y,{popupRedirectResolver:pc,persistence:[C,Ko,nt]}),T=(0,Y.Pz)("authTokenSyncURL");if(T&&"boolean"==typeof isSecureContext&&isSecureContext){const H=new URL(T,location.origin);if(location.origin===H.origin){const fe=Fa(H.toString());(function jc(y,d,f){(0,Y.m9)(y).beforeAuthStateChanged(d,f)})(f,fe,()=>fe(f.currentUser)),function Ei(y,d,f,T){(0,Y.m9)(y).onIdTokenChanged(d,f,T)}(f,Fe=>fe(Fe))}}const O=(0,Y.q4)("auth");return O&&iu(f,`http://${O}`),f}(function nu(y){rs=y})({loadJS:y=>new Promise((d,f)=>{const T=document.createElement("script");T.setAttribute("src",y),T.onload=d,T.onerror=O=>{const H=Ne("internal-error");H.customData=O,f(H)},T.type="text/javascript",T.charset="UTF-8",function Yg(){var y,d;return null!==(d=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==d?d:document}().appendChild(T)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function wu(y){(0,G._registerComponent)(new ce.wA("auth",(d,{options:f})=>{const T=d.getProvider("app").getImmediate(),O=d.getProvider("heartbeat"),H=d.getProvider("app-check-internal"),{apiKey:fe,authDomain:Fe}=T.options;ie(fe&&!fe.includes(":"),"invalid-api-key",{appName:T.name});const rt={apiKey:fe,authDomain:Fe,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ht(y)},Nt=new ns(T,O,H,rt);return function Sr(y,d){const f=d?.persistence||[],T=(Array.isArray(f)?f:[f]).map(st);d?.errorMap&&y._updateErrorMap(d.errorMap),y._initializeWithPersistence(T,d?.popupRedirectResolver)}(Nt,f),Nt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,T)=>{d.getProvider("auth-internal").initialize()})),(0,G._registerComponent)(new ce.wA("auth-internal",d=>{const f=$n(d.getProvider("auth").getImmediate());return new mc(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)(Ad,"1.7.6",function La(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(y)),(0,G.registerVersion)(Ad,"1.7.6","esm2017")}("Browser")},5588:(Tt,Se,L)=>{L.d(Se,{u7:()=>ng,Jj:()=>Dc,IX:()=>dy,my:()=>oi,xU:()=>Oi,Lz:()=>xu,WA:()=>Z,F8:()=>Qp,$q:()=>Ol,W:()=>kl,EK:()=>mt,PU:()=>ag,l7:()=>nr,Ky:()=>it,Xb:()=>rn,Cf:()=>Rn,K9:()=>_t,Me:()=>ru,yq:()=>Pt,Wi:()=>Al,ET:()=>Ny,Ab:()=>zy,vr:()=>$y,Fc:()=>Sl,hJ:()=>cy,B$:()=>Wp,at:()=>Hp,oe:()=>Di,AK:()=>zm,TF:()=>my,JU:()=>Gp,ST:()=>hy,fH:()=>fy,Ix:()=>gy,Wu:()=>Lm,Lx:()=>km,qY:()=>br,GL:()=>Ll,QT:()=>ig,kl:()=>fE,Xk:()=>My,PL:()=>sg,UQ:()=>la,zN:()=>Vm,ad:()=>ca,nP:()=>Hy,b9:()=>Kd,vh:()=>Dy,Pb:()=>Rm,L$:()=>_y,cf:()=>og,sc:()=>Oy,Xo:()=>Ty,IO:()=>Ey,iE:()=>za,Eo:()=>bm,i3:()=>Cf,Bt:()=>Hm,pl:()=>xy,Ub:()=>lt,qK:()=>Uu,TQ:()=>Ay,e0:()=>wy,r7:()=>pE,Mx:()=>py,ar:()=>Iy});var Te,Ae,_=L(5861),G=L(534),Y=L(4537),le=L(7879),ae=L(9058),ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ye={};(function(){var a;function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function c(Ee,oe,pe){pe||(pe=0);var Ie=Array(16);if("string"==typeof oe)for(var be=0;16>be;++be)Ie[be]=oe.charCodeAt(pe++)|oe.charCodeAt(pe++)<<8|oe.charCodeAt(pe++)<<16|oe.charCodeAt(pe++)<<24;else for(be=0;16>be;++be)Ie[be]=oe[pe++]|oe[pe++]<<8|oe[pe++]<<16|oe[pe++]<<24;var Pe=Ee.g[3],de=(oe=Ee.g[0])+(Pe^(pe=Ee.g[1])&((be=Ee.g[2])^Pe))+Ie[0]+3614090360&4294967295;de=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=(pe=(be=(Pe=(oe=pe+(de<<7&4294967295|de>>>25))+((de=Pe+(be^oe&(pe^be))+Ie[1]+3905402710&4294967295)<<12&4294967295|de>>>20))+((de=be+(pe^Pe&(oe^pe))+Ie[2]+606105819&4294967295)<<17&4294967295|de>>>15))+((de=pe+(oe^be&(Pe^oe))+Ie[3]+3250441966&4294967295)<<22&4294967295|de>>>10))+((de=oe+(Pe^pe&(be^Pe))+Ie[4]+4118548399&4294967295)<<7&4294967295|de>>>25))+((de=Pe+(be^oe&(pe^be))+Ie[5]+1200080426&4294967295)<<12&4294967295|de>>>20))+((de=be+(pe^Pe&(oe^pe))+Ie[6]+2821735955&4294967295)<<17&4294967295|de>>>15))+((de=pe+(oe^be&(Pe^oe))+Ie[7]+4249261313&4294967295)<<22&4294967295|de>>>10))+((de=oe+(Pe^pe&(be^Pe))+Ie[8]+1770035416&4294967295)<<7&4294967295|de>>>25))+((de=Pe+(be^oe&(pe^be))+Ie[9]+2336552879&4294967295)<<12&4294967295|de>>>20))+((de=be+(pe^Pe&(oe^pe))+Ie[10]+4294925233&4294967295)<<17&4294967295|de>>>15))+((de=pe+(oe^be&(Pe^oe))+Ie[11]+2304563134&4294967295)<<22&4294967295|de>>>10))+((de=oe+(Pe^pe&(be^Pe))+Ie[12]+1804603682&4294967295)<<7&4294967295|de>>>25))+((de=Pe+(be^oe&(pe^be))+Ie[13]+4254626195&4294967295)<<12&4294967295|de>>>20))+((de=be+(pe^Pe&(oe^pe))+Ie[14]+2792965006&4294967295)<<17&4294967295|de>>>15))+((de=pe+(oe^be&(Pe^oe))+Ie[15]+1236535329&4294967295)<<22&4294967295|de>>>10))+((de=oe+(be^Pe&(pe^be))+Ie[1]+4129170786&4294967295)<<5&4294967295|de>>>27))+((de=Pe+(pe^be&(oe^pe))+Ie[6]+3225465664&4294967295)<<9&4294967295|de>>>23))+((de=be+(oe^pe&(Pe^oe))+Ie[11]+643717713&4294967295)<<14&4294967295|de>>>18))+((de=pe+(Pe^oe&(be^Pe))+Ie[0]+3921069994&4294967295)<<20&4294967295|de>>>12))+((de=oe+(be^Pe&(pe^be))+Ie[5]+3593408605&4294967295)<<5&4294967295|de>>>27))+((de=Pe+(pe^be&(oe^pe))+Ie[10]+38016083&4294967295)<<9&4294967295|de>>>23))+((de=be+(oe^pe&(Pe^oe))+Ie[15]+3634488961&4294967295)<<14&4294967295|de>>>18))+((de=pe+(Pe^oe&(be^Pe))+Ie[4]+3889429448&4294967295)<<20&4294967295|de>>>12))+((de=oe+(be^Pe&(pe^be))+Ie[9]+568446438&4294967295)<<5&4294967295|de>>>27))+((de=Pe+(pe^be&(oe^pe))+Ie[14]+3275163606&4294967295)<<9&4294967295|de>>>23))+((de=be+(oe^pe&(Pe^oe))+Ie[3]+4107603335&4294967295)<<14&4294967295|de>>>18))+((de=pe+(Pe^oe&(be^Pe))+Ie[8]+1163531501&4294967295)<<20&4294967295|de>>>12))+((de=oe+(be^Pe&(pe^be))+Ie[13]+2850285829&4294967295)<<5&4294967295|de>>>27))+((de=Pe+(pe^be&(oe^pe))+Ie[2]+4243563512&4294967295)<<9&4294967295|de>>>23))+((de=be+(oe^pe&(Pe^oe))+Ie[7]+1735328473&4294967295)<<14&4294967295|de>>>18))+((de=pe+(Pe^oe&(be^Pe))+Ie[12]+2368359562&4294967295)<<20&4294967295|de>>>12))+((de=oe+(pe^be^Pe)+Ie[5]+4294588738&4294967295)<<4&4294967295|de>>>28))+((de=Pe+(oe^pe^be)+Ie[8]+2272392833&4294967295)<<11&4294967295|de>>>21))+((de=be+(Pe^oe^pe)+Ie[11]+1839030562&4294967295)<<16&4294967295|de>>>16))+((de=pe+(be^Pe^oe)+Ie[14]+4259657740&4294967295)<<23&4294967295|de>>>9))+((de=oe+(pe^be^Pe)+Ie[1]+2763975236&4294967295)<<4&4294967295|de>>>28))+((de=Pe+(oe^pe^be)+Ie[4]+1272893353&4294967295)<<11&4294967295|de>>>21))+((de=be+(Pe^oe^pe)+Ie[7]+4139469664&4294967295)<<16&4294967295|de>>>16))+((de=pe+(be^Pe^oe)+Ie[10]+3200236656&4294967295)<<23&4294967295|de>>>9))+((de=oe+(pe^be^Pe)+Ie[13]+681279174&4294967295)<<4&4294967295|de>>>28))+((de=Pe+(oe^pe^be)+Ie[0]+3936430074&4294967295)<<11&4294967295|de>>>21))+((de=be+(Pe^oe^pe)+Ie[3]+3572445317&4294967295)<<16&4294967295|de>>>16))+((de=pe+(be^Pe^oe)+Ie[6]+76029189&4294967295)<<23&4294967295|de>>>9))+((de=oe+(pe^be^Pe)+Ie[9]+3654602809&4294967295)<<4&4294967295|de>>>28))+((de=Pe+(oe^pe^be)+Ie[12]+3873151461&4294967295)<<11&4294967295|de>>>21))+((de=be+(Pe^oe^pe)+Ie[15]+530742520&4294967295)<<16&4294967295|de>>>16))+((de=pe+(be^Pe^oe)+Ie[2]+3299628645&4294967295)<<23&4294967295|de>>>9))+((de=oe+(be^(pe|~Pe))+Ie[0]+4096336452&4294967295)<<6&4294967295|de>>>26))+((de=Pe+(pe^(oe|~be))+Ie[7]+1126891415&4294967295)<<10&4294967295|de>>>22))+((de=be+(oe^(Pe|~pe))+Ie[14]+2878612391&4294967295)<<15&4294967295|de>>>17))+((de=pe+(Pe^(be|~oe))+Ie[5]+4237533241&4294967295)<<21&4294967295|de>>>11))+((de=oe+(be^(pe|~Pe))+Ie[12]+1700485571&4294967295)<<6&4294967295|de>>>26))+((de=Pe+(pe^(oe|~be))+Ie[3]+2399980690&4294967295)<<10&4294967295|de>>>22))+((de=be+(oe^(Pe|~pe))+Ie[10]+4293915773&4294967295)<<15&4294967295|de>>>17))+((de=pe+(Pe^(be|~oe))+Ie[1]+2240044497&4294967295)<<21&4294967295|de>>>11))+((de=oe+(be^(pe|~Pe))+Ie[8]+1873313359&4294967295)<<6&4294967295|de>>>26))+((de=Pe+(pe^(oe|~be))+Ie[15]+4264355552&4294967295)<<10&4294967295|de>>>22))+((de=be+(oe^(Pe|~pe))+Ie[6]+2734768916&4294967295)<<15&4294967295|de>>>17))+((de=pe+(Pe^(be|~oe))+Ie[13]+1309151649&4294967295)<<21&4294967295|de>>>11))+((Pe=(oe=pe+((de=oe+(be^(pe|~Pe))+Ie[4]+4149444226&4294967295)<<6&4294967295|de>>>26))+((de=Pe+(pe^(oe|~be))+Ie[11]+3174756917&4294967295)<<10&4294967295|de>>>22))^((be=Pe+((de=be+(oe^(Pe|~pe))+Ie[2]+718787259&4294967295)<<15&4294967295|de>>>17))|~oe))+Ie[9]+3951481745&4294967295,Ee.g[0]=Ee.g[0]+oe&4294967295,Ee.g[1]=Ee.g[1]+(be+(de<<21&4294967295|de>>>11))&4294967295,Ee.g[2]=Ee.g[2]+be&4294967295,Ee.g[3]=Ee.g[3]+Pe&4294967295}function g(Ee,oe){this.h=oe;for(var pe=[],Ie=!0,be=Ee.length-1;0<=be;be--){var Pe=0|Ee[be];Ie&&Pe==oe||(pe[be]=Pe,Ie=!1)}this.g=pe}(function e(Ee,oe){function pe(){}pe.prototype=oe.prototype,Ee.D=oe.prototype,Ee.prototype=new pe,Ee.prototype.constructor=Ee,Ee.C=function(Ie,be,Pe){for(var de=Array(arguments.length-2),Ka=2;Ka<arguments.length;Ka++)de[Ka-2]=arguments[Ka];return oe.prototype[be].apply(Ie,de)}})(s,function r(){this.blockSize=-1}),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},s.prototype.u=function(Ee,oe){void 0===oe&&(oe=Ee.length);for(var pe=oe-this.blockSize,Ie=this.B,be=this.h,Pe=0;Pe<oe;){if(0==be)for(;Pe<=pe;)c(this,Ee,Pe),Pe+=this.blockSize;if("string"==typeof Ee){for(;Pe<oe;)if(Ie[be++]=Ee.charCodeAt(Pe++),be==this.blockSize){c(this,Ie),be=0;break}}else for(;Pe<oe;)if(Ie[be++]=Ee[Pe++],be==this.blockSize){c(this,Ie),be=0;break}}this.h=be,this.o+=oe},s.prototype.v=function(){var Ee=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Ee[0]=128;for(var oe=1;oe<Ee.length-8;++oe)Ee[oe]=0;var pe=8*this.o;for(oe=Ee.length-8;oe<Ee.length;++oe)Ee[oe]=255&pe,pe/=256;for(this.u(Ee),Ee=Array(16),oe=pe=0;4>oe;++oe)for(var Ie=0;32>Ie;Ie+=8)Ee[pe++]=this.g[oe]>>>Ie&255;return Ee};var w={};function S(Ee){return-128<=Ee&&128>Ee?function h(Ee,oe){var pe=w;return Object.prototype.hasOwnProperty.call(pe,Ee)?pe[Ee]:pe[Ee]=oe(Ee)}(Ee,function(oe){return new g([0|oe],0>oe?-1:0)}):new g([0|Ee],0>Ee?-1:0)}function N(Ee){if(isNaN(Ee)||!isFinite(Ee))return Q;if(0>Ee)return ct(N(-Ee));for(var oe=[],pe=1,Ie=0;Ee>=pe;Ie++)oe[Ie]=Ee/pe|0,pe*=4294967296;return new g(oe,0)}var Q=S(0),ue=S(1),xe=S(16777216);function tt(Ee){if(0!=Ee.h)return!1;for(var oe=0;oe<Ee.g.length;oe++)if(0!=Ee.g[oe])return!1;return!0}function pt(Ee){return-1==Ee.h}function ct(Ee){for(var oe=Ee.g.length,pe=[],Ie=0;Ie<oe;Ie++)pe[Ie]=~Ee.g[Ie];return new g(pe,~Ee.h).add(ue)}function zt(Ee,oe){return Ee.add(ct(oe))}function Jt(Ee,oe){for(;(65535&Ee[oe])!=Ee[oe];)Ee[oe+1]+=Ee[oe]>>>16,Ee[oe]&=65535,oe++}function Wt(Ee,oe){this.g=Ee,this.h=oe}function vn(Ee,oe){if(tt(oe))throw Error("division by zero");if(tt(Ee))return new Wt(Q,Q);if(pt(Ee))return oe=vn(ct(Ee),oe),new Wt(ct(oe.g),ct(oe.h));if(pt(oe))return oe=vn(Ee,ct(oe)),new Wt(ct(oe.g),oe.h);if(30<Ee.g.length){if(pt(Ee)||pt(oe))throw Error("slowDivide_ only works with positive integers.");for(var pe=ue,Ie=oe;0>=Ie.l(Ee);)pe=or(pe),Ie=or(Ie);var be=On(pe,1),Pe=On(Ie,1);for(Ie=On(Ie,2),pe=On(pe,2);!tt(Ie);){var de=Pe.add(Ie);0>=de.l(Ee)&&(be=be.add(pe),Pe=de),Ie=On(Ie,1),pe=On(pe,1)}return oe=zt(Ee,be.j(oe)),new Wt(be,oe)}for(be=Q;0<=Ee.l(oe);){for(pe=Math.max(1,Math.floor(Ee.m()/oe.m())),Ie=48>=(Ie=Math.ceil(Math.log(pe)/Math.LN2))?1:Math.pow(2,Ie-48),de=(Pe=N(pe)).j(oe);pt(de)||0<de.l(Ee);)de=(Pe=N(pe-=Ie)).j(oe);tt(Pe)&&(Pe=ue),be=be.add(Pe),Ee=zt(Ee,de)}return new Wt(be,Ee)}function or(Ee){for(var oe=Ee.g.length+1,pe=[],Ie=0;Ie<oe;Ie++)pe[Ie]=Ee.i(Ie)<<1|Ee.i(Ie-1)>>>31;return new g(pe,Ee.h)}function On(Ee,oe){var pe=oe>>5;oe%=32;for(var Ie=Ee.g.length-pe,be=[],Pe=0;Pe<Ie;Pe++)be[Pe]=0<oe?Ee.i(Pe+pe)>>>oe|Ee.i(Pe+pe+1)<<32-oe:Ee.i(Pe+pe);return new g(be,Ee.h)}(a=g.prototype).m=function(){if(pt(this))return-ct(this).m();for(var Ee=0,oe=1,pe=0;pe<this.g.length;pe++){var Ie=this.i(pe);Ee+=(0<=Ie?Ie:4294967296+Ie)*oe,oe*=4294967296}return Ee},a.toString=function(Ee){if(2>(Ee=Ee||10)||36<Ee)throw Error("radix out of range: "+Ee);if(tt(this))return"0";if(pt(this))return"-"+ct(this).toString(Ee);for(var oe=N(Math.pow(Ee,6)),pe=this,Ie="";;){var be=vn(pe,oe).g,Pe=((0<(pe=zt(pe,be.j(oe))).g.length?pe.g[0]:pe.h)>>>0).toString(Ee);if(tt(pe=be))return Pe+Ie;for(;6>Pe.length;)Pe="0"+Pe;Ie=Pe+Ie}},a.i=function(Ee){return 0>Ee?0:Ee<this.g.length?this.g[Ee]:this.h},a.l=function(Ee){return pt(Ee=zt(this,Ee))?-1:tt(Ee)?0:1},a.abs=function(){return pt(this)?ct(this):this},a.add=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),pe=[],Ie=0,be=0;be<=oe;be++){var Pe=Ie+(65535&this.i(be))+(65535&Ee.i(be)),de=(Pe>>>16)+(this.i(be)>>>16)+(Ee.i(be)>>>16);Ie=de>>>16,pe[be]=(de&=65535)<<16|(Pe&=65535)}return new g(pe,-2147483648&pe[pe.length-1]?-1:0)},a.j=function(Ee){if(tt(this)||tt(Ee))return Q;if(pt(this))return pt(Ee)?ct(this).j(ct(Ee)):ct(ct(this).j(Ee));if(pt(Ee))return ct(this.j(ct(Ee)));if(0>this.l(xe)&&0>Ee.l(xe))return N(this.m()*Ee.m());for(var oe=this.g.length+Ee.g.length,pe=[],Ie=0;Ie<2*oe;Ie++)pe[Ie]=0;for(Ie=0;Ie<this.g.length;Ie++)for(var be=0;be<Ee.g.length;be++){var Pe=this.i(Ie)>>>16,de=65535&this.i(Ie),Ka=Ee.i(be)>>>16,Sf=65535&Ee.i(be);pe[2*Ie+2*be]+=de*Sf,Jt(pe,2*Ie+2*be),pe[2*Ie+2*be+1]+=Pe*Sf,Jt(pe,2*Ie+2*be+1),pe[2*Ie+2*be+1]+=de*Ka,Jt(pe,2*Ie+2*be+1),pe[2*Ie+2*be+2]+=Pe*Ka,Jt(pe,2*Ie+2*be+2)}for(Ie=0;Ie<oe;Ie++)pe[Ie]=pe[2*Ie+1]<<16|pe[2*Ie];for(Ie=oe;Ie<2*oe;Ie++)pe[Ie]=0;return new g(pe,0)},a.A=function(Ee){return vn(this,Ee).h},a.and=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),pe=[],Ie=0;Ie<oe;Ie++)pe[Ie]=this.i(Ie)&Ee.i(Ie);return new g(pe,this.h&Ee.h)},a.or=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),pe=[],Ie=0;Ie<oe;Ie++)pe[Ie]=this.i(Ie)|Ee.i(Ie);return new g(pe,this.h|Ee.h)},a.xor=function(Ee){for(var oe=Math.max(this.g.length,Ee.g.length),pe=[],Ie=0;Ie<oe;Ie++)pe[Ie]=this.i(Ie)^Ee.i(Ie);return new g(pe,this.h^Ee.h)},s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Ae=ye.Md5=s,g.prototype.add=g.prototype.add,g.prototype.multiply=g.prototype.j,g.prototype.modulo=g.prototype.A,g.prototype.compare=g.prototype.l,g.prototype.toNumber=g.prototype.m,g.prototype.toString=g.prototype.toString,g.prototype.getBits=g.prototype.i,g.fromNumber=N,g.fromString=function z(Ee,oe){if(0==Ee.length)throw Error("number format error: empty string");if(2>(oe=oe||10)||36<oe)throw Error("radix out of range: "+oe);if("-"==Ee.charAt(0))return ct(z(Ee.substring(1),oe));if(0<=Ee.indexOf("-"))throw Error('number format error: interior "-" character');for(var pe=N(Math.pow(oe,8)),Ie=Q,be=0;be<Ee.length;be+=8){var Pe=Math.min(8,Ee.length-be),de=parseInt(Ee.substring(be,be+Pe),oe);8>Pe?(Pe=N(Math.pow(oe,Pe)),Ie=Ie.j(Pe).add(N(de))):Ie=(Ie=Ie.j(pe)).add(N(de))}return Ie},Te=ye.Integer=g}).apply(typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{});var _e,Je,qe,at,Ze,dt,et,Ft,wt,ee=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},re={};(function(){var a,e="function"==typeof Object.defineProperties?Object.defineProperty:function(p,R,k){return p==Array.prototype||p==Object.prototype||(p[R]=k.value),p},s=function r(p){p=["object"==typeof globalThis&&globalThis,p,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ee&&ee];for(var R=0;R<p.length;++R){var k=p[R];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}(this);!function c(p,R){if(R)e:{var k=s;p=p.split(".");for(var K=0;K<p.length-1;K++){var Re=p[K];if(!(Re in k))break e;k=k[Re]}(R=R(K=k[p=p[p.length-1]]))!=K&&null!=R&&e(k,p,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(p){return p||function(){return function h(p,R){p instanceof String&&(p+="");var k=0,K=!1,Re={next:function(){if(!K&&k<p.length){var He=k++;return{value:R(He,p[He]),done:!1}}return K=!0,{done:!0,value:void 0}}};return Re[Symbol.iterator]=function(){return Re},Re}(this,function(R,k){return k})}});var g=g||{},w=this||self;function S(p){var R=typeof p;return"array"==(R="object"!=R?R:p?Array.isArray(p)?"array":R:"null")||"object"==R&&"number"==typeof p.length}function N(p){var R=typeof p;return"object"==R&&null!=p||"function"==R}function z(p,R,k){return p.call.apply(p.bind,arguments)}function Q(p,R,k){if(!p)throw Error();if(2<arguments.length){var K=Array.prototype.slice.call(arguments,2);return function(){var Re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Re,K),p.apply(R,Re)}}return function(){return p.apply(R,arguments)}}function ue(p,R,k){return(ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?z:Q).apply(null,arguments)}function xe(p,R){var k=Array.prototype.slice.call(arguments,1);return function(){var K=k.slice();return K.push.apply(K,arguments),p.apply(this,K)}}function tt(p,R){function k(){}k.prototype=R.prototype,p.aa=R.prototype,p.prototype=new k,p.prototype.constructor=p,p.Qb=function(K,Re,He){for(var Rt=Array(arguments.length-2),Rr=2;Rr<arguments.length;Rr++)Rt[Rr-2]=arguments[Rr];return R.prototype[Re].apply(K,Rt)}}function pt(p){const R=p.length;if(0<R){const k=Array(R);for(let K=0;K<R;K++)k[K]=p[K];return k}return[]}function ct(p,R){for(let k=1;k<arguments.length;k++){const K=arguments[k];if(S(K)){const Re=p.length||0,He=K.length||0;p.length=Re+He;for(let Rt=0;Rt<He;Rt++)p[Re+Rt]=K[Rt]}else p.push(K)}}function Jt(p){return/^[\s\xa0]*$/.test(p)}function Wt(){var p=w.navigator;return p&&(p=p.userAgent)?p:""}function vn(p){return vn[" "](p),p}vn[" "]=function(){};var or=!(-1==Wt().indexOf("Gecko")||-1!=Wt().toLowerCase().indexOf("webkit")&&-1==Wt().indexOf("Edge")||-1!=Wt().indexOf("Trident")||-1!=Wt().indexOf("MSIE")||-1!=Wt().indexOf("Edge"));function On(p,R,k){for(const K in p)R.call(k,p[K],K,p)}function oe(p){const R={};for(const k in p)R[k]=p[k];return R}const pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ie(p,R){let k,K;for(let Re=1;Re<arguments.length;Re++){for(k in K=arguments[Re],K)p[k]=K[k];for(let He=0;He<pe.length;He++)k=pe[He],Object.prototype.hasOwnProperty.call(K,k)&&(p[k]=K[k])}}function be(p){var R=1;p=p.split(":");const k=[];for(;0<R&&p.length;)k.push(p.shift()),R--;return p.length&&k.push(p.join(":")),k}function Pe(p){w.setTimeout(()=>{throw p},0)}function de(){var p=cg;let R=null;return p.g&&(R=p.g,p.g=p.g.next,p.g||(p.h=null),R.next=null),R}var Sf=new class zt{constructor(R,k){this.i=R,this.j=k,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new ug,p=>p.reset());class ug{constructor(){this.next=this.g=this.h=null}set(R,k){this.h=R,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Vl,nh=!1,cg=new class Ka{constructor(){this.h=this.g=null}add(R,k){const K=Sf.get();K.set(R,k),this.h?this.h.next=K:this.g=K,this.h=K}},Wm=()=>{const p=w.Promise.resolve(void 0);Vl=()=>{p.then(Gm)}};var Gm=()=>{for(var p;p=de();){try{p.h.call(p.g)}catch(k){Pe(k)}var R=Sf;R.j(p),100>R.h&&(R.h++,p.next=R.g,R.g=p)}nh=!1};function ju(){this.s=this.s,this.C=this.C}function es(p,R){this.type=p,this.g=this.target=R,this.defaultPrevented=!1}ju.prototype.s=!1,ju.prototype.ma=function(){this.s||(this.s=!0,this.N())},ju.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},es.prototype.h=function(){this.defaultPrevented=!0};var lg=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var p=!1,R=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const k=()=>{};w.addEventListener("test",k,R),w.removeEventListener("test",k,R)}catch{}return p}();function rh(p,R){if(es.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var k=this.type=p.type,K=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=R,R=p.relatedTarget){if(or){e:{try{vn(R.nodeName);var Re=!0;break e}catch{}Re=!1}Re||(R=null)}}else"mouseover"==k?R=p.fromElement:"mouseout"==k&&(R=p.toElement);this.relatedTarget=R,K?(this.clientX=void 0!==K.clientX?K.clientX:K.pageX,this.clientY=void 0!==K.clientY?K.clientY:K.pageY,this.screenX=K.screenX||0,this.screenY=K.screenY||0):(this.clientX=void 0!==p.clientX?p.clientX:p.pageX,this.clientY=void 0!==p.clientY?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType="string"==typeof p.pointerType?p.pointerType:Xy[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&rh.aa.h.call(this)}}tt(rh,es);var Xy={2:"touch",3:"pen",4:"mouse"};rh.prototype.h=function(){rh.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var ih="closure_listenable_"+(1e6*Math.random()|0),ev=0;function tv(p,R,k,K,Re){this.listener=p,this.proxy=null,this.src=R,this.type=k,this.capture=!!K,this.ha=Re,this.key=++ev,this.da=this.fa=!1}function Ks(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ul(p){this.src=p,this.g={},this.h=0}function dg(p,R){var k=R.type;if(k in p.g){var He,K=p.g[k],Re=Array.prototype.indexOf.call(K,R,void 0);(He=0<=Re)&&Array.prototype.splice.call(K,Re,1),He&&(Ks(R),0==p.g[k].length&&(delete p.g[k],p.h--))}}function Rf(p,R,k,K){for(var Re=0;Re<p.length;++Re){var He=p[Re];if(!He.da&&He.listener==R&&He.capture==!!k&&He.ha==K)return Re}return-1}Ul.prototype.add=function(p,R,k,K,Re){var He=p.toString();(p=this.g[He])||(p=this.g[He]=[],this.h++);var Rt=Rf(p,R,K,Re);return-1<Rt?(R=p[Rt],k||(R.fa=!1)):((R=new tv(R,this.src,He,!!K,Re)).fa=k,p.push(R)),R};var hg="closure_lm_"+(1e6*Math.random()|0),Pf={};function fg(p,R,k,K,Re){if(K&&K.once)return nv(p,R,k,K,Re);if(Array.isArray(R)){for(var He=0;He<R.length;He++)fg(p,R[He],k,K,Re);return null}return k=_g(k),p&&p[ih]?p.K(R,k,N(K)?!!K.capture:!!K,Re):sh(p,R,k,!1,K,Re)}function sh(p,R,k,K,Re,He){if(!R)throw Error("Invalid event type");var Rt=N(Re)?!!Re.capture:!!Re,Rr=oh(p);if(Rr||(p[hg]=Rr=new Ul(p)),(k=Rr.add(R,k,K,Rt,He)).proxy)return k;if(K=function pg(){const R=qm;return function p(k){return R.call(p.src,p.listener,k)}}(),k.proxy=K,K.src=p,K.listener=k,p.addEventListener)lg||(Re=Rt),void 0===Re&&(Re=!1),p.addEventListener(R.toString(),K,Re);else if(p.attachEvent)p.attachEvent(mg(R.toString()),K);else{if(!p.addListener||!p.removeListener)throw Error("addEventListener and attachEvent are unavailable.");p.addListener(K)}return k}function nv(p,R,k,K,Re){if(Array.isArray(R)){for(var He=0;He<R.length;He++)nv(p,R[He],k,K,Re);return null}return k=_g(k),p&&p[ih]?p.L(R,k,N(K)?!!K.capture:!!K,Re):sh(p,R,k,!0,K,Re)}function gg(p,R,k,K,Re){if(Array.isArray(R))for(var He=0;He<R.length;He++)gg(p,R[He],k,K,Re);else K=N(K)?!!K.capture:!!K,k=_g(k),p&&p[ih]?(p=p.i,(R=String(R).toString())in p.g&&-1<(k=Rf(He=p.g[R],k,K,Re))&&(Ks(He[k]),Array.prototype.splice.call(He,k,1),0==He.length&&(delete p.g[R],p.h--))):p&&(p=oh(p))&&(R=p.g[R.toString()],p=-1,R&&(p=Rf(R,k,K,Re)),(k=-1<p?R[p]:null)&&Mf(k))}function Mf(p){if("number"!=typeof p&&p&&!p.da){var R=p.src;if(R&&R[ih])dg(R.i,p);else{var k=p.type,K=p.proxy;R.removeEventListener?R.removeEventListener(k,K,p.capture):R.detachEvent?R.detachEvent(mg(k),K):R.addListener&&R.removeListener&&R.removeListener(K),(k=oh(R))?(dg(k,p),0==k.h&&(k.src=null,R[hg]=null)):Ks(p)}}}function mg(p){return p in Pf?Pf[p]:Pf[p]="on"+p}function qm(p,R){if(p.da)p=!0;else{R=new rh(R,this);var k=p.listener,K=p.ha||p.src;p.fa&&Mf(p),p=k.call(K,R)}return p}function oh(p){return(p=p[hg])instanceof Ul?p:null}var Uo="__closure_events_fn_"+(1e9*Math.random()>>>0);function _g(p){return"function"==typeof p?p:(p[Uo]||(p[Uo]=function(R){return p.handleEvent(R)}),p[Uo])}function ts(){ju.call(this),this.i=new Ul(this),this.M=this,this.F=null}function ki(p,R){var k,K=p.F;if(K)for(k=[];K;K=K.F)k.push(K);if(p=p.M,K=R.type||R,"string"==typeof R)R=new es(R,p);else if(R instanceof es)R.target=R.target||p;else{var Re=R;Ie(R=new es(K,p),Re)}if(Re=!0,k)for(var He=k.length-1;0<=He;He--){var Rt=R.g=k[He];Re=xf(Rt,K,!0,R)&&Re}if(Re=xf(Rt=R.g=p,K,!0,R)&&Re,Re=xf(Rt,K,!1,R)&&Re,k)for(He=0;He<k.length;He++)Re=xf(Rt=R.g=k[He],K,!1,R)&&Re}function xf(p,R,k,K){if(!(R=p.i.g[String(R)]))return!0;R=R.concat();for(var Re=!0,He=0;He<R.length;++He){var Rt=R[He];if(Rt&&!Rt.da&&Rt.capture==k){var Rr=Rt.listener,Fi=Rt.ha||Rt.src;Rt.fa&&dg(p.i,Rt),Re=!1!==Rr.call(Fi,K)&&Re}}return Re&&!K.defaultPrevented}function yg(p,R,k){if("function"==typeof p)k&&(p=ue(p,k));else{if(!p||"function"!=typeof p.handleEvent)throw Error("Invalid listener argument");p=ue(p.handleEvent,p)}return 2147483647<Number(R)?-1:w.setTimeout(p,R||0)}function Km(p){p.g=yg(()=>{p.g=null,p.i&&(p.i=!1,Km(p))},p.l);const R=p.h;p.h=null,p.m.apply(null,R)}tt(ts,ju),ts.prototype[ih]=!0,ts.prototype.removeEventListener=function(p,R,k,K){gg(this,p,R,k,K)},ts.prototype.N=function(){if(ts.aa.N.call(this),this.i){var R,p=this.i;for(R in p.g){for(var k=p.g[R],K=0;K<k.length;K++)Ks(k[K]);delete p.g[R],p.h--}}this.F=null},ts.prototype.K=function(p,R,k,K){return this.i.add(String(p),R,!1,k,K)},ts.prototype.L=function(p,R,k,K){return this.i.add(String(p),R,!0,k,K)};class Nf extends ju{constructor(R,k){super(),this.m=R,this.l=k,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Km(this)}N(){super.N(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(p){ju.call(this),this.h=p,this.g={}}tt(Za,ju);var vg=[];function ah(p){On(p.g,function(R,k){this.g.hasOwnProperty(k)&&Mf(R)},p),p.g={}}Za.prototype.N=function(){Za.aa.N.call(this),ah(this)},Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zm=w.JSON.stringify,rv=w.JSON.parse,Qm=class{stringify(p){return w.JSON.stringify(p,void 0)}parse(p){return w.JSON.parse(p,void 0)}};function Of(){}function Jm(){}Of.prototype.h=null;var Bl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kf(){es.call(this,"d")}function bc(){es.call(this,"c")}tt(kf,es),tt(bc,es);var Sc={},Eg=null;function uh(){return Eg=Eg||new ts}function Xm(p){es.call(this,Sc.La,p)}function ch(p){const R=uh();ki(R,new Xm(R))}function jl(p,R){es.call(this,Sc.STAT_EVENT,p),this.stat=R}function vs(p){const R=uh();ki(R,new jl(R,p))}function e_(p,R){es.call(this,Sc.Ma,p),this.size=R}function lh(p,R){if("function"!=typeof p)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){p()},R)}function dh(){this.g=!0}function $l(p,R,k,K){p.info(function(){return"XMLHTTP TEXT ("+R+"): "+function t_(p,R){if(!p.g)return R;if(!R)return null;try{var k=JSON.parse(R);if(k)for(p=0;p<k.length;p++)if(Array.isArray(k[p])){var K=k[p];if(!(2>K.length)){var Re=K[1];if(Array.isArray(Re)&&!(1>Re.length)){var He=Re[0];if("noop"!=He&&"stop"!=He&&"close"!=He)for(var Rt=1;Rt<Re.length;Rt++)Re[Rt]=""}}}return Zm(k)}catch{return R}}(p,k)+(K?" "+K:"")})}Sc.La="serverreachability",tt(Xm,es),Sc.STAT_EVENT="statevent",tt(jl,es),Sc.Ma="timingevent",tt(e_,es),dh.prototype.xa=function(){this.g=!1},dh.prototype.info=function(){};var Hl,zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},n_={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Lf(){}function $u(p,R,k,K){this.j=p,this.i=R,this.l=k,this.R=K||1,this.U=new Za(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new r_}function r_(){this.i=null,this.g="",this.h=!1}tt(Lf,Of),Lf.prototype.g=function(){return new XMLHttpRequest},Lf.prototype.i=function(){return{}},Hl=new Lf;var i_={},Ig={};function Tg(p,R,k){p.L=1,p.v=Ja(Ps(R)),p.m=k,p.P=!0,s_(p,null)}function s_(p,R){p.F=Date.now(),Ff(p),p.A=Ps(p.v);var k=p.A,K=p.R;Array.isArray(K)||(K=[String(K)]),lv(k.i,"t",K),p.C=0,k=p.j.J,p.h=new r_,p.g=Mg(p.j,k?R:null,!p.m),0<p.O&&(p.M=new Nf(ue(p.Y,p,p.g),p.O)),R=p.U,k=p.g,K=p.ca;var Re="readystatechange";Array.isArray(Re)||(Re&&(vg[0]=Re.toString()),Re=vg);for(var He=0;He<Re.length;He++){var Rt=fg(k,Re[He],K||R.handleEvent,!1,R.h||R);if(!Rt)break;R.g[Rt.key]=Rt}R=p.H?oe(p.H):{},p.m?(p.u||(p.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,R)):(p.u="GET",p.g.ea(p.A,p.u,null,R)),ch(),function iv(p,R,k,K,Re,He){p.info(function(){if(p.g)if(He)for(var Rt="",Rr=He.split("&"),Fi=0;Fi<Rr.length;Fi++){var tr=Rr[Fi].split("=");if(1<tr.length){var Vi=tr[0];tr=tr[1];var Ui=Vi.split("_");Rt=2<=Ui.length&&"type"==Ui[1]?Rt+(Vi+"=")+tr+"&":Rt+(Vi+"=redacted&")}}else Rt=null;else Rt=He;return"XMLHTTP REQ ("+K+") [attempt "+Re+"]: "+R+"\n"+k+"\n"+Rt})}(p.i,p.u,p.A,p.l,p.R,p.m)}function Dg(p){return!!p.g&&"GET"==p.u&&2!=p.L&&p.j.Ca}function o_(p,R){var k=p.C,K=R.indexOf("\n",k);return-1==K?Ig:(k=Number(R.substring(k,K)),isNaN(k)?i_:(K+=1)+k>R.length?Ig:(R=R.slice(K,K+k),p.C=K+k,R))}function Ff(p){p.S=Date.now()+p.I,av(p,p.I)}function av(p,R){if(null!=p.B)throw Error("WatchDog timer not null");p.B=lh(ue(p.ba,p),R)}function Vf(p){p.B&&(w.clearTimeout(p.B),p.B=null)}function Wl(p){0==p.j.G||p.J||Gf(p.j,p)}function Gl(p){Vf(p);var R=p.M;R&&"function"==typeof R.ma&&R.ma(),p.M=null,ah(p.U),p.g&&(R=p.g,p.g=null,R.abort(),R.ma())}function ql(p,R){try{var k=p.j;if(0!=k.G&&(k.g==p||ho(k.h,p)))if(!p.K&&ho(k.h,p)&&3==k.G){try{var K=k.Da.g.parse(R)}catch{K=null}if(Array.isArray(K)&&3==K.length){var Re=K;if(0==Re[0]){e:if(!k.u){if(k.g){if(!(k.g.F+3e3<p.F))break e;nd(k),Hf(k)}Rg(k),vs(18)}}else k.za=Re[1],0<k.za-k.T&&37500>Re[2]&&k.F&&0==k.v&&!k.C&&(k.C=lh(ue(k.Za,k),6e3));if(1>=u_(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else fa(k,11)}else if((p.K||k.g==p)&&nd(k),!Jt(R))for(Re=k.Da.g.parse(R),R=0;R<Re.length;R++){let tr=Re[R];if(k.T=tr[0],tr=tr[1],2==k.G)if("c"==tr[0]){k.K=tr[1],k.ia=tr[2];const Vi=tr[3];null!=Vi&&(k.la=Vi,k.j.info("VER="+k.la));const Ui=tr[4];null!=Ui&&(k.Aa=Ui,k.j.info("SVER="+k.Aa));const Lc=tr[5];null!=Lc&&"number"==typeof Lc&&0<Lc&&(k.L=K=1.5*Lc,k.j.info("backChannelRequestTimeoutMs_="+K)),K=k;const Bo=p.g;if(Bo){const Zf=Bo.g?Bo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Zf){var He=K.h;He.g||-1==Zf.indexOf("spdy")&&-1==Zf.indexOf("quic")&&-1==Zf.indexOf("h2")||(He.j=He.l,He.g=new Set,He.h&&(Rc(He,He.h),He.h=null))}if(K.D){const xg=Bo.g?Bo.g.getResponseHeader("X-HTTP-Session-Id"):null;xg&&(K.ya=xg,Ir(K.I,K.D,xg))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-p.F,k.j.info("Handshake RTT: "+k.R+"ms"));var Rt=p;if((K=k).qa=qf(K,K.J?K.ia:null,K.W),Rt.K){Li(K.h,Rt);var Rr=Rt,Fi=K.L;Fi&&(Rr.I=Fi),Rr.B&&(Vf(Rr),Ff(Rr)),K.g=Rt}else v_(K);0<k.i.length&&Wf(k)}else"stop"!=tr[0]&&"close"!=tr[0]||fa(k,7);else 3==k.G&&("stop"==tr[0]||"close"==tr[0]?"stop"==tr[0]?fa(k,7):mh(k):"noop"!=tr[0]&&k.l&&k.l.ta(tr),k.v=0)}ch()}catch{}}function a_(p){this.l=p||10,p=w.PerformanceNavigationTiming?0<(p=w.performance.getEntriesByType("navigation")).length&&("hq"==p[0].nextHopProtocol||"h2"==p[0].nextHopProtocol):!!(w.chrome&&w.chrome.loadTimes&&w.chrome.loadTimes()&&w.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Uf(p){return!!p.h||!!p.g&&p.g.size>=p.j}function u_(p){return p.h?1:p.g?p.g.size:0}function ho(p,R){return p.h?p.h==R:!!p.g&&p.g.has(R)}function Rc(p,R){p.g?p.g.add(R):p.h=R}function Li(p,R){p.h&&p.h==R?p.h=null:p.g&&p.g.has(R)&&p.g.delete(R)}function zu(p){if(null!=p.h)return p.i.concat(p.h.D);if(null!=p.g&&0!==p.g.size){let R=p.i;for(const k of p.g.values())R=R.concat(k.D);return R}return pt(p.i)}function jf(p,R){if(p.forEach&&"function"==typeof p.forEach)p.forEach(R,void 0);else if(S(p)||"string"==typeof p)Array.prototype.forEach.call(p,R,void 0);else for(var k=function fo(p){if(p.na&&"function"==typeof p.na)return p.na();if(!p.V||"function"!=typeof p.V){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(S(p)||"string"==typeof p){var R=[];p=p.length;for(var k=0;k<p;k++)R.push(k);return R}R=[],k=0;for(const K in p)R[k++]=K;return R}}}(p),K=function Bf(p){if(p.V&&"function"==typeof p.V)return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if("string"==typeof p)return p.split("");if(S(p)){for(var R=[],k=p.length,K=0;K<k;K++)R.push(p[K]);return R}for(K in R=[],k=0,p)R[k++]=p[K];return R}(p),Re=K.length,He=0;He<Re;He++)R.call(void 0,K[He],k&&k[He],p)}$u.prototype.ca=function(p){p=p.target;const R=this.M;R&&3==go(p)?R.j():this.Y(p)},$u.prototype.Y=function(p){try{if(p==this.g)e:{const Ui=go(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>Ui)&&(3!=Ui||this.g&&(this.h.h||this.g.oa()||ph(this.g)))){this.J||4!=Ui||7==R||ch(),Vf(this);var k=this.g.Z();this.X=k;t:if(Dg(this)){var K=ph(this.g);p="";var Re=K.length,He=4==go(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Gl(this),Wl(this);var Rt="";break t}this.h.i=new w.TextDecoder}for(R=0;R<Re;R++)this.h.h=!0,p+=this.h.i.decode(K[R],{stream:!(He&&R==Re-1)});K.length=0,this.h.g+=p,this.C=0,Rt=this.h.g}else Rt=this.g.oa();if(this.o=200==k,function sv(p,R,k,K,Re,He,Rt){p.info(function(){return"XMLHTTP RESP ("+K+") [ attempt "+Re+"]: "+R+"\n"+k+"\n"+He+" "+Rt})}(this.i,this.u,this.A,this.l,this.R,Ui,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Rr,Fi=this.g;if((Rr=Fi.g?Fi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jt(Rr)){var tr=Rr;break t}}tr=null}if(!(k=tr)){this.o=!1,this.s=3,vs(12),Gl(this),Wl(this);break e}$l(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ql(this,k)}if(this.P){let Bo;for(k=!0;!this.J&&this.C<Rt.length;){if(Bo=o_(this,Rt),Bo==Ig){4==Ui&&(this.s=4,vs(14),k=!1),$l(this.i,this.l,null,"[Incomplete Response]");break}if(Bo==i_){this.s=4,vs(15),$l(this.i,this.l,Rt,"[Invalid Chunk]"),k=!1;break}$l(this.i,this.l,Bo,null),ql(this,Bo)}if(Dg(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Ui||0!=Rt.length||this.h.h||(this.s=1,vs(16),k=!1),this.o=this.o&&k,k){if(0<Rt.length&&!this.W){this.W=!0;var Vi=this.j;Vi.g==this&&Vi.ba&&!Vi.M&&(Vi.j.info("Great, no buffering proxy detected. Bytes received: "+Rt.length),Pg(Vi),Vi.M=!0,vs(11))}}else $l(this.i,this.l,Rt,"[Invalid Chunked Response]"),Gl(this),Wl(this)}else $l(this.i,this.l,Rt,null),ql(this,Rt);4==Ui&&Gl(this),this.o&&!this.J&&(4==Ui?Gf(this.j,this):(this.o=!1,Ff(this)))}else(function vE(p){const R={};p=(p.g&&2<=go(p)&&p.g.getAllResponseHeaders()||"").split("\r\n");for(let K=0;K<p.length;K++){if(Jt(p[K]))continue;var k=be(p[K]);const Re=k[0];if("string"!=typeof(k=k[1]))continue;k=k.trim();const He=R[Re]||[];R[Re]=He,He.push(k)}!function Ee(p,R){for(const k in p)R.call(void 0,p[k],k,p)}(R,function(K){return K.join(", ")})})(this.g),400==k&&0<Rt.indexOf("Unknown SID")?(this.s=3,vs(12)):(this.s=0,vs(13)),Gl(this),Wl(this)}}}catch{}},$u.prototype.cancel=function(){this.J=!0,Gl(this)},$u.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(function ov(p,R){p.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&(ch(),vs(17)),Gl(this),this.s=2,Wl(this)):av(this,this.S-p)},a_.prototype.cancel=function(){if(this.i=zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const p of this.g.values())p.cancel();this.g.clear()}};var Pc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof po){this.h=p.h,Qa(this,p.j),this.o=p.o,this.g=p.g,Ya(this,p.s),this.l=p.l;var R=p.i,k=new Yl;k.i=R.i,R.g&&(k.g=new Map(R.g),k.h=R.h),Mc(this,k),this.m=p.m}else p&&(R=String(p).match(Pc))?(this.h=!1,Qa(this,R[1]||"",!0),this.o=Zl(R[2]||""),this.g=Zl(R[3]||"",!0),Ya(this,R[4]),this.l=Zl(R[5]||"",!0),Mc(this,R[6]||"",!0),this.m=Zl(R[7]||"")):(this.h=!1,this.i=new Yl(null,this.h))}function Ps(p){return new po(p)}function Qa(p,R,k){p.j=k?Zl(R,!0):R,p.j&&(p.j=p.j.replace(/:$/,""))}function Ya(p,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);p.s=R}else p.s=null}function Mc(p,R,k){R instanceof Yl?(p.i=R,function dv(p,R){R&&!p.j&&(ha(p),p.i=null,p.g.forEach(function(k,K){var Re=K.toLowerCase();K!=Re&&(p_(this,K),lv(this,Re,k))},p)),p.j=R}(p.i,p.h)):(k||(R=Ql(R,h_)),p.i=new Yl(R,p.h))}function Ir(p,R,k){p.i.set(R,k)}function Ja(p){return Ir(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Zl(p,R){return p?R?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ql(p,R,k){return"string"==typeof p?(p=encodeURI(p).replace(R,c_),k&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function c_(p){return"%"+((p=p.charCodeAt(0))>>4&15).toString(16)+(15&p).toString(16)}po.prototype.toString=function(){var p=[],R=this.j;R&&p.push(Ql(R,wg,!0),":");var k=this.g;return(k||"file"==R)&&(p.push("//"),(R=this.o)&&p.push(Ql(R,wg,!0),"@"),p.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(k=this.s)&&p.push(":",String(k))),(k=this.l)&&(this.g&&"/"!=k.charAt(0)&&p.push("/"),p.push(Ql(k,"/"==k.charAt(0)?d_:l_,!0))),(k=this.i.toString())&&p.push("?",k),(k=this.m)&&p.push("#",Ql(k,f_)),p.join("")};var p,wg=/[#\/\?@]/g,l_=/[#\?:]/g,d_=/[#\?]/g,h_=/[#\?@]/g,f_=/#/g;function Yl(p,R){this.h=this.g=null,this.i=p||null,this.j=!!R}function ha(p){p.g||(p.g=new Map,p.h=0,p.i&&function Kl(p,R){if(p){p=p.split("&");for(var k=0;k<p.length;k++){var K=p[k].indexOf("="),Re=null;if(0<=K){var He=p[k].substring(0,K);Re=p[k].substring(K+1)}else He=p[k];R(He,Re?decodeURIComponent(Re.replace(/\+/g," ")):"")}}}(p.i,function(R,k){p.add(decodeURIComponent(R.replace(/\+/g," ")),k)}))}function p_(p,R){ha(p),R=Jl(p,R),p.g.has(R)&&(p.i=null,p.h-=p.g.get(R).length,p.g.delete(R))}function cv(p,R){return ha(p),R=Jl(p,R),p.g.has(R)}function lv(p,R,k){p_(p,R),0<k.length&&(p.i=null,p.g.set(Jl(p,R),pt(k)),p.h+=k.length)}function Jl(p,R){return R=String(R),p.j&&(R=R.toLowerCase()),R}function xc(p,R,k,K,Re){try{Re&&(Re.onload=null,Re.onerror=null,Re.onabort=null,Re.ontimeout=null),K(k)}catch{}}function fv(){this.g=new Qm}function pv(p,R,k){const K=k||"";try{jf(p,function(Re,He){let Rt=Re;N(Re)&&(Rt=Zm(Re)),R.push(K+He+"="+encodeURIComponent(Rt))})}catch(Re){throw R.push(K+"type="+encodeURIComponent("_badmap")),Re}}function hh(p){this.l=p.Ub||null,this.j=p.eb||!1}function Xl(p,R){ts.call(this),this.D=p,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ed(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}function Nc(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Hu(p)}function Hu(p){p.onreadystatechange&&p.onreadystatechange.call(p)}function Ag(p){let R="";return On(p,function(k,K){R+=K,R+=":",R+=k,R+="\r\n"}),R}function Oc(p,R,k){e:{for(K in k){var K=!1;break e}K=!0}K||(k=Ag(k),"string"==typeof p?null!=k&&encodeURIComponent(String(k)):Ir(p,R,k))}function Zr(p){ts.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(a=Yl.prototype).add=function(p,R){ha(this),this.i=null,p=Jl(this,p);var k=this.g.get(p);return k||this.g.set(p,k=[]),k.push(R),this.h+=1,this},a.forEach=function(p,R){ha(this),this.g.forEach(function(k,K){k.forEach(function(Re){p.call(R,Re,K,this)},this)},this)},a.na=function(){ha(this);const p=Array.from(this.g.values()),R=Array.from(this.g.keys()),k=[];for(let K=0;K<R.length;K++){const Re=p[K];for(let He=0;He<Re.length;He++)k.push(R[K])}return k},a.V=function(p){ha(this);let R=[];if("string"==typeof p)cv(this,p)&&(R=R.concat(this.g.get(Jl(this,p))));else{p=Array.from(this.g.values());for(let k=0;k<p.length;k++)R=R.concat(p[k])}return R},a.set=function(p,R){return ha(this),this.i=null,cv(this,p=Jl(this,p))&&(this.h-=this.g.get(p).length),this.g.set(p,[R]),this.h+=1,this},a.get=function(p,R){return p&&0<(p=this.V(p)).length?String(p[0]):R},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],R=Array.from(this.g.keys());for(var k=0;k<R.length;k++){var K=R[k];const He=encodeURIComponent(String(K)),Rt=this.V(K);for(K=0;K<Rt.length;K++){var Re=He;""!==Rt[K]&&(Re+="="+encodeURIComponent(String(Rt[K]))),p.push(Re)}}return this.i=p.join("&")},tt(hh,Of),hh.prototype.g=function(){return new Xl(this.l,this.j)},hh.prototype.i=(p={},function(){return p}),tt(Xl,ts),(a=Xl.prototype).open=function(p,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=R,this.readyState=1,Hu(this)},a.send=function(p){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(R.body=p),(this.D||w).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},a.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Nc(this)),this.readyState=0},a.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Hu(this)),this.g&&(this.readyState=3,Hu(this),this.g)))if("arraybuffer"===this.responseType)p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof w.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ed(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))},a.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var R=p.value?p.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!p.done}))&&(this.response=this.responseText+=R)}p.done?Nc(this):Hu(this),3==this.readyState&&ed(this)}},a.Ra=function(p){this.g&&(this.response=this.responseText=p,Nc(this))},a.Qa=function(p){this.g&&(this.response=p,Nc(this))},a.ga=function(){this.g&&Nc(this)},a.setRequestHeader=function(p,R){this.u.append(p,R)},a.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],R=this.h.entries();for(var k=R.next();!k.done;)p.push((k=k.value)[0]+": "+k[1]),k=R.next();return p.join("\r\n")},Object.defineProperty(Xl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(p){this.m=p?"include":"same-origin"}}),tt(Zr,ts);var gv=/^https?$/i,fh=["POST","PUT"];function g_(p,R){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=R,p.m=5,m_(p),$f(p)}function m_(p){p.A||(p.A=!0,ki(p,"complete"),ki(p,"error"))}function __(p){if(p.h&&typeof g<"u"&&(!p.v[1]||4!=go(p)||2!=p.Z()))if(p.u&&4==go(p))yg(p.Ea,0,p);else if(ki(p,"readystatechange"),4==go(p)){p.h=!1;try{const Rt=p.Z();e:switch(Rt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var k;if(!(k=R)){var K;if(K=0===Rt){var Re=String(p.D).match(Pc)[1]||null;!Re&&w.self&&w.self.location&&(Re=w.self.location.protocol.slice(0,-1)),K=!gv.test(Re?Re.toLowerCase():"")}k=K}if(k)ki(p,"complete"),ki(p,"success");else{p.m=6;try{var He=2<go(p)?p.g.statusText:""}catch{He=""}p.l=He+" ["+p.Z()+"]",m_(p)}}finally{$f(p)}}}function $f(p,R){if(p.g){zf(p);const k=p.g,K=p.v[0]?()=>{}:null;p.g=null,p.v=null,R||ki(p,"ready");try{k.onreadystatechange=K}catch{}}}function zf(p){p.I&&(w.clearTimeout(p.I),p.I=null)}function go(p){return p.g?p.g.readyState:0}function ph(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function gh(p,R,k){return k&&k.internalChannelParams&&k.internalChannelParams[p]||R}function y_(p){this.Aa=0,this.i=[],this.j=new dh,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gh("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gh("baseRetryDelayMs",5e3,p),this.cb=gh("retryDelaySeedMs",1e4,p),this.Wa=gh("forwardChannelMaxRetries",2,p),this.wa=gh("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new a_(p&&p.concurrentRequestLimit),this.Da=new fv,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function mh(p){if(Cg(p),3==p.G){var R=p.U++,k=Ps(p.I);if(Ir(k,"SID",p.K),Ir(k,"RID",R),Ir(k,"TYPE","terminate"),td(p,k),(R=new $u(p,p.j,R)).L=2,R.v=Ja(Ps(k)),k=!1,w.navigator&&w.navigator.sendBeacon)try{k=w.navigator.sendBeacon(R.v.toString(),"")}catch{}!k&&w.Image&&((new Image).src=R.v,k=!0),k||(R.g=Mg(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Ff(R)}_h(p)}function Hf(p){p.g&&(Pg(p),p.g.cancel(),p.g=null)}function Cg(p){Hf(p),p.u&&(w.clearTimeout(p.u),p.u=null),nd(p),p.h.cancel(),p.s&&("number"==typeof p.s&&w.clearTimeout(p.s),p.s=null)}function Wf(p){if(!Uf(p.h)&&!p.s){p.s=!0;var R=p.Ga;Vl||Wm(),nh||(Vl(),nh=!0),cg.add(R,p),p.B=0}}function bg(p,R){var k;k=R?R.l:p.U++;const K=Ps(p.I);Ir(K,"SID",p.K),Ir(K,"RID",k),Ir(K,"AID",p.T),td(p,K),p.m&&p.o&&Oc(K,p.m,p.o),k=new $u(p,p.j,k,p.B+1),null===p.m&&(k.H=p.o),R&&(p.i=R.D.concat(p.i)),R=Sg(p,k,1e3),k.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),Rc(p.h,k),Tg(k,K,R)}function td(p,R){p.H&&On(p.H,function(k,K){Ir(R,K,k)}),p.l&&jf({},function(k,K){Ir(R,K,k)})}function Sg(p,R,k){k=Math.min(p.i.length,k);var K=p.l?ue(p.l.Na,p.l,p):null;e:{var Re=p.i;let He=-1;for(;;){const Rt=["count="+k];-1==He?0<k?(He=Re[0].g,Rt.push("ofs="+He)):He=0:Rt.push("ofs="+He);let Rr=!0;for(let Fi=0;Fi<k;Fi++){let tr=Re[Fi].g;const Vi=Re[Fi].map;if(tr-=He,0>tr)He=Math.max(0,Re[Fi].g-100),Rr=!1;else try{pv(Vi,Rt,"req"+tr+"_")}catch{K&&K(Vi)}}if(Rr){K=Rt.join("&");break e}}}return p=p.i.splice(0,k),R.D=p,K}function v_(p){if(!p.g&&!p.u){p.Y=1;var R=p.Fa;Vl||Wm(),nh||(Vl(),nh=!0),cg.add(R,p),p.v=0}}function Rg(p){return!(p.g||p.u||3<=p.v||(p.Y++,p.u=lh(ue(p.Fa,p),I_(p,p.v)),p.v++,0))}function Pg(p){null!=p.A&&(w.clearTimeout(p.A),p.A=null)}function E_(p){p.g=new $u(p,p.j,"rpc",p.Y),null===p.m&&(p.g.H=p.o),p.g.O=0;var R=Ps(p.qa);Ir(R,"RID","rpc"),Ir(R,"SID",p.K),Ir(R,"AID",p.T),Ir(R,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ir(R,"TO",p.ja),Ir(R,"TYPE","xmlhttp"),td(p,R),p.m&&p.o&&Oc(R,p.m,p.o),p.L&&(p.g.I=p.L);var k=p.g;p=p.ia,k.L=1,k.v=Ja(Ps(R)),k.m=null,k.P=!0,s_(k,p)}function nd(p){null!=p.C&&(w.clearTimeout(p.C),p.C=null)}function Gf(p,R){var k=null;if(p.g==R){nd(p),Pg(p),p.g=null;var K=2}else{if(!ho(p.h,R))return;k=R.D,Li(p.h,R),K=1}if(0!=p.G)if(R.o)if(1==K){k=R.m?R.m.length:0,R=Date.now()-R.F;var Re=p.B;ki(K=uh(),new e_(K,k)),Wf(p)}else v_(p);else if(3==(Re=R.s)||0==Re&&0<R.X||!(1==K&&function mv(p,R){return!(u_(p.h)>=p.h.j-(p.s?1:0)||(p.s?(p.i=R.D.concat(p.i),0):1==p.G||2==p.G||p.B>=(p.Va?0:p.Wa)||(p.s=lh(ue(p.Ga,p,R),I_(p,p.B)),p.B++,0)))}(p,R)||2==K&&Rg(p)))switch(k&&0<k.length&&(R=p.h,R.i=R.i.concat(k)),Re){case 1:fa(p,5);break;case 4:fa(p,10);break;case 3:fa(p,6);break;default:fa(p,2)}}function I_(p,R){let k=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(k*=2),k*R}function fa(p,R){if(p.j.info("Error code "+R),2==R){var k=ue(p.fb,p),K=p.Xa;const Re=!K;K=new po(K||"//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||Qa(K,"https"),Ja(K),Re?function yE(p,R){const k=new dh;if(w.Image){const K=new Image;K.onload=xe(xc,k,"TestLoadImage: loaded",!0,R,K),K.onerror=xe(xc,k,"TestLoadImage: error",!1,R,K),K.onabort=xe(xc,k,"TestLoadImage: abort",!1,R,K),K.ontimeout=xe(xc,k,"TestLoadImage: timeout",!1,R,K),w.setTimeout(function(){K.ontimeout&&K.ontimeout()},1e4),K.src=p}else R(!1)}(K.toString(),k):function hv(p,R){new dh;const K=new AbortController,Re=setTimeout(()=>{K.abort(),xc(0,0,!1,R)},1e4);fetch(p,{signal:K.signal}).then(He=>{clearTimeout(Re),xc(0,0,!!He.ok,R)}).catch(()=>{clearTimeout(Re),xc(0,0,!1,R)})}(K.toString(),k)}else vs(2);p.G=0,p.l&&p.l.sa(R),_h(p),Cg(p)}function _h(p){if(p.G=0,p.ka=[],p.l){const R=zu(p.h);(0!=R.length||0!=p.i.length)&&(ct(p.ka,R),ct(p.ka,p.i),p.h.i.length=0,pt(p.i),p.i.length=0),p.l.ra()}}function qf(p,R,k){var K=k instanceof po?Ps(k):new po(k);if(""!=K.g)R&&(K.g=R+"."+K.g),Ya(K,K.s);else{var Re=w.location;K=Re.protocol,R=R?R+"."+Re.hostname:Re.hostname,Re=+Re.port;var He=new po(null);K&&Qa(He,K),R&&(He.g=R),Re&&Ya(He,Re),k&&(He.l=k),K=He}return R=p.ya,(k=p.D)&&R&&Ir(K,k,R),Ir(K,"VER",p.la),td(p,K),K}function Mg(p,R,k){if(R&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new Zr(p.Ca&&!p.pa?new hh({eb:k}):p.pa)).Ha(p.J),R}function T_(){}function Kf(){}function Zs(p,R){ts.call(this),this.g=new y_(R),this.l=p,this.h=R&&R.messageUrlParams||null,p=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(p?p["X-WebChannel-Content-Type"]=R.messageContentType:p={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(p?p["X-WebChannel-Client-Profile"]=R.va:p={"X-WebChannel-Client-Profile":R.va}),this.g.S=p,(p=R&&R.Sb)&&!Jt(p)&&(this.g.m=p),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Jt(R)&&(this.g.D=R,null!==(p=this.h)&&R in p&&R in(p=this.h)&&delete p[R]),this.j=new kc(this)}function yh(p){kf.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var R=p.__sm__;if(R){e:{for(const k in R){p=k;break e}p=void 0}(this.i=p)&&(p=this.i,R=null!==R&&p in R?R[p]:void 0),this.data=R}else this.data=p}function vh(){bc.call(this),this.status=1}function kc(p){this.g=p}(a=Zr.prototype).Ha=function(p){this.J=p},a.ea=function(p,R,k,K){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);R=R?R.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hl.g(),this.v=function Ym(p){return p.h||(p.h=p.i())}(this.o?this.o:Hl),this.g.onreadystatechange=ue(this.Ea,this);try{this.B=!0,this.g.open(R,String(p),!0),this.B=!1}catch(He){return void g_(this,He)}if(p=k||"",k=new Map(this.headers),K)if(Object.getPrototypeOf(K)===Object.prototype)for(var Re in K)k.set(Re,K[Re]);else{if("function"!=typeof K.keys||"function"!=typeof K.get)throw Error("Unknown input type for opt_headers: "+String(K));for(const He of K.keys())k.set(He,K.get(He))}K=Array.from(k.keys()).find(He=>"content-type"==He.toLowerCase()),Re=w.FormData&&p instanceof w.FormData,!(0<=Array.prototype.indexOf.call(fh,R,void 0))||K||Re||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[He,Rt]of k)this.g.setRequestHeader(He,Rt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zf(this),this.u=!0,this.g.send(p),this.u=!1}catch(He){g_(this,He)}},a.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,ki(this,"complete"),ki(this,"abort"),$f(this))},a.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$f(this,!0)),Zr.aa.N.call(this)},a.Ea=function(){this.s||(this.B||this.u||this.j?__(this):this.bb())},a.bb=function(){__(this)},a.isActive=function(){return!!this.g},a.Z=function(){try{return 2<go(this)?this.g.status:-1}catch{return-1}},a.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},a.Oa=function(p){if(this.g){var R=this.g.responseText;return p&&0==R.indexOf(p)&&(R=R.substring(p.length)),rv(R)}},a.Ba=function(){return this.m},a.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(a=y_.prototype).la=8,a.G=1,a.connect=function(p,R,k,K){vs(0),this.W=p,this.H=R||{},k&&void 0!==K&&(this.H.OSID=k,this.H.OAID=K),this.F=this.X,this.I=qf(this,null,this.W),Wf(this)},a.Ga=function(p){if(this.s)if(this.s=null,1==this.G){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const Re=new $u(this,this.j,p);let He=this.o;if(this.S&&(He?(He=oe(He),Ie(He,this.S)):He=this.S),null!==this.m||this.O||(Re.H=He,He=null),this.P)e:{for(var R=0,k=0;k<this.i.length;k++){var K=this.i[k];if(void 0===(K="__data__"in K.map&&"string"==typeof(K=K.map.__data__)?K.length:void 0))break;if(4096<(R+=K)){R=k;break e}if(4096===R||k===this.i.length-1){R=k+1;break e}}R=1e3}else R=1e3;R=Sg(this,Re,R),Ir(k=Ps(this.I),"RID",p),Ir(k,"CVER",22),this.D&&Ir(k,"X-HTTP-Session-Id",this.D),td(this,k),He&&(this.O?R="headers="+encodeURIComponent(String(Ag(He)))+"&"+R:this.m&&Oc(k,this.m,He)),Rc(this.h,Re),this.Ua&&Ir(k,"TYPE","init"),this.P?(Ir(k,"$req",R),Ir(k,"SID","null"),Re.T=!0,Tg(Re,k,null)):Tg(Re,k,R),this.G=2}}else 3==this.G&&(p?bg(this,p):0==this.i.length||Uf(this.h)||bg(this))},a.Fa=function(){if(this.u=null,E_(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=lh(ue(this.ab,this),p)}},a.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vs(10),Hf(this),E_(this))},a.Za=function(){null!=this.C&&(this.C=null,Hf(this),Rg(this),vs(19))},a.fb=function(p){p?(this.j.info("Successfully pinged google.com"),vs(2)):(this.j.info("Failed to ping google.com"),vs(1))},a.isActive=function(){return!!this.l&&this.l.isActive(this)},(a=T_.prototype).ua=function(){},a.ta=function(){},a.sa=function(){},a.ra=function(){},a.isActive=function(){return!0},a.Na=function(){},Kf.prototype.g=function(p,R){return new Zs(p,R)},tt(Zs,ts),Zs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zs.prototype.close=function(){mh(this.g)},Zs.prototype.o=function(p){var R=this.g;if("string"==typeof p){var k={};k.__data__=p,p=k}else this.u&&((k={}).__data__=Zm(p),p=k);R.i.push(new class{constructor(p,R){this.g=p,this.map=R}}(R.Ya++,p)),3==R.G&&Wf(R)},Zs.prototype.N=function(){this.g.l=null,delete this.j,mh(this.g),delete this.g,Zs.aa.N.call(this)},tt(yh,kf),tt(vh,bc),tt(kc,T_),kc.prototype.ua=function(){ki(this.g,"a")},kc.prototype.ta=function(p){ki(this.g,new yh(p))},kc.prototype.sa=function(p){ki(this.g,new vh)},kc.prototype.ra=function(){ki(this.g,"b")},Kf.prototype.createWebChannel=Kf.prototype.g,Zs.prototype.send=Zs.prototype.o,Zs.prototype.open=Zs.prototype.m,Zs.prototype.close=Zs.prototype.close,wt=re.createWebChannelTransport=function(){return new Kf},Ft=re.getStatEventTarget=function(){return uh()},et=re.Event=Sc,dt=re.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,Ze=re.ErrorCode=zl,n_.COMPLETE="complete",at=re.EventType=n_,Jm.EventType=Bl,Bl.OPEN="a",Bl.CLOSE="b",Bl.ERROR="c",Bl.MESSAGE="d",ts.prototype.listen=ts.prototype.K,qe=re.WebChannel=Jm,Je=re.FetchXmlHttpFactory=hh,Zr.prototype.listenOnce=Zr.prototype.L,Zr.prototype.getLastError=Zr.prototype.Ka,Zr.prototype.getLastErrorCode=Zr.prototype.Ba,Zr.prototype.getStatus=Zr.prototype.Z,Zr.prototype.getResponseJson=Zr.prototype.Oa,Zr.prototype.getResponseText=Zr.prototype.oa,Zr.prototype.send=Zr.prototype.ea,Zr.prototype.setWithCredentials=Zr.prototype.Ha,_e=re.XhrIo=Zr}).apply(typeof ee<"u"?ee:typeof self<"u"?self:typeof window<"u"?window:{});const me="@firebase/firestore";class Ne{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ne.UNAUTHENTICATED=new Ne(null),Ne.GOOGLE_CREDENTIALS=new Ne("google-credentials-uid"),Ne.FIRST_PARTY=new Ne("first-party-uid"),Ne.MOCK_USER=new Ne("mock-user");let we="10.12.5";const Be=new le.Yd("@firebase/firestore");function Qe(){return Be.logLevel}function lt(a){Be.setLogLevel(a)}function ie(a,...e){if(Be.logLevel<=le.in.DEBUG){const r=e.map(ar);Be.debug(`Firestore (${we}): ${a}`,...r)}}function ut(a,...e){if(Be.logLevel<=le.in.ERROR){const r=e.map(ar);Be.error(`Firestore (${we}): ${a}`,...r)}}function Pt(a,...e){if(Be.logLevel<=le.in.WARN){const r=e.map(ar);Be.warn(`Firestore (${we}): ${a}`,...r)}}function ar(a){if("string"==typeof a)return a;try{return JSON.stringify(a)}catch{return a}}function gt(a="Unexpected state"){const e=`FIRESTORE (${we}) INTERNAL ASSERTION FAILED: `+a;throw ut(e),new Error(e)}function ft(a,e){a||gt()}function _t(a,e){a||gt()}function ze(a,e){return a}const he={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends ae.ZR{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ve{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class Ve{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class je{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ne.UNAUTHENTICATED))}shutdown(){}}class We{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Ge{constructor(e){this.t=e,this.currentUser=Ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var s=this;let c=this.i;const h=N=>this.i!==c?(c=this.i,r(N)):Promise.resolve();let g=new ve;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new ve,e.enqueueRetryable(()=>h(this.currentUser))};const w=()=>{const N=g;e.enqueueRetryable((0,_.Z)(function*(){yield N.promise,yield h(s.currentUser)}))},S=N=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=N,this.auth.addAuthTokenListener(this.o),w()};this.t.onInit(N=>S(N)),setTimeout(()=>{if(!this.auth){const N=this.t.getImmediate({optional:!0});N?S(N):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new ve)}},0),w()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ft("string"==typeof s.accessToken),new Ve(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ft(null===e||"string"==typeof e),new Ne(e)}}class Mt{constructor(e,r,s){this.l=e,this.h=r,this.P=s,this.type="FirstParty",this.user=Ne.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yt{constructor(e,r,s){this.l=e,this.h=r,this.P=s}getToken(){return Promise.resolve(new Mt(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vt{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){const s=h=>{null!=h.error&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const g=h.token!==this.R;return this.R=h.token,ie("FirebaseAppCheckTokenProvider",`Received ${g?"new":"existing"} token.`),g?r(h.token):Promise.resolve()};this.o=h=>{e.enqueueRetryable(()=>s(h))};const c=h=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.A.onInit(h=>c(h)),setTimeout(()=>{if(!this.appCheck){const h=this.A.getImmediate({optional:!0});h?c(h):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(ft("string"==typeof r.token),this.R=r.token,new qn(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function qt(a){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(a);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let s=0;s<a;s++)r[s]=Math.floor(256*Math.random());return r}class zr{static newId(){const r=62*Math.floor(256/62);let s="";for(;s.length<20;){const c=qt(40);for(let h=0;h<c.length;++h)s.length<20&&c[h]<r&&(s+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(c[h]%62))}return s}}function Et(a,e){return a<e?-1:a>e?1:0}function yn(a,e,r){return a.length===e.length&&a.every((s,c)=>r(s,e[c]))}function Cn(a){return a+"\0"}class mt{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Z(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Z(he.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Z(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(he.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*r));return new mt(r,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Et(this.nanoseconds,e.nanoseconds):Et(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new mt(0,0))}static max(){return new vt(new mt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hr{constructor(e,r,s){void 0===r?r=0:r>e.length&&gt(),void 0===s?s=e.length-r:s>e.length-r&&gt(),this.segments=e,this.offset=r,this.len=s}get length(){return this.len}isEqual(e){return 0===Hr.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Hr?e.forEach(s=>{r.push(s)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,s=this.limit();r<s;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const s=Math.min(e.length,r.length);for(let c=0;c<s;c++){const h=e.get(c),g=r.get(c);if(h<g)return-1;if(h>g)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class $t extends Hr{construct(e,r,s){return new $t(e,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const s of e){if(s.indexOf("//")>=0)throw new Z(he.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(c=>c.length>0))}return new $t(r)}static emptyPath(){return new $t([])}}const Wr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rn extends Hr{construct(e,r,s){return new rn(e,r,s)}static isValidIdentifier(e){return Wr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rn(["__name__"])}static fromServerFormat(e){const r=[];let s="",c=0;const h=()=>{if(0===s.length)throw new Z(he.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let g=!1;for(;c<e.length;){const w=e[c];if("\\"===w){if(c+1===e.length)throw new Z(he.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[c+1];if("\\"!==S&&"."!==S&&"`"!==S)throw new Z(he.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=S,c+=2}else"`"===w?(g=!g,c++):"."!==w||g?(s+=w,c++):(h(),c++)}if(h(),g)throw new Z(he.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rn(r)}static emptyPath(){return new rn([])}}class it{constructor(e){this.path=e}static fromPath(e){return new it($t.fromString(e))}static fromName(e){return new it($t.fromString(e).popFirst(5))}static empty(){return new it($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return $t.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new it(new $t(e.slice()))}}class Ut{constructor(e,r,s,c){this.indexId=e,this.collectionGroup=r,this.fields=s,this.indexState=c}}function Kt(a){return a.fields.find(e=>2===e.kind)}function Bt(a){return a.fields.filter(e=>2!==e.kind)}Ut.UNKNOWN_ID=-1;class zn{constructor(e,r){this.fieldPath=e,this.kind=r}}class Dn{constructor(e,r){this.sequenceNumber=e,this.offset=r}static empty(){return new Dn(0,Ct.min())}}function Tr(a,e){const r=a.toTimestamp().seconds,s=a.toTimestamp().nanoseconds+1,c=vt.fromTimestamp(1e9===s?new mt(r+1,0):new mt(r,s));return new Ct(c,it.empty(),e)}function Gr(a){return new Ct(a.readTime,a.key,-1)}class Ct{constructor(e,r,s){this.readTime=e,this.documentKey=r,this.largestBatchId=s}static min(){return new Ct(vt.min(),it.empty(),-1)}static max(){return new Ct(vt.max(),it.empty(),-1)}}function Pr(a,e){let r=a.readTime.compareTo(e.readTime);return 0!==r?r:(r=it.comparator(a.documentKey,e.documentKey),0!==r?r:Et(a.largestBatchId,e.largestBatchId))}const cn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Oe(a){return xt.apply(this,arguments)}function xt(){return(xt=(0,_.Z)(function*(a){if(a.code!==he.FAILED_PRECONDITION||a.message!==cn)throw a;ie("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new te((s,c)=>{this.nextCallback=h=>{this.wrapSuccess(e,h).next(s,c)},this.catchCallback=h=>{this.wrapFailure(r,h).next(s,c)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof te?r:te.resolve(r)}catch(r){return te.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):te.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):te.reject(r)}static resolve(e){return new te((r,s)=>{r(e)})}static reject(e){return new te((r,s)=>{s(e)})}static waitFor(e){return new te((r,s)=>{let c=0,h=0,g=!1;e.forEach(w=>{++c,w.next(()=>{++h,g&&h===c&&r()},S=>s(S))}),g=!0,h===c&&r()})}static or(e){let r=te.resolve(!1);for(const s of e)r=r.next(c=>c?te.resolve(c):s());return r}static forEach(e,r){const s=[];return e.forEach((c,h)=>{s.push(r.call(this,c,h))}),this.waitFor(s)}static mapArray(e,r){return new te((s,c)=>{const h=e.length,g=new Array(h);let w=0;for(let S=0;S<h;S++){const N=S;r(e[N]).next(z=>{g[N]=z,++w,w===h&&s(g)},z=>c(z))}})}static doWhile(e,r){return new te((s,c)=>{const h=()=>{!0===e()?r().next(()=>{h()},c):s()};h()})}}class Dt{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.V=new ve,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{r.error?this.V.reject(new Hn(e,r.error)):this.V.resolve()},this.transaction.onerror=s=>{const c=W(s.target.error);this.V.reject(new Hn(e,c))}}static open(e,r,s,c){try{return new Dt(r,e.transaction(c,s))}catch(h){throw new Hn(r,h)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ie("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const r=this.transaction.objectStore(e);return new qr(r)}}class jt{constructor(e,r,s){this.name=e,this.version=r,this.p=s,12.2===jt.S((0,ae.z$)())&&ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ie("SimpleDb","Removing database:",e),ur(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ae.hl)())return!1;if(jt.C())return!0;const e=(0,ae.z$)(),r=jt.S(e),s=0<r&&r<10,c=sn(e),h=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||h)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static F(e,r){return e.store(r)}static S(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(s)}M(e){var r=this;return(0,_.Z)(function*(){return r.db||(ie("SimpleDb","Opening database:",r.name),r.db=yield new Promise((s,c)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=g=>{s(g.target.result)},h.onblocked=()=>{c(new Hn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=g=>{const w=g.target.error;c("VersionError"===w.name?new Z(he.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===w.name?new Z(he.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+w):new Hn(e,w))},h.onupgradeneeded=g=>{ie("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',g.oldVersion),r.p.O(g.target.result,h.transaction,g.oldVersion,r.version).next(()=>{ie("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.N&&(r.db.onversionchange=s=>r.N(s)),r.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,s,c){var h=this;return(0,_.Z)(function*(){const g="readonly"===r;let w=0;for(;;){++w;try{h.db=yield h.M(e);const S=Dt.open(h.db,e,g?"readonly":"readwrite",s),N=c(S).next(z=>(S.g(),z)).catch(z=>(S.abort(z),te.reject(z))).toPromise();return N.catch(()=>{}),yield S.m,N}catch(S){const N=S,z="FirebaseError"!==N.name&&w<3;if(ie("SimpleDb","Transaction failed with error:",N.message,"Retrying:",z),h.close(),!z)return Promise.reject(N)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function sn(a){const e=a.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}class on{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ur(this.B.delete())}}class Hn extends Z{constructor(e,r){super(he.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Kn(a){return"IndexedDbTransactionError"===a.name}class qr{constructor(e){this.store=e}put(e,r){let s;return void 0!==r?(ie("SimpleDb","PUT",this.store.name,e,r),s=this.store.put(r,e)):(ie("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ur(s)}add(e){return ie("SimpleDb","ADD",this.store.name,e,e),ur(this.store.add(e))}get(e){return ur(this.store.get(e)).next(r=>(void 0===r&&(r=null),ie("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return ie("SimpleDb","DELETE",this.store.name,e),ur(this.store.delete(e))}count(){return ie("SimpleDb","COUNT",this.store.name),ur(this.store.count())}U(e,r){const s=this.options(e,r),c=s.index?this.store.index(s.index):this.store;if("function"==typeof c.getAll){const h=c.getAll(s.range);return new te((g,w)=>{h.onerror=S=>{w(S.target.error)},h.onsuccess=S=>{g(S.target.result)}})}{const h=this.cursor(s),g=[];return this.W(h,(w,S)=>{g.push(S)}).next(()=>g)}}G(e,r){const s=this.store.getAll(e,null===r?void 0:r);return new te((c,h)=>{s.onerror=g=>{h(g.target.error)},s.onsuccess=g=>{c(g.target.result)}})}j(e,r){ie("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,r);s.H=!1;const c=this.cursor(s);return this.W(c,(h,g,w)=>w.delete())}J(e,r){let s;r?s=e:(s={},r=e);const c=this.cursor(s);return this.W(c,r)}Y(e){const r=this.cursor({});return new te((s,c)=>{r.onerror=h=>{const g=W(h.target.error);c(g)},r.onsuccess=h=>{const g=h.target.result;g?e(g.primaryKey,g.value).next(w=>{w?g.continue():s()}):s()}})}W(e,r){const s=[];return new te((c,h)=>{e.onerror=g=>{h(g.target.error)},e.onsuccess=g=>{const w=g.target.result;if(!w)return void c();const S=new on(w),N=r(w.primaryKey,w.value,S);if(N instanceof te){const z=N.catch(Q=>(S.done(),te.reject(Q)));s.push(z)}S.isDone?c():null===S.K?w.continue():w.continue(S.K)}}).next(()=>te.waitFor(s))}options(e,r){let s;return void 0!==e&&("string"==typeof e?s=e:r=e),{index:s,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,r):s.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function ur(a){return new te((e,r)=>{a.onsuccess=s=>{e(s.target.result)},a.onerror=s=>{const c=W(s.target.error);r(c)}})}let Xr=!1;function W(a){const e=jt.S((0,ae.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(a.message.indexOf(r)>=0){const s=new Z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xr||(Xr=!0,setTimeout(()=>{throw s},0)),s}}return a}class B{constructor(e,r){this.asyncQueue=e,this.Z=r,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var r=this;ie("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,_.Z)(function*(){r.task=null;try{ie("IndexBackfiller",`Documents written: ${yield r.Z.ee()}`)}catch(s){Kn(s)?ie("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",s):yield Oe(s)}yield r.X(6e4)}))}}class V{constructor(e,r){this.localStore=e,this.persistence=r}ee(e=50){var r=this;return(0,_.Z)(function*(){return r.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>r.te(s,e))})()}te(e,r){const s=new Set;let c=r,h=!0;return te.doWhile(()=>!0===h&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(g=>{if(null!==g&&!s.has(g))return ie("IndexBackfiller",`Processing collection: ${g}`),this.ne(e,g,c).next(w=>{c-=w,s.add(g)});h=!1})).next(()=>r-c)}ne(e,r,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,r).next(c=>this.localStore.localDocuments.getNextDocuments(e,r,c,s).next(h=>{const g=h.changes;return this.localStore.indexManager.updateIndexEntries(e,g).next(()=>this.re(c,h)).next(w=>(ie("IndexBackfiller",`Updating offset: ${w}`),this.localStore.indexManager.updateCollectionGroup(e,r,w))).next(()=>g.size)}))}re(e,r){let s=e;return r.changes.forEach((c,h)=>{const g=Gr(h);Pr(g,s)>0&&(s=g)}),new Ct(s.readTime,s.documentKey,Math.max(r.batchId,e.largestBatchId))}}let q=(()=>{class a{constructor(r,s){this.previousValue=r,s&&(s.sequenceNumberHandler=c=>this.ie(c),this.se=c=>s.writeSequenceNumber(c))}ie(r){return this.previousValue=Math.max(r,this.previousValue),this.previousValue}next(){const r=++this.previousValue;return this.se&&this.se(r),r}}return a.oe=-1,a})();function J(a){return null==a}function $e(a){return 0===a&&1/a==-1/0}function st(a){return"number"==typeof a&&Number.isInteger(a)&&!$e(a)&&a<=Number.MAX_SAFE_INTEGER&&a>=Number.MIN_SAFE_INTEGER}function It(a){let e="";for(let r=0;r<a.length;r++)e.length>0&&(e=kt(e)),e=Xt(a.get(r),e);return kt(e)}function Xt(a,e){let r=e;const s=a.length;for(let c=0;c<s;c++){const h=a.charAt(c);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function kt(a){return a+"\x01\x01"}function mn(a){const e=a.length;if(ft(e>=2),2===e)return ft("\x01"===a.charAt(0)&&"\x01"===a.charAt(1)),$t.emptyPath();const r=e-2,s=[];let c="";for(let h=0;h<e;){const g=a.indexOf("\x01",h);switch((g<0||g>r)&&gt(),a.charAt(g+1)){case"\x01":const w=a.substring(h,g);let S;0===c.length?S=w:(c+=w,S=c,c=""),s.push(S);break;case"\x10":c+=a.substring(h,g),c+="\0";break;case"\x11":c+=a.substring(h,g+1);break;default:gt()}h=g+2}return new $t(s)}const en=["userId","batchId"];function cr(a,e){return[a,It(e)]}function fr(a,e,r){return[a,It(e),r]}const ai={},ji=["prefixPath","collectionGroup","readTime","documentId"],Mr=["prefixPath","collectionGroup","documentId"],Es=["collectionGroup","readTime","prefixPath","documentId"],wi=["canonicalId","targetId"],Dr=["targetId","path"],wn=["path","targetId"],Ue=["collectionId","parent"],De=["indexId","uid"],Ke=["uid","sequenceNumber"],At=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ht=["indexId","uid","orderedDocumentKey"],Zt=["userId","collectionPath","documentId"],fn=["userId","collectionPath","largestBatchId"],Xn=["userId","collectionGroup","largestBatchId"],Wn=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ei=[...Wn,"documentOverlays"],ns=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$n=ns,Ms=[...$n,"indexConfiguration","indexState","indexEntries"],rs=Ms,nu=[...Ms,"globals"];class Is extends hr{constructor(e,r){super(),this._e=e,this.currentSequenceNumber=r}}function Lr(a,e){const r=ze(a);return jt.F(r._e,e)}function vo(a){let e=0;for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e++;return e}function xr(a,e){for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&e(r,a[r])}function mi(a){for(const e in a)if(Object.prototype.hasOwnProperty.call(a,e))return!1;return!0}class Qn{constructor(e,r){this.comparator=e,this.root=r||Nr.EMPTY}insert(e,r){return new Qn(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(e){let r=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return r+s.left.size;c<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,s)=>(e(r,s),!1))}toString(){const e=[];return this.inorderTraversal((r,s)=>(e.push(`${r}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fi(this.root,e,this.comparator,!1)}getReverseIterator(){return new fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fi(this.root,e,this.comparator,!0)}}class fi{constructor(e,r,s,c){this.isReverse=c,this.nodeStack=[];let h=1;for(;!e.isEmpty();)if(h=r?s(e.key,r):1,r&&c&&(h*=-1),h<0)e=this.isReverse?e.left:e.right;else{if(0===h){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,r,s,c,h){this.key=e,this.value=r,this.color=s??Nr.RED,this.left=c??Nr.EMPTY,this.right=h??Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,s,c,h){return new Nr(e??this.key,r??this.value,s??this.color,c??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,s){let c=this;const h=s(e,c.key);return c=h<0?c.copy(null,null,null,c.left.insert(e,r,s),null):0===h?c.copy(null,r,null,null,null):c.copy(null,null,null,null,c.right.insert(e,r,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let s,c=this;if(r(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,r),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===r(e,c.key)){if(c.right.isEmpty())return Nr.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,r))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(e,r,s,c,h){return this}insert(e,r,s){return new Nr(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Pn{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,s)=>(e(r),!1))}forEachInRange(e,r){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;r(c.key)}}forEachWhile(e,r){let s;for(s=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new is(this.data.getIterator())}getIteratorFrom(e){return new is(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(s=>{r=r.add(s)}),r}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),s=e.data.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=s.getNext().key;if(0!==this.comparator(c,h))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pn(this.comparator);return r.data=e,r}}class is{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ts(a){return a.hasNext()?a.getNext():void 0}class pr{constructor(e){this.fields=e,e.sort(rn.comparator)}static empty(){return new pr([])}unionWith(e){let r=new Pn(rn.comparator);for(const s of this.fields)r=r.add(s);for(const s of e)r=r.add(s);return new pr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yn(this.fields,e.fields,(r,s)=>r.isEqual(s))}}class jo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function ru(){return typeof atob<"u"}class Sr{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(c){try{return atob(c)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new jo("Invalid base64 string: "+h):h}}(e);return new Sr(r)}static fromUint8Array(e){const r=function(c){let h="";for(let g=0;g<c.length;++g)h+=String.fromCharCode(c[g]);return h}(e);return new Sr(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let c=0;c<r.length;c++)s[c]=r.charCodeAt(c);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Et(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sr.EMPTY_BYTE_STRING=new Sr("");const iu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $i(a){if(ft(!!a),"string"==typeof a){let e=0;const r=iu.exec(a);if(ft(!!r),r[1]){let c=r[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(a);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:gr(a.seconds),nanos:gr(a.nanos)}}function gr(a){return"number"==typeof a?a:"string"==typeof a?Number(a):0}function zi(a){return"string"==typeof a?Sr.fromBase64String(a):Sr.fromUint8Array(a)}function Eo(a){var e,r;return"server_timestamp"===(null===(r=((null===(e=a?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Hi(a){const e=a.mapValue.fields.__previous_value__;return Eo(e)?Hi(e):e}function Ds(a){const e=$i(a.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}class In{constructor(e,r,s,c,h,g,w,S,N){this.databaseId=e,this.appId=r,this.persistenceKey=s,this.host=c,this.ssl=h,this.forceLongPolling=g,this.autoDetectLongPolling=w,this.longPollingOptions=S,this.useFetchStreams=N}}class nr{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new nr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nr&&e.projectId===this.projectId&&e.database===this.database}}const wr={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ss={nullValue:"NULL_VALUE"};function rr(a){return"nullValue"in a?0:"booleanValue"in a?1:"integerValue"in a||"doubleValue"in a?2:"timestampValue"in a?3:"stringValue"in a?5:"bytesValue"in a?6:"referenceValue"in a?7:"geoPointValue"in a?8:"arrayValue"in a?9:"mapValue"in a?Eo(a)?4:qi(a)?9007199254740991:10:gt()}function _i(a,e){if(a===e)return!0;const r=rr(a);if(r!==rr(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return a.booleanValue===e.booleanValue;case 4:return Ds(a).isEqual(Ds(e));case 3:return function(c,h){if("string"==typeof c.timestampValue&&"string"==typeof h.timestampValue&&c.timestampValue.length===h.timestampValue.length)return c.timestampValue===h.timestampValue;const g=$i(c.timestampValue),w=$i(h.timestampValue);return g.seconds===w.seconds&&g.nanos===w.nanos}(a,e);case 5:return a.stringValue===e.stringValue;case 6:return h=e,zi(a.bytesValue).isEqual(zi(h.bytesValue));case 7:return a.referenceValue===e.referenceValue;case 8:return function(c,h){return gr(c.geoPointValue.latitude)===gr(h.geoPointValue.latitude)&&gr(c.geoPointValue.longitude)===gr(h.geoPointValue.longitude)}(a,e);case 2:return function(c,h){if("integerValue"in c&&"integerValue"in h)return gr(c.integerValue)===gr(h.integerValue);if("doubleValue"in c&&"doubleValue"in h){const g=gr(c.doubleValue),w=gr(h.doubleValue);return g===w?$e(g)===$e(w):isNaN(g)&&isNaN(w)}return!1}(a,e);case 9:return yn(a.arrayValue.values||[],e.arrayValue.values||[],_i);case 10:return function(c,h){const g=c.mapValue.fields||{},w=h.mapValue.fields||{};if(vo(g)!==vo(w))return!1;for(const S in g)if(g.hasOwnProperty(S)&&(void 0===w[S]||!_i(g[S],w[S])))return!1;return!0}(a,e);default:return gt()}var h}function Wi(a,e){return void 0!==(a.values||[]).find(r=>_i(r,e))}function pi(a,e){if(a===e)return 0;const r=rr(a),s=rr(e);if(r!==s)return Et(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return Et(a.booleanValue,e.booleanValue);case 2:return function(h,g){const w=gr(h.integerValue||h.doubleValue),S=gr(g.integerValue||g.doubleValue);return w<S?-1:w>S?1:w===S?0:isNaN(w)?isNaN(S)?0:-1:1}(a,e);case 3:return yi(a.timestampValue,e.timestampValue);case 4:return yi(Ds(a),Ds(e));case 5:return Et(a.stringValue,e.stringValue);case 6:return function(h,g){const w=zi(h),S=zi(g);return w.compareTo(S)}(a.bytesValue,e.bytesValue);case 7:return function(h,g){const w=h.split("/"),S=g.split("/");for(let N=0;N<w.length&&N<S.length;N++){const z=Et(w[N],S[N]);if(0!==z)return z}return Et(w.length,S.length)}(a.referenceValue,e.referenceValue);case 8:return function(h,g){const w=Et(gr(h.latitude),gr(g.latitude));return 0!==w?w:Et(gr(h.longitude),gr(g.longitude))}(a.geoPointValue,e.geoPointValue);case 9:return function(h,g){const w=h.values||[],S=g.values||[];for(let N=0;N<w.length&&N<S.length;++N){const z=pi(w[N],S[N]);if(z)return z}return Et(w.length,S.length)}(a.arrayValue,e.arrayValue);case 10:return function(h,g){if(h===wr.mapValue&&g===wr.mapValue)return 0;if(h===wr.mapValue)return 1;if(g===wr.mapValue)return-1;const w=h.fields||{},S=Object.keys(w),N=g.fields||{},z=Object.keys(N);S.sort(),z.sort();for(let Q=0;Q<S.length&&Q<z.length;++Q){const ue=Et(S[Q],z[Q]);if(0!==ue)return ue;const xe=pi(w[S[Q]],N[z[Q]]);if(0!==xe)return xe}return Et(S.length,z.length)}(a.mapValue,e.mapValue);default:throw gt()}}function yi(a,e){if("string"==typeof a&&"string"==typeof e&&a.length===e.length)return Et(a,e);const r=$i(a),s=$i(e),c=Et(r.seconds,s.seconds);return 0!==c?c:Et(r.nanos,s.nanos)}function ti(a){return er(a)}function er(a){return"nullValue"in a?"null":"booleanValue"in a?""+a.booleanValue:"integerValue"in a?""+a.integerValue:"doubleValue"in a?""+a.doubleValue:"timestampValue"in a?function(r){const s=$i(r);return`time(${s.seconds},${s.nanos})`}(a.timestampValue):"stringValue"in a?a.stringValue:"bytesValue"in a?zi(a.bytesValue).toBase64():"referenceValue"in a?it.fromName(a.referenceValue).toString():"geoPointValue"in a?function(r){return`geo(${r.latitude},${r.longitude})`}(a.geoPointValue):"arrayValue"in a?function(r){let s="[",c=!0;for(const h of r.values||[])c?c=!1:s+=",",s+=er(h);return s+"]"}(a.arrayValue):"mapValue"in a?function(r){const s=Object.keys(r.fields||{}).sort();let c="{",h=!0;for(const g of s)h?h=!1:c+=",",c+=`${g}:${er(r.fields[g])}`;return c+"}"}(a.mapValue):gt()}function Qt(a,e){return{referenceValue:`projects/${a.projectId}/databases/${a.database}/documents/${e.path.canonicalString()}`}}function Ln(a){return!!a&&"integerValue"in a}function Fr(a){return!!a&&"arrayValue"in a}function Io(a){return!!a&&"nullValue"in a}function Or(a){return!!a&&"doubleValue"in a&&isNaN(Number(a.doubleValue))}function Gi(a){return!!a&&"mapValue"in a}function Gn(a){if(a.geoPointValue)return{geoPointValue:Object.assign({},a.geoPointValue)};if(a.timestampValue&&"object"==typeof a.timestampValue)return{timestampValue:Object.assign({},a.timestampValue)};if(a.mapValue){const e={mapValue:{fields:{}}};return xr(a.mapValue.fields,(r,s)=>e.mapValue.fields[r]=Gn(s)),e}if(a.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(a.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Gn(a.arrayValue.values[r]);return e}return Object.assign({},a)}function qi(a){return"__max__"===(((a.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ki(a){return"nullValue"in a?ss:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?Qt(nr.empty(),it.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?{mapValue:{}}:gt()}function tn(a){return"nullValue"in a?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?Qt(nr.empty(),it.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?{mapValue:{}}:"mapValue"in a?wr:gt()}function Zi(a,e){const r=pi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?-1:!a.inclusive&&e.inclusive?1:0}function Ns(a,e){const r=pi(a.value,e.value);return 0!==r?r:a.inclusive&&!e.inclusive?1:!a.inclusive&&e.inclusive?-1:0}class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let s=0;s<e.length-1;++s)if(r=(r.mapValue.fields||{})[e.get(s)],!Gi(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gn(r)}setAll(e){let r=rn.emptyPath(),s={},c=[];e.forEach((g,w)=>{if(!r.isImmediateParentOf(w)){const S=this.getFieldsMap(r);this.applyChanges(S,s,c),s={},c=[],r=w.popLast()}g?s[w.lastSegment()]=Gn(g):c.push(w.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,s,c)}delete(e){const r=this.field(e.popLast());Gi(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return _i(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=r.mapValue.fields[e.get(s)];Gi(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},r.mapValue.fields[e.get(s)]=c),r=c}return r.mapValue.fields}applyChanges(e,r,s){xr(r,(c,h)=>e[c]=h);for(const c of s)delete e[c]}clone(){return new Un(Gn(this.value))}}function mr(a){const e=[];return xr(a.fields,(r,s)=>{const c=new rn([r]);if(Gi(s)){const h=mr(s.mapValue).fields;if(0===h.length)e.push(c);else for(const g of h)e.push(c.child(g))}else e.push(c)}),new pr(e)}class Yn{constructor(e,r,s,c,h,g,w){this.key=e,this.documentType=r,this.version=s,this.readTime=c,this.createTime=h,this.data=g,this.documentState=w}static newInvalidDocument(e){return new Yn(e,0,vt.min(),vt.min(),vt.min(),Un.empty(),0)}static newFoundDocument(e,r,s,c){return new Yn(e,1,r,vt.min(),s,c,0)}static newNoDocument(e,r){return new Yn(e,2,r,vt.min(),vt.min(),Un.empty(),0)}static newUnknownDocument(e,r){return new Yn(e,3,r,vt.min(),vt.min(),Un.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class ir{constructor(e,r){this.position=e,this.inclusive=r}}function Ai(a,e,r){let s=0;for(let c=0;c<a.position.length;c++){const h=e[c],g=a.position[c];if(s=h.field.isKeyField()?it.comparator(it.fromName(g.referenceValue),r.key):pi(g,r.data.field(h.field)),"desc"===h.dir&&(s*=-1),0!==s)break}return s}function ws(a,e){if(null===a)return null===e;if(null===e||a.inclusive!==e.inclusive||a.position.length!==e.position.length)return!1;for(let r=0;r<a.position.length;r++)if(!_i(a.position[r],e.position[r]))return!1;return!0}class Os{constructor(e,r="asc"){this.field=e,this.dir=r}}function Ci(a,e){return a.dir===e.dir&&a.field.isEqual(e.field)}class Qi{}class un extends Qi{constructor(e,r,s){super(),this.field=e,this.op=r,this.value=s}static create(e,r,s){return e.isKeyField()?"in"===r||"not-in"===r?this.createKeyFieldInFilter(e,r,s):new _r(e,r,s):"array-contains"===r?new pa(e,s):"in"===r?new Si(e,s):"not-in"===r?new su(e,s):"array-contains-any"===r?new Qr(e,s):new un(e,r,s)}static createKeyFieldInFilter(e,r,s){return"in"===r?new zo(e,s):new Vr(e,s)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.matchesComparison(pi(r,this.value)):null!==r&&rr(this.value)===rr(r)&&this.matchesComparison(pi(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fn extends Qi{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new Fn(e,r)}matches(e){return ln(this)?void 0===this.filters.find(r=>!r.matches(e)):void 0!==this.filters.find(r=>r.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ln(a){return"and"===a.op}function $o(a){return"or"===a.op}function Yi(a){return To(a)&&ln(a)}function To(a){for(const e of a.filters)if(e instanceof Fn)return!1;return!0}function bi(a){if(a instanceof un)return a.field.canonicalString()+a.op.toString()+ti(a.value);if(Yi(a))return a.filters.map(e=>bi(e)).join(",");{const e=a.filters.map(r=>bi(r)).join(",");return`${a.op}(${e})`}}function ks(a,e){return a instanceof un?(s=a,(c=e)instanceof un&&s.op===c.op&&s.field.isEqual(c.field)&&_i(s.value,c.value)):a instanceof Fn?function(s,c){return c instanceof Fn&&s.op===c.op&&s.filters.length===c.filters.length&&s.filters.reduce((h,g,w)=>h&&ks(g,c.filters[w]),!0)}(a,e):void gt();var s,c}function Ys(a,e){const r=a.filters.concat(e);return Fn.create(r,a.op)}function Ls(a){return a instanceof un?`${(r=a).field.canonicalString()} ${r.op} ${ti(r.value)}`:a instanceof Fn?function(r){return r.op.toString()+" {"+r.getFilters().map(Ls).join(" ,")+"}"}(a):"Filter";var r}class _r extends un{constructor(e,r,s){super(e,r,s),this.key=it.fromName(s.referenceValue)}matches(e){const r=it.comparator(e.key,this.key);return this.matchesComparison(r)}}class zo extends un{constructor(e,r){super(e,"in",r),this.keys=sr(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class Vr extends un{constructor(e,r){super(e,"not-in",r),this.keys=sr(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function sr(a,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(s=>it.fromName(s.referenceValue))}class pa extends un{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Fr(r)&&Wi(r.arrayValue,this.value)}}class Si extends un{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Wi(this.value.arrayValue,r)}}class su extends un{constructor(e,r){super(e,"not-in",r)}matches(e){if(Wi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Wi(this.value.arrayValue,r)}}class Qr extends un{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Fr(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>Wi(this.value.arrayValue,s))}}class ga{constructor(e,r=null,s=[],c=[],h=null,g=null,w=null){this.path=e,this.collectionGroup=r,this.orderBy=s,this.filters=c,this.limit=h,this.startAt=g,this.endAt=w,this.ue=null}}function Fs(a,e=null,r=[],s=[],c=null,h=null,g=null){return new ga(a,e,r,s,c,h,g)}function os(a){const e=ze(a);if(null===e.ue){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(s=>bi(s)).join(","),r+="|ob:",r+=e.orderBy.map(s=>{return(h=s).field.canonicalString()+h.dir;var h}).join(","),J(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(s=>ti(s)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(s=>ti(s)).join(",")),e.ue=r}return e.ue}function Ho(a,e){if(a.limit!==e.limit||a.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<a.orderBy.length;r++)if(!Ci(a.orderBy[r],e.orderBy[r]))return!1;if(a.filters.length!==e.filters.length)return!1;for(let r=0;r<a.filters.length;r++)if(!ks(a.filters[r],e.filters[r]))return!1;return a.collectionGroup===e.collectionGroup&&!!a.path.isEqual(e.path)&&!!ws(a.startAt,e.startAt)&&ws(a.endAt,e.endAt)}function Js(a){return it.isDocumentKey(a.path)&&null===a.collectionGroup&&0===a.filters.length}function Ur(a,e){return a.filters.filter(r=>r instanceof un&&r.field.isEqual(e))}function Xs(a,e,r){let s=ss,c=!0;for(const h of Ur(a,e)){let g=ss,w=!0;switch(h.op){case"<":case"<=":g=Ki(h.value);break;case"==":case"in":case">=":g=h.value;break;case">":g=h.value,w=!1;break;case"!=":case"not-in":g=ss}Zi({value:s,inclusive:c},{value:g,inclusive:w})<0&&(s=g,c=w)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const g=r.position[h];Zi({value:s,inclusive:c},{value:g,inclusive:r.inclusive})<0&&(s=g,c=r.inclusive);break}return{value:s,inclusive:c}}function Vc(a,e,r){let s=wr,c=!0;for(const h of Ur(a,e)){let g=wr,w=!0;switch(h.op){case">=":case">":g=tn(h.value),w=!1;break;case"==":case"in":case"<=":g=h.value;break;case"<":g=h.value,w=!1;break;case"!=":case"not-in":g=wr}Ns({value:s,inclusive:c},{value:g,inclusive:w})>0&&(s=g,c=w)}if(null!==r)for(let h=0;h<a.orderBy.length;++h)if(a.orderBy[h].field.isEqual(e)){const g=r.position[h];Ns({value:s,inclusive:c},{value:g,inclusive:r.inclusive})>0&&(s=g,c=r.inclusive);break}return{value:s,inclusive:c}}class as{constructor(e,r=null,s=[],c=[],h=null,g="F",w=null,S=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=c,this.limit=h,this.limitType=g,this.startAt=w,this.endAt=S,this.ce=null,this.le=null,this.he=null}}function Zn(a,e,r,s,c,h,g,w){return new as(a,e,r,s,c,h,g,w)}function us(a){return new as(a)}function Gu(a){return 0===a.filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())}function qu(a){return null!==a.collectionGroup}function eo(a){const e=ze(a);if(null===e.ce){e.ce=[];const r=new Set;for(const h of e.explicitOrderBy)e.ce.push(h),r.add(h.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(g){let w=new Pn(rn.comparator);return g.filters.forEach(S=>{S.getFlattenedFilters().forEach(N=>{N.isInequality()&&(w=w.add(N.field))})}),w})(e).forEach(h=>{r.has(h.canonicalString())||h.isKeyField()||e.ce.push(new Os(h,s))}),r.has(rn.keyField().canonicalString())||e.ce.push(new Os(rn.keyField(),s))}return e.ce}function Yr(a){const e=ze(a);return e.le||(e.le=function ma(a,e){if("F"===a.limitType)return Fs(a.path,a.collectionGroup,e,a.filters,a.limit,a.startAt,a.endAt);{e=e.map(c=>new Os(c.field,"desc"===c.dir?"asc":"desc"));const r=a.endAt?new ir(a.endAt.position,a.endAt.inclusive):null,s=a.startAt?new ir(a.startAt.position,a.startAt.inclusive):null;return Fs(a.path,a.collectionGroup,e,a.filters,a.limit,r,s)}}(e,eo(a))),e.le}function _a(a,e){const r=a.filters.concat([e]);return new as(a.path,a.collectionGroup,a.explicitOrderBy.slice(),r,a.limit,a.limitType,a.startAt,a.endAt)}function Do(a,e,r){return new as(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),e,r,a.startAt,a.endAt)}function As(a,e){return Ho(Yr(a),Yr(e))&&a.limitType===e.limitType}function Wo(a){return`${os(Yr(a))}|lt:${a.limitType}`}function gi(a){return`Query(target=${function(r){let s=r.path.canonicalString();return null!==r.collectionGroup&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(c=>Ls(c)).join(", ")}]`),J(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(c=>{return`${(g=c).field.canonicalString()} (${g.dir})`;var g}).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(c=>ti(c)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(c=>ti(c)).join(",")),`Target(${s})`}(Yr(a))}; limitType=${a.limitType})`}function Vs(a,e){return e.isFoundDocument()&&function(s,c){const h=c.key.path;return null!==s.collectionGroup?c.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):it.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(a,e)&&function(s,c){for(const h of eo(s))if(!h.field.isKeyField()&&null===c.data.field(h.field))return!1;return!0}(a,e)&&function(s,c){for(const h of s.filters)if(!h.matches(c))return!1;return!0}(a,e)&&(c=e,!((s=a).startAt&&!function(g,w,S){const N=Ai(g,w,S);return g.inclusive?N<=0:N<0}(s.startAt,eo(s),c)||s.endAt&&!function(g,w,S){const N=Ai(g,w,S);return g.inclusive?N>=0:N>0}(s.endAt,eo(s),c)));var s,c}function Ji(a){return a.collectionGroup||(a.path.length%2==1?a.path.lastSegment():a.path.get(a.path.length-2))}function vi(a){return(e,r)=>{let s=!1;for(const c of eo(a)){const h=to(c,e,r);if(0!==h)return h;s=s||c.field.isKeyField()}return 0}}function to(a,e,r){const s=a.field.isKeyField()?it.comparator(e.key,r.key):function(h,g,w){const S=g.data.field(h),N=w.data.field(h);return null!==S&&null!==N?pi(S,N):gt()}(a.field,e,r);switch(a.dir){case"asc":return s;case"desc":return-1*s;default:return gt()}}class Cs{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0!==s)for(const[c,h]of s)if(this.equalsFn(c,e))return h}has(e){return void 0!==this.get(e)}set(e,r){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,r]],void this.innerSize++;for(let h=0;h<c.length;h++)if(this.equalsFn(c[h][0],e))return void(c[h]=[e,r]);c.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[r]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){xr(this.inner,(r,s)=>{for(const[c,h]of s)e(c,h)})}isEmpty(){return mi(this.inner)}size(){return this.innerSize}}const jr=new Qn(it.comparator);function $r(){return jr}const Jr=new Qn(it.comparator);function wo(...a){let e=Jr;for(const r of a)e=e.insert(r.key,r);return e}function Ao(a){let e=Jr;return a.forEach((r,s)=>e=e.insert(r,s.overlayedDocument)),e}function ni(){return ls()}function cs(){return ls()}function ls(){return new Cs(a=>a.toString(),(a,e)=>a.isEqual(e))}const ds=new Qn(it.comparator),Co=new Pn(it.comparator);function an(...a){let e=Co;for(const r of a)e=e.add(r);return e}const Ku=new Pn(Et);function bo(){return Ku}function Go(a,e){if(a.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$e(e)?"-0":e}}function no(a){return{integerValue:""+a}}function bs(a,e){return st(e)?no(e):Go(a,e)}class Ri{constructor(){this._=void 0}}function ya(a,e,r){return a instanceof ro?function(c,h){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:c.seconds,nanos:c.nanoseconds}}}};return h&&Eo(h)&&(h=Hi(h)),h&&(g.fields.__previous_value__=h),{mapValue:g}}(r,e):a instanceof hs?va(a,e):a instanceof So?uu(a,e):function(c,h){const g=Uc(c,h),w=Zu(g)+Zu(c.Pe);return Ln(g)&&Ln(c.Pe)?no(w):Go(c.serializer,w)}(a,e)}function au(a,e,r){return a instanceof hs?va(a,e):a instanceof So?uu(a,e):r}function Uc(a,e){return a instanceof fs?Ln(s=e)||(h=s)&&"doubleValue"in h?e:{integerValue:0}:null;var s,h}class ro extends Ri{}class hs extends Ri{constructor(e){super(),this.elements=e}}function va(a,e){const r=Ea(e);for(const s of a.elements)r.some(c=>_i(c,s))||r.push(s);return{arrayValue:{values:r}}}class So extends Ri{constructor(e){super(),this.elements=e}}function uu(a,e){let r=Ea(e);for(const s of a.elements)r=r.filter(c=>!_i(c,s));return{arrayValue:{values:r}}}class fs extends Ri{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function Zu(a){return gr(a.integerValue||a.doubleValue)}function Ea(a){return Fr(a)&&a.arrayValue.values?a.arrayValue.values.slice():[]}class io{constructor(e,r){this.field=e,this.transform=r}}class Ia{constructor(e,r){this.version=e,this.transformResults=r}}class D{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new D}static exists(e){return new D(void 0,e)}static updateTime(e){return new D(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function U(a,e){return void 0!==a.updateTime?e.isFoundDocument()&&e.version.isEqual(a.updateTime):void 0===a.exists||a.exists===e.isFoundDocument()}class P{}function F(a,e){if(!a.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return a.isNoDocument()?new xn(a.key,D.none()):new Mn(a.key,a.data,D.none());{const r=a.data,s=Un.empty();let c=new Pn(rn.comparator);for(let h of e.fields)if(!c.has(h)){let g=r.field(h);null===g&&h.length>1&&(h=h.popLast(),g=r.field(h)),null===g?s.delete(h):s.set(h,g),c=c.add(h)}return new pn(a.key,s,new pr(c.toArray()),D.none())}}function se(a,e,r){a instanceof Mn?function(c,h,g){const w=c.value.clone(),S=gn(c.fieldTransforms,h,g.transformResults);w.setAll(S),h.convertToFoundDocument(g.version,w).setHasCommittedMutations()}(a,e,r):a instanceof pn?function(c,h,g){if(!U(c.precondition,h))return void h.convertToUnknownDocument(g.version);const w=gn(c.fieldTransforms,h,g.transformResults),S=h.data;S.setAll(Vn(c)),S.setAll(w),h.convertToFoundDocument(g.version,S).setHasCommittedMutations()}(a,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function Le(a,e,r,s){return a instanceof Mn?function(h,g,w,S){if(!U(h.precondition,g))return w;const N=h.value.clone(),z=yr(h.fieldTransforms,S,g);return N.setAll(z),g.convertToFoundDocument(g.version,N).setHasLocalMutations(),null}(a,e,r,s):a instanceof pn?function(h,g,w,S){if(!U(h.precondition,g))return w;const N=yr(h.fieldTransforms,S,g),z=g.data;return z.setAll(Vn(h)),z.setAll(N),g.convertToFoundDocument(g.version,z).setHasLocalMutations(),null===w?null:w.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(Q=>Q.field))}(a,e,r,s):(w=r,U(a.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):w);var g,w}function Xe(a,e){let r=null;for(const s of a.fieldTransforms){const c=e.data.field(s.field),h=Uc(s.transform,c||null);null!=h&&(null===r&&(r=Un.empty()),r.set(s.field,h))}return r||null}function Lt(a,e){return a.type===e.type&&!!a.key.isEqual(e.key)&&!!a.precondition.isEqual(e.precondition)&&(c=e.fieldTransforms,!!(void 0===(s=a.fieldTransforms)&&void 0===c||s&&c&&yn(s,c,(h,g)=>function cu(a,e){return a.field.isEqual(e.field)&&(c=e.transform,(s=a.transform)instanceof hs&&c instanceof hs||s instanceof So&&c instanceof So?yn(s.elements,c.elements,_i):s instanceof fs&&c instanceof fs?_i(s.Pe,c.Pe):s instanceof ro&&c instanceof ro);var s,c}(h,g))))&&(0===a.type?a.value.isEqual(e.value):1!==a.type||a.data.isEqual(e.data)&&a.fieldMask.isEqual(e.fieldMask));var s,c}class Mn extends P{constructor(e,r,s,c=[]){super(),this.key=e,this.value=r,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class pn extends P{constructor(e,r,s,c,h=[]){super(),this.key=e,this.data=r,this.fieldMask=s,this.precondition=c,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function Vn(a){const e=new Map;return a.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=a.data.field(r);e.set(r,s)}}),e}function gn(a,e,r){const s=new Map;ft(a.length===r.length);for(let c=0;c<r.length;c++){const h=a[c],g=h.transform,w=e.data.field(h.field);s.set(h.field,au(g,w,r[c]))}return s}function yr(a,e,r){const s=new Map;for(const c of a){const h=c.transform,g=r.data.field(c.field);s.set(c.field,ya(h,g,e))}return s}class xn extends P{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ar extends P{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Kr{constructor(e,r,s,c){this.batchId=e,this.localWriteTime=r,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,r){const s=r.mutationResults;for(let c=0;c<this.mutations.length;c++){const h=this.mutations[c];h.key.isEqual(e.key)&&se(h,e,s[c])}}applyToLocalView(e,r){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(r=Le(s,e,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(r=Le(s,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const s=cs();return this.mutations.forEach(c=>{const h=e.get(c.key),g=h.overlayedDocument;let w=this.applyToLocalView(g,h.mutatedFields);w=r.has(c.key)?null:w;const S=F(g,w);null!==S&&s.set(c.key,S),g.isValidDocument()||g.convertToNoDocument(vt.min())}),s}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),an())}isEqual(e){return this.batchId===e.batchId&&yn(this.mutations,e.mutations,(r,s)=>Lt(r,s))&&yn(this.baseMutations,e.baseMutations,(r,s)=>Lt(r,s))}}class ui{constructor(e,r,s,c){this.batch=e,this.commitVersion=r,this.mutationResults=s,this.docVersions=c}static from(e,r,s){ft(e.mutations.length===s.length);let c=ds;const h=e.mutations;for(let g=0;g<h.length;g++)c=c.insert(h[g].key,s[g].version);return new ui(e,r,s,c)}}class Ss{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Us{constructor(e,r){this.count=e,this.unchangedNames=r}}var bn,dn;function Bc(a){switch(a){default:return gt();case he.CANCELLED:case he.UNKNOWN:case he.DEADLINE_EXCEEDED:case he.RESOURCE_EXHAUSTED:case he.INTERNAL:case he.UNAVAILABLE:case he.UNAUTHENTICATED:return!1;case he.INVALID_ARGUMENT:case he.NOT_FOUND:case he.ALREADY_EXISTS:case he.PERMISSION_DENIED:case he.FAILED_PRECONDITION:case he.ABORTED:case he.OUT_OF_RANGE:case he.UNIMPLEMENTED:case he.DATA_LOSS:return!0}}function vr(a){if(void 0===a)return ut("GRPC error has no .code"),he.UNKNOWN;switch(a){case bn.OK:return he.OK;case bn.CANCELLED:return he.CANCELLED;case bn.UNKNOWN:return he.UNKNOWN;case bn.DEADLINE_EXCEEDED:return he.DEADLINE_EXCEEDED;case bn.RESOURCE_EXHAUSTED:return he.RESOURCE_EXHAUSTED;case bn.INTERNAL:return he.INTERNAL;case bn.UNAVAILABLE:return he.UNAVAILABLE;case bn.UNAUTHENTICATED:return he.UNAUTHENTICATED;case bn.INVALID_ARGUMENT:return he.INVALID_ARGUMENT;case bn.NOT_FOUND:return he.NOT_FOUND;case bn.ALREADY_EXISTS:return he.ALREADY_EXISTS;case bn.PERMISSION_DENIED:return he.PERMISSION_DENIED;case bn.FAILED_PRECONDITION:return he.FAILED_PRECONDITION;case bn.ABORTED:return he.ABORTED;case bn.OUT_OF_RANGE:return he.OUT_OF_RANGE;case bn.UNIMPLEMENTED:return he.UNIMPLEMENTED;case bn.DATA_LOSS:return he.DATA_LOSS;default:return gt()}}(dn=bn||(bn={}))[dn.OK=0]="OK",dn[dn.CANCELLED=1]="CANCELLED",dn[dn.UNKNOWN=2]="UNKNOWN",dn[dn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dn[dn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dn[dn.NOT_FOUND=5]="NOT_FOUND",dn[dn.ALREADY_EXISTS=6]="ALREADY_EXISTS",dn[dn.PERMISSION_DENIED=7]="PERMISSION_DENIED",dn[dn.UNAUTHENTICATED=16]="UNAUTHENTICATED",dn[dn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dn[dn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dn[dn.ABORTED=10]="ABORTED",dn[dn.OUT_OF_RANGE=11]="OUT_OF_RANGE",dn[dn.UNIMPLEMENTED=12]="UNIMPLEMENTED",dn[dn.INTERNAL=13]="INTERNAL",dn[dn.UNAVAILABLE=14]="UNAVAILABLE",dn[dn.DATA_LOSS=15]="DATA_LOSS";function so(){return new TextEncoder}const Ei=new Te([4294967295,4294967295],0);function jc(a){const e=so().encode(a),r=new Ae;return r.update(e),new Uint8Array(r.digest())}function $c(a){const e=new DataView(a.buffer),r=e.getUint32(0,!0),s=e.getUint32(4,!0),c=e.getUint32(8,!0),h=e.getUint32(12,!0);return[new Te([r,s],0),new Te([c,h],0)]}class Ro{constructor(e,r,s){if(this.bitmap=e,this.padding=r,this.hashCount=s,r<0||r>=8)throw new lr(`Invalid padding: ${r}`);if(s<0)throw new lr(`Invalid hash count: ${s}`);if(e.length>0&&0===this.hashCount)throw new lr(`Invalid hash count: ${s}`);if(0===e.length&&0!==r)throw new lr(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=Te.fromNumber(this.Ie)}Ee(e,r,s){let c=e.add(r.multiply(Te.fromNumber(s)));return 1===c.compare(Ei)&&(c=new Te([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Te).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const r=jc(e),[s,c]=$c(r);for(let h=0;h<this.hashCount;h++){const g=this.Ee(s,c,h);if(!this.de(g))return!1}return!0}static create(e,r,s){const c=e%8==0?0:8-e%8,h=new Uint8Array(Math.ceil(e/8)),g=new Ro(h,c,r);return s.forEach(w=>g.insert(w)),g}insert(e){if(0===this.Ie)return;const r=jc(e),[s,c]=$c(r);for(let h=0;h<this.hashCount;h++){const g=this.Ee(s,c,h);this.Ae(g)}}Ae(e){const r=Math.floor(e/8);this.bitmap[r]|=1<<e%8}}class lr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lu{constructor(e,r,s,c,h){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(e,r,s){const c=new Map;return c.set(e,Ta.createSynthesizedTargetChangeForCurrentChange(e,r,s)),new lu(vt.min(),c,new Qn(Et),$r(),an())}}class Ta{constructor(e,r,s,c,h){this.resumeToken=e,this.current=r,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(e,r,s){return new Ta(s,r,an(),an(),an())}}class Da{constructor(e,r,s,c){this.Re=e,this.removedTargetIds=r,this.key=s,this.Ve=c}}class ps{constructor(e,r){this.targetId=e,this.me=r}}class js{constructor(e,r,s=Sr.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=r,this.resumeToken=s,this.cause=c}}class wa{constructor(){this.fe=0,this.ge=Qu(),this.pe=Sr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=an(),r=an(),s=an();return this.ge.forEach((c,h)=>{switch(h){case 0:e=e.add(c);break;case 2:r=r.add(c);break;case 1:s=s.add(c);break;default:gt()}}),new Ta(this.pe,this.ye,e,r,s)}ve(){this.we=!1,this.ge=Qu()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ft(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class sd{constructor(e){this.Le=e,this.Be=new Map,this.ke=$r(),this.qe=zc(),this.Qe=new Qn(Et)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const s=this.Ge(r);switch(e.state){case 0:this.ze(r)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.ve(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),s.De(e.resumeToken));break;default:gt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((s,c)=>{this.ze(c)&&r(c)})}He(e){const r=e.targetId,s=e.me.count,c=this.Je(r);if(c){const h=c.target;if(Js(h))if(0===s){const g=new it(h.path);this.Ue(r,g,Yn.newNoDocument(g,vt.min()))}else ft(1===s);else{const g=this.Ye(r);if(g!==s){const w=this.Ze(e),S=w?this.Xe(w,e,g):1;0!==S&&(this.je(r),this.Qe=this.Qe.insert(r,2===S?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:s="",padding:c=0},hashCount:h=0}=r;let g,w;try{g=zi(s).toUint8Array()}catch(S){if(S instanceof jo)return Pt("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{w=new Ro(g,c,h)}catch(S){return Pt(S instanceof lr?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return 0===w.Ie?null:w}Xe(e,r,s){return r.me.count===s-this.nt(e,r.targetId)?0:2}nt(e,r){const s=this.Le.getRemoteKeysForTarget(r);let c=0;return s.forEach(h=>{const g=this.Le.tt(),w=`projects/${g.projectId}/databases/${g.database}/documents/${h.path.canonicalString()}`;e.mightContain(w)||(this.Ue(r,h,null),c++)}),c}rt(e){const r=new Map;this.Be.forEach((h,g)=>{const w=this.Je(g);if(w){if(h.current&&Js(w.target)){const S=new it(w.target.path);null!==this.ke.get(S)||this.it(g,S)||this.Ue(g,S,Yn.newNoDocument(S,e))}h.be&&(r.set(g,h.Ce()),h.ve())}});let s=an();this.qe.forEach((h,g)=>{let w=!0;g.forEachWhile(S=>{const N=this.Je(S);return!N||"TargetPurposeLimboResolution"===N.purpose||(w=!1,!1)}),w&&(s=s.add(h))}),this.ke.forEach((h,g)=>g.setReadTime(e));const c=new lu(e,r,this.Qe,this.ke,s);return this.ke=$r(),this.qe=zc(),this.Qe=new Qn(Et),c}$e(e,r){if(!this.ze(e))return;const s=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,s),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,s){if(!this.ze(e))return;const c=this.Ge(e);this.it(e,r)?c.Fe(r,1):c.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),s&&(this.ke=this.ke.insert(r,s))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new wa,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new Pn(Et),this.qe=this.qe.insert(e,r)),r}ze(e){const r=null!==this.Je(e);return r||ie("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wa),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function zc(){return new Qn(it.comparator)}function Qu(){return new Qn(it.comparator)}const Hc={asc:"ASCENDING",desc:"DESCENDING"},nn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},od={and:"AND",or:"OR"};class Yu{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Pi(a,e){return a.useProto3Json||J(e)?e:{value:e}}function qo(a,e){return a.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function du(a,e){return a.useProto3Json?e.toBase64():e.toUint8Array()}function Wc(a,e){return qo(a,e.toTimestamp())}function Cr(a){return ft(!!a),vt.fromTimestamp(function(r){const s=$i(r);return new mt(s.seconds,s.nanos)}(a))}function hu(a,e){return fu(a,e).canonicalString()}function fu(a,e){const r=(c=a,new $t(["projects",c.projectId,"databases",c.database])).child("documents");var c;return void 0===e?r:r.child(e)}function Ju(a){const e=$t.fromString(a);return ft(rc(e)),e}function Ko(a,e){return hu(a.databaseId,e.path)}function $s(a,e){const r=Ju(e);if(r.get(1)!==a.databaseId.projectId)throw new Z(he.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+a.databaseId.projectId);if(r.get(3)!==a.databaseId.database)throw new Z(he.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+a.databaseId.database);return new it(Aa(r))}function nt(a,e){return hu(a.databaseId,e)}function Nn(a){const e=Ju(a);return 4===e.length?$t.emptyPath():Aa(e)}function Xu(a){return new $t(["projects",a.databaseId.projectId,"databases",a.databaseId.database]).canonicalString()}function Aa(a){return ft(a.length>4&&"documents"===a.get(4)),a.popFirst(5)}function ri(a,e,r){return{name:Ko(a,e),fields:r.value.mapValue.fields}}function Br(a,e,r){const s=$s(a,e.name),c=Cr(e.updateTime),h=e.createTime?Cr(e.createTime):vt.min(),g=new Un({mapValue:{fields:e.fields}}),w=Yn.newFoundDocument(s,c,h,g);return r&&w.setHasCommittedMutations(),r?w.setHasCommittedMutations():w}function oo(a,e){let r;if(e instanceof Mn)r={update:ri(a,e.key,e.value)};else if(e instanceof xn)r={delete:Ko(a,e.key)};else if(e instanceof pn)r={update:ri(a,e.key,e.data),updateMask:pu(e.fieldMask)};else{if(!(e instanceof Ar))return gt();r={verify:Ko(a,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(s=>function(h,g){const w=g.transform;if(w instanceof ro)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(w instanceof hs)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:w.elements}};if(w instanceof So)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:w.elements}};if(w instanceof fs)return{fieldPath:g.field.canonicalString(),increment:w.Pe};throw gt()}(0,s))),e.precondition.isNone||(r.currentDocument=void 0!==(h=e.precondition).updateTime?{updateTime:Wc(a,h.updateTime)}:void 0!==h.exists?{exists:h.exists}:gt()),r;var h}function Po(a,e){const r=e.currentDocument?void 0!==(h=e.currentDocument).updateTime?D.updateTime(Cr(h.updateTime)):void 0!==h.exists?D.exists(h.exists):D.none():D.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(g,w){let S=null;"setToServerValue"in w?(ft("REQUEST_TIME"===w.setToServerValue),S=new ro):"appendMissingElements"in w?S=new hs(w.appendMissingElements.values||[]):"removeAllFromArray"in w?S=new So(w.removeAllFromArray.values||[]):"increment"in w?S=new fs(g,w.increment):gt();const N=rn.fromServerFormat(w.fieldPath);return new io(N,S)}(a,c)):[];var h;if(e.update){const c=$s(a,e.update.name),h=new Un({mapValue:{fields:e.update.fields}});if(e.updateMask){const g=new pr((e.updateMask.fieldPaths||[]).map(z=>rn.fromServerFormat(z)));return new pn(c,h,g,r,s)}return new Mn(c,h,r,s)}if(e.delete){const c=$s(a,e.delete);return new xn(c,r)}if(e.verify){const c=$s(a,e.verify);return new Ar(c,r)}return gt()}function ud(a,e){return{documents:[nt(a,e.path)]}}function Zo(a,e){const r={structuredQuery:{}},s=e.path;let c;null!==e.collectionGroup?(c=s,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(c=s.popLast(),r.structuredQuery.from=[{collectionId:s.lastSegment()}]),r.parent=nt(a,c);const h=function(N){if(0!==N.length)return nc(Fn.create(N,"and"))}(e.filters);h&&(r.structuredQuery.where=h);const g=function(N){if(0!==N.length)return N.map(z=>{return{field:ao((ue=z).field),direction:xi(ue.dir)};var ue})}(e.orderBy);g&&(r.structuredQuery.orderBy=g);const w=Pi(a,e.limit);return null!==w&&(r.structuredQuery.limit=w),e.startAt&&(r.structuredQuery.startAt={before:(N=e.startAt).inclusive,values:N.position}),e.endAt&&(r.structuredQuery.endAt=function(N){return{before:!N.inclusive,values:N.position}}(e.endAt)),{_t:r,parent:c};var N}function Mi(a){let e=Nn(a.parent);const r=a.structuredQuery,s=r.from?r.from.length:0;let c=null;if(s>0){ft(1===s);const z=r.from[0];z.allDescendants?c=z.collectionId:e=e.child(z.collectionId)}let h=[];r.where&&(h=function(Q){const ue=ms(Q);return ue instanceof Fn&&Yi(ue)?ue.getFilters():[ue]}(r.where));let g=[];r.orderBy&&(g=r.orderBy.map(ue=>{return new Os(Mo((tt=ue).field),function(ct){switch(ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(tt.direction));var tt}));let w=null;r.limit&&(w=function(Q){let ue;return ue="object"==typeof Q?Q.value:Q,J(ue)?null:ue}(r.limit));let S=null;var Q;r.startAt&&(S=new ir((Q=r.startAt).values||[],!!Q.before));let N=null;return r.endAt&&(N=function(Q){return new ir(Q.values||[],!Q.before)}(r.endAt)),Zn(e,c,g,h,w,"F",S,N)}function ms(a){return void 0!==a.unaryFilter?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Mo(r.unaryFilter.field);return un.create(s,"==",{doubleValue:NaN});case"IS_NULL":const c=Mo(r.unaryFilter.field);return un.create(c,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=Mo(r.unaryFilter.field);return un.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const g=Mo(r.unaryFilter.field);return un.create(g,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}(a):void 0!==a.fieldFilter?un.create(Mo((r=a).fieldFilter.field),function(c){switch(c){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(r.fieldFilter.op),r.fieldFilter.value):void 0!==a.compositeFilter?function(r){return Fn.create(r.compositeFilter.filters.map(s=>ms(s)),function(c){switch(c){case"AND":return"and";case"OR":return"or";default:return gt()}}(r.compositeFilter.op))}(a):gt();var r}function xi(a){return Hc[a]}function cd(a){return nn[a]}function tc(a){return od[a]}function ao(a){return{fieldPath:a.canonicalString()}}function Mo(a){return rn.fromServerFormat(a.fieldPath)}function nc(a){return a instanceof un?function(r){if("=="===r.op){if(Or(r.value))return{unaryFilter:{field:ao(r.field),op:"IS_NAN"}};if(Io(r.value))return{unaryFilter:{field:ao(r.field),op:"IS_NULL"}}}else if("!="===r.op){if(Or(r.value))return{unaryFilter:{field:ao(r.field),op:"IS_NOT_NAN"}};if(Io(r.value))return{unaryFilter:{field:ao(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(r.field),op:cd(r.op),value:r.value}}}(a):a instanceof Fn?function(r){const s=r.getFilters().map(c=>nc(c));return 1===s.length?s[0]:{compositeFilter:{op:tc(r.op),filters:s}}}(a):gt()}function pu(a){const e=[];return a.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function rc(a){return a.length>=4&&"projects"===a.get(0)&&"databases"===a.get(2)}class I{constructor(e,r,s,c,h=vt.min(),g=vt.min(),w=Sr.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=r,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=g,this.resumeToken=w,this.expectedCount=S}withSequenceNumber(e){return new I(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new I(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new I(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new I(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class b{constructor(e){this.ct=e}}function C(a,e){const r=e.key,s={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:M(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Ko(h=a.ct,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:qo(h,g.version.toTimestamp()),createTime:qo(h,g.createTime.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:r.path.toArray(),readTime:$(e.version)};else{if(!e.isUnknownDocument())return gt();s.unknownDocument={path:r.path.toArray(),version:$(e.version)}}var h,g;return s}function M(a){const e=a.toTimestamp();return[e.seconds,e.nanoseconds]}function $(a){const e=a.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ne(a){const e=new mt(a.seconds,a.nanoseconds);return vt.fromTimestamp(e)}function ke(a,e){const r=(e.baseMutations||[]).map(h=>Po(a.ct,h));for(let h=0;h<e.mutations.length-1;++h)h+1<e.mutations.length&&void 0!==e.mutations[h+1].transform&&(e.mutations[h].updateTransforms=e.mutations[h+1].transform.fieldTransforms,e.mutations.splice(h+1,1),++h);const s=e.mutations.map(h=>Po(a.ct,h)),c=mt.fromMillis(e.localWriteTimeMs);return new Kr(e.batchId,c,r,s)}function Me(a){const e=ne(a.readTime),r=void 0!==a.lastLimboFreeSnapshotVersion?ne(a.lastLimboFreeSnapshotVersion):vt.min();let s;return s=void 0!==a.query.documents?(ft(1===(h=a.query).documents.length),Yr(us(Nn(h.documents[0])))):function(h){return Yr(Mi(h))}(a.query),new I(s,a.targetId,"TargetPurposeListen",a.lastListenSequenceNumber,e,r,Sr.fromBase64String(a.resumeToken));var h}function St(a,e){const r=$(e.snapshotVersion),s=$(e.lastLimboFreeSnapshotVersion);let c;c=Js(e.target)?ud(a.ct,e.target):Zo(a.ct,e.target)._t;const h=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:os(e.target),readTime:r,resumeToken:h,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function hn(a){const e=Mi({parent:a.parent,structuredQuery:a.structuredQuery});return"LAST"===a.limitType?Do(e,e.limit,"L"):e}function _n(a,e){return new Ss(e.largestBatchId,Po(a.ct,e.overlayMutation))}function Tn(a,e){const r=e.path.lastSegment();return[a,It(e.path.popLast()),r]}function Bn(a,e,r,s){return{indexId:a,uid:e,sequenceNumber:r,readTime:$(s.readTime),documentKey:It(s.documentKey.path),largestBatchId:s.largestBatchId}}class ba{getBundleMetadata(e,r){return Qo(e).get(r).next(s=>{if(s)return{id:(h=s).bundleId,createTime:ne(h.createTime),version:h.version};var h})}saveBundleMetadata(e,r){return Qo(e).put({bundleId:(c=r).id,createTime:$(Cr(c.createTime)),version:c.version});var c}getNamedQuery(e,r){return gu(e).get(r).next(s=>{if(s)return{name:(h=s).name,query:hn(h.bundledQuery),readTime:ne(h.readTime)};var h})}saveNamedQuery(e,r){return gu(e).put({name:(c=r).name,readTime:$(Cr(c.readTime)),bundledQuery:c.bundledQuery});var c}}function Qo(a){return Lr(a,"bundles")}function gu(a){return Lr(a,"namedQueries")}class zs{constructor(e,r){this.serializer=e,this.userId=r}static lt(e,r){return new zs(e,r.uid||"")}getOverlay(e,r){return xo(e).get(Tn(this.userId,r)).next(s=>s?_n(this.serializer,s):null)}getOverlays(e,r){const s=ni();return te.forEach(r,c=>this.getOverlay(e,c).next(h=>{null!==h&&s.set(c,h)})).next(()=>s)}saveOverlays(e,r,s){const c=[];return s.forEach((h,g)=>{const w=new Ss(r,g);c.push(this.ht(e,w))}),te.waitFor(c)}removeOverlaysForBatchId(e,r,s){const c=new Set;r.forEach(g=>c.add(It(g.getCollectionPath())));const h=[];return c.forEach(g=>{const w=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,s+1],!1,!0);h.push(xo(e).j("collectionPathOverlayIndex",w))}),te.waitFor(h)}getOverlaysForCollection(e,r,s){const c=ni(),h=It(r),g=IDBKeyRange.bound([this.userId,h,s],[this.userId,h,Number.POSITIVE_INFINITY],!0);return xo(e).U("collectionPathOverlayIndex",g).next(w=>{for(const S of w){const N=_n(this.serializer,S);c.set(N.getKey(),N)}return c})}getOverlaysForCollectionGroup(e,r,s,c){const h=ni();let g;const w=IDBKeyRange.bound([this.userId,r,s],[this.userId,r,Number.POSITIVE_INFINITY],!0);return xo(e).J({index:"collectionGroupOverlayIndex",range:w},(S,N,z)=>{const Q=_n(this.serializer,N);h.size()<c||Q.largestBatchId===g?(h.set(Q.getKey(),Q),g=Q.largestBatchId):z.done()}).next(()=>h)}ht(e,r){return xo(e).put(function(c,h,g){const[w,S,N]=Tn(h,g.mutation.key);return{userId:h,collectionPath:S,documentId:N,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:oo(c.ct,g.mutation)}}(this.serializer,this.userId,r))}}function xo(a){return Lr(a,"documentOverlays")}class wh{Pt(e){return Lr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(r=>{const s=r?.value;return s?Sr.fromUint8Array(s):Sr.EMPTY_BYTE_STRING})}setSessionToken(e,r){return this.Pt(e).put({name:"sessionToken",value:r.toUint8Array()})}}class uo{constructor(){}It(e,r){this.Tt(e,r),r.Et()}Tt(e,r){if("nullValue"in e)this.dt(r,5);else if("booleanValue"in e)this.dt(r,10),r.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(r,15),r.At(gr(e.integerValue));else if("doubleValue"in e){const s=gr(e.doubleValue);isNaN(s)?this.dt(r,13):(this.dt(r,15),$e(s)?r.At(0):r.At(s))}else if("timestampValue"in e){let s=e.timestampValue;this.dt(r,20),"string"==typeof s&&(s=$i(s)),r.Rt(`${s.seconds||""}`),r.At(s.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,r),this.ft(r);else if("bytesValue"in e)this.dt(r,30),r.gt(zi(e.bytesValue)),this.ft(r);else if("referenceValue"in e)this.yt(e.referenceValue,r);else if("geoPointValue"in e){const s=e.geoPointValue;this.dt(r,45),r.At(s.latitude||0),r.At(s.longitude||0)}else"mapValue"in e?qi(e)?this.dt(r,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,r),this.ft(r)):"arrayValue"in e?(this.St(e.arrayValue,r),this.ft(r)):gt()}Vt(e,r){this.dt(r,25),this.bt(e,r)}bt(e,r){r.Rt(e)}wt(e,r){const s=e.fields||{};this.dt(r,55);for(const c of Object.keys(s))this.Vt(c,r),this.Tt(s[c],r)}St(e,r){const s=e.values||[];this.dt(r,50);for(const c of s)this.Tt(c,r)}yt(e,r){this.dt(r,37),it.fromName(e).path.forEach(s=>{this.dt(r,60),this.bt(s,r)})}dt(e,r){e.At(r)}ft(e){e.At(2)}}function Yo(a){if(0===a)return 8;let e=0;return!(a>>4)&&(e+=4,a<<=4),!(a>>6)&&(e+=2,a<<=2),!(a>>7)&&(e+=1),e}function Gc(a){const e=64-function(s){let c=0;for(let h=0;h<8;++h){const g=Yo(255&s[h]);if(c+=g,8!==g)break}return c}(a);return Math.ceil(e/8)}uo.Dt=new uo;class qc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.vt(s.value),s=r.next();this.Ft()}Mt(e){const r=e[Symbol.iterator]();let s=r.next();for(;!s.done;)this.xt(s.value),s=r.next();this.Ot()}Nt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.vt(s);else if(s<2048)this.vt(960|s>>>6),this.vt(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.vt(480|s>>>12),this.vt(128|63&s>>>6),this.vt(128|63&s);else{const c=r.codePointAt(0);this.vt(240|c>>>18),this.vt(128|63&c>>>12),this.vt(128|63&c>>>6),this.vt(128|63&c)}}this.Ft()}Lt(e){for(const r of e){const s=r.charCodeAt(0);if(s<128)this.xt(s);else if(s<2048)this.xt(960|s>>>6),this.xt(128|63&s);else if(r<"\ud800"||"\udbff"<r)this.xt(480|s>>>12),this.xt(128|63&s>>>6),this.xt(128|63&s);else{const c=r.codePointAt(0);this.xt(240|c>>>18),this.xt(128|63&c>>>12),this.xt(128|63&c>>>6),this.xt(128|63&c)}}this.Ot()}Bt(e){const r=this.kt(e),s=Gc(r);this.qt(1+s),this.buffer[this.position++]=255&s;for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=255&r[c]}Qt(e){const r=this.kt(e),s=Gc(r);this.qt(1+s),this.buffer[this.position++]=~(255&s);for(let c=r.length-s;c<r.length;++c)this.buffer[this.position++]=~(255&r[c])}Kt(){this.$t(255),this.$t(255)}Ut(){this.Wt(255),this.Wt(255)}reset(){this.position=0}seed(e){this.qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Gt(){return this.buffer.slice(0,this.position)}kt(e){const r=function(h){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,h,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&r[0]);r[0]^=s?255:128;for(let c=1;c<r.length;++c)r[c]^=s?255:0;return r}vt(e){const r=255&e;0===r?(this.$t(0),this.$t(255)):255===r?(this.$t(255),this.$t(0)):this.$t(r)}xt(e){const r=255&e;0===r?(this.Wt(0),this.Wt(255)):255===r?(this.Wt(255),this.Wt(0)):this.Wt(e)}Ft(){this.$t(0),this.$t(1)}Ot(){this.Wt(0),this.Wt(1)}$t(e){this.qt(1),this.buffer[this.position++]=e}Wt(e){this.qt(1),this.buffer[this.position++]=~e}qt(e){const r=e+this.position;if(r<=this.buffer.length)return;let s=2*this.buffer.length;s<r&&(s=r);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class mu{constructor(e){this.zt=e}gt(e){this.zt.Ct(e)}Rt(e){this.zt.Nt(e)}At(e){this.zt.Bt(e)}Et(){this.zt.Kt()}}class Kc{constructor(e){this.zt=e}gt(e){this.zt.Mt(e)}Rt(e){this.zt.Lt(e)}At(e){this.zt.Qt(e)}Et(){this.zt.Ut()}}class No{constructor(){this.zt=new qc,this.jt=new mu(this.zt),this.Ht=new Kc(this.zt)}seed(e){this.zt.seed(e)}Jt(e){return 0===e?this.jt:this.Ht}Gt(){return this.zt.Gt()}reset(){this.zt.reset()}}class Jo{constructor(e,r,s,c){this.indexId=e,this.documentKey=r,this.arrayValue=s,this.directionalValue=c}Yt(){const e=this.directionalValue.length,r=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(r);return s.set(this.directionalValue,0),r!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Jo(this.indexId,this.documentKey,this.arrayValue,s)}}function Hs(a,e){let r=a.indexId-e.indexId;return 0!==r?r:(r=ic(a.arrayValue,e.arrayValue),0!==r?r:(r=ic(a.directionalValue,e.directionalValue),0!==r?r:it.comparator(a.documentKey,e.documentKey)))}function ic(a,e){for(let r=0;r<a.length&&r<e.length;++r){const s=a[r]-e[r];if(0!==s)return s}return a.length-e.length}class Oo{constructor(e){this.Zt=new Pn((r,s)=>rn.comparator(r.field,s.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Xt=e.orderBy,this.en=[];for(const r of e.filters){const s=r;s.isInequality()?this.Zt=this.Zt.add(s):this.en.push(s)}}get tn(){return this.Zt.size>1}nn(e){if(ft(e.collectionGroup===this.collectionId),this.tn)return!1;const r=Kt(e);if(void 0!==r&&!this.rn(r))return!1;const s=Bt(e);let c=new Set,h=0,g=0;for(;h<s.length&&this.rn(s[h]);++h)c=c.add(s[h].fieldPath.canonicalString());if(h===s.length)return!0;if(this.Zt.size>0){const w=this.Zt.getIterator().getNext();if(!c.has(w.field.canonicalString())){const S=s[h];if(!this.sn(w,S)||!this.on(this.Xt[g++],S))return!1}++h}for(;h<s.length;++h)if(g>=this.Xt.length||!this.on(this.Xt[g++],s[h]))return!1;return!0}_n(){if(this.tn)return null;let e=new Pn(rn.comparator);const r=[];for(const s of this.en)if(!s.field.isKeyField())if("array-contains"===s.op||"array-contains-any"===s.op)r.push(new zn(s.field,2));else{if(e.has(s.field))continue;e=e.add(s.field),r.push(new zn(s.field,0))}for(const s of this.Xt)s.field.isKeyField()||e.has(s.field)||(e=e.add(s.field),r.push(new zn(s.field,"asc"===s.dir?0:1)));return new Ut(Ut.UNKNOWN_ID,this.collectionId,r,Dn.empty())}rn(e){for(const r of this.en)if(this.sn(r,e))return!0;return!1}sn(e,r){return!(void 0===e||!e.field.isEqual(r.fieldPath))&&2===r.kind==("array-contains"===e.op||"array-contains-any"===e.op)}on(e,r){return!!e.field.isEqual(r.fieldPath)&&(0===r.kind&&"asc"===e.dir||1===r.kind&&"desc"===e.dir)}}function _u(a){var e,r;if(ft(a instanceof un||a instanceof Fn),a instanceof un){if(a instanceof Si){const c=(null===(r=null===(e=a.value.arrayValue)||void 0===e?void 0:e.values)||void 0===r?void 0:r.map(h=>un.create(a.field,"==",h)))||[];return Fn.create(c,"or")}return a}const s=a.filters.map(c=>_u(c));return Fn.create(s,a.op)}function ld(a){if(0===a.getFilters().length)return[];const e=hd(_u(a));return ft(dd(e)),Ah(e)||Ws(e)?[e]:e.getFilters()}function Ah(a){return a instanceof un}function Ws(a){return a instanceof Fn&&Yi(a)}function dd(a){return Ah(a)||Ws(a)||function(r){if(r instanceof Fn&&$o(r)){for(const s of r.getFilters())if(!Ah(s)&&!Ws(s))return!1;return!0}return!1}(a)}function hd(a){if(ft(a instanceof un||a instanceof Fn),a instanceof un)return a;if(1===a.filters.length)return hd(a.filters[0]);const e=a.filters.map(s=>hd(s));let r=Fn.create(e,a.op);return r=sc(r),dd(r)?r:(ft(r instanceof Fn),ft(ln(r)),ft(r.filters.length>1),r.filters.reduce((s,c)=>fd(s,c)))}function fd(a,e){let r;return ft(a instanceof un||a instanceof Fn),ft(e instanceof un||e instanceof Fn),r=a instanceof un?e instanceof un?Fn.create([a,e],"and"):ip(a,e):e instanceof un?ip(e,a):function(c,h){if(ft(c.filters.length>0&&h.filters.length>0),ln(c)&&ln(h))return Ys(c,h.getFilters());const g=$o(c)?c:h,w=$o(c)?h:c,S=g.filters.map(N=>fd(N,w));return Fn.create(S,"or")}(a,e),sc(r)}function ip(a,e){if(ln(e))return Ys(e,a.getFilters());{const r=e.filters.map(s=>fd(a,s));return Fn.create(r,"or")}}function sc(a){if(ft(a instanceof un||a instanceof Fn),a instanceof un)return a;const e=a.getFilters();if(1===e.length)return sc(e[0]);if(To(a))return a;const r=e.map(c=>sc(c)),s=[];return r.forEach(c=>{c instanceof un?s.push(c):c instanceof Fn&&(c.op===a.op?s.push(...c.filters):s.push(c))}),1===s.length?s[0]:Fn.create(s,a.op)}class Zc{constructor(){this.an=new Sa}addToCollectionParentIndex(e,r){return this.an.add(r),te.resolve()}getCollectionParents(e,r){return te.resolve(this.an.getEntries(r))}addFieldIndex(e,r){return te.resolve()}deleteFieldIndex(e,r){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,r){return te.resolve()}getDocumentsMatchingTarget(e,r){return te.resolve(null)}getIndexType(e,r){return te.resolve(0)}getFieldIndexes(e,r){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,r){return te.resolve(Ct.min())}getMinOffsetFromCollectionGroup(e,r){return te.resolve(Ct.min())}updateCollectionGroup(e,r,s){return te.resolve()}updateIndexEntries(e,r){return te.resolve()}}class Sa{constructor(){this.index={}}add(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r]||new Pn($t.comparator),h=!c.has(s);return this.index[r]=c.add(s),h}has(e){const r=e.lastSegment(),s=e.popLast(),c=this.index[r];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Pn($t.comparator)).toArray()}}const Qc=new Uint8Array(0);class Ra{constructor(e,r){this.databaseId=r,this.un=new Sa,this.cn=new Cs(s=>os(s),(s,c)=>Ho(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,r){if(!this.un.has(r)){const s=r.lastSegment(),c=r.popLast();e.addOnCommittedListener(()=>{this.un.add(r)});const h={collectionId:s,parent:It(c)};return Yc(e).put(h)}return te.resolve()}getCollectionParents(e,r){const s=[],c=IDBKeyRange.bound([r,""],[Cn(r),""],!1,!0);return Yc(e).U(c).next(h=>{for(const g of h){if(g.collectionId!==r)break;s.push(mn(g.parent))}return s})}addFieldIndex(e,r){const s=Jc(e),c={indexId:(w=r).indexId,collectionGroup:w.collectionGroup,fields:w.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var w;delete c.indexId;const h=s.add(c);if(r.indexState){const g=ko(e);return h.next(w=>{g.put(Bn(w,this.uid,r.indexState.sequenceNumber,r.indexState.offset))})}return h.next()}deleteFieldIndex(e,r){const s=Jc(e),c=ko(e),h=Gs(e);return s.delete(r.indexId).next(()=>c.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0))).next(()=>h.delete(IDBKeyRange.bound([r.indexId],[r.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const r=Jc(e),s=Gs(e),c=ko(e);return r.j().next(()=>s.j()).next(()=>c.j())}createTargetIndexes(e,r){return te.forEach(this.ln(r),s=>this.getIndexType(e,s).next(c=>{if(0===c||1===c){const h=new Oo(s)._n();if(null!=h)return this.addFieldIndex(e,h)}}))}getDocumentsMatchingTarget(e,r){const s=Gs(e);let c=!0;const h=new Map;return te.forEach(this.ln(r),g=>this.hn(e,g).next(w=>{c&&(c=!!w),h.set(g,w)})).next(()=>{if(c){let g=an();const w=[];return te.forEach(h,(S,N)=>{var Wt;ie("IndexedDbIndexManager",`Using index ${Wt=S,`id=${Wt.indexId}|cg=${Wt.collectionGroup}|f=${Wt.fields.map(vn=>`${vn.fieldPath}:${vn.kind}`).join(",")}`} to execute ${os(r)}`);const z=function(Wt,vn){const or=Kt(vn);if(void 0===or)return null;for(const On of Ur(Wt,or.fieldPath))switch(On.op){case"array-contains-any":return On.value.arrayValue.values||[];case"array-contains":return[On.value]}return null}(N,S),Q=function(Wt,vn){const or=new Map;for(const On of Bt(vn))for(const Ee of Ur(Wt,On.fieldPath))switch(Ee.op){case"==":case"in":or.set(On.fieldPath.canonicalString(),Ee.value);break;case"not-in":case"!=":return or.set(On.fieldPath.canonicalString(),Ee.value),Array.from(or.values())}return null}(N,S),ue=function(Wt,vn){const or=[];let On=!0;for(const Ee of Bt(vn)){const oe=0===Ee.kind?Xs(Wt,Ee.fieldPath,Wt.startAt):Vc(Wt,Ee.fieldPath,Wt.startAt);or.push(oe.value),On&&(On=oe.inclusive)}return new ir(or,On)}(N,S),xe=function(Wt,vn){const or=[];let On=!0;for(const Ee of Bt(vn)){const oe=0===Ee.kind?Vc(Wt,Ee.fieldPath,Wt.endAt):Xs(Wt,Ee.fieldPath,Wt.endAt);or.push(oe.value),On&&(On=oe.inclusive)}return new ir(or,On)}(N,S),tt=this.Pn(S,N,ue),pt=this.Pn(S,N,xe),ct=this.In(S,N,Q),zt=this.Tn(S.indexId,z,tt,ue.inclusive,pt,xe.inclusive,ct);return te.forEach(zt,Jt=>s.G(Jt,r.limit).next(Wt=>{Wt.forEach(vn=>{const or=it.fromSegments(vn.documentKey);g.has(or)||(g=g.add(or),w.push(or))})}))}).next(()=>w)}return te.resolve(null)})}ln(e){let r=this.cn.get(e);return r||(r=0===e.filters.length?[e]:ld(Fn.create(e.filters,"and")).map(s=>Fs(e.path,e.collectionGroup,e.orderBy,s.getFilters(),e.limit,e.startAt,e.endAt)),this.cn.set(e,r),r)}Tn(e,r,s,c,h,g,w){const S=(null!=r?r.length:1)*Math.max(s.length,h.length),N=S/(null!=r?r.length:1),z=[];for(let Q=0;Q<S;++Q){const ue=r?this.En(r[Q/N]):Qc,xe=this.dn(e,ue,s[Q%N],c),tt=this.An(e,ue,h[Q%N],g),pt=w.map(ct=>this.dn(e,ue,ct,!0));z.push(...this.createRange(xe,tt,pt))}return z}dn(e,r,s,c){const h=new Jo(e,it.empty(),r,s);return c?h:h.Yt()}An(e,r,s,c){const h=new Jo(e,it.empty(),r,s);return c?h.Yt():h}hn(e,r){const s=new Oo(r),c=null!=r.collectionGroup?r.collectionGroup:r.path.lastSegment();return this.getFieldIndexes(e,c).next(h=>{let g=null;for(const w of h)s.nn(w)&&(!g||w.fields.length>g.fields.length)&&(g=w);return g})}getIndexType(e,r){let s=2;const c=this.ln(r);return te.forEach(c,h=>this.hn(e,h).next(g=>{g?0!==s&&g.fields.length<function(S){let N=new Pn(rn.comparator),z=!1;for(const Q of S.filters)for(const ue of Q.getFlattenedFilters())ue.field.isKeyField()||("array-contains"===ue.op||"array-contains-any"===ue.op?z=!0:N=N.add(ue.field));for(const Q of S.orderBy)Q.field.isKeyField()||(N=N.add(Q.field));return N.size+(z?1:0)}(h)&&(s=1):s=0})).next(()=>null!==r.limit&&c.length>1&&2===s?1:s)}Rn(e,r){const s=new No;for(const c of Bt(e)){const h=r.data.field(c.fieldPath);if(null==h)return null;const g=s.Jt(c.kind);uo.Dt.It(h,g)}return s.Gt()}En(e){const r=new No;return uo.Dt.It(e,r.Jt(0)),r.Gt()}Vn(e,r){const s=new No;return uo.Dt.It(Qt(this.databaseId,r),s.Jt(function(h){const g=Bt(h);return 0===g.length?0:g[g.length-1].kind}(e))),s.Gt()}In(e,r,s){if(null===s)return[];let c=[];c.push(new No);let h=0;for(const g of Bt(e)){const w=s[h++];for(const S of c)if(this.mn(r,g.fieldPath)&&Fr(w))c=this.fn(c,g,w);else{const N=S.Jt(g.kind);uo.Dt.It(w,N)}}return this.gn(c)}Pn(e,r,s){return this.In(e,r,s.position)}gn(e){const r=[];for(let s=0;s<e.length;++s)r[s]=e[s].Gt();return r}fn(e,r,s){const c=[...e],h=[];for(const g of s.arrayValue.values||[])for(const w of c){const S=new No;S.seed(w.Gt()),uo.Dt.It(g,S.Jt(r.kind)),h.push(S)}return h}mn(e,r){return!!e.filters.find(s=>s instanceof un&&s.field.isEqual(r)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,r){const s=Jc(e),c=ko(e);return(r?s.U("collectionGroupIndex",IDBKeyRange.bound(r,r)):s.U()).next(h=>{const g=[];return te.forEach(h,w=>c.get([w.indexId,this.uid]).next(S=>{g.push(function(z,Q){const ue=Q?new Dn(Q.sequenceNumber,new Ct(ne(Q.readTime),new it(mn(Q.documentKey)),Q.largestBatchId)):Dn.empty(),xe=z.fields.map(([tt,pt])=>new zn(rn.fromServerFormat(tt),pt));return new Ut(z.indexId,z.collectionGroup,xe,ue)}(w,S))})).next(()=>g)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(r=>0===r.length?null:(r.sort((s,c)=>{const h=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==h?h:Et(s.collectionGroup,c.collectionGroup)}),r[0].collectionGroup))}updateCollectionGroup(e,r,s){const c=Jc(e),h=ko(e);return this.pn(e).next(g=>c.U("collectionGroupIndex",IDBKeyRange.bound(r,r)).next(w=>te.forEach(w,S=>h.put(Bn(S.indexId,this.uid,g,s)))))}updateIndexEntries(e,r){const s=new Map;return te.forEach(r,(c,h)=>{const g=s.get(c.collectionGroup);return(g?te.resolve(g):this.getFieldIndexes(e,c.collectionGroup)).next(w=>(s.set(c.collectionGroup,w),te.forEach(w,S=>this.yn(e,c,S).next(N=>{const z=this.wn(h,S);return N.isEqual(z)?te.resolve():this.Sn(e,h,S,N,z)}))))})}bn(e,r,s,c){return Gs(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.Vn(s,r.key),documentKey:r.key.path.toArray()})}Dn(e,r,s,c){return Gs(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.Vn(s,r.key),r.key.path.toArray()])}yn(e,r,s){const c=Gs(e);let h=new Pn(Hs);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.Vn(s,r)])},(g,w)=>{h=h.add(new Jo(s.indexId,r,w.arrayValue,w.directionalValue))}).next(()=>h)}wn(e,r){let s=new Pn(Hs);const c=this.Rn(r,e);if(null==c)return s;const h=Kt(r);if(null!=h){const g=e.data.field(h.fieldPath);if(Fr(g))for(const w of g.arrayValue.values||[])s=s.add(new Jo(r.indexId,e.key,this.En(w),c))}else s=s.add(new Jo(r.indexId,e.key,Qc,c));return s}Sn(e,r,s,c,h){ie("IndexedDbIndexManager","Updating index entries for document '%s'",r.key);const g=[];return function(S,N,z,Q,ue){const xe=S.getIterator(),tt=N.getIterator();let pt=Ts(xe),ct=Ts(tt);for(;pt||ct;){let zt=!1,Jt=!1;if(pt&&ct){const Wt=z(pt,ct);Wt<0?Jt=!0:Wt>0&&(zt=!0)}else null!=pt?Jt=!0:zt=!0;zt?(Q(ct),ct=Ts(tt)):Jt?(ue(pt),pt=Ts(xe)):(pt=Ts(xe),ct=Ts(tt))}}(c,h,Hs,w=>{g.push(this.bn(e,r,s,w))},w=>{g.push(this.Dn(e,r,s,w))}),te.waitFor(g)}pn(e){let r=1;return ko(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,h)=>{h.done(),r=c.sequenceNumber+1}).next(()=>r)}createRange(e,r,s){s=s.sort((g,w)=>Hs(g,w)).filter((g,w,S)=>!w||0!==Hs(g,S[w-1]));const c=[];c.push(e);for(const g of s){const w=Hs(g,e),S=Hs(g,r);if(0===w)c[0]=e.Yt();else if(w>0&&S<0)c.push(g),c.push(g.Yt());else if(S>0)break}c.push(r);const h=[];for(let g=0;g<c.length;g+=2){if(this.Cn(c[g],c[g+1]))return[];h.push(IDBKeyRange.bound([c[g].indexId,this.uid,c[g].arrayValue,c[g].directionalValue,Qc,[]],[c[g+1].indexId,this.uid,c[g+1].arrayValue,c[g+1].directionalValue,Qc,[]]))}return h}Cn(e,r){return Hs(e,r)>0}getMinOffsetFromCollectionGroup(e,r){return this.getFieldIndexes(e,r).next(oc)}getMinOffset(e,r){return te.mapArray(this.ln(r),s=>this.hn(e,s).next(c=>c||gt())).next(oc)}}function Yc(a){return Lr(a,"collectionParents")}function Gs(a){return Lr(a,"indexEntries")}function Jc(a){return Lr(a,"indexConfiguration")}function ko(a){return Lr(a,"indexState")}function oc(a){ft(0!==a.length);let e=a[0].indexState.offset,r=e.largestBatchId;for(let s=1;s<a.length;s++){const c=a[s].indexState.offset;Pr(c,e)<0&&(e=c),r<c.largestBatchId&&(r=c.largestBatchId)}return new Ct(e.readTime,e.documentKey,r)}const Ch={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class dr{constructor(e,r,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new dr(e,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bh(a,e,r){const s=a.store("mutations"),c=a.store("documentMutations"),h=[],g=IDBKeyRange.only(r.batchId);let w=0;const S=s.J({range:g},(z,Q,ue)=>(w++,ue.delete()));h.push(S.next(()=>{ft(1===w)}));const N=[];for(const z of r.mutations){const Q=fr(e,z.key.path,r.batchId);h.push(c.delete(Q)),N.push(z.key)}return te.waitFor(h).next(()=>N)}function Pa(a){if(!a)return 0;let e;if(a.document)e=a.document;else if(a.unknownDocument)e=a.unknownDocument;else{if(!a.noDocument)throw gt();e=a.noDocument}return JSON.stringify(e).length}dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(41943040,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);class Xo{constructor(e,r,s,c){this.userId=e,this.serializer=r,this.indexManager=s,this.referenceDelegate=c,this.vn={}}static lt(e,r,s,c){ft(""!==e.uid);const h=e.isAuthenticated()?e.uid:"";return new Xo(h,r,s,c)}checkEmpty(e){let r=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).J({index:"userMutationsIndex",range:s},(c,h,g)=>{r=!1,g.done()}).next(()=>r)}addMutationBatch(e,r,s,c){const h=ea(e),g=_s(e);return g.add({}).next(w=>{ft("number"==typeof w);const S=new Kr(w,r,s,c),N=function(xe,tt,pt){const ct=pt.baseMutations.map(Jt=>oo(xe.ct,Jt)),zt=pt.mutations.map(Jt=>oo(xe.ct,Jt));return{userId:tt,batchId:pt.batchId,localWriteTimeMs:pt.localWriteTime.toMillis(),baseMutations:ct,mutations:zt}}(this.serializer,this.userId,S),z=[];let Q=new Pn((ue,xe)=>Et(ue.canonicalString(),xe.canonicalString()));for(const ue of c){const xe=fr(this.userId,ue.key.path,w);Q=Q.add(ue.key.path.popLast()),z.push(g.put(N)),z.push(h.put(xe,ai))}return Q.forEach(ue=>{z.push(this.indexManager.addToCollectionParentIndex(e,ue))}),e.addOnCommittedListener(()=>{this.vn[w]=S.keys()}),te.waitFor(z).next(()=>S)})}lookupMutationBatch(e,r){return _s(e).get(r).next(s=>s?(ft(s.userId===this.userId),ke(this.serializer,s)):null)}Fn(e,r){return this.vn[r]?te.resolve(this.vn[r]):this.lookupMutationBatch(e,r).next(s=>{if(s){const c=s.keys();return this.vn[r]=c,c}return null})}getNextMutationBatchAfterBatchId(e,r){const s=r+1,c=IDBKeyRange.lowerBound([this.userId,s]);let h=null;return _s(e).J({index:"userMutationsIndex",range:c},(g,w,S)=>{w.userId===this.userId&&(ft(w.batchId>=s),h=ke(this.serializer,w)),S.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return _s(e).J({index:"userMutationsIndex",range:r,reverse:!0},(c,h,g)=>{s=h.batchId,g.done()}).next(()=>s)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return _s(e).U("userMutationsIndex",r).next(s=>s.map(c=>ke(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,r){const s=cr(this.userId,r.path),c=IDBKeyRange.lowerBound(s),h=[];return ea(e).J({range:c},(g,w,S)=>{const[N,z,Q]=g,ue=mn(z);if(N===this.userId&&r.path.isEqual(ue))return _s(e).get(Q).next(xe=>{if(!xe)throw gt();ft(xe.userId===this.userId),h.push(ke(this.serializer,xe))});S.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Pn(Et);const c=[];return r.forEach(h=>{const g=cr(this.userId,h.path),w=IDBKeyRange.lowerBound(g),S=ea(e).J({range:w},(N,z,Q)=>{const[ue,xe,tt]=N,pt=mn(xe);ue===this.userId&&h.path.isEqual(pt)?s=s.add(tt):Q.done()});c.push(S)}),te.waitFor(c).next(()=>this.Mn(e,s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1,h=cr(this.userId,s),g=IDBKeyRange.lowerBound(h);let w=new Pn(Et);return ea(e).J({range:g},(S,N,z)=>{const[Q,ue,xe]=S,tt=mn(ue);Q===this.userId&&s.isPrefixOf(tt)?tt.length===c&&(w=w.add(xe)):z.done()}).next(()=>this.Mn(e,w))}Mn(e,r){const s=[],c=[];return r.forEach(h=>{c.push(_s(e).get(h).next(g=>{if(null===g)throw gt();ft(g.userId===this.userId),s.push(ke(this.serializer,g))}))}),te.waitFor(c).next(()=>s)}removeMutationBatch(e,r){return bh(e._e,this.userId,r).next(s=>(e.addOnCommittedListener(()=>{this.xn(r.batchId)}),te.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}xn(e){delete this.vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return te.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return ea(e).J({range:s},(h,g,w)=>{if(h[0]===this.userId){const S=mn(h[1]);c.push(S)}else w.done()}).next(()=>{ft(0===c.length)})})}containsKey(e,r){return ac(e,this.userId,r)}On(e){return pd(e).get(this.userId).next(r=>r||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ac(a,e,r){const s=cr(e,r.path),c=s[1],h=IDBKeyRange.lowerBound(s);let g=!1;return ea(a).J({range:h,H:!0},(w,S,N)=>{const[z,Q,ue]=w;z===e&&Q===c&&(g=!0),N.done()}).next(()=>g)}function _s(a){return Lr(a,"mutations")}function ea(a){return Lr(a,"documentMutations")}function pd(a){return Lr(a,"mutationQueues")}class Lo{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new Lo(0)}static Bn(){return new Lo(-1)}}class gd{constructor(e,r){this.referenceDelegate=e,this.serializer=r}allocateTargetId(e){return this.kn(e).next(r=>{const s=new Lo(r.highestTargetId);return r.highestTargetId=s.next(),this.qn(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.kn(e).next(r=>vt.fromTimestamp(new mt(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.kn(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,s){return this.kn(e).next(c=>(c.highestListenSequenceNumber=r,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),r>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=r),this.qn(e,c)))}addTargetData(e,r){return this.Qn(e,r).next(()=>this.kn(e).next(s=>(s.targetCount+=1,this.Kn(r,s),this.qn(e,s))))}updateTargetData(e,r){return this.Qn(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Ma(e).delete(r.targetId)).next(()=>this.kn(e)).next(s=>(ft(s.targetCount>0),s.targetCount-=1,this.qn(e,s)))}removeTargets(e,r,s){let c=0;const h=[];return Ma(e).J((g,w)=>{const S=Me(w);S.sequenceNumber<=r&&null===s.get(S.targetId)&&(c++,h.push(this.removeTargetData(e,S)))}).next(()=>te.waitFor(h)).next(()=>c)}forEachTarget(e,r){return Ma(e).J((s,c)=>{const h=Me(c);r(h)})}kn(e){return md(e).get("targetGlobalKey").next(r=>(ft(null!==r),r))}qn(e,r){return md(e).put("targetGlobalKey",r)}Qn(e,r){return Ma(e).put(St(this.serializer,r))}Kn(e,r){let s=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,s=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.kn(e).next(r=>r.targetCount)}getTargetData(e,r){const s=os(r),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let h=null;return Ma(e).J({range:c,index:"queryTargetsIndex"},(g,w,S)=>{const N=Me(w);Ho(r,N.target)&&(h=N,S.done())}).next(()=>h)}addMatchingKeys(e,r,s){const c=[],h=co(e);return r.forEach(g=>{const w=It(g.path);c.push(h.put({targetId:s,path:w})),c.push(this.referenceDelegate.addReference(e,s,g))}),te.waitFor(c)}removeMatchingKeys(e,r,s){const c=co(e);return te.forEach(r,h=>{const g=It(h.path);return te.waitFor([c.delete([s,g]),this.referenceDelegate.removeReference(e,s,h)])})}removeMatchingKeysForTargetId(e,r){const s=co(e),c=IDBKeyRange.bound([r],[r+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,r){const s=IDBKeyRange.bound([r],[r+1],!1,!0),c=co(e);let h=an();return c.J({range:s,H:!0},(g,w,S)=>{const N=mn(g[1]),z=new it(N);h=h.add(z)}).next(()=>h)}containsKey(e,r){const s=It(r.path),c=IDBKeyRange.bound([s],[Cn(s)],!1,!0);let h=0;return co(e).J({index:"documentTargetsIndex",H:!0,range:c},([g,w],S,N)=>{0!==g&&(h++,N.done())}).next(()=>h>0)}ot(e,r){return Ma(e).get(r).next(s=>s?Me(s):null)}}function Ma(a){return Lr(a,"targets")}function md(a){return Lr(a,"targetGlobal")}function co(a){return Lr(a,"targetDocuments")}function uc([a,e],[r,s]){const c=Et(a,r);return 0===c?Et(e,s):c}class xa{constructor(e){this.$n=e,this.buffer=new Pn(uc),this.Un=0}Wn(){return++this.Un}Gn(e){const r=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();uc(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Xc{constructor(e,r,s){this.garbageCollector=e,this.asyncQueue=r,this.localStore=s,this.zn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}stop(){this.zn&&(this.zn.cancel(),this.zn=null)}get started(){return null!==this.zn}jn(e){var r=this;ie("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,_.Z)(function*(){r.zn=null;try{yield r.localStore.collectGarbage(r.garbageCollector)}catch(s){Kn(s)?ie("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Oe(s)}yield r.jn(3e5)}))}}class Sh{constructor(e,r){this.Hn=e,this.params=r}calculateTargetCount(e,r){return this.Hn.Jn(e).next(s=>Math.floor(r/100*s))}nthSequenceNumber(e,r){if(0===r)return te.resolve(q.oe);const s=new xa(r);return this.Hn.forEachTarget(e,c=>s.Gn(c.sequenceNumber)).next(()=>this.Hn.Yn(e,c=>s.Gn(c))).next(()=>s.maxValue)}removeTargets(e,r,s){return this.Hn.removeTargets(e,r,s)}removeOrphanedDocuments(e,r){return this.Hn.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Ch)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ch):this.Zn(e,r))}getCacheSize(e){return this.Hn.getCacheSize(e)}Zn(e,r){let s,c,h,g,w,S,N;const z=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Q=>(Q>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Q}`),c=this.params.maximumSequenceNumbersToCollect):c=Q,g=Date.now(),this.nthSequenceNumber(e,c))).next(Q=>(s=Q,w=Date.now(),this.removeTargets(e,s,r))).next(Q=>(h=Q,S=Date.now(),this.removeOrphanedDocuments(e,s))).next(Q=>(N=Date.now(),Qe()<=le.in.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${g-z}ms\n\tDetermined least recently used ${c} in `+(w-g)+`ms\n\tRemoved ${h} targets in `+(S-w)+`ms\n\tRemoved ${Q} documents in `+(N-S)+`ms\nTotal Duration: ${N-z}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:h,documentsRemoved:Q})))}}class Na{constructor(e,r){this.db=e,this.garbageCollector=function _d(a,e){return new Sh(a,e)}(this,r)}Jn(e){const r=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>r.next(c=>s+c))}Xn(e){let r=0;return this.Yn(e,s=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}Yn(e,r){return this.er(e,(s,c)=>r(c))}addReference(e,r,s){return el(e,s)}removeReference(e,r,s){return el(e,s)}removeTargets(e,r,s){return this.db.getTargetCache().removeTargets(e,r,s)}markPotentiallyOrphaned(e,r){return el(e,r)}tr(e,r){return function(c,h){let g=!1;return pd(c).Y(w=>ac(c,w,h).next(S=>(S&&(g=!0),te.resolve(!S)))).next(()=>g)}(e,r)}removeOrphanedDocuments(e,r){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let h=0;return this.er(e,(g,w)=>{if(w<=r){const S=this.tr(e,g).next(N=>{if(!N)return h++,s.getEntry(e,g).next(()=>(s.removeEntry(g,vt.min()),co(e).delete([0,It(g.path)])))});c.push(S)}}).next(()=>te.waitFor(c)).next(()=>s.apply(e)).next(()=>h)}removeTarget(e,r){const s=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,r){return el(e,r)}er(e,r){const s=co(e);let c,h=q.oe;return s.J({index:"documentTargetsIndex"},([g,w],{path:S,sequenceNumber:N})=>{0===g?(h!==q.oe&&r(new it(mn(c)),h),h=N,c=S):h=q.oe}).next(()=>{h!==q.oe&&r(new it(mn(c)),h)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function el(a,e){return co(a).put((c=a.currentSequenceNumber,{targetId:0,path:It(e.path),sequenceNumber:c}));var c}class di{constructor(){this.changes=new Cs(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Yn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const s=this.changes.get(r);return void 0!==s?te.resolve(s):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yd{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,r,s){return ta(e).put(s)}removeEntry(e,r,s){return ta(e).delete(function(h,g){const w=h.path.toArray();return[w.slice(0,w.length-2),w[w.length-2],M(g),w[w.length-1]]}(r,s))}updateMetadata(e,r){return this.getMetadata(e).next(s=>(s.byteSize+=r,this.nr(e,s)))}getEntry(e,r){let s=Yn.newInvalidDocument(r);return ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(na(r))},(c,h)=>{s=this.rr(r,h)}).next(()=>s)}ir(e,r){let s={size:0,document:Yn.newInvalidDocument(r)};return ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(na(r))},(c,h)=>{s={document:this.rr(r,h),size:Pa(h)}}).next(()=>s)}getEntries(e,r){let s=$r();return this.sr(e,r,(c,h)=>{const g=this.rr(c,h);s=s.insert(c,g)}).next(()=>s)}_r(e,r){let s=$r(),c=new Qn(it.comparator);return this.sr(e,r,(h,g)=>{const w=this.rr(h,g);s=s.insert(h,w),c=c.insert(h,Pa(g))}).next(()=>({documents:s,ar:c}))}sr(e,r,s){if(r.isEmpty())return te.resolve();let c=new Pn(ia);r.forEach(S=>c=c.add(S));const h=IDBKeyRange.bound(na(c.first()),na(c.last())),g=c.getIterator();let w=g.getNext();return ta(e).J({index:"documentKeyIndex",range:h},(S,N,z)=>{const Q=it.fromSegments([...N.prefixPath,N.collectionGroup,N.documentId]);for(;w&&ia(w,Q)<0;)s(w,null),w=g.getNext();w&&w.isEqual(Q)&&(s(w,N),w=g.hasNext()?g.getNext():null),w?z.$(na(w)):z.done()}).next(()=>{for(;w;)s(w,null),w=g.hasNext()?g.getNext():null})}getDocumentsMatchingQuery(e,r,s,c,h){const g=r.path,w=[g.popLast().toArray(),g.lastSegment(),M(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],S=[g.popLast().toArray(),g.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(e).U(IDBKeyRange.bound(w,S,!0)).next(N=>{h?.incrementDocumentReadCount(N.length);let z=$r();for(const Q of N){const ue=this.rr(it.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);ue.isFoundDocument()&&(Vs(r,ue)||c.has(ue.key))&&(z=z.insert(ue.key,ue))}return z})}getAllFromCollectionGroup(e,r,s,c){let h=$r();const g=ra(r,s),w=ra(r,Ct.max());return ta(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(g,w,!0)},(S,N,z)=>{const Q=this.rr(it.fromSegments(N.prefixPath.concat(N.collectionGroup,N.documentId)),N);h=h.insert(Q.key,Q),h.size===c&&z.done()}).next(()=>h)}newChangeBuffer(e){return new tl(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return nl(e).get("remoteDocumentGlobalKey").next(r=>(ft(!!r),r))}nr(e,r){return nl(e).put("remoteDocumentGlobalKey",r)}rr(e,r){if(r){const s=function v(a,e){let r;if(e.document)r=Br(a.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=it.fromSegments(e.noDocument.path),c=ne(e.noDocument.readTime);r=Yn.newNoDocument(s,c),e.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const s=it.fromSegments(e.unknownDocument.path),c=ne(e.unknownDocument.version);r=Yn.newUnknownDocument(s,c)}}return e.readTime&&r.setReadTime(function(c){const h=new mt(c[0],c[1]);return vt.fromTimestamp(h)}(e.readTime)),r}(this.serializer,r);if(!s.isNoDocument()||!s.version.isEqual(vt.min()))return s}return Yn.newInvalidDocument(e)}}function cc(a){return new yd(a)}class tl extends di{constructor(e,r){super(),this.ur=e,this.trackRemovals=r,this.cr=new Cs(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const r=[];let s=0,c=new Pn((h,g)=>Et(h.canonicalString(),g.canonicalString()));return this.changes.forEach((h,g)=>{const w=this.cr.get(h);if(r.push(this.ur.removeEntry(e,h,w.readTime)),g.isValidDocument()){const S=C(this.ur.serializer,g);c=c.add(h.path.popLast());const N=Pa(S);s+=N-w.size,r.push(this.ur.addEntry(e,h,S))}else if(s-=w.size,this.trackRemovals){const S=C(this.ur.serializer,g.convertToNoDocument(vt.min()));r.push(this.ur.addEntry(e,h,S))}}),c.forEach(h=>{r.push(this.ur.indexManager.addToCollectionParentIndex(e,h))}),r.push(this.ur.updateMetadata(e,s)),te.waitFor(r)}getFromCache(e,r){return this.ur.ir(e,r).next(s=>(this.cr.set(r,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,r){return this.ur._r(e,r).next(({documents:s,ar:c})=>(c.forEach((h,g)=>{this.cr.set(h,{size:g,readTime:s.get(h).readTime})}),s))}}function nl(a){return Lr(a,"remoteDocumentGlobal")}function ta(a){return Lr(a,"remoteDocumentsV14")}function na(a){const e=a.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ra(a,e){const r=e.documentKey.path.toArray();return[a,M(e.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function ia(a,e){const r=a.path.toArray(),s=e.path.toArray();let c=0;for(let h=0;h<r.length-2&&h<s.length-2;++h)if(c=Et(r[h],s[h]),c)return c;return c=Et(r.length,s.length),c||(c=Et(r[r.length-2],s[s.length-2]),c||Et(r[r.length-1],s[s.length-1]))}class yu{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}class rl{constructor(e,r,s,c){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,r){let s=null;return this.documentOverlayCache.getOverlay(e,r).next(c=>(s=c,this.remoteDocumentCache.getEntry(e,r))).next(c=>(null!==s&&Le(s.mutation,c,pr.empty(),mt.now()),c))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.getLocalViewOfDocuments(e,s,an()).next(()=>s))}getLocalViewOfDocuments(e,r,s=an()){const c=ni();return this.populateOverlays(e,c,r).next(()=>this.computeViews(e,r,c,s).next(h=>{let g=wo();return h.forEach((w,S)=>{g=g.insert(w,S.overlayedDocument)}),g}))}getOverlayedDocuments(e,r){const s=ni();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,an()))}populateOverlays(e,r,s){const c=[];return s.forEach(h=>{r.has(h)||c.push(h)}),this.documentOverlayCache.getOverlays(e,c).next(h=>{h.forEach((g,w)=>{r.set(g,w)})})}computeViews(e,r,s,c){let h=$r();const g=ls(),w=ls();return r.forEach((S,N)=>{const z=s.get(N.key);c.has(N.key)&&(void 0===z||z.mutation instanceof pn)?h=h.insert(N.key,N):void 0!==z?(g.set(N.key,z.mutation.getFieldMask()),Le(z.mutation,N,z.mutation.getFieldMask(),mt.now())):g.set(N.key,pr.empty())}),this.recalculateAndSaveOverlays(e,h).next(S=>(S.forEach((N,z)=>g.set(N,z)),r.forEach((N,z)=>{var Q;return w.set(N,new yu(z,null!==(Q=g.get(N))&&void 0!==Q?Q:null))}),w))}recalculateAndSaveOverlays(e,r){const s=ls();let c=new Qn((g,w)=>g-w),h=an();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(g=>{for(const w of g)w.keys().forEach(S=>{const N=r.get(S);if(null===N)return;let z=s.get(S)||pr.empty();z=w.applyToLocalView(N,z),s.set(S,z);const Q=(c.get(w.batchId)||an()).add(S);c=c.insert(w.batchId,Q)})}).next(()=>{const g=[],w=c.getReverseIterator();for(;w.hasNext();){const S=w.getNext(),N=S.key,z=S.value,Q=cs();z.forEach(ue=>{if(!h.has(ue)){const xe=F(r.get(ue),s.get(ue));null!==xe&&Q.set(ue,xe),h=h.add(ue)}}),g.push(this.documentOverlayCache.saveOverlays(e,N,Q))}return te.waitFor(g)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,r,s,c){return it.isDocumentKey((g=r).path)&&null===g.collectionGroup&&0===g.filters.length?this.getDocumentsMatchingDocumentQuery(e,r.path):qu(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,s,c):this.getDocumentsMatchingCollectionQuery(e,r,s,c);var g}getNextDocuments(e,r,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,s,c).next(h=>{const g=c-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,s.largestBatchId,c-h.size):te.resolve(ni());let w=-1,S=h;return g.next(N=>te.forEach(N,(z,Q)=>(w<Q.largestBatchId&&(w=Q.largestBatchId),h.get(z)?te.resolve():this.remoteDocumentCache.getEntry(e,z).next(ue=>{S=S.insert(z,ue)}))).next(()=>this.populateOverlays(e,N,h)).next(()=>this.computeViews(e,S,N,an())).next(z=>({batchId:w,changes:Ao(z)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new it(r)).next(s=>{let c=wo();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,r,s,c){const h=r.collectionGroup;let g=wo();return this.indexManager.getCollectionParents(e,h).next(w=>te.forEach(w,S=>{const N=(Q=r,ue=S.child(h),new as(ue,null,Q.explicitOrderBy.slice(),Q.filters.slice(),Q.limit,Q.limitType,Q.startAt,Q.endAt));var Q,ue;return this.getDocumentsMatchingCollectionQuery(e,N,s,c).next(z=>{z.forEach((Q,ue)=>{g=g.insert(Q,ue)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,r,s,c){let h;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,s.largestBatchId).next(g=>(h=g,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,s,h,c))).next(g=>{h.forEach((S,N)=>{const z=N.getKey();null===g.get(z)&&(g=g.insert(z,Yn.newInvalidDocument(z)))});let w=wo();return g.forEach((S,N)=>{const z=h.get(S);void 0!==z&&Le(z.mutation,N,pr.empty(),mt.now()),Vs(r,N)&&(w=w.insert(S,N))}),w})}}class lc{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,r){return te.resolve(this.lr.get(r))}saveBundleMetadata(e,r){return this.lr.set(r.id,{id:(c=r).id,version:c.version,createTime:Cr(c.createTime)}),te.resolve();var c}getNamedQuery(e,r){return te.resolve(this.hr.get(r))}saveNamedQuery(e,r){return this.hr.set(r.name,{name:(c=r).name,query:hn(c.bundledQuery),readTime:Cr(c.readTime)}),te.resolve();var c}}class vu{constructor(){this.overlays=new Qn(it.comparator),this.Pr=new Map}getOverlay(e,r){return te.resolve(this.overlays.get(r))}getOverlays(e,r){const s=ni();return te.forEach(r,c=>this.getOverlay(e,c).next(h=>{null!==h&&s.set(c,h)})).next(()=>s)}saveOverlays(e,r,s){return s.forEach((c,h)=>{this.ht(e,r,h)}),te.resolve()}removeOverlaysForBatchId(e,r,s){const c=this.Pr.get(s);return void 0!==c&&(c.forEach(h=>this.overlays=this.overlays.remove(h)),this.Pr.delete(s)),te.resolve()}getOverlaysForCollection(e,r,s){const c=ni(),h=r.length+1,g=new it(r.child("")),w=this.overlays.getIteratorFrom(g);for(;w.hasNext();){const S=w.getNext().value,N=S.getKey();if(!r.isPrefixOf(N.path))break;N.path.length===h&&S.largestBatchId>s&&c.set(S.getKey(),S)}return te.resolve(c)}getOverlaysForCollectionGroup(e,r,s,c){let h=new Qn((N,z)=>N-z);const g=this.overlays.getIterator();for(;g.hasNext();){const N=g.getNext().value;if(N.getKey().getCollectionGroup()===r&&N.largestBatchId>s){let z=h.get(N.largestBatchId);null===z&&(z=ni(),h=h.insert(N.largestBatchId,z)),z.set(N.getKey(),N)}}const w=ni(),S=h.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((N,z)=>w.set(N,z)),!(w.size()>=c)););return te.resolve(w)}ht(e,r,s){const c=this.overlays.get(s.key);if(null!==c){const g=this.Pr.get(c.largestBatchId).delete(s.key);this.Pr.set(c.largestBatchId,g)}this.overlays=this.overlays.insert(s.key,new Ss(r,s));let h=this.Pr.get(r);void 0===h&&(h=an(),this.Pr.set(r,h)),this.Pr.set(r,h.add(s.key))}}class Hg{constructor(){this.sessionToken=Sr.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,te.resolve()}}class vd{constructor(){this.Ir=new Pn(ii.Tr),this.Er=new Pn(ii.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,r){const s=new ii(e,r);this.Ir=this.Ir.add(s),this.Er=this.Er.add(s)}Ar(e,r){e.forEach(s=>this.addReference(s,r))}removeReference(e,r){this.Rr(new ii(e,r))}Vr(e,r){e.forEach(s=>this.removeReference(s,r))}mr(e){const r=new it(new $t([])),s=new ii(r,e),c=new ii(r,e+1),h=[];return this.Er.forEachInRange([s,c],g=>{this.Rr(g),h.push(g.key)}),h}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){const r=new it(new $t([])),s=new ii(r,e),c=new ii(r,e+1);let h=an();return this.Er.forEachInRange([s,c],g=>{h=h.add(g.key)}),h}containsKey(e){const r=new ii(e,0),s=this.Ir.firstAfterOrEqual(r);return null!==s&&e.isEqual(s.key)}}class ii{constructor(e,r){this.key=e,this.yr=r}static Tr(e,r){return it.comparator(e.key,r.key)||Et(e.yr,r.yr)}static dr(e,r){return Et(e.yr,r.yr)||it.comparator(e.key,r.key)}}class Wg{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.wr=1,this.Sr=new Pn(ii.Tr)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,r,s,c){const h=this.wr;this.wr++;const g=new Kr(h,r,s,c);this.mutationQueue.push(g);for(const w of c)this.Sr=this.Sr.add(new ii(w.key,h)),this.indexManager.addToCollectionParentIndex(e,w.key.path.popLast());return te.resolve(g)}lookupMutationBatch(e,r){return te.resolve(this.br(r))}getNextMutationBatchAfterBatchId(e,r){const c=this.Dr(r+1),h=c<0?0:c;return te.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.wr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const s=new ii(r,0),c=new ii(r,Number.POSITIVE_INFINITY),h=[];return this.Sr.forEachInRange([s,c],g=>{const w=this.br(g.yr);h.push(w)}),te.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(e,r){let s=new Pn(Et);return r.forEach(c=>{const h=new ii(c,0),g=new ii(c,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([h,g],w=>{s=s.add(w.yr)})}),te.resolve(this.Cr(s))}getAllMutationBatchesAffectingQuery(e,r){const s=r.path,c=s.length+1;let h=s;it.isDocumentKey(h)||(h=h.child(""));const g=new ii(new it(h),0);let w=new Pn(Et);return this.Sr.forEachWhile(S=>{const N=S.key.path;return!!s.isPrefixOf(N)&&(N.length===c&&(w=w.add(S.yr)),!0)},g),te.resolve(this.Cr(w))}Cr(e){const r=[];return e.forEach(s=>{const c=this.br(s);null!==c&&r.push(c)}),r}removeMutationBatch(e,r){ft(0===this.vr(r.batchId,"removed")),this.mutationQueue.shift();let s=this.Sr;return te.forEach(r.mutations,c=>{const h=new ii(c.key,r.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Sr=s})}xn(e){}containsKey(e,r){const s=new ii(r,0),c=this.Sr.firstAfterOrEqual(s);return te.resolve(r.isEqual(c&&c.key))}performConsistencyCheck(e){return te.resolve()}vr(e,r){return this.Dr(e)}Dr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}br(e){const r=this.Dr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}class Gg{constructor(e){this.Fr=e,this.docs=new Qn(it.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const s=r.key,c=this.docs.get(s),h=c?c.size:0,g=this.Fr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:g}),this.size+=g-h,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const s=this.docs.get(r);return te.resolve(s?s.document.mutableCopy():Yn.newInvalidDocument(r))}getEntries(e,r){let s=$r();return r.forEach(c=>{const h=this.docs.get(c);s=s.insert(c,h?h.document.mutableCopy():Yn.newInvalidDocument(c))}),te.resolve(s)}getDocumentsMatchingQuery(e,r,s,c){let h=$r();const g=r.path,w=new it(g.child("")),S=this.docs.getIteratorFrom(w);for(;S.hasNext();){const{key:N,value:{document:z}}=S.getNext();if(!g.isPrefixOf(N.path))break;N.path.length>g.length+1||Pr(Gr(z),s)<=0||(c.has(z.key)||Vs(r,z))&&(h=h.insert(z.key,z.mutableCopy()))}return te.resolve(h)}getAllFromCollectionGroup(e,r,s,c){gt()}Mr(e,r){return te.forEach(this.docs,s=>r(s))}newChangeBuffer(e){return new sp(this)}getSize(e){return te.resolve(this.size)}}class sp extends di{constructor(e){super(),this.ur=e}applyChanges(e){const r=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?r.push(this.ur.addEntry(e,c)):this.ur.removeEntry(s)}),te.waitFor(r)}getFromCache(e,r){return this.ur.getEntry(e,r)}getAllFromCache(e,r){return this.ur.getEntries(e,r)}}class qg{constructor(e){this.persistence=e,this.Or=new Cs(r=>os(r),Ho),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new vd,this.targetCount=0,this.Br=Lo.Ln()}forEachTarget(e,r){return this.Or.forEach((s,c)=>r(c)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.Nr&&(this.Nr=r),te.resolve()}Qn(e){this.Or.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Br=new Lo(r),this.highestTargetId=r),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,r){return this.Qn(r),this.targetCount+=1,te.resolve()}updateTargetData(e,r){return this.Qn(r),te.resolve()}removeTargetData(e,r){return this.Or.delete(r.target),this.Lr.mr(r.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,r,s){let c=0;const h=[];return this.Or.forEach((g,w)=>{w.sequenceNumber<=r&&null===s.get(w.targetId)&&(this.Or.delete(g),h.push(this.removeMatchingKeysForTargetId(e,w.targetId)),c++)}),te.waitFor(h).next(()=>c)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,r){const s=this.Or.get(r)||null;return te.resolve(s)}addMatchingKeys(e,r,s){return this.Lr.Ar(r,s),te.resolve()}removeMatchingKeys(e,r,s){this.Lr.Vr(r,s);const c=this.persistence.referenceDelegate,h=[];return c&&r.forEach(g=>{h.push(c.markPotentiallyOrphaned(e,g))}),te.waitFor(h)}removeMatchingKeysForTargetId(e,r){return this.Lr.mr(r),te.resolve()}getMatchingKeysForTargetId(e,r){const s=this.Lr.pr(r);return te.resolve(s)}containsKey(e,r){return te.resolve(this.Lr.containsKey(r))}}class dc{constructor(e,r){this.kr={},this.overlays={},this.qr=new q(0),this.Qr=!1,this.Qr=!0,this.Kr=new Hg,this.referenceDelegate=e(this),this.$r=new qg(this),this.indexManager=new Zc,this.remoteDocumentCache=new Gg(s=>this.referenceDelegate.Ur(s)),this.serializer=new b(r),this.Wr=new lc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new vu,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let s=this.kr[e.toKey()];return s||(s=new Wg(r,this.referenceDelegate),this.kr[e.toKey()]=s),s}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,r,s){ie("MemoryPersistence","Starting transaction:",e);const c=new Eu(this.qr.next());return this.referenceDelegate.Gr(),s(c).next(h=>this.referenceDelegate.zr(c).next(()=>h)).toPromise().then(h=>(c.raiseOnCommittedEvent(),h))}jr(e,r){return te.or(Object.values(this.kr).map(s=>()=>s.containsKey(e,r)))}}class Eu extends hr{constructor(e){super(),this.currentSequenceNumber=e}}class il{constructor(e){this.persistence=e,this.Hr=new vd,this.Jr=null}static Yr(e){return new il(e)}get Zr(){if(this.Jr)return this.Jr;throw gt()}addReference(e,r,s){return this.Hr.addReference(s,r),this.Zr.delete(s.toString()),te.resolve()}removeReference(e,r,s){return this.Hr.removeReference(s,r),this.Zr.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,r){return this.Zr.add(r.toString()),te.resolve()}removeTarget(e,r){this.Hr.mr(r.targetId).forEach(c=>this.Zr.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,r.targetId).next(c=>{c.forEach(h=>this.Zr.add(h.toString()))}).next(()=>s.removeTargetData(e,r))}Gr(){this.Jr=new Set}zr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Zr,s=>{const c=it.fromPath(s);return this.Xr(e,c).next(h=>{h||r.removeEntry(c,vt.min())})}).next(()=>(this.Jr=null,r.apply(e)))}updateLimboDocument(e,r){return this.Xr(e,r).next(s=>{s?this.Zr.delete(r.toString()):this.Zr.add(r.toString())})}Ur(e){return 0}Xr(e,r){return te.or([()=>te.resolve(this.Hr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.jr(e,r)])}}class si{constructor(e){this.serializer=e}O(e,r,s,c){const h=new Dt("createOrUpgrade",r);var S;s<1&&c>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",en,{unique:!0}),S.createObjectStore("documentMutations"),Rh(e),function(S){S.createObjectStore("remoteDocuments")}(e));let g=te.resolve();return s<3&&c>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),Rh(e)),g=g.next(()=>function(S){const N=S.store("targetGlobal"),z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return N.put("targetGlobalKey",z)}(h))),s<4&&c>=4&&(0!==s&&(g=g.next(()=>function(S,N){return N.store("mutations").U().next(z=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",en,{unique:!0});const Q=N.store("mutations"),ue=z.map(xe=>Q.put(xe));return te.waitFor(ue)})}(e,h))),g=g.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(g=g.next(()=>this.ti(h))),s<6&&c>=6&&(g=g.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.ni(h)))),s<7&&c>=7&&(g=g.next(()=>this.ri(h))),s<8&&c>=8&&(g=g.next(()=>this.ii(e,h))),s<9&&c>=9&&(g=g.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(g=g.next(()=>this.si(h))),s<11&&c>=11&&(g=g.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(g=g.next(()=>{!function(S){const N=S.createObjectStore("documentOverlays",{keyPath:Zt});N.createIndex("collectionPathOverlayIndex",fn,{unique:!1}),N.createIndex("collectionGroupOverlayIndex",Xn,{unique:!1})}(e)})),s<13&&c>=13&&(g=g.next(()=>function(S){const N=S.createObjectStore("remoteDocumentsV14",{keyPath:ji});N.createIndex("documentKeyIndex",Mr),N.createIndex("collectionGroupIndex",Es)}(e)).next(()=>this.oi(e,h)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(g=g.next(()=>this._i(e,h))),s<15&&c>=15&&(g=g.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:De}).createIndex("sequenceNumberIndex",Ke,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:At}).createIndex("documentKeyIndex",Ht,{unique:!1})}(e))),s<16&&c>=16&&(g=g.next(()=>{r.objectStore("indexState").clear()}).next(()=>{r.objectStore("indexEntries").clear()})),s<17&&c>=17&&(g=g.next(()=>{!function(S){S.createObjectStore("globals",{keyPath:"name"})}(e)})),g}ni(e){let r=0;return e.store("remoteDocuments").J((s,c)=>{r+=Pa(c)}).next(()=>{const s={byteSize:r};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}ti(e){const r=e.store("mutationQueues"),s=e.store("mutations");return r.U().next(c=>te.forEach(c,h=>{const g=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return s.U("userMutationsIndex",g).next(w=>te.forEach(w,S=>{ft(S.userId===h.userId);const N=ke(this.serializer,S);return bh(e,h.userId,N).next(()=>{})}))}))}ri(e){const r=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const h=[];return s.J((g,w)=>{const S=new $t(g),N=[0,It(S)];h.push(r.get(N).next(z=>z?te.resolve():r.put({targetId:0,path:It(S),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>te.waitFor(h))})}ii(e,r){e.createObjectStore("collectionParents",{keyPath:Ue});const s=r.store("collectionParents"),c=new Sa,h=g=>{if(c.add(g)){const w=g.lastSegment(),S=g.popLast();return s.put({collectionId:w,parent:It(S)})}};return r.store("remoteDocuments").J({H:!0},(g,w)=>{const S=new $t(g);return h(S.popLast())}).next(()=>r.store("documentMutations").J({H:!0},([g,w,S],N)=>{const z=mn(w);return h(z.popLast())}))}si(e){const r=e.store("targets");return r.J((s,c)=>{const h=Me(c),g=St(this.serializer,h);return r.put(g)})}oi(e,r){const s=r.store("remoteDocuments"),c=[];return s.J((h,g)=>{const w=r.store("remoteDocumentsV14"),S=(Q=g,Q.document?new it($t.fromString(Q.document.name).popFirst(5)):Q.noDocument?it.fromSegments(Q.noDocument.path):Q.unknownDocument?it.fromSegments(Q.unknownDocument.path):gt()).path.toArray(),N={prefixPath:S.slice(0,S.length-2),collectionGroup:S[S.length-2],documentId:S[S.length-1],readTime:g.readTime||[0,0],unknownDocument:g.unknownDocument,noDocument:g.noDocument,document:g.document,hasCommittedMutations:!!g.hasCommittedMutations};var Q;c.push(w.put(N))}).next(()=>te.waitFor(c))}_i(e,r){const s=r.store("mutations"),c=cc(this.serializer),h=new dc(il.Yr,this.serializer.ct);return s.U().next(g=>{const w=new Map;return g.forEach(S=>{var N;let z=null!==(N=w.get(S.userId))&&void 0!==N?N:an();ke(this.serializer,S).keys().forEach(Q=>z=z.add(Q)),w.set(S.userId,z)}),te.forEach(w,(S,N)=>{const z=new Ne(N),Q=zs.lt(this.serializer,z),ue=h.getIndexManager(z),xe=Xo.lt(z,this.serializer,ue,h.referenceDelegate);return new rl(c,xe,Q,ue).recalculateAndSaveOverlaysForDocumentKeys(new Is(r,q.oe),S).next()})})}}function Rh(a){a.createObjectStore("targetDocuments",{keyPath:Dr}).createIndex("documentTargetsIndex",wn,{unique:!0}),a.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",wi,{unique:!0}),a.createObjectStore("targetGlobal")}const Oa="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ed{constructor(e,r,s,c,h,g,w,S,N,z,Q=17){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=s,this.ai=h,this.window=g,this.document=w,this.ui=N,this.ci=z,this.li=Q,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.hi=null,this.inForeground=!1,this.Pi=null,this.Ii=null,this.Ti=Number.NEGATIVE_INFINITY,this.Ei=ue=>Promise.resolve(),!Ed.D())throw new Z(he.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Na(this,c),this.di=r+"main",this.serializer=new b(S),this.Ai=new jt(this.di,this.li,new si(this.serializer)),this.Kr=new wh,this.$r=new gd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cc(this.serializer),this.Wr=new ba,this.window&&this.window.localStorage?this.Ri=this.window.localStorage:(this.Ri=null,!1===z&&ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Vi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Z(he.FAILED_PRECONDITION,Oa);return this.mi(),this.fi(),this.gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.$r.getHighestSequenceNumber(e))}).then(e=>{this.qr=new q(e,this.ui)}).then(()=>{this.Qr=!0}).catch(e=>(this.Ai&&this.Ai.close(),Promise.reject(e)))}pi(e){var r=this;return this.Ei=function(){var s=(0,_.Z)(function*(c){if(r.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ai.L(function(){var r=(0,_.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ai.enqueueAndForget((0,_.Z)(function*(){r.started&&(yield r.Vi())})))}Vi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>qs(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.yi(e).next(r=>{r||(this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)))})}).next(()=>this.wi(e)).next(r=>this.isPrimary&&!r?this.Si(e).next(()=>!1):!!r&&this.bi(e).next(()=>!0))).catch(e=>{if(Kn(e))return ie("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ie("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ai.enqueueRetryable(()=>this.Ei(e)),this.isPrimary=e})}yi(e){return Ii(e).get("owner").next(r=>te.resolve(this.Di(r)))}Ci(e){return qs(e).delete(this.clientId)}vi(){var e=this;return(0,_.Z)(function*(){if(e.isPrimary&&!e.Fi(e.Ti,18e5)){e.Ti=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Lr(s,"clientMetadata");return c.U().next(h=>{const g=e.Mi(h,18e5),w=h.filter(S=>-1===g.indexOf(S));return te.forEach(w,S=>c.delete(S.clientId)).next(()=>w)})}).catch(()=>[]);if(e.Ri)for(const s of r)e.Ri.removeItem(e.xi(s.clientId))}})()}gi(){this.Ii=this.ai.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Vi().then(()=>this.vi()).then(()=>this.gi()))}Di(e){return!!e&&e.ownerId===this.clientId}wi(e){return this.ci?te.resolve(!0):Ii(e).get("owner").next(r=>{if(null!==r&&this.Fi(r.leaseTimestampMs,5e3)&&!this.Oi(r.ownerId)){if(this.Di(r)&&this.networkEnabled)return!0;if(!this.Di(r)){if(!r.allowTabSynchronization)throw new Z(he.FAILED_PRECONDITION,Oa);return!1}}return!(!this.networkEnabled||!this.inForeground)||qs(e).U().next(s=>void 0===this.Mi(s,5e3).find(c=>!(this.clientId===c.clientId||!(!this.networkEnabled&&c.networkEnabled||!this.inForeground&&c.inForeground&&this.networkEnabled===c.networkEnabled))))}).next(r=>(this.isPrimary!==r&&ie("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,_.Z)(function*(){e.Qr=!1,e.Ni(),e.Ii&&(e.Ii.cancel(),e.Ii=null),e.Li(),e.Bi(),yield e.Ai.runTransaction("shutdown","readwrite",["owner","clientMetadata"],r=>{const s=new Is(r,q.oe);return e.Si(s).next(()=>e.Ci(s))}),e.Ai.close(),e.ki()})()}Mi(e,r){return e.filter(s=>this.Fi(s.updateTimeMs,r)&&!this.Oi(s.clientId))}qi(){return this.runTransaction("getActiveClients","readonly",e=>qs(e).U().next(r=>this.Mi(r,18e5).map(s=>s.clientId)))}get started(){return this.Qr}getGlobalsCache(){return this.Kr}getMutationQueue(e,r){return Xo.lt(e,this.serializer,r,this.referenceDelegate)}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ra(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return zs.lt(this.serializer,e)}getBundleCache(){return this.Wr}runTransaction(e,r,s){ie("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===r?"readonly":"readwrite",h=17===(S=this.li)?nu:16===S?rs:15===S?Ms:14===S?$n:13===S?ns:12===S?ei:11===S?Wn:void gt();var S;let g;return this.Ai.runTransaction(e,c,h,w=>(g=new Is(w,this.qr?this.qr.next():q.oe),"readwrite-primary"===r?this.yi(g).next(S=>!!S||this.wi(g)).next(S=>{if(!S)throw ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ai.enqueueRetryable(()=>this.Ei(!1)),new Z(he.FAILED_PRECONDITION,cn);return s(g)}).next(S=>this.bi(g).next(()=>S)):this.Qi(g).next(()=>s(g)))).then(w=>(g.raiseOnCommittedEvent(),w))}Qi(e){return Ii(e).get("owner").next(r=>{if(null!==r&&this.Fi(r.leaseTimestampMs,5e3)&&!this.Oi(r.ownerId)&&!this.Di(r)&&!(this.ci||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Z(he.FAILED_PRECONDITION,Oa)})}bi(e){const r={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ii(e).put("owner",r)}static D(){return jt.D()}Si(e){const r=Ii(e);return r.get("owner").next(s=>this.Di(s)?(ie("IndexedDbPersistence","Releasing primary lease."),r.delete("owner")):te.resolve())}Fi(e,r){const s=Date.now();return!(e<s-r||e>s&&(ut(`Detected an update time that is in the future: ${e} > ${s}`),1))}mi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Pi=()=>{this.ai.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Vi()))},this.document.addEventListener("visibilitychange",this.Pi),this.inForeground="visible"===this.document.visibilityState)}Li(){this.Pi&&(this.document.removeEventListener("visibilitychange",this.Pi),this.Pi=null)}fi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.hi=()=>{this.Ni();const r=/(?:Version|Mobile)\/1[456]/;(0,ae.G6)()&&(navigator.appVersion.match(r)||navigator.userAgent.match(r))&&this.ai.enterRestrictedMode(!0),this.ai.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.hi))}Bi(){this.hi&&(this.window.removeEventListener("pagehide",this.hi),this.hi=null)}Oi(e){var r;try{const s=null!==(null===(r=this.Ri)||void 0===r?void 0:r.getItem(this.xi(e)));return ie("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return ut("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ni(){if(this.Ri)try{this.Ri.setItem(this.xi(this.clientId),String(Date.now()))}catch(e){ut("Failed to set zombie client id.",e)}}ki(){if(this.Ri)try{this.Ri.removeItem(this.xi(this.clientId))}catch{}}xi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ii(a){return Lr(a,"owner")}function qs(a){return Lr(a,"clientMetadata")}function ol(a,e){let r=a.projectId;return a.isDefaultDatabase||(r+="."+a.database),"firestore/"+e+"/"+r+"/"}class Iu{constructor(e,r,s,c){this.targetId=e,this.fromCache=r,this.Ki=s,this.$i=c}static Ui(e,r){let s=an(),c=an();for(const h of r.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:c=c.add(h.doc.key)}return new Iu(e,r.fromCache,s,c)}}class hc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ph{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=(0,ae.G6)()?8:sn((0,ae.z$)())>0?6:4}initialize(e,r){this.Hi=e,this.indexManager=r,this.Wi=!0}getDocumentsMatchingQuery(e,r,s,c){const h={result:null};return this.Ji(e,r).next(g=>{h.result=g}).next(()=>{if(!h.result)return this.Yi(e,r,c,s).next(g=>{h.result=g})}).next(()=>{if(h.result)return;const g=new hc;return this.Zi(e,r,g).next(w=>{if(h.result=w,this.Gi)return this.Xi(e,r,g,w.size)})}).next(()=>h.result)}Xi(e,r,s,c){return s.documentReadCount<this.zi?(Qe()<=le.in.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",gi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),te.resolve()):(Qe()<=le.in.DEBUG&&ie("QueryEngine","Query:",gi(r),"scans",s.documentReadCount,"local documents and returns",c,"documents as results."),s.documentReadCount>this.ji*c?(Qe()<=le.in.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",gi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(r))):te.resolve())}Ji(e,r){if(Gu(r))return te.resolve(null);let s=Yr(r);return this.indexManager.getIndexType(e,s).next(c=>0===c?null:(null!==r.limit&&1===c&&(r=Do(r,null,"F"),s=Yr(r)),this.indexManager.getDocumentsMatchingTarget(e,s).next(h=>{const g=an(...h);return this.Hi.getDocuments(e,g).next(w=>this.indexManager.getMinOffset(e,s).next(S=>{const N=this.es(r,w);return this.ts(r,N,g,S.readTime)?this.Ji(e,Do(r,null,"F")):this.ns(e,N,r,S)}))})))}Yi(e,r,s,c){return Gu(r)||c.isEqual(vt.min())?te.resolve(null):this.Hi.getDocuments(e,s).next(h=>{const g=this.es(r,h);return this.ts(r,g,s,c)?te.resolve(null):(Qe()<=le.in.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),gi(r)),this.ns(e,g,r,Tr(c,-1)).next(w=>w))})}es(e,r){let s=new Pn(vi(e));return r.forEach((c,h)=>{Vs(e,h)&&(s=s.add(h))}),s}ts(e,r,s,c){if(null===e.limit)return!1;if(s.size!==r.size)return!0;const h="F"===e.limitType?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(c)>0)}Zi(e,r,s){return Qe()<=le.in.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",gi(r)),this.Hi.getDocumentsMatchingQuery(e,r,Ct.min(),s)}ns(e,r,s,c){return this.Hi.getDocumentsMatchingQuery(e,s,c).next(h=>(r.forEach(g=>{h=h.insert(g.key,g)}),h))}}class Kg{constructor(e,r,s,c){this.persistence=e,this.rs=r,this.serializer=c,this.ss=new Qn(Et),this.os=new Cs(h=>os(h),Ho),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(s)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rl(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.ss))}}function Id(a,e,r,s){return new Kg(a,e,r,s)}function op(a,e){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,_.Z)(function*(a,e){const r=ze(a);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let c;return r.mutationQueue.getAllMutationBatches(s).next(h=>(c=h,r.cs(e),r.mutationQueue.getAllMutationBatches(s))).next(h=>{const g=[],w=[];let S=an();for(const N of c){g.push(N.batchId);for(const z of N.mutations)S=S.add(z.key)}for(const N of h){w.push(N.batchId);for(const z of N.mutations)S=S.add(z.key)}return r.localDocuments.getDocuments(s,S).next(N=>({ls:N,removedBatchIds:g,addedBatchIds:w}))})})})).apply(this,arguments)}function ka(a){const e=ze(a);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.$r.getLastRemoteSnapshotVersion(r))}function fc(a,e,r){let s=an(),c=an();return r.forEach(h=>s=s.add(h)),e.getEntries(a,s).next(h=>{let g=$r();return r.forEach((w,S)=>{const N=h.get(w);S.isFoundDocument()!==N.isFoundDocument()&&(c=c.add(w)),S.isNoDocument()&&S.version.isEqual(vt.min())?(e.removeEntry(w,S.readTime),g=g.insert(w,S)):!N.isValidDocument()||S.version.compareTo(N.version)>0||0===S.version.compareTo(N.version)&&N.hasPendingWrites?(e.addEntry(S),g=g.insert(w,S)):ie("LocalStore","Ignoring outdated watch update for ",w,". Current version:",N.version," Watch version:",S.version)}),{hs:g,Ps:c}})}function Dd(a,e){const r=ze(a);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Tu(a,e){const r=ze(a);return r.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return r.$r.getTargetData(s,e).next(h=>h?(c=h,te.resolve(c)):r.$r.allocateTargetId(s).next(g=>(c=new I(e,g,"TargetPurposeListen",s.currentSequenceNumber),r.$r.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=r.ss.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(r.ss=r.ss.insert(s.targetId,s),r.os.set(e,s.targetId)),s})}function sa(a,e,r){return wd.apply(this,arguments)}function wd(){return(wd=(0,_.Z)(function*(a,e,r){const s=ze(a),c=s.ss.get(e),h=r?"readwrite":"readwrite-primary";try{r||(yield s.persistence.runTransaction("Release target",h,g=>s.persistence.referenceDelegate.removeTarget(g,c)))}catch(g){if(!Kn(g))throw g;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${g}`)}s.ss=s.ss.remove(e),s.os.delete(c.target)})).apply(this,arguments)}function pc(a,e,r){const s=ze(a);let c=vt.min(),h=an();return s.persistence.runTransaction("Execute query","readwrite",g=>function(S,N,z){const Q=ze(S),ue=Q.os.get(z);return void 0!==ue?te.resolve(Q.ss.get(ue)):Q.$r.getTargetData(N,z)}(s,g,Yr(e)).next(w=>{if(w)return c=w.lastLimboFreeSnapshotVersion,s.$r.getMatchingKeysForTargetId(g,w.targetId).next(S=>{h=S})}).next(()=>s.rs.getDocumentsMatchingQuery(g,e,r?c:vt.min(),r?h:an())).next(w=>(gc(s,Ji(e),w),{documents:w,Is:h})))}function Mh(a,e){const r=ze(a),s=ze(r.$r),c=r.ss.get(e);return c?Promise.resolve(c.target):r.persistence.runTransaction("Get target data","readonly",h=>s.ot(h,e).next(g=>g?g.target:null))}function Du(a,e){const r=ze(a),s=r._s.get(e)||vt.min();return r.persistence.runTransaction("Get new document changes","readonly",c=>r.us.getAllFromCollectionGroup(c,e,Tr(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(gc(r,e,c),c))}function gc(a,e,r){let s=a._s.get(e)||vt.min();r.forEach((c,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),a._s.set(e,s)}function oa(){return(oa=(0,_.Z)(function*(a,e,r,s){const c=ze(a);let h=an(),g=$r();for(const N of r){const z=e.Ts(N.metadata.name);N.document&&(h=h.add(z));const Q=e.Es(N);Q.setReadTime(e.ds(N.metadata.readTime)),g=g.insert(z,Q)}const w=c.us.newChangeBuffer({trackRemovals:!0}),S=yield Tu(c,(z=s,Yr(us($t.fromString(`__bundle__/docs/${z}`)))));var z;return c.persistence.runTransaction("Apply bundle documents","readwrite",N=>fc(N,w,g).next(z=>(w.apply(N),z)).next(z=>c.$r.removeMatchingKeysForTargetId(N,S.targetId).next(()=>c.$r.addMatchingKeys(N,h,S.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(N,z.hs,z.Ps)).next(()=>z.hs)))})).apply(this,arguments)}function xh(a,e){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,_.Z)(function*(a,e,r=an()){const s=yield Tu(a,Yr(hn(e.bundledQuery))),c=ze(a);return c.persistence.runTransaction("Save named query","readwrite",h=>{const g=Cr(e.readTime);if(s.snapshotVersion.compareTo(g)>=0)return c.Wr.saveNamedQuery(h,e);const w=s.withResumeToken(Sr.EMPTY_BYTE_STRING,g);return c.ss=c.ss.insert(w.targetId,w),c.$r.updateTargetData(h,w).next(()=>c.$r.removeMatchingKeysForTargetId(h,s.targetId)).next(()=>c.$r.addMatchingKeys(h,r,s.targetId)).next(()=>c.Wr.saveNamedQuery(h,e))})})).apply(this,arguments)}function Ad(a,e){return`firestore_clients_${a}_${e}`}function al(a,e,r){let s=`firestore_mutations_${a}_${r}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function mc(a,e){return`firestore_targets_${a}_${e}`}class La{constructor(e,r,s,c){this.user=e,this.batchId=r,this.state=s,this.error=c}static As(e,r,s){const c=JSON.parse(s);let h,g="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return g&&c.error&&(g="string"==typeof c.error.message&&"string"==typeof c.error.code,g&&(h=new Z(c.error.code,c.error.message))),g?new La(e,r,c.state,h):(ut("SharedClientState",`Failed to parse mutation state for ID '${r}': ${s}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wu{constructor(e,r,s){this.targetId=e,this.state=r,this.error=s}static As(e,r){const s=JSON.parse(r);let c,h="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return h&&s.error&&(h="string"==typeof s.error.message&&"string"==typeof s.error.code,h&&(c=new Z(s.error.code,s.error.message))),h?new wu(e,s.state,c):(ut("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Rs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ul{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static As(e,r){const s=JSON.parse(r);let c="object"==typeof s&&s.activeTargetIds instanceof Array,h=bo();for(let g=0;c&&g<s.activeTargetIds.length;++g)c=st(s.activeTargetIds[g]),h=h.add(s.activeTargetIds[g]);return c?new ul(e,h):(ut("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Cd{constructor(e,r){this.clientId=e,this.onlineState=r}static As(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Cd(r.clientId,r.onlineState):(ut("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vo{constructor(){this.activeTargetIds=bo()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fa{constructor(e,r,s,c,h){this.window=e,this.ai=r,this.persistenceKey=s,this.gs=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ps=this.ys.bind(this),this.ws=new Qn(Et),this.started=!1,this.Ss=[];const g=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.bs=Ad(this.persistenceKey,this.gs),this.Ds=`firestore_sequence_number_${this.persistenceKey}`,this.ws=this.ws.insert(this.gs,new Vo),this.Cs=new RegExp(`^firestore_clients_${g}_([^_]*)$`),this.vs=new RegExp(`^firestore_mutations_${g}_(\\d+)(?:_(.*))?$`),this.Fs=new RegExp(`^firestore_targets_${g}_(\\d+)$`),this.Ms=`firestore_online_state_${this.persistenceKey}`,this.xs=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.ps)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_.Z)(function*(){const r=yield e.syncEngine.qi();for(const c of r){if(c===e.gs)continue;const h=e.getItem(Ad(e.persistenceKey,c));if(h){const g=ul.As(c,h);g&&(e.ws=e.ws.insert(g.clientId,g))}}e.Os();const s=e.storage.getItem(e.Ms);if(s){const c=e.Ns(s);c&&e.Ls(c)}for(const c of e.Ss)e.ys(c);e.Ss=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ds,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Bs(this.ws)}isActiveQueryTarget(e){let r=!1;return this.ws.forEach((s,c)=>{c.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.ks(e,"pending")}updateMutationState(e,r,s){this.ks(e,r,s),this.qs(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(mc(this.persistenceKey,e));if(s){const c=wu.As(e,s);c&&(r=c.state)}}return this.Qs.Vs(e),this.Os(),r}removeLocalQueryTarget(e){this.Qs.fs(e),this.Os()}isLocalQueryTarget(e){return this.Qs.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mc(this.persistenceKey,e))}updateQueryState(e,r,s){this.Ks(e,r,s)}handleUserChange(e,r,s){r.forEach(c=>{this.qs(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.$s(e)}notifyBundleLoaded(e){this.Us(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ps),this.removeItem(this.bs),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return ie("SharedClientState","READ",e,r),r}setItem(e,r){ie("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){ie("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ys(e){var r=this;const s=e;if(s.storageArea===this.storage){if(ie("SharedClientState","EVENT",s.key,s.newValue),s.key===this.bs)return void ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ai.enqueueRetryable((0,_.Z)(function*(){if(r.started){if(null!==s.key)if(r.Cs.test(s.key)){if(null==s.newValue){const c=r.Ws(s.key);return r.Gs(c,null)}{const c=r.zs(s.key,s.newValue);if(c)return r.Gs(c.clientId,c)}}else if(r.vs.test(s.key)){if(null!==s.newValue){const c=r.js(s.key,s.newValue);if(c)return r.Hs(c)}}else if(r.Fs.test(s.key)){if(null!==s.newValue){const c=r.Js(s.key,s.newValue);if(c)return r.Ys(c)}}else if(s.key===r.Ms){if(null!==s.newValue){const c=r.Ns(s.newValue);if(c)return r.Ls(c)}}else if(s.key===r.Ds){const c=function(g){let w=q.oe;if(null!=g)try{const S=JSON.parse(g);ft("number"==typeof S),w=S}catch(S){ut("SharedClientState","Failed to read sequence number from WebStorage",S)}return w}(s.newValue);c!==q.oe&&r.sequenceNumberHandler(c)}else if(s.key===r.xs){const c=r.Zs(s.newValue);yield Promise.all(c.map(h=>r.syncEngine.Xs(h)))}}else r.Ss.push(s)}))}}get Qs(){return this.ws.get(this.gs)}Os(){this.setItem(this.bs,this.Qs.Rs())}ks(e,r,s){const c=new La(this.currentUser,e,r,s),h=al(this.persistenceKey,this.currentUser,e);this.setItem(h,c.Rs())}qs(e){const r=al(this.persistenceKey,this.currentUser,e);this.removeItem(r)}$s(e){this.storage.setItem(this.Ms,JSON.stringify({clientId:this.gs,onlineState:e}))}Ks(e,r,s){const c=mc(this.persistenceKey,e),h=new wu(e,r,s);this.setItem(c,h.Rs())}Us(e){const r=JSON.stringify(Array.from(e));this.setItem(this.xs,r)}Ws(e){const r=this.Cs.exec(e);return r?r[1]:null}zs(e,r){const s=this.Ws(e);return ul.As(s,r)}js(e,r){const s=this.vs.exec(e),c=Number(s[1]);return La.As(new Ne(void 0!==s[2]?s[2]:null),c,r)}Js(e,r){const s=this.Fs.exec(e),c=Number(s[1]);return wu.As(c,r)}Ns(e){return Cd.As(e)}Zs(e){return JSON.parse(e)}Hs(e){var r=this;return(0,_.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.eo(e.batchId,e.state,e.error);ie("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Ys(e){return this.syncEngine.no(e.targetId,e.state,e.error)}Gs(e,r){const s=r?this.ws.insert(e,r):this.ws.remove(e),c=this.Bs(this.ws),h=this.Bs(s),g=[],w=[];return h.forEach(S=>{c.has(S)||g.push(S)}),c.forEach(S=>{h.has(S)||w.push(S)}),this.syncEngine.ro(g,w).then(()=>{this.ws=s})}Ls(e){this.ws.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Bs(e){let r=bo();return e.forEach((s,c)=>{r=r.unionWith(c.activeTargetIds)}),r}}class Nh{constructor(){this.io=new Vo,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,s){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,r,s){this.so[e]=r}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Vo,Promise.resolve()}handleUserChange(e,r,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yg{oo(e){}shutdown(){}}class y{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.lo)e(0)}co(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.lo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let d=null;function f(){return null===d?d=268435456+Math.round(2147483648*Math.random()):d++,"0x"+d.toString(16)}const T={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class O{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}}const H="WebChannelConnection";class fe extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",c=encodeURIComponent(this.databaseId.projectId),h=encodeURIComponent(this.databaseId.database);this.bo=s+"://"+r.host,this.Do=`projects/${c}/databases/${h}`,this.Co="(default)"===this.databaseId.database?`project_id=${c}`:`project_id=${c}&database_id=${h}`}get vo(){return!1}Fo(r,s,c,h,g){const w=f(),S=this.Mo(r,s.toUriEncodedString());ie("RestConnection",`Sending RPC '${r}' ${w}:`,S,c);const N={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(N,h,g),this.Oo(r,S,N,c).then(z=>(ie("RestConnection",`Received RPC '${r}' ${w}: `,z),z),z=>{throw Pt("RestConnection",`RPC '${r}' ${w} failed with error: `,z,"url: ",S,"request:",c),z})}No(r,s,c,h,g,w){return this.Fo(r,s,c,h,g)}xo(r,s,c){r["X-Goog-Api-Client"]="gl-js/ fire/"+we,r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((h,g)=>r[g]=h),c&&c.headers.forEach((h,g)=>r[g]=h)}Mo(r,s){return`${this.bo}/v1/${s}:${T[r]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,r,s,c){const h=f();return new Promise((g,w)=>{const S=new _e;S.setWithCredentials(!0),S.listenOnce(at.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Ze.NO_ERROR:const z=S.getResponseJson();ie(H,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(z)),g(z);break;case Ze.TIMEOUT:ie(H,`RPC '${e}' ${h} timed out`),w(new Z(he.DEADLINE_EXCEEDED,"Request time out"));break;case Ze.HTTP_ERROR:const Q=S.getStatus();if(ie(H,`RPC '${e}' ${h} failed with status:`,Q,"response text:",S.getResponseText()),Q>0){let ue=S.getResponseJson();Array.isArray(ue)&&(ue=ue[0]);const xe=ue?.error;if(xe&&xe.status&&xe.message){const tt=function(ct){const zt=ct.toLowerCase().replace(/_/g,"-");return Object.values(he).indexOf(zt)>=0?zt:he.UNKNOWN}(xe.status);w(new Z(tt,xe.message))}else w(new Z(he.UNKNOWN,"Server responded with status "+S.getStatus()))}else w(new Z(he.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{ie(H,`RPC '${e}' ${h} completed.`)}});const N=JSON.stringify(c);ie(H,`RPC '${e}' ${h} sending request:`,c),S.send(r,"POST",N,s,15)})}Lo(e,r,s){const c=f(),h=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=wt(),w=Ft(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},N=this.longPollingOptions.timeoutSeconds;void 0!==N&&(S.longPollingTimeout=Math.round(1e3*N)),this.useFetchStreams&&(S.xmlHttpFactory=new Je({})),this.xo(S.initMessageHeaders,r,s),S.encodeInitMessageHeaders=!0;const z=h.join("");ie(H,`Creating RPC '${e}' stream ${c}: ${z}`,S);const Q=g.createWebChannel(z,S);let ue=!1,xe=!1;const tt=new O({Po:ct=>{xe?ie(H,`Not sending because RPC '${e}' stream ${c} is closed:`,ct):(ue||(ie(H,`Opening RPC '${e}' stream ${c} transport.`),Q.open(),ue=!0),ie(H,`RPC '${e}' stream ${c} sending:`,ct),Q.send(ct))},Io:()=>Q.close()}),pt=(ct,zt,Jt)=>{ct.listen(zt,Wt=>{try{Jt(Wt)}catch(vn){setTimeout(()=>{throw vn},0)}})};return pt(Q,qe.EventType.OPEN,()=>{xe||(ie(H,`RPC '${e}' stream ${c} transport opened.`),tt.po())}),pt(Q,qe.EventType.CLOSE,()=>{xe||(xe=!0,ie(H,`RPC '${e}' stream ${c} transport closed`),tt.wo())}),pt(Q,qe.EventType.ERROR,ct=>{xe||(xe=!0,Pt(H,`RPC '${e}' stream ${c} transport errored:`,ct),tt.wo(new Z(he.UNAVAILABLE,"The operation could not be completed")))}),pt(Q,qe.EventType.MESSAGE,ct=>{var zt;if(!xe){const Jt=ct.data[0];ft(!!Jt);const vn=Jt.error||(null===(zt=Jt[0])||void 0===zt?void 0:zt.error);if(vn){ie(H,`RPC '${e}' stream ${c} received error:`,vn);const or=vn.status;let On=function(pe){const Ie=bn[pe];if(void 0!==Ie)return vr(Ie)}(or),Ee=vn.message;void 0===On&&(On=he.INTERNAL,Ee="Unknown error status: "+or+" with message "+vn.message),xe=!0,tt.wo(new Z(On,Ee)),Q.close()}else ie(H,`RPC '${e}' stream ${c} received:`,Jt),tt.So(Jt)}}),pt(w,et.STAT_EVENT,ct=>{ct.stat===dt.PROXY?ie(H,`RPC '${e}' stream ${c} detected buffering proxy`):ct.stat===dt.NOPROXY&&ie(H,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{tt.yo()},0),tt}}function Fe(){return typeof window<"u"?window:null}function rt(){return typeof document<"u"?document:null}function Nt(a){return new Yu(a,!0)}class Gt{constructor(e,r,s=1e3,c=1.5,h=6e4){this.ai=e,this.timerId=r,this.Bo=s,this.ko=c,this.qo=h,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();const r=Math.floor(this.Qo+this.Go()),s=Math.max(0,Date.now()-this.$o),c=Math.max(0,r-s);c>0&&ie("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.Qo} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,c,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){null!==this.Ko&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){null!==this.Ko&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}}class Sn{constructor(e,r,s,c,h,g,w,S){this.ai=e,this.jo=s,this.Ho=c,this.connection=h,this.authCredentialsProvider=g,this.appCheckCredentialsProvider=w,this.listener=S,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Gt(e,r)}t_(){return 1===this.state||5===this.state||this.n_()}n_(){return 2===this.state||3===this.state}start(){this.Xo=0,4!==this.state?this.auth():this.r_()}stop(){var e=this;return(0,_.Z)(function*(){e.t_()&&(yield e.close(0))})()}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&null===this.Yo&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){var e=this;return(0,_.Z)(function*(){if(e.n_())return e.close(0)})()}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,r){var s=this;return(0,_.Z)(function*(){s.a_(),s.u_(),s.e_.cancel(),s.Jo++,4!==e?s.e_.reset():r&&r.code===he.RESOURCE_EXHAUSTED?(ut(r.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),s.e_.Uo()):r&&r.code===he.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.c_(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Vo(r)})()}c_(){}auth(){this.state=1;const e=this.l_(this.Jo),r=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Jo===r&&this.h_(s,c)},s=>{e(()=>{const c=new Z(he.UNKNOWN,"Fetching auth token failed: "+s.message);return this.P_(c)})})}h_(e,r){const s=this.l_(this.Jo);this.stream=this.I_(e,r),this.stream.To(()=>{s(()=>this.listener.To())}),this.stream.Ao(()=>{s(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(c=>{s(()=>this.P_(c))}),this.stream.onMessage(c=>{s(()=>1==++this.Xo?this.T_(c):this.onNext(c))})}r_(){var e=this;this.state=5,this.e_.Wo((0,_.Z)(function*(){e.state=0,e.start()}))}P_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return r=>{this.ai.enqueueAndForget(()=>this.Jo===e?r():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ys extends Sn{constructor(e,r,s,c,h,g){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,s,c,g),this.serializer=h}I_(e,r){return this.connection.Lo("Listen",e,r)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();const r=function gs(a,e){let r;if("targetChange"in e){const s="NO_CHANGE"===(N=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===N?1:"REMOVE"===N?2:"CURRENT"===N?3:"RESET"===N?4:gt(),c=e.targetChange.targetIds||[],h=function(N,z){return N.useProto3Json?(ft(void 0===z||"string"==typeof z),Sr.fromBase64String(z||"")):(ft(void 0===z||z instanceof Buffer||z instanceof Uint8Array),Sr.fromUint8Array(z||new Uint8Array))}(a,e.targetChange.resumeToken),g=e.targetChange.cause,w=g&&function(N){const z=void 0===N.code?he.UNKNOWN:vr(N.code);return new Z(z,N.message||"")}(g);r=new js(s,c,h,w||null)}else if("documentChange"in e){const s=e.documentChange,c=$s(a,s.document.name),h=Cr(s.document.updateTime),g=s.document.createTime?Cr(s.document.createTime):vt.min(),w=new Un({mapValue:{fields:s.document.fields}}),S=Yn.newFoundDocument(c,h,g,w);r=new Da(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,c=$s(a,s.document),h=s.readTime?Cr(s.readTime):vt.min(),g=Yn.newNoDocument(c,h);r=new Da([],s.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){const s=e.documentRemove,c=$s(a,s.document);r=new Da([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return gt();{const s=e.filter,{count:c=0,unchangedNames:h}=s,g=new Us(c,h);r=new ps(s.targetId,g)}}var N;return r}(this.serializer,e),s=function(h){if(!("targetChange"in h))return vt.min();const g=h.targetChange;return g.targetIds&&g.targetIds.length?vt.min():g.readTime?Cr(g.readTime):vt.min()}(e);return this.listener.E_(r,s)}d_(e){const r={};r.database=Xu(this.serializer),r.addTarget=function(h,g){let w;const S=g.target;if(w=Js(S)?{documents:ud(h,S)}:{query:Zo(h,S)._t},w.targetId=g.targetId,g.resumeToken.approximateByteSize()>0){w.resumeToken=du(h,g.resumeToken);const N=Pi(h,g.expectedCount);null!==N&&(w.expectedCount=N)}else if(g.snapshotVersion.compareTo(vt.min())>0){w.readTime=qo(h,g.snapshotVersion.toTimestamp());const N=Pi(h,g.expectedCount);null!==N&&(w.expectedCount=N)}return w}(this.serializer,e);const s=function ec(a,e){const r=function(c){switch(c){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return gt()}}(e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);s&&(r.labels=s),this.__(r)}A_(e){const r={};r.database=Xu(this.serializer),r.removeTarget=e,this.__(r)}}class aa extends Sn{constructor(e,r,s,c,h,g){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,c,g),this.serializer=h}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,r){return this.connection.Lo("Write",e,r)}T_(e){return ft(!!e.streamToken),this.lastStreamToken=e.streamToken,ft(!e.writeResults||0===e.writeResults.length),this.listener.m_()}onNext(e){ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();const r=function ad(a,e){return a&&a.length>0?(ft(void 0!==e),a.map(r=>function(c,h){let g=Cr(c.updateTime?c.updateTime:h);return g.isEqual(vt.min())&&(g=Cr(h)),new Ia(g,c.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),s=Cr(e.commitTime);return this.listener.f_(s,r)}g_(){const e={};e.database=Xu(this.serializer),this.__(e)}V_(e){const r={streamToken:this.lastStreamToken,writes:e.map(s=>oo(this.serializer,s))};this.__(r)}}class cl extends class{}{constructor(e,r,s,c){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=s,this.serializer=c,this.p_=!1}y_(){if(this.p_)throw new Z(he.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,r,s,c){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,g])=>this.connection.Fo(e,fu(r,s),c,h,g)).catch(h=>{throw"FirebaseError"===h.name?(h.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new Z(he.UNKNOWN,h.toString())})}No(e,r,s,c,h){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,w])=>this.connection.No(e,fu(r,s),c,g,w,h)).catch(g=>{throw"FirebaseError"===g.name?(g.code===he.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Z(he.UNKNOWN,g.toString())})}terminate(){this.p_=!0,this.connection.terminate()}}class ll{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){0===this.w_&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){"Online"===this.state?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,"Online"===e&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(ut(r),this.b_=!1):ie("OnlineStateTracker",r)}M_(){null!==this.S_&&(this.S_.cancel(),this.S_=null)}}class Oh{constructor(e,r,s,c,h){var g=this;this.localStore=e,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=h,this.B_.oo(w=>{s.enqueueAndForget((0,_.Z)(function*(){var S;Ba(g)&&(ie("RemoteStore","Restarting streams for network reachability change."),yield(S=(0,_.Z)(function*(z){const Q=ze(z);Q.N_.add(4),yield Va(Q),Q.k_.set("Unknown"),Q.N_.delete(4),yield _c(Q)}),function N(z){return S.apply(this,arguments)})(g))}))}),this.k_=new ll(s,c)}}function _c(a){return Au.apply(this,arguments)}function Au(){return(Au=(0,_.Z)(function*(a){if(Ba(a))for(const e of a.L_)yield e(!0)})).apply(this,arguments)}function Va(a){return bd.apply(this,arguments)}function bd(){return(bd=(0,_.Z)(function*(a){for(const e of a.L_)yield e(!1)})).apply(this,arguments)}function dl(a,e){const r=ze(a);r.O_.has(e.targetId)||(r.O_.set(e.targetId,e),Cu(r)?ua(r):yc(r).n_()&&Sd(r,e))}function Ua(a,e){const r=ze(a),s=yc(r);r.O_.delete(e),s.n_()&&kh(r,e),0===r.O_.size&&(s.n_()?s.s_():Ba(r)&&r.k_.set("Unknown"))}function Sd(a,e){if(a.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(vt.min())>0){const r=a.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}yc(a).d_(e)}function kh(a,e){a.q_.xe(e),yc(a).A_(e)}function ua(a){a.q_=new sd({getRemoteKeysForTarget:e=>a.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>a.O_.get(e)||null,tt:()=>a.datastore.serializer.databaseId}),yc(a).start(),a.k_.D_()}function Cu(a){return Ba(a)&&!yc(a).t_()&&a.O_.size>0}function Ba(a){return 0===ze(a).N_.size}function ap(a){a.q_=void 0}function Jg(a){return bu.apply(this,arguments)}function bu(){return(bu=(0,_.Z)(function*(a){a.k_.set("Online")})).apply(this,arguments)}function Xg(a){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,_.Z)(function*(a){a.O_.forEach((e,r)=>{Sd(a,e)})})).apply(this,arguments)}function Fh(a,e){return hl.apply(this,arguments)}function hl(){return(hl=(0,_.Z)(function*(a,e){ap(a),Cu(a)?(a.k_.F_(e),ua(a)):a.k_.set("Unknown")})).apply(this,arguments)}function Vh(a,e,r){return up.apply(this,arguments)}function up(){return up=(0,_.Z)(function*(a,e,r){if(a.k_.set("Online"),e instanceof js&&2===e.state&&e.cause)try{yield(s=(0,_.Z)(function*(h,g){const w=g.cause;for(const S of g.targetIds)h.O_.has(S)&&(yield h.remoteSyncer.rejectListen(S,w),h.O_.delete(S),h.q_.removeTarget(S))}),function c(h,g){return s.apply(this,arguments)})(a,e)}catch(s){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Uh(a,s)}else if(e instanceof Da?a.q_.Ke(e):e instanceof ps?a.q_.He(e):a.q_.We(e),!r.isEqual(vt.min()))try{const s=yield ka(a.localStore);r.compareTo(s)>=0&&(yield function(h,g){const w=h.q_.rt(g);return w.targetChanges.forEach((S,N)=>{if(S.resumeToken.approximateByteSize()>0){const z=h.O_.get(N);z&&h.O_.set(N,z.withResumeToken(S.resumeToken,g))}}),w.targetMismatches.forEach((S,N)=>{const z=h.O_.get(S);if(!z)return;h.O_.set(S,z.withResumeToken(Sr.EMPTY_BYTE_STRING,z.snapshotVersion)),kh(h,S);const Q=new I(z.target,S,N,z.sequenceNumber);Sd(h,Q)}),h.remoteSyncer.applyRemoteEvent(w)}(a,r))}catch(s){ie("RemoteStore","Failed to raise snapshot:",s),yield Uh(a,s)}var s}),up.apply(this,arguments)}function Uh(a,e,r){return cp.apply(this,arguments)}function cp(){return(cp=(0,_.Z)(function*(a,e,r){if(!Kn(e))throw e;a.N_.add(1),yield Va(a),a.k_.set("Offline"),r||(r=()=>ka(a.localStore)),a.asyncQueue.enqueueRetryable((0,_.Z)(function*(){ie("RemoteStore","Retrying IndexedDB access"),yield r(),a.N_.delete(1),yield _c(a)}))})).apply(this,arguments)}function lp(a,e){return e().catch(r=>Uh(a,r,e))}function Su(a){return dp.apply(this,arguments)}function dp(){return(dp=(0,_.Z)(function*(a){const e=ze(a),r=Ru(e);let s=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;B_(e);)try{const c=yield Dd(e.localStore,s);if(null===c){0===e.x_.length&&r.s_();break}s=c.batchId,j_(e,c)}catch(c){yield Uh(e,c)}hp(e)&&em(e)})).apply(this,arguments)}function B_(a){return Ba(a)&&a.x_.length<10}function j_(a,e){a.x_.push(e);const r=Ru(a);r.n_()&&r.R_&&r.V_(e.mutations)}function hp(a){return Ba(a)&&!Ru(a).t_()&&a.x_.length>0}function em(a){Ru(a).start()}function $_(a){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,_.Z)(function*(a){Ru(a).g_()})).apply(this,arguments)}function fp(a){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,_.Z)(function*(a){const e=Ru(a);for(const r of a.x_)e.V_(r.mutations)})).apply(this,arguments)}function pp(a,e,r){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,_.Z)(function*(a,e,r){const s=a.x_.shift(),c=ui.from(s,e,r);yield lp(a,()=>a.remoteSyncer.applySuccessfulWrite(c)),yield Su(a)})).apply(this,arguments)}function Rd(a,e){return jh.apply(this,arguments)}function jh(){return jh=(0,_.Z)(function*(a,e){var r;e&&Ru(a).R_&&(yield(r=(0,_.Z)(function*(c,h){if(Bc(w=h.code)&&w!==he.ABORTED){const g=c.x_.shift();Ru(c).i_(),yield lp(c,()=>c.remoteSyncer.rejectFailedWrite(g.batchId,h)),yield Su(c)}var w}),function s(c,h){return r.apply(this,arguments)})(a,e)),hp(a)&&em(a)}),jh.apply(this,arguments)}function gp(a,e){return mp.apply(this,arguments)}function mp(){return(mp=(0,_.Z)(function*(a,e){const r=ze(a);r.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const s=Ba(r);r.N_.add(3),yield Va(r),s&&r.k_.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(e),r.N_.delete(3),yield _c(r)})).apply(this,arguments)}function $h(a,e){return _p.apply(this,arguments)}function _p(){return(_p=(0,_.Z)(function*(a,e){const r=ze(a);e?(r.N_.delete(2),yield _c(r)):e||(r.N_.add(2),yield Va(r),r.k_.set("Unknown"))})).apply(this,arguments)}function yc(a){return a.Q_||(a.Q_=function(r,s,c){const h=ze(r);return h.y_(),new ys(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(a.datastore,a.asyncQueue,{To:Jg.bind(null,a),Ao:Xg.bind(null,a),Vo:Fh.bind(null,a),E_:Vh.bind(null,a)}),a.L_.push(function(){var e=(0,_.Z)(function*(r){r?(a.Q_.i_(),Cu(a)?ua(a):a.k_.set("Unknown")):(yield a.Q_.stop(),ap(a))});return function(r){return e.apply(this,arguments)}}())),a.Q_}function Ru(a){return a.K_||(a.K_=function(r,s,c){const h=ze(r);return h.y_(),new aa(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,c)}(a.datastore,a.asyncQueue,{To:()=>Promise.resolve(),Ao:$_.bind(null,a),Vo:Rd.bind(null,a),m_:fp.bind(null,a),f_:pp.bind(null,a)}),a.L_.push(function(){var e=(0,_.Z)(function*(r){r?(a.K_.i_(),yield Su(a)):(yield a.K_.stop(),a.x_.length>0&&(ie("RemoteStore",`Stopping write stream with ${a.x_.length} pending writes`),a.x_=[]))});return function(r){return e.apply(this,arguments)}}())),a.K_}class zh{constructor(e,r,s,c,h){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=s,this.op=c,this.removalCallback=h,this.deferred=new ve,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(g=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,s,c,h){const g=Date.now()+s,w=new zh(e,r,g,c,h);return w.start(s),w}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Z(he.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fl(a,e){if(ut("AsyncQueue",`${e}: ${a}`),Kn(a))return new Z(he.UNAVAILABLE,`${e}: ${a}`);throw a}class pl{constructor(e){this.comparator=e?(r,s)=>e(r,s)||it.comparator(r.key,s.key):(r,s)=>it.comparator(r.key,s.key),this.keyedMap=wo(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new pl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,s)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;r.hasNext();){const c=r.getNext().key,h=s.getNext().key;if(!c.isEqual(h))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const s=new pl;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=r,s}}class Hh{constructor(){this.U_=new Qn(it.comparator)}track(e){const r=e.doc.key,s=this.U_.get(r);s?0!==e.type&&3===s.type?this.U_=this.U_.insert(r,e):3===e.type&&1!==s.type?this.U_=this.U_.insert(r,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.U_=this.U_.insert(r,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.U_=this.U_.insert(r,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.U_=this.U_.remove(r):1===e.type&&2===s.type?this.U_=this.U_.insert(r,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.U_=this.U_.insert(r,{type:2,doc:e.doc}):gt():this.U_=this.U_.insert(r,e)}W_(){const e=[];return this.U_.inorderTraversal((r,s)=>{e.push(s)}),e}}class Pu{constructor(e,r,s,c,h,g,w,S,N){this.query=e,this.docs=r,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=h,this.fromCache=g,this.syncStateChanged=w,this.excludesMetadataChanges=S,this.hasCachedResults=N}static fromInitialDocuments(e,r,s,c,h){const g=[];return r.forEach(w=>{g.push({type:0,doc:w})}),new Pu(e,r,pl.emptySet(r),g,s,c,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&As(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,s=e.docChanges;if(r.length!==s.length)return!1;for(let c=0;c<r.length;c++)if(r[c].type!==s[c].type||!r[c].doc.isEqual(s[c].doc))return!1;return!0}}class z_{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}}class Pd{constructor(){this.queries=tm(),this.onlineState="Unknown",this.J_=new Set}terminate(){!function(r,s){const c=ze(r),h=c.queries;c.queries=tm(),h.forEach((g,w)=>{for(const S of w.z_)S.onError(s)})}(this,new Z(he.ABORTED,"Firestore shutting down"))}}function tm(){return new Cs(a=>Wo(a),As)}function yp(a,e){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,_.Z)(function*(a,e){const r=ze(a);let s=3;const c=e.query;let h=r.queries.get(c);h?!h.j_()&&e.H_()&&(s=2):(h=new z_,s=e.H_()?0:1);try{switch(s){case 0:h.G_=yield r.onListen(c,!0);break;case 1:h.G_=yield r.onListen(c,!1);break;case 2:yield r.onFirstRemoteStoreListen(c)}}catch(g){const w=fl(g,`Initialization of query '${gi(e.query)}' failed`);return void e.onError(w)}r.queries.set(c,h),h.z_.push(e),e.Y_(r.onlineState),h.G_&&e.Z_(h.G_)&&Zh(r)})).apply(this,arguments)}function Gh(a,e){return qh.apply(this,arguments)}function qh(){return(qh=(0,_.Z)(function*(a,e){const r=ze(a),s=e.query;let c=3;const h=r.queries.get(s);if(h){const g=h.z_.indexOf(e);g>=0&&(h.z_.splice(g,1),0===h.z_.length?c=e.H_()?0:1:!h.j_()&&e.H_()&&(c=2))}switch(c){case 0:return r.queries.delete(s),r.onUnlisten(s,!0);case 1:return r.queries.delete(s),r.onUnlisten(s,!1);case 2:return r.onLastRemoteStoreUnlisten(s);default:return}})).apply(this,arguments)}function gl(a,e){const r=ze(a);let s=!1;for(const c of e){const g=r.queries.get(c.query);if(g){for(const w of g.z_)w.Z_(c)&&(s=!0);g.G_=c}}s&&Zh(r)}function Kh(a,e,r){const s=ze(a),c=s.queries.get(e);if(c)for(const h of c.z_)h.onError(r);s.queries.delete(e)}function Zh(a){a.J_.forEach(e=>{e.next()})}var Md,xd;(xd=Md||(Md={})).X_="default",xd.Cache="cache";class vp{constructor(e,r,s){this.query=e,this.ea=r,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=s||{}}Z_(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new Pu(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ta?this.ra(e)&&(this.ea.next(e),r=!0):this.ia(e,this.onlineState)&&(this.sa(e),r=!0),this.na=e,r}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let r=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),r=!0),r}ia(e,r){return!e.fromCache||!this.H_()||(!this.options.oa||!("Offline"!==r))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===r)}ra(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.na&&this.na.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}sa(e){e=Pu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Md.Cache}}class H_{constructor(e,r){this._a=e,this.byteLength=r}aa(){return"metadata"in this._a}}class nm{constructor(e){this.serializer=e}Ts(e){return $s(this.serializer,e)}Es(e){return e.metadata.exists?Br(this.serializer,e.document,!1):Yn.newNoDocument(this.Ts(e.metadata.name),this.ds(e.metadata.readTime))}ds(e){return Cr(e)}}class W_{constructor(e,r,s){this.ua=e,this.localStore=r,this.serializer=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rm(e)}ca(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;if(e._a.namedQuery)this.queries.push(e._a.namedQuery);else if(e._a.documentMetadata){this.documents.push({metadata:e._a.documentMetadata}),e._a.documentMetadata.exists||++r;const s=$t.fromString(e._a.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e._a.document&&(this.documents[this.documents.length-1].document=e._a.document,++r);return r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}la(e){const r=new Map,s=new nm(this.serializer);for(const c of e)if(c.metadata.queries){const h=s.Ts(c.metadata.name);for(const g of c.metadata.queries){const w=(r.get(g)||an()).add(h);r.set(g,w)}}return r}complete(){var e=this;return(0,_.Z)(function*(){const r=yield function Qg(a,e,r,s){return oa.apply(this,arguments)}(e.localStore,new nm(e.serializer),e.documents,e.ua.id),s=e.la(e.documents);for(const c of e.queries)yield xh(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,ha:e.collectionGroups,Pa:r}})()}}function rm(a){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}}class im{constructor(e){this.key=e}}class Ep{constructor(e){this.key=e}}class Nd{constructor(e,r){this.query=e,this.Ia=r,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=an(),this.mutatedKeys=an(),this.da=vi(e),this.Aa=new pl(this.da)}get Ra(){return this.Ia}Va(e,r){const s=r?r.ma:new Hh,c=r?r.Aa:this.Aa;let h=r?r.mutatedKeys:this.mutatedKeys,g=c,w=!1;const S="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,N="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((z,Q)=>{const ue=c.get(z),xe=Vs(this.query,Q)?Q:null,tt=!!ue&&this.mutatedKeys.has(ue.key),pt=!!xe&&(xe.hasLocalMutations||this.mutatedKeys.has(xe.key)&&xe.hasCommittedMutations);let ct=!1;ue&&xe?ue.data.isEqual(xe.data)?tt!==pt&&(s.track({type:3,doc:xe}),ct=!0):this.fa(ue,xe)||(s.track({type:2,doc:xe}),ct=!0,(S&&this.da(xe,S)>0||N&&this.da(xe,N)<0)&&(w=!0)):!ue&&xe?(s.track({type:0,doc:xe}),ct=!0):ue&&!xe&&(s.track({type:1,doc:ue}),ct=!0,(S||N)&&(w=!0)),ct&&(xe?(g=g.add(xe),h=pt?h.add(z):h.delete(z)):(g=g.delete(z),h=h.delete(z)))}),null!==this.query.limit)for(;g.size>this.query.limit;){const z="F"===this.query.limitType?g.last():g.first();g=g.delete(z.key),h=h.delete(z.key),s.track({type:1,doc:z})}return{Aa:g,ma:s,ts:w,mutatedKeys:h}}fa(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,s,c){const h=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;const g=e.ma.W_();g.sort((z,Q)=>function(xe,tt){const pt=ct=>{switch(ct){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return pt(xe)-pt(tt)}(z.type,Q.type)||this.da(z.doc,Q.doc)),this.ga(s),c=null!=c&&c;const w=r&&!c?this.pa():[],S=0===this.Ea.size&&this.current&&!c?1:0,N=S!==this.Ta;return this.Ta=S,0!==g.length||N?{snapshot:new Pu(this.query,e.Aa,h,g,e.mutatedKeys,0===S,N,!1,!!s&&s.resumeToken.approximateByteSize()>0),ya:w}:{ya:w}}Y_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Hh,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(r=>this.Ia=this.Ia.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ia=this.Ia.delete(r)),this.current=e.current)}pa(){if(!this.current)return[];const e=this.Ea;this.Ea=an(),this.Aa.forEach(s=>{this.wa(s.key)&&(this.Ea=this.Ea.add(s.key))});const r=[];return e.forEach(s=>{this.Ea.has(s)||r.push(new Ep(s))}),this.Ea.forEach(s=>{e.has(s)||r.push(new im(s))}),r}Sa(e){this.Ia=e.Is,this.Ea=an();const r=this.Va(e.documents);return this.applyChanges(r,!0)}ba(){return Pu.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,0===this.Ta,this.hasCachedResults)}}class Ip{constructor(e,r,s){this.query=e,this.targetId=r,this.view=s}}class Tp{constructor(e){this.key=e,this.Da=!1}}class G_{constructor(e,r,s,c,h,g){this.localStore=e,this.remoteStore=r,this.eventManager=s,this.sharedClientState=c,this.currentUser=h,this.maxConcurrentLimboResolutions=g,this.Ca={},this.va=new Cs(w=>Wo(w),As),this.Fa=new Map,this.Ma=new Set,this.xa=new Qn(it.comparator),this.Oa=new Map,this.Na=new vd,this.La={},this.Ba=new Map,this.ka=Lo.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return!0===this.qa}}function q_(a,e){return Od.apply(this,arguments)}function Od(){return(Od=(0,_.Z)(function*(a,e,r=!0){const s=uf(a);let c;const h=s.va.get(e);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),c=h.view.ba()):c=yield Dp(s,e,r,!0),c})).apply(this,arguments)}function sm(a,e){return ja.apply(this,arguments)}function ja(){return(ja=(0,_.Z)(function*(a,e){const r=uf(a);yield Dp(r,e,!0,!1)})).apply(this,arguments)}function Dp(a,e,r,s){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,_.Z)(function*(a,e,r,s){const c=yield Tu(a.localStore,Yr(e)),h=c.targetId,g=r?a.sharedClientState.addLocalQueryTarget(h):"not-current";let w;return s&&(w=yield wp(a,e,h,"current"===g,c.resumeToken)),a.isPrimaryClient&&r&&dl(a.remoteStore,c),w})).apply(this,arguments)}function wp(a,e,r,s,c){return om.apply(this,arguments)}function om(){return om=(0,_.Z)(function*(a,e,r,s,c){a.Qa=(Q,ue,xe)=>{return(tt=(0,_.Z)(function*(ct,zt,Jt,Wt){let vn=zt.view.Va(Jt);vn.ts&&(vn=yield pc(ct.localStore,zt.query,!1).then(({documents:oe})=>zt.view.Va(oe,vn)));const or=Wt&&Wt.targetChanges.get(zt.targetId),On=Wt&&null!=Wt.targetMismatches.get(zt.targetId),Ee=zt.view.applyChanges(vn,ct.isPrimaryClient,or,On);return nf(ct,zt.targetId,Ee.ya),Ee.snapshot}),function pt(ct,zt,Jt,Wt){return tt.apply(this,arguments)})(a,Q,ue,xe);var tt};const h=yield pc(a.localStore,e,!0),g=new Nd(e,h.Is),w=g.Va(h.documents),S=Ta.createSynthesizedTargetChangeForCurrentChange(r,s&&"Offline"!==a.onlineState,c),N=g.applyChanges(w,a.isPrimaryClient,S);nf(a,r,N.ya);const z=new Ip(e,r,g);return a.va.set(e,z),a.Fa.has(r)?a.Fa.get(r).push(e):a.Fa.set(r,[e]),N.snapshot}),om.apply(this,arguments)}function Yh(a,e,r){return Ap.apply(this,arguments)}function Ap(){return(Ap=(0,_.Z)(function*(a,e,r){const s=ze(a),c=s.va.get(e),h=s.Fa.get(c.targetId);if(h.length>1)return s.Fa.set(c.targetId,h.filter(g=>!As(g,e))),void s.va.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(c.targetId),s.sharedClientState.isActiveQueryTarget(c.targetId)||(yield sa(s.localStore,c.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(c.targetId),r&&Ua(s.remoteStore,c.targetId),yl(s,c.targetId)}).catch(Oe))):(yl(s,c.targetId),yield sa(s.localStore,c.targetId,!0))})).apply(this,arguments)}function am(a,e){return Jh.apply(this,arguments)}function Jh(){return(Jh=(0,_.Z)(function*(a,e){const r=ze(a),s=r.va.get(e),c=r.Fa.get(s.targetId);r.isPrimaryClient&&1===c.length&&(r.sharedClientState.removeLocalQueryTarget(s.targetId),Ua(r.remoteStore,s.targetId))})).apply(this,arguments)}function kd(){return(kd=(0,_.Z)(function*(a,e,r){const s=fm(a);try{const c=yield function(g,w){const S=ze(g),N=mt.now(),z=w.reduce((xe,tt)=>xe.add(tt.key),an());let Q,ue;return S.persistence.runTransaction("Locally write mutations","readwrite",xe=>{let tt=$r(),pt=an();return S.us.getEntries(xe,z).next(ct=>{tt=ct,tt.forEach((zt,Jt)=>{Jt.isValidDocument()||(pt=pt.add(zt))})}).next(()=>S.localDocuments.getOverlayedDocuments(xe,tt)).next(ct=>{Q=ct;const zt=[];for(const Jt of w){const Wt=Xe(Jt,Q.get(Jt.key).overlayedDocument);null!=Wt&&zt.push(new pn(Jt.key,Wt,mr(Wt.value.mapValue),D.exists(!0)))}return S.mutationQueue.addMutationBatch(xe,N,zt,w)}).next(ct=>{ue=ct;const zt=ct.applyToLocalDocumentSet(Q,pt);return S.documentOverlayCache.saveOverlays(xe,ct.batchId,zt)})}).then(()=>({batchId:ue.batchId,changes:Ao(Q)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(g,w,S){let N=g.La[g.currentUser.toKey()];N||(N=new Qn(Et)),N=N.insert(w,S),g.La[g.currentUser.toKey()]=N}(s,c.batchId,r),yield Rs(s,c.changes),yield Su(s.remoteStore)}catch(c){const h=fl(c,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function Cp(a,e){return ml.apply(this,arguments)}function ml(){return(ml=(0,_.Z)(function*(a,e){const r=ze(a);try{const s=yield function Zg(a,e){const r=ze(a),s=e.snapshotVersion;let c=r.ss;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const g=r.us.newChangeBuffer({trackRemovals:!0});c=r.ss;const w=[];e.targetChanges.forEach((z,Q)=>{const ue=c.get(Q);if(!ue)return;w.push(r.$r.removeMatchingKeys(h,z.removedDocuments,Q).next(()=>r.$r.addMatchingKeys(h,z.addedDocuments,Q)));let xe=ue.withSequenceNumber(h.currentSequenceNumber);var pt,ct,zt;null!==e.targetMismatches.get(Q)?xe=xe.withResumeToken(Sr.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):z.resumeToken.approximateByteSize()>0&&(xe=xe.withResumeToken(z.resumeToken,s)),c=c.insert(Q,xe),ct=xe,zt=z,(0===(pt=ue).resumeToken.approximateByteSize()||ct.snapshotVersion.toMicroseconds()-pt.snapshotVersion.toMicroseconds()>=3e8||zt.addedDocuments.size+zt.modifiedDocuments.size+zt.removedDocuments.size>0)&&w.push(r.$r.updateTargetData(h,xe))});let S=$r(),N=an();if(e.documentUpdates.forEach(z=>{e.resolvedLimboDocuments.has(z)&&w.push(r.persistence.referenceDelegate.updateLimboDocument(h,z))}),w.push(fc(h,g,e.documentUpdates).next(z=>{S=z.hs,N=z.Ps})),!s.isEqual(vt.min())){const z=r.$r.getLastRemoteSnapshotVersion(h).next(Q=>r.$r.setTargetsMetadata(h,h.currentSequenceNumber,s));w.push(z)}return te.waitFor(w).next(()=>g.apply(h)).next(()=>r.localDocuments.getLocalViewOfDocuments(h,S,N)).next(()=>S)}).then(h=>(r.ss=c,h))}(r.localStore,e);e.targetChanges.forEach((c,h)=>{const g=r.Oa.get(h);g&&(ft(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?g.Da=!0:c.modifiedDocuments.size>0?ft(g.Da):c.removedDocuments.size>0&&(ft(g.Da),g.Da=!1))}),yield Rs(r,s,e)}catch(s){yield Oe(s)}})).apply(this,arguments)}function _l(a,e,r){const s=ze(a);if(s.isPrimaryClient&&0===r||!s.isPrimaryClient&&1===r){const c=[];s.va.forEach((h,g)=>{const w=g.view.Y_(e);w.snapshot&&c.push(w.snapshot)}),function(g,w){const S=ze(g);S.onlineState=w;let N=!1;S.queries.forEach((z,Q)=>{for(const ue of Q.z_)ue.Y_(w)&&(N=!0)}),N&&Zh(S)}(s.eventManager,e),c.length&&s.Ca.E_(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function cm(a,e,r){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,_.Z)(function*(a,e,r){const s=ze(a);s.sharedClientState.updateQueryState(e,"rejected",r);const c=s.Oa.get(e),h=c&&c.key;if(h){let g=new Qn(it.comparator);g=g.insert(h,Yn.newNoDocument(h,vt.min()));const w=an().add(h),S=new lu(vt.min(),new Map,new Qn(Et),g,w);yield Cp(s,S),s.xa=s.xa.remove(h),s.Oa.delete(e),Fd(s)}else yield sa(s.localStore,e,!1).then(()=>yl(s,e,r)).catch(Oe)})).apply(this,arguments)}function Xh(a,e){return ef.apply(this,arguments)}function ef(){return(ef=(0,_.Z)(function*(a,e){const r=ze(a),s=e.batch.batchId;try{const c=yield function Td(a,e){const r=ze(a);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),h=r.us.newChangeBuffer({trackRemovals:!0});return function(w,S,N,z){const Q=N.batch,ue=Q.keys();let xe=te.resolve();return ue.forEach(tt=>{xe=xe.next(()=>z.getEntry(S,tt)).next(pt=>{const ct=N.docVersions.get(tt);ft(null!==ct),pt.version.compareTo(ct)<0&&(Q.applyToRemoteDocument(pt,N),pt.isValidDocument()&&(pt.setReadTime(N.commitVersion),z.addEntry(pt)))})}),xe.next(()=>w.mutationQueue.removeMutationBatch(S,Q))}(r,s,e,h).next(()=>h.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(w){let S=an();for(let N=0;N<w.mutationResults.length;++N)w.mutationResults[N].transformResults.length>0&&(S=S.add(w.batch.mutations[N].key));return S}(e))).next(()=>r.localDocuments.getDocuments(s,c))})}(r.localStore,e);Rp(r,s,null),Sp(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield Rs(r,c)}catch(c){yield Oe(c)}})).apply(this,arguments)}function bp(a,e,r){return vc.apply(this,arguments)}function vc(){return(vc=(0,_.Z)(function*(a,e,r){const s=ze(a);try{const c=yield function(g,w){const S=ze(g);return S.persistence.runTransaction("Reject batch","readwrite-primary",N=>{let z;return S.mutationQueue.lookupMutationBatch(N,w).next(Q=>(ft(null!==Q),z=Q.keys(),S.mutationQueue.removeMutationBatch(N,Q))).next(()=>S.mutationQueue.performConsistencyCheck(N)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(N,z,w)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(N,z)).next(()=>S.localDocuments.getDocuments(N,z))})}(s.localStore,e);Rp(s,e,r),Sp(s,e),s.sharedClientState.updateMutationState(e,"rejected",r),yield Rs(s,c)}catch(c){yield Oe(c)}})).apply(this,arguments)}function tf(){return(tf=(0,_.Z)(function*(a,e){const r=ze(a);Ba(r.remoteStore)||ie("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const w=ze(g);return w.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>w.mutationQueue.getHighestUnacknowledgedBatchId(S))}(r.localStore);if(-1===s)return void e.resolve();const c=r.Ba.get(s)||[];c.push(e),r.Ba.set(s,c)}catch(s){const c=fl(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}})).apply(this,arguments)}function Sp(a,e){(a.Ba.get(e)||[]).forEach(r=>{r.resolve()}),a.Ba.delete(e)}function Rp(a,e,r){const s=ze(a);let c=s.La[s.currentUser.toKey()];if(c){const h=c.get(e);h&&(r?h.reject(r):h.resolve(),c=c.remove(e)),s.La[s.currentUser.toKey()]=c}}function yl(a,e,r=null){a.sharedClientState.removeLocalQueryTarget(e);for(const s of a.Fa.get(e))a.va.delete(s),r&&a.Ca.Ka(s,r);a.Fa.delete(e),a.isPrimaryClient&&a.Na.mr(e).forEach(s=>{a.Na.containsKey(s)||Pp(a,s)})}function Pp(a,e){a.Ma.delete(e.path.canonicalString());const r=a.xa.get(e);null!==r&&(Ua(a.remoteStore,r),a.xa=a.xa.remove(e),a.Oa.delete(r),Fd(a))}function nf(a,e,r){for(const s of r)s instanceof im?(a.Na.addReference(s.key,e),rf(a,s)):s instanceof Ep?(ie("SyncEngine","Document no longer in limbo: "+s.key),a.Na.removeReference(s.key,e),a.Na.containsKey(s.key)||Pp(a,s.key)):gt()}function rf(a,e){const r=e.key,s=r.path.canonicalString();a.xa.get(r)||a.Ma.has(s)||(ie("SyncEngine","New document in limbo: "+r),a.Ma.add(s),Fd(a))}function Fd(a){for(;a.Ma.size>0&&a.xa.size<a.maxConcurrentLimboResolutions;){const e=a.Ma.values().next().value;a.Ma.delete(e);const r=new it($t.fromString(e)),s=a.ka.next();a.Oa.set(s,new Tp(r)),a.xa=a.xa.insert(r,s),dl(a.remoteStore,new I(Yr(us(r.path)),s,"TargetPurposeLimboResolution",q.oe))}}function Rs(a,e,r){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,_.Z)(function*(a,e,r){const s=ze(a),c=[],h=[],g=[];var w;s.va.isEmpty()||(s.va.forEach((w,S)=>{g.push(s.Qa(S,e,r).then(N=>{var z;if((N||r)&&s.isPrimaryClient){const Q=N?!N.fromCache:null===(z=r?.targetChanges.get(S.targetId))||void 0===z?void 0:z.current;s.sharedClientState.updateQueryState(S.targetId,Q?"current":"not-current")}if(N){c.push(N);const Q=Iu.Ui(S.targetId,N);h.push(Q)}}))}),yield Promise.all(g),s.Ca.E_(c),yield(w=(0,_.Z)(function*(N,z){const Q=ze(N);try{yield Q.persistence.runTransaction("notifyLocalViewChanges","readwrite",ue=>te.forEach(z,xe=>te.forEach(xe.Ki,tt=>Q.persistence.referenceDelegate.addReference(ue,xe.targetId,tt)).next(()=>te.forEach(xe.$i,tt=>Q.persistence.referenceDelegate.removeReference(ue,xe.targetId,tt)))))}catch(ue){if(!Kn(ue))throw ue;ie("LocalStore","Failed to update sequence numbers: "+ue)}for(const ue of z){const xe=ue.targetId;if(!ue.fromCache){const tt=Q.ss.get(xe),ct=tt.withLastLimboFreeSnapshotVersion(tt.snapshotVersion);Q.ss=Q.ss.insert(xe,ct)}}}),function S(N,z){return w.apply(this,arguments)})(s.localStore,h))}),Mp.apply(this,arguments)}function Z_(a,e){return lm.apply(this,arguments)}function lm(){return(lm=(0,_.Z)(function*(a,e){const r=ze(a);if(!r.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const s=yield op(r.localStore,e);r.currentUser=e,(h=r).Ba.forEach(w=>{w.forEach(S=>{S.reject(new Z(he.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Ba.clear(),r.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Rs(r,s.ls)}var h})).apply(this,arguments)}function Q_(a,e){const r=ze(a),s=r.Oa.get(e);if(s&&s.Da)return an().add(s.key);{let c=an();const h=r.Fa.get(e);if(!h)return c;for(const g of h){const w=r.va.get(g);c=c.unionWith(w.view.Ra)}return c}}function xp(a,e){return Np.apply(this,arguments)}function Np(){return(Np=(0,_.Z)(function*(a,e){const r=ze(a),s=yield pc(r.localStore,e.query,!0),c=e.view.Sa(s);return r.isPrimaryClient&&nf(r,e.targetId,c.ya),c})).apply(this,arguments)}function vl(a,e){return El.apply(this,arguments)}function El(){return(El=(0,_.Z)(function*(a,e){const r=ze(a);return Du(r.localStore,e).then(s=>Rs(r,s))})).apply(this,arguments)}function Op(a,e,r,s){return sf.apply(this,arguments)}function sf(){return(sf=(0,_.Z)(function*(a,e,r,s){const c=ze(a),h=yield function(w,S){const N=ze(w),z=ze(N.mutationQueue);return N.persistence.runTransaction("Lookup mutation documents","readonly",Q=>z.Fn(Q,S).next(ue=>ue?N.localDocuments.getDocuments(Q,ue):te.resolve(null)))}(c.localStore,e);var S;null!==h?("pending"===r?yield Su(c.remoteStore):"acknowledged"===r||"rejected"===r?(Rp(c,e,s||null),Sp(c,e),S=e,ze(ze(c.localStore).mutationQueue).xn(S)):gt(),yield Rs(c,h)):ie("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function af(){return(af=(0,_.Z)(function*(a,e){const r=ze(a);if(uf(r),fm(r),!0===e&&!0!==r.qa){const s=r.sharedClientState.getAllActiveQueryTargets(),c=yield kp(r,s.toArray());r.qa=!0,yield $h(r.remoteStore,!0);for(const h of c)dl(r.remoteStore,h)}else if(!1===e&&!1!==r.qa){const s=[];let c=Promise.resolve();r.Fa.forEach((h,g)=>{r.sharedClientState.isLocalQueryTarget(g)?s.push(g):c=c.then(()=>(yl(r,g),sa(r.localStore,g,!0))),Ua(r.remoteStore,g)}),yield c,yield kp(r,s),function(g){const w=ze(g);w.Oa.forEach((S,N)=>{Ua(w.remoteStore,N)}),w.Na.gr(),w.Oa=new Map,w.xa=new Qn(it.comparator)}(r),r.qa=!1,yield $h(r.remoteStore,!1)}})).apply(this,arguments)}function kp(a,e,r){return Lp.apply(this,arguments)}function Lp(){return(Lp=(0,_.Z)(function*(a,e,r){const s=ze(a),c=[],h=[];for(const g of e){let w;const S=s.Fa.get(g);if(S&&0!==S.length){w=yield Tu(s.localStore,Yr(S[0]));for(const N of S){const z=s.va.get(N),Q=yield xp(s,z);Q.snapshot&&h.push(Q.snapshot)}}else{const N=yield Mh(s.localStore,g);w=yield Tu(s.localStore,N),yield wp(s,hm(N),g,!1,w.resumeToken)}c.push(w)}return s.Ca.E_(h),c})).apply(this,arguments)}function hm(a){return Zn(a.path,a.collectionGroup,a.orderBy,a.filters,a.limit,"F",a.startAt,a.endAt)}function Y_(a){return r=ze(a).localStore,ze(ze(r).persistence).qi();var r}function J_(a,e,r,s){return Fp.apply(this,arguments)}function Fp(){return(Fp=(0,_.Z)(function*(a,e,r,s){const c=ze(a);if(c.qa)return void ie("SyncEngine","Ignoring unexpected query state notification.");const h=c.Fa.get(e);if(h&&h.length>0)switch(r){case"current":case"not-current":{const g=yield Du(c.localStore,Ji(h[0])),w=lu.createSynthesizedRemoteEventForCurrentChange(e,"current"===r,Sr.EMPTY_BYTE_STRING);yield Rs(c,g,w);break}case"rejected":yield sa(c.localStore,e,!0),yl(c,e,s);break;default:gt()}})).apply(this,arguments)}function Mu(a,e,r){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,_.Z)(function*(a,e,r){const s=uf(a);if(s.qa){for(const c of e){if(s.Fa.has(c)&&s.sharedClientState.isActiveQueryTarget(c)){ie("SyncEngine","Adding an already active target "+c);continue}const h=yield Mh(s.localStore,c),g=yield Tu(s.localStore,h);yield wp(s,hm(h),g.targetId,!1,g.resumeToken),dl(s.remoteStore,g)}for(const c of r)s.Fa.has(c)&&(yield sa(s.localStore,c,!1).then(()=>{Ua(s.remoteStore,c),yl(s,c)}).catch(Oe))}})).apply(this,arguments)}function uf(a){const e=ze(a);return e.remoteStore.remoteSyncer.applyRemoteEvent=Cp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Q_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cm.bind(null,e),e.Ca.E_=gl.bind(null,e.eventManager),e.Ca.Ka=Kh.bind(null,e.eventManager),e}function fm(a){const e=ze(a);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bp.bind(null,e),e}class cf{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,_.Z)(function*(){r.serializer=Nt(e.databaseInfo.databaseId),r.sharedClientState=r.createSharedClientState(e),r.persistence=r.createPersistence(e),yield r.persistence.start(),r.localStore=r.createLocalStore(e),r.gcScheduler=r.createGarbageCollectionScheduler(e,r.localStore),r.indexBackfillerScheduler=r.createIndexBackfillerScheduler(e,r.localStore)})()}createGarbageCollectionScheduler(e,r){return null}createIndexBackfillerScheduler(e,r){return null}createLocalStore(e){return Id(this.persistence,new Ph,e.initialUser,this.serializer)}createPersistence(e){return new dc(il.Yr,this.serializer)}createSharedClientState(e){return new Nh}terminate(){var e=this;return(0,_.Z)(function*(){var r,s;null===(r=e.gcScheduler)||void 0===r||r.stop(),null===(s=e.indexBackfillerScheduler)||void 0===s||s.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class pm extends cf{constructor(e,r,s){super(),this.Ua=e,this.cacheSizeBytes=r,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,s=this;return(0,_.Z)(function*(){yield r().call(s,e),yield s.Ua.initialize(s,e),yield fm(s.Ua.syncEngine),yield Su(s.Ua.remoteStore),yield s.persistence.pi(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Id(this.persistence,new Ph,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,r){return new Xc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,r)}createIndexBackfillerScheduler(e,r){const s=new V(r,this.persistence);return new B(e.asyncQueue,s)}createPersistence(e){const r=ol(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?dr.withCacheSize(this.cacheSizeBytes):dr.DEFAULT;return new Ed(this.synchronizeTabs,r,e.clientId,s,e.asyncQueue,Fe(),rt(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Nh}}class Vp extends pm{constructor(e,r){super(e,r,!1),this.Ua=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,s=this;return(0,_.Z)(function*(){yield r().call(s,e);const c=s.Ua.syncEngine;s.sharedClientState instanceof Fa&&(s.sharedClientState.syncEngine={eo:Op.bind(null,c),no:J_.bind(null,c),ro:Mu.bind(null,c),qi:Y_.bind(null,c),Xs:vl.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.pi(function(){var h=(0,_.Z)(function*(g){yield function dm(a,e){return af.apply(this,arguments)}(s.Ua.syncEngine,g),s.gcScheduler&&(g&&!s.gcScheduler.started?s.gcScheduler.start():g||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(g&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():g||s.indexBackfillerScheduler.stop())});return function(g){return h.apply(this,arguments)}}())})()}createSharedClientState(e){const r=Fe();if(!Fa.D(r))throw new Z(he.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=ol(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Fa(r,e.asyncQueue,s,e.clientId,e.initialUser)}}class Il{initialize(e,r){var s=this;return(0,_.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(r),s.remoteStore=s.createRemoteStore(r),s.eventManager=s.createEventManager(r),s.syncEngine=s.createSyncEngine(r,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>_l(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=Z_.bind(null,s.syncEngine),yield $h(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Pd}createDatastore(e){const r=Nt(e.databaseInfo.databaseId),s=new fe(e.databaseInfo);return new cl(e.authCredentials,e.appCheckCredentials,s,r)}createRemoteStore(e){return s=this.localStore,c=this.datastore,h=e.asyncQueue,g=r=>_l(this.syncEngine,r,0),w=y.D()?new y:new Yg,new Oh(s,c,h,g,w);var s,c,h,g,w}createSyncEngine(e,r){return function(c,h,g,w,S,N,z){const Q=new G_(c,h,g,w,S,N);return z&&(Q.qa=!0),Q}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){var e=this;return(0,_.Z)(function*(){var r,s,c;yield(c=(0,_.Z)(function*(g){const w=ze(g);ie("RemoteStore","RemoteStore shutting down."),w.N_.add(5),yield Va(w),w.B_.shutdown(),w.k_.set("Unknown")}),function h(g){return c.apply(this,arguments)})(e.remoteStore),null===(r=e.datastore)||void 0===r||r.terminate(),null===(s=e.eventManager)||void 0===s||s.terminate()})()}}function gm(a,e=10240){let r=0;return{read:()=>(0,_.Z)(function*(){if(r<a.byteLength){const s={value:a.slice(r,r+e),done:!1};return r+=e,s}return{done:!0}})(),cancel:()=>(0,_.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class lf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class X_{constructor(e,r){this.za=e,this.serializer=r,this.metadata=new ve,this.buffer=new Uint8Array,this.ja=new TextDecoder("utf-8"),this.Ha().then(s=>{s&&s.aa()?this.metadata.resolve(s._a.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(s?._a)}`))},s=>this.metadata.reject(s))}close(){return this.za.cancel()}getMetadata(){var e=this;return(0,_.Z)(function*(){return e.metadata.promise})()}$a(){var e=this;return(0,_.Z)(function*(){return yield e.getMetadata(),e.Ha()})()}Ha(){var e=this;return(0,_.Z)(function*(){const r=yield e.Ja();if(null===r)return null;const s=e.ja.decode(r),c=Number(s);isNaN(c)&&e.Ya(`length string (${s}) is not valid number`);const h=yield e.Za(c);return new H_(JSON.parse(h),r.length+c)})()}Xa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ja(){var e=this;return(0,_.Z)(function*(){for(;e.Xa()<0&&!(yield e.eu()););if(0===e.buffer.length)return null;const r=e.Xa();r<0&&e.Ya("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),s})()}Za(e){var r=this;return(0,_.Z)(function*(){for(;r.buffer.length<e;)(yield r.eu())&&r.Ya("Reached the end of bundle when more is expected.");const s=r.ja.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),s})()}Ya(e){throw this.za.cancel(),new Error(`Invalid bundle format: ${e}`)}eu(){var e=this;return(0,_.Z)(function*(){const r=yield e.za.read();if(!r.done){const s=new Uint8Array(e.buffer.length+r.value.length);s.set(e.buffer),s.set(r.value,e.buffer.length),e.buffer=s}return r.done})()}}class Up{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,_.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw r.lastTransactionError=new Z(he.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),r.lastTransactionError;const s=yield(c=(0,_.Z)(function*(g,w){const S=ze(g),N={documents:w.map(xe=>Ko(S.serializer,xe))},z=yield S.No("BatchGetDocuments",S.serializer.databaseId,$t.emptyPath(),N,w.length),Q=new Map;z.forEach(xe=>{const tt=function Ca(a,e){return"found"in e?function(s,c){ft(!!c.found);const h=$s(s,c.found.name),g=Cr(c.found.updateTime),w=c.found.createTime?Cr(c.found.createTime):vt.min(),S=new Un({mapValue:{fields:c.found.fields}});return Yn.newFoundDocument(h,g,w,S)}(a,e):"missing"in e?function(s,c){ft(!!c.missing),ft(!!c.readTime);const h=$s(s,c.missing),g=Cr(c.readTime);return Yn.newNoDocument(h,g)}(a,e):gt()}(S.serializer,xe);Q.set(tt.key.toString(),tt)});const ue=[];return w.forEach(xe=>{const tt=Q.get(xe.toString());ft(!!tt),ue.push(tt)}),ue}),function h(g,w){return c.apply(this,arguments)})(r.datastore,e);var c;return s.forEach(c=>r.recordVersion(c)),s})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastTransactionError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new xn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const r=e.readVersions;var s;e.mutations.forEach(s=>{r.delete(s.key.toString())}),r.forEach((s,c)=>{const h=it.fromPath(c);e.mutations.push(new Ar(h,e.precondition(h)))}),yield(s=(0,_.Z)(function*(h,g){const w=ze(h),S={writes:g.map(N=>oo(w.serializer,N))};yield w.Fo("Commit",w.serializer.databaseId,$t.emptyPath(),S)}),function c(h,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw gt();r=vt.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!r.isEqual(s))throw new Z(he.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?r.isEqual(vt.min())?D.exists(!1):D.updateTime(r):D.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual(vt.min()))throw new Z(he.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return D.updateTime(r)}return D.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $a{constructor(e,r,s,c,h){this.asyncQueue=e,this.datastore=r,this.options=s,this.updateFunction=c,this.deferred=h,this.tu=s.maxAttempts,this.e_=new Gt(this.asyncQueue,"transaction_retry")}nu(){this.tu-=1,this.ru()}ru(){var e=this;this.e_.Wo((0,_.Z)(function*(){const r=new Up(e.datastore),s=e.iu(r);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(c)}).catch(h=>{e.su(h)}))}).catch(c=>{e.su(c)})}))}iu(e){try{const r=this.updateFunction(e);return!J(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}su(e){this.tu>0&&this.ou(e)?(this.tu-=1,this.asyncQueue.enqueueAndForget(()=>(this.ru(),Promise.resolve()))):this.deferred.reject(e)}ou(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||"already-exists"===r||!Bc(r)}return!1}}class Vd{constructor(e,r,s,c){var h=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=c,this.user=Ne.UNAUTHENTICATED,this.clientId=zr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var g=(0,_.Z)(function*(w){ie("FirestoreClient","Received user=",w.uid),yield h.authCredentialListener(w),h.user=w});return function(w){return g.apply(this,arguments)}}()),this.appCheckCredentials.start(s,g=>(ie("FirestoreClient","Received new app check token=",g),this.appCheckCredentialListener(g,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Z(he.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new ve;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(s){const c=fl(s,"Failed to shutdown persistence");r.reject(c)}})),r.promise}}function Ud(a,e){return df.apply(this,arguments)}function df(){return df=(0,_.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const r=a.configuration;yield e.initialize(r);let s=r.initialUser;a.setCredentialChangeListener(function(){var c=(0,_.Z)(function*(h){s.isEqual(h)||(yield op(e.localStore,h),s=h)});return function(h){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>a.terminate()),a._offlineComponents=e}),df.apply(this,arguments)}function hf(a,e){return mm.apply(this,arguments)}function mm(){return(mm=(0,_.Z)(function*(a,e){a.asyncQueue.verifyOperationInProgress();const r=yield _m(a);ie("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(r,a.configuration),a.setCredentialChangeListener(s=>gp(e.remoteStore,s)),a.setAppCheckTokenChangeListener((s,c)=>gp(e.remoteStore,c)),a._onlineComponents=e})).apply(this,arguments)}function ey(a){return"FirebaseError"===a.name?a.code===he.FAILED_PRECONDITION||a.code===he.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code}function _m(a){return Bd.apply(this,arguments)}function Bd(){return(Bd=(0,_.Z)(function*(a){if(!a._offlineComponents)if(a._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Ud(a,a._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!ey(r))throw r;Pt("Error using user provided cache. Falling back to memory cache: "+r),yield Ud(a,new cf)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),yield Ud(a,new cf);return a._offlineComponents})).apply(this,arguments)}function Tl(a){return ym.apply(this,arguments)}function ym(){return(ym=(0,_.Z)(function*(a){return a._onlineComponents||(a._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),yield hf(a,a._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),yield hf(a,new Il))),a._onlineComponents})).apply(this,arguments)}function ty(a){return _m(a).then(e=>e.persistence)}function Ic(a){return _m(a).then(e=>e.localStore)}function vm(a){return Tl(a).then(e=>e.remoteStore)}function Bp(a){return Tl(a).then(e=>e.syncEngine)}function Dl(a){return ff.apply(this,arguments)}function ff(){return(ff=(0,_.Z)(function*(a){const e=yield Tl(a),r=e.eventManager;return r.onListen=q_.bind(null,e.syncEngine),r.onUnlisten=Yh.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=sm.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=am.bind(null,e.syncEngine),r})).apply(this,arguments)}function Im(a,e,r={}){const s=new ve;return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,g,w,S,N){const z=new lf({next:ue=>{g.enqueueAndForget(()=>Gh(h,Q));const xe=ue.docs.has(w);!xe&&ue.fromCache?N.reject(new Z(he.UNAVAILABLE,"Failed to get document because the client is offline.")):xe&&ue.fromCache&&S&&"server"===S.source?N.reject(new Z(he.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):N.resolve(ue)},error:ue=>N.reject(ue)}),Q=new vp(us(w.path),z,{includeMetadataChanges:!0,oa:!0});return yp(h,Q)}(yield Dl(a),a.asyncQueue,e,r,s)})),s.promise}function Tm(a,e,r={}){const s=new ve;return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function(h,g,w,S,N){const z=new lf({next:ue=>{g.enqueueAndForget(()=>Gh(h,Q)),ue.fromCache&&"server"===S.source?N.reject(new Z(he.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):N.resolve(ue)},error:ue=>N.reject(ue)}),Q=new vp(w,z,{includeMetadataChanges:!0,oa:!0});return yp(h,Q)}(yield Dl(a),a.asyncQueue,e,r,s)})),s.promise}function $p(a){const e={};return void 0!==a.timeoutSeconds&&(e.timeoutSeconds=a.timeoutSeconds),e}const uy=new Map;function Am(a,e,r){if(!r)throw new Z(he.INVALID_ARGUMENT,`Function ${a}() cannot be called with an empty ${e}.`)}function Al(a,e,r,s){if(!0===e&&!0===s)throw new Z(he.INVALID_ARGUMENT,`${a} and ${r} cannot be used together.`)}function Cl(a){if(!it.isDocumentKey(a))throw new Z(he.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${a} has ${a.length}.`)}function zp(a){if(it.isDocumentKey(a))throw new Z(he.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${a} has ${a.length}.`)}function jd(a){if(void 0===a)return"undefined";if(null===a)return"null";if("string"==typeof a)return a.length>20&&(a=`${a.substring(0,20)}...`),JSON.stringify(a);if("number"==typeof a||"boolean"==typeof a)return""+a;if("object"==typeof a){if(a instanceof Array)return"an array";{const e=(s=a).constructor?s.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var s;return"function"==typeof a?"a function":gt()}function Rn(a,e){if("_delegate"in a&&(a=a._delegate),!(a instanceof e)){if(e.name===a.constructor.name)throw new Z(he.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=jd(a);throw new Z(he.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return a}function gf(a,e){if(e<=0)throw new Z(he.INVALID_ARGUMENT,`Function ${a}() requires a positive number, but it was: ${e}.`)}class Cm{constructor(e){var r,s;if(void 0===e.host){if(void 0!==e.ssl)throw new Z(he.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Z(he.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Al("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=$p(null!==(s=e.experimentalLongPollingOptions)&&void 0!==s?s:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new Z(he.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new Z(he.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new Z(he.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bl{constructor(e,r,s,c){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=s,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Z(he.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Z(he.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cm(e),void 0!==e.credentials&&(this._authCredentials=function(s){if(!s)return new je;switch(s.type){case"firstParty":return new yt(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Z(he.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=uy.get(r);s&&(ie("ComponentProvider","Removing Datastore"),uy.delete(r),s.terminate())}(this),Promise.resolve()}}function Hp(a,e,r,s={}){var c;const h=(a=Rn(a,bl))._getSettings(),g=`${e}:${r}`;if("firestore.googleapis.com"!==h.host&&h.host!==g&&Pt("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),a._setSettings(Object.assign(Object.assign({},h),{host:g,ssl:!1})),s.mockUserToken){let w,S;if("string"==typeof s.mockUserToken)w=s.mockUserToken,S=Ne.MOCK_USER;else{w=(0,ae.Sg)(s.mockUserToken,null===(c=a._app)||void 0===c?void 0:c.options.projectId);const N=s.mockUserToken.sub||s.mockUserToken.user_id;if(!N)throw new Z(he.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Ne(N)}a._authCredentials=new We(new Ve(w,S))}}class hi{constructor(e,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new hi(this.firestore,e,this._query)}}class oi{constructor(e,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oi(this.firestore,e,this._key)}}class lo extends hi{constructor(e,r,s){super(e,r,us(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oi(this.firestore,null,new it(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function cy(a,e,...r){if(a=(0,ae.m9)(a),Am("collection","path",e),a instanceof bl){const s=$t.fromString(e,...r);return zp(s),new lo(a,null,s)}{if(!(a instanceof oi||a instanceof lo))throw new Z(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child($t.fromString(e,...r));return zp(s),new lo(a.firestore,null,s)}}function Wp(a,e){if(a=Rn(a,bl),Am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Z(he.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hi(a,null,(s=e,new as($t.emptyPath(),s)));var s}function Gp(a,e,...r){if(a=(0,ae.m9)(a),1===arguments.length&&(e=zr.newId()),Am("doc","path",e),a instanceof bl){const s=$t.fromString(e,...r);return Cl(s),new oi(a,null,new it(s))}{if(!(a instanceof oi||a instanceof lo))throw new Z(he.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=a._path.child($t.fromString(e,...r));return Cl(s),new oi(a.firestore,a instanceof lo?a.converter:null,new it(s))}}function bm(a,e){return a=(0,ae.m9)(a),e=(0,ae.m9)(e),(a instanceof oi||a instanceof lo)&&(e instanceof oi||e instanceof lo)&&a.firestore===e.firestore&&a.path===e.path&&a.converter===e.converter}function za(a,e){return a=(0,ae.m9)(a),e=(0,ae.m9)(e),a instanceof hi&&e instanceof hi&&a.firestore===e.firestore&&As(a._query,e._query)&&a.converter===e.converter}class ly{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Gt(this,"async_queue_retry"),this.Tu=()=>{const r=rt();r&&ie("AsyncQueue","Visibility state changed to "+r.visibilityState),this.e_.zo()};const e=rt();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;const r=rt();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});const r=new ve;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){var e=this;return(0,_.Z)(function*(){if(0!==e.au.length){try{yield e.au[0](),e.au.shift(),e.e_.reset()}catch(r){if(!Kn(r))throw r;ie("AsyncQueue","Operation failed with retryable error: "+r)}e.au.length>0&&e.e_.Wo(()=>e.Au())}})()}du(e){const r=this._u.then(()=>(this.hu=!0,e().catch(s=>{throw this.lu=s,this.hu=!1,ut("INTERNAL UNHANDLED ERROR: ",function(g){let w=g.message||"";return g.stack&&(w=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),w}(s)),s}).then(s=>(this.hu=!1,s))));return this._u=r,r}enqueueAfterDelay(e,r,s){this.Eu(),this.Iu.indexOf(e)>-1&&(r=0);const c=zh.createAndSchedule(this,e,r,s,h=>this.Ru(h));return this.cu.push(c),c}Eu(){this.lu&&gt()}verifyOperationInProgress(){}Vu(){var e=this;return(0,_.Z)(function*(){let r;do{r=e._u,yield r}while(r!==e._u)})()}mu(e){for(const r of this.cu)if(r.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.cu)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){const r=this.cu.indexOf(e);this.cu.splice(r,1)}}function $d(a){return function(r,s){if("object"!=typeof r||null===r)return!1;const c=r;for(const h of["next","error","complete"])if(h in c&&"function"==typeof c[h])return!0;return!1}(a)}class mf{constructor(){this._progressObserver={},this._taskCompletionResolver=new ve,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,s){this._progressObserver={next:e,error:r,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const dy=-1;class Er extends bl{constructor(e,r,s,c){super(e,r,s,c),this.type="firestore",this._queue=new ly,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_f(this),this._firestoreClient.terminate()}}function ca(a,e){const r="object"==typeof a?a:(0,G.getApp)(),s="string"==typeof a?a:e||"(default)",c=(0,G._getProvider)(r,"firestore").getImmediate({identifier:s});if(!c._initialized){const h=(0,ae.P0)("firestore");h&&Hp(c,...h)}return c}function br(a){return a._firestoreClient||_f(a),a._firestoreClient.verifyNotTerminated(),a._firestoreClient}function _f(a){var e,r,s;const c=a._freezeSettings(),h=(S=(null===(e=a._app)||void 0===e?void 0:e.options.appId)||"",new In(a._databaseId,S,a._persistenceKey,(z=c).host,z.ssl,z.experimentalForceLongPolling,z.experimentalAutoDetectLongPolling,$p(z.experimentalLongPollingOptions),z.useFetchStreams));var S,z;a._firestoreClient=new Vd(a._authCredentials,a._appCheckCredentials,a._queue,h),null!==(r=c.localCache)&&void 0!==r&&r._offlineComponentProvider&&null!==(s=c.localCache)&&void 0!==s&&s._onlineComponentProvider&&(a._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.localCache.kind,_offline:c.localCache._offlineComponentProvider,_online:c.localCache._onlineComponentProvider})}function hy(a,e){Zp(a=Rn(a,Er));const r=br(a);if(r._uninitializedComponentsProvider)throw new Z(he.FAILED_PRECONDITION,"SDK cache is already specified.");Pt("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const s=a._freezeSettings(),c=new Il;return Kp(r,c,new pm(c,s.cacheSizeBytes,e?.forceOwnership))}function fy(a){Zp(a=Rn(a,Er));const e=br(a);if(e._uninitializedComponentsProvider)throw new Z(he.FAILED_PRECONDITION,"SDK cache is already specified.");Pt("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=a._freezeSettings(),s=new Il;return Kp(e,s,new Vp(s,r.cacheSizeBytes))}function Kp(a,e,r){const s=new ve;return a.asyncQueue.enqueue((0,_.Z)(function*(){try{yield Ud(a,r),yield hf(a,e),s.resolve()}catch(c){const h=c;if(!ey(h))throw h;Pt("Error enabling indexeddb cache. Falling back to memory cache: "+h),s.reject(h)}})).then(()=>s.promise)}function Sl(a){if(a._initialized&&!a._terminated)throw new Z(he.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ve;return a._queue.enqueueAndForgetEvenWhileRestricted((0,_.Z)(function*(){try{yield(r=(0,_.Z)(function*(c){if(!jt.D())return Promise.resolve();const h=c+"main";yield jt.delete(h)}),function s(c){return r.apply(this,arguments)})(ol(a._databaseId,a._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}function py(a){return function(r){const s=new ve;return r.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function K_(a,e){return tf.apply(this,arguments)}(yield Bp(r),s)})),s.promise}(br(a=Rn(a,Er)))}function gy(a){return function pf(a){return a.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield ty(a),r=yield vm(a);return e.setNetworkEnabled(!0),function(c){const h=ze(c);return h.N_.delete(0),_c(h)}(r)}))}(br(a=Rn(a,Er)))}function my(a){return function ny(a){return a.asyncQueue.enqueue((0,_.Z)(function*(){const e=yield ty(a),r=yield vm(a);return e.setNetworkEnabled(!1),(s=(0,_.Z)(function*(h){const g=ze(h);g.N_.add(0),yield Va(g),g.k_.set("Offline")}),function c(h){return s.apply(this,arguments)})(r);var s}))}(br(a=Rn(a,Er)))}function Rm(a,e){const r=br(a=Rn(a,Er)),s=new mf;return function wm(a,e,r,s){const c=function(g,w){let S;return S="string"==typeof g?so().encode(g):g,z=function(z,Q){if(z instanceof Uint8Array)return gm(z,Q);if(z instanceof ArrayBuffer)return gm(new Uint8Array(z),Q);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new X_(z,w);var z}(r,Nt(e));a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){!function aE(a,e,r){const s=ze(a);var c;(c=(0,_.Z)(function*(g,w,S){try{const N=yield w.getMetadata();if(yield function(tt,pt){const ct=ze(tt),zt=Cr(pt.createTime);return ct.persistence.runTransaction("hasNewerBundle","readonly",Jt=>ct.Wr.getBundleMetadata(Jt,pt.id)).then(Jt=>!!Jt&&Jt.createTime.compareTo(zt)>=0)}(g.localStore,N))return yield w.close(),S._completeWith({taskState:"Success",documentsLoaded:(tt=N).totalDocuments,bytesLoaded:tt.totalBytes,totalDocuments:tt.totalDocuments,totalBytes:tt.totalBytes}),Promise.resolve(new Set);S._updateProgress(rm(N));const z=new W_(N,g.localStore,w.serializer);let Q=yield w.$a();for(;Q;){const xe=yield z.ca(Q);xe&&S._updateProgress(xe),Q=yield w.$a()}const ue=yield z.complete();return yield Rs(g,ue.Pa,void 0),yield function(tt,pt){const ct=ze(tt);return ct.persistence.runTransaction("Save bundle","readwrite",zt=>ct.Wr.saveBundleMetadata(zt,pt))}(g.localStore,N),S._completeWith(ue.progress),Promise.resolve(ue.ha)}catch(N){return Pt("SyncEngine",`Loading bundle failed with ${N}`),S._failWith(N),Promise.resolve(new Set)}var tt}),function h(g,w,S){return c.apply(this,arguments)})(s,e,r).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield Bp(a),c,s)}))}(r,a._databaseId,e,s),s}function _y(a,e){return function iy(a,e){return a.asyncQueue.enqueue((0,_.Z)(function*(){return function(s,c){const h=ze(s);return h.persistence.runTransaction("Get named query","readonly",g=>h.Wr.getNamedQuery(g,c))}(yield Ic(a),e)}))}(br(a=Rn(a,Er)),e).then(r=>r?new hi(a,null,r.query):null)}function Zp(a){if(a._initialized||a._terminated)throw new Z(he.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Dc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dc(Sr.fromBase64String(e))}catch(r){throw new Z(he.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Dc(Sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xu{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Z(he.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._methodName=e}}class Qp{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Z(he.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Z(he.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Et(this._lat,e._lat)||Et(this._long,e._long)}}const yf=/^__.*__$/;class yy{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return null!==this.fieldMask?new pn(e,this.data,this.fieldMask,r,this.fieldTransforms):new Mn(e,this.data,r,this.fieldTransforms)}}class vf{constructor(e,r,s){this.data=e,this.fieldMask=r,this.fieldTransforms=s}toMutation(e,r){return new pn(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Ef(a){switch(a){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class Ha{constructor(e,r,s,c,h,g){this.settings=e,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=c,void 0===h&&this.pu(),this.fieldTransforms=h||[],this.fieldMask=g||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new Ha(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.wu({path:s,bu:!1});return c.Du(e),c}Cu(e){var r;const s=null===(r=this.path)||void 0===r?void 0:r.child(e),c=this.wu({path:s,bu:!1});return c.pu(),c}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return Jp(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(0===e.length)throw this.Fu("Document fields must not be empty");if(Ef(this.yu)&&yf.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}}class Yp{constructor(e,r,s){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=s||Nt(e)}Ou(e,r,s,c=!1){return new Ha({yu:e,methodName:r,xu:s,path:rn.emptyPath(),bu:!1,Mu:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wa(a){const e=a._freezeSettings(),r=Nt(a._databaseId);return new Yp(a._databaseId,!!e.ignoreUndefinedProperties,r)}function Nu(a,e,r,s,c,h={}){const g=a.Ou(h.merge||h.mergeFields?2:0,e,r,c);Gd("Data must be an object, but it was:",g,s);const w=xm(s,g);let S,N;if(h.merge)S=new pr(g.fieldMask),N=g.fieldTransforms;else if(h.mergeFields){const z=[];for(const Q of h.mergeFields){const ue=Ml(e,Q,r);if(!g.contains(ue))throw new Z(he.INVALID_ARGUMENT,`Field '${ue}' is specified in your field mask but missing from your input data.`);Om(z,ue)||z.push(ue)}S=new pr(z),N=g.fieldTransforms.filter(Q=>S.covers(Q.field))}else S=null,N=g.fieldTransforms;return new yy(new Un(w),S,N)}class Ou extends Rl{_toFieldTransform(e){if(2!==e.yu)throw e.Fu(1===e.yu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ou}}function wc(a,e,r){return new Ha({yu:3,xu:e.settings.xu,methodName:a._methodName,bu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zd extends Rl{_toFieldTransform(e){return new io(e.path,new ro)}isEqual(e){return e instanceof zd}}class Hd extends Rl{constructor(e,r){super(e),this.Nu=r}_toFieldTransform(e){const r=wc(this,e,!0),s=this.Nu.map(h=>ku(h,r)),c=new hs(s);return new io(e.path,c)}isEqual(e){return e instanceof Hd&&(0,ae.vZ)(this.Nu,e.Nu)}}class Pl extends Rl{constructor(e,r){super(e),this.Nu=r}_toFieldTransform(e){const r=wc(this,e,!0),s=this.Nu.map(h=>ku(h,r)),c=new So(s);return new io(e.path,c)}isEqual(e){return e instanceof Pl&&(0,ae.vZ)(this.Nu,e.Nu)}}class Pm extends Rl{constructor(e,r){super(e),this.Lu=r}_toFieldTransform(e){const r=new fs(e.serializer,bs(e.serializer,this.Lu));return new io(e.path,r)}isEqual(e){return e instanceof Pm&&this.Lu===e.Lu}}function Wd(a,e,r,s){const c=a.Ou(1,e,r);Gd("Data must be an object, but it was:",c,s);const h=[],g=Un.empty();xr(s,(S,N)=>{const z=If(e,S,r);N=(0,ae.m9)(N);const Q=c.Cu(z);if(N instanceof Ou)h.push(z);else{const ue=ku(N,Q);null!=ue&&(h.push(z),g.set(z,ue))}});const w=new pr(h);return new vf(g,w,c.fieldTransforms)}function Ac(a,e,r,s,c,h){const g=a.Ou(1,e,r),w=[Ml(e,s,r)],S=[c];if(h.length%2!=0)throw new Z(he.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ue=0;ue<h.length;ue+=2)w.push(Ml(e,h[ue])),S.push(h[ue+1]);const N=[],z=Un.empty();for(let ue=w.length-1;ue>=0;--ue)if(!Om(N,w[ue])){const xe=w[ue];let tt=S[ue];tt=(0,ae.m9)(tt);const pt=g.Cu(xe);if(tt instanceof Ou)N.push(xe);else{const ct=ku(tt,pt);null!=ct&&(N.push(xe),z.set(xe,ct))}}const Q=new pr(N);return new vf(z,Q,g.fieldTransforms)}function Mm(a,e,r,s=!1){return ku(r,a.Ou(s?4:3,e))}function ku(a,e){if(Nm(a=(0,ae.m9)(a)))return Gd("Unsupported field value:",e,a),xm(a,e);if(a instanceof Rl)return function(s,c){if(!Ef(c.yu))throw c.Fu(`${s._methodName}() can only be used with update() and set()`);if(!c.path)throw c.Fu(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(c);h&&c.fieldTransforms.push(h)}(a,e),null;if(void 0===a&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),a instanceof Array){if(e.settings.bu&&4!==e.yu)throw e.Fu("Nested arrays are not supported");return function(s,c){const h=[];let g=0;for(const w of s){let S=ku(w,c.vu(g));null==S&&(S={nullValue:"NULL_VALUE"}),h.push(S),g++}return{arrayValue:{values:h}}}(a,e)}return function(s,c){if(null===(s=(0,ae.m9)(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof s)return bs(c.serializer,s);if("boolean"==typeof s)return{booleanValue:s};if("string"==typeof s)return{stringValue:s};if(s instanceof Date){const h=mt.fromDate(s);return{timestampValue:qo(c.serializer,h)}}if(s instanceof mt){const h=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:qo(c.serializer,h)}}if(s instanceof Qp)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Dc)return{bytesValue:du(c.serializer,s._byteString)};if(s instanceof oi){const h=c.databaseId,g=s.firestore._databaseId;if(!g.isEqual(h))throw c.Fu(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:hu(s.firestore._databaseId||c.databaseId,s._key.path)}}throw c.Fu(`Unsupported field value: ${jd(s)}`)}(a,e)}function xm(a,e){const r={};return mi(a)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xr(a,(s,c)=>{const h=ku(c,e.Su(s));null!=h&&(r[s]=h)}),{mapValue:{fields:r}}}function Nm(a){return!("object"!=typeof a||null===a||a instanceof Array||a instanceof Date||a instanceof mt||a instanceof Qp||a instanceof Dc||a instanceof oi||a instanceof Rl)}function Gd(a,e,r){if(!Nm(r)||"object"!=typeof(c=r)||null===c||Object.getPrototypeOf(c)!==Object.prototype&&null!==Object.getPrototypeOf(c)){const s=jd(r);throw e.Fu("an object"===s?a+" a custom object":a+" "+s)}var c}function Ml(a,e,r){if((e=(0,ae.m9)(e))instanceof xu)return e._internalPath;if("string"==typeof e)return If(a,e);throw Jp("Field path arguments must be of type string or ",a,!1,void 0,r)}const vy=new RegExp("[~\\*/\\[\\]]");function If(a,e,r){if(e.search(vy)>=0)throw Jp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,a,!1,void 0,r);try{return new xu(...e.split("."))._internalPath}catch{throw Jp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,a,!1,void 0,r)}}function Jp(a,e,r,s,c){const h=s&&!s.isEmpty(),g=void 0!==c;let w=`Function ${e}() called with invalid data`;r&&(w+=" (via `toFirestore()`)"),w+=". ";let S="";return(h||g)&&(S+=" (found",h&&(S+=` in field ${s}`),g&&(S+=` in document ${c}`),S+=")"),new Z(he.INVALID_ARGUMENT,w+a+S)}function Om(a,e){return a.some(r=>r.isEqual(e))}class Lu{constructor(e,r,s,c,h){this._firestore=e,this._userDataWriter=r,this._key=s,this._document=c,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new oi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Xp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class Xp extends Lu{data(){return super.data()}}function Tf(a,e){return"string"==typeof e?If(a,e):e instanceof xu?e._internalPath:e._delegate._internalPath}function eg(a){if("L"===a.limitType&&0===a.explicitOrderBy.length)throw new Z(he.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qd{}class Fu extends qd{}function Ey(a,e,...r){let s=[];e instanceof qd&&s.push(e),s=s.concat(r),function(h){const g=h.filter(S=>S instanceof Cc).length,w=h.filter(S=>S instanceof xl).length;if(g>1||g>0&&w>0)throw new Z(he.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const c of s)a=c._apply(a);return a}class xl extends Fu{constructor(e,r,s){super(),this._field=e,this._op=r,this._value=s,this.type="where"}static _create(e,r,s){return new xl(e,r,s)}_apply(e){const r=this._parse(e);return tg(e._query,r),new hi(e.firestore,e.converter,_a(e._query,r))}_parse(e){const r=Wa(e.firestore);return function(h,g,w,S,N,z,Q){let ue;if(N.isKeyField()){if("array-contains"===z||"array-contains-any"===z)throw new Z(he.INVALID_ARGUMENT,`Invalid Query. You can't perform '${z}' queries on documentId().`);if("in"===z||"not-in"===z){Af(Q,z);const xe=[];for(const tt of Q)xe.push(Cy(S,h,tt));ue={arrayValue:{values:xe}}}else ue=Cy(S,h,Q)}else"in"!==z&&"not-in"!==z&&"array-contains-any"!==z||Af(Q,z),ue=Mm(w,"where",Q,"in"===z||"not-in"===z);return un.create(N,z,ue)}(e._query,0,r,e.firestore._databaseId,this._field,this._op,this._value)}}function Iy(a,e,r){const s=e,c=Tf("where",a);return xl._create(c,s,r)}class Cc extends qd{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new Cc(e,r)}_parse(e){const r=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return 1===r.length?r[0]:Fn.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return 0===r.getFilters().length?e:(function(c,h){let g=c;const w=h.getFlattenedFilters();for(const S of w)tg(g,S),g=_a(g,S)}(e._query,r),new hi(e.firestore,e.converter,_a(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Nl extends Fu{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new Nl(e,r)}_apply(e){const r=function(c,h,g){if(null!==c.startAt)throw new Z(he.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==c.endAt)throw new Z(he.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Os(h,g)}(e._query,this._field,this._direction);return new hi(e.firestore,e.converter,function(c,h){const g=c.explicitOrderBy.concat([h]);return new as(c.path,c.collectionGroup,g,c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(e._query,r))}}function Ty(a,e="asc"){const r=e,s=Tf("orderBy",a);return Nl._create(s,r)}class Ga extends Fu{constructor(e,r,s){super(),this.type=e,this._limit=r,this._limitType=s}static _create(e,r,s){return new Ga(e,r,s)}_apply(e){return new hi(e.firestore,e.converter,Do(e._query,this._limit,this._limitType))}}function Kd(a){return gf("limit",a),Ga._create("limit",a,"F")}function Dy(a){return gf("limitToLast",a),Ga._create("limitToLast",a,"L")}class Zd extends Fu{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Zd(e,r,s)}_apply(e){const r=wf(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(h=r,new as((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,h,c.endAt)));var c,h}}function wy(...a){return Zd._create("startAt",a,!0)}function Ay(...a){return Zd._create("startAfter",a,!1)}class Df extends Fu{constructor(e,r,s){super(),this.type=e,this._docOrFields=r,this._inclusive=s}static _create(e,r,s){return new Df(e,r,s)}_apply(e){const r=wf(e,this.type,this._docOrFields,this._inclusive);return new hi(e.firestore,e.converter,(h=r,new as((c=e._query).path,c.collectionGroup,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,h)));var c,h}}function km(...a){return Df._create("endBefore",a,!1)}function Lm(...a){return Df._create("endAt",a,!0)}function wf(a,e,r,s){if(r[0]=(0,ae.m9)(r[0]),r[0]instanceof Lu)return function(h,g,w,S,N){if(!S)throw new Z(he.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${w}().`);const z=[];for(const Q of eo(h))if(Q.field.isKeyField())z.push(Qt(g,S.key));else{const ue=S.data.field(Q.field);if(Eo(ue))throw new Z(he.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Q.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ue){const xe=Q.field.canonicalString();throw new Z(he.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${xe}' (used as the orderBy) does not exist.`)}z.push(ue)}return new ir(z,N)}(a._query,a.firestore._databaseId,e,r[0]._document,s);{const c=Wa(a.firestore);return function(g,w,S,N,z,Q){const ue=g.explicitOrderBy;if(z.length>ue.length)throw new Z(he.INVALID_ARGUMENT,`Too many arguments provided to ${N}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const xe=[];for(let tt=0;tt<z.length;tt++){const pt=z[tt];if(ue[tt].field.isKeyField()){if("string"!=typeof pt)throw new Z(he.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${N}(), but got a ${typeof pt}`);if(!qu(g)&&-1!==pt.indexOf("/"))throw new Z(he.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${N}() must be a plain document ID, but '${pt}' contains a slash.`);const ct=g.path.child($t.fromString(pt));if(!it.isDocumentKey(ct))throw new Z(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${N}() must result in a valid document path, but '${ct}' is not because it contains an odd number of segments.`);const zt=new it(ct);xe.push(Qt(w,zt))}else{const ct=Mm(S,N,pt);xe.push(ct)}}return new ir(xe,Q)}(a._query,a.firestore._databaseId,c,e,r,s)}}function Cy(a,e,r){if("string"==typeof(r=(0,ae.m9)(r))){if(""===r)throw new Z(he.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qu(e)&&-1!==r.indexOf("/"))throw new Z(he.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const s=e.path.child($t.fromString(r));if(!it.isDocumentKey(s))throw new Z(he.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Qt(a,new it(s))}if(r instanceof oi)return Qt(a,r._key);throw new Z(he.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jd(r)}.`)}function Af(a,e){if(!Array.isArray(a)||0===a.length)throw new Z(he.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tg(a,e){const r=function(c,h){for(const g of c)for(const w of g.getFlattenedFilters())if(h.indexOf(w.op)>=0)return w.op;return null}(a.filters,function(c){switch(c){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==r)throw new Z(he.INVALID_ARGUMENT,r===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class ng{convertValue(e,r="none"){switch(rr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(zi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw gt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const s={};return xr(e,(c,h)=>{s[c]=this.convertValue(h,r)}),s}convertGeoPoint(e){return new Qp(gr(e.latitude),gr(e.longitude))}convertArray(e,r){return(e.values||[]).map(s=>this.convertValue(s,r))}convertServerTimestamp(e,r){switch(r){case"previous":const s=Hi(e);return null==s?null:this.convertValue(s,r);case"estimate":return this.convertTimestamp(Ds(e));default:return null}}convertTimestamp(e){const r=$i(e);return new mt(r.seconds,r.nanos)}convertDocumentKey(e,r){const s=$t.fromString(e);ft(rc(s));const c=new nr(s.get(1),s.get(3)),h=new it(s.popFirst(5));return c.isEqual(r)||ut(`Document ${h} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function Qd(a,e,r){let s;return s=a?r&&(r.merge||r.mergeFields)?a.toFirestore(e,r):a.toFirestore(e):e,s}class by extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,r)}}class Vu{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends Lu{constructor(e,r,s,c,h,g){super(e,r,s,c,g),this._firestore=e,this._firestoreImpl=e,this.metadata=h}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const s=this._document.data.field(Tf("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,r.serverTimestamps)}}}class Ol extends Oi{data(e={}){return super.data(e)}}class kl{constructor(e,r,s,c){this._firestore=e,this._userDataWriter=r,this._snapshot=c,this.metadata=new Vu(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(s=>{e.call(r,new Ol(this._firestore,this._userDataWriter,s.key,s,new Vu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Z(he.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(c,h){if(c._snapshot.oldDocs.isEmpty()){let g=0;return c._snapshot.docChanges.map(w=>({type:"added",doc:new Ol(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Vu(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter),oldIndex:-1,newIndex:g++}))}{let g=c._snapshot.oldDocs;return c._snapshot.docChanges.filter(w=>h||3!==w.type).map(w=>{const S=new Ol(c._firestore,c._userDataWriter,w.doc.key,w.doc,new Vu(c._snapshot.mutatedKeys.has(w.doc.key),c._snapshot.fromCache),c.query.converter);let N=-1,z=-1;return 0!==w.type&&(N=g.indexOf(w.doc.key),g=g.delete(w.doc.key)),1!==w.type&&(g=g.add(w.doc),z=g.indexOf(w.doc.key)),{type:rg(w.type),doc:S,oldIndex:N,newIndex:z}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function rg(a){switch(a){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function Uu(a,e){return a instanceof Oi&&e instanceof Oi?a._firestore===e._firestore&&a._key.isEqual(e._key)&&(null===a._document?null===e._document:a._document.isEqual(e._document))&&a._converter===e._converter:a instanceof kl&&e instanceof kl&&a._firestore===e._firestore&&za(a.query,e.query)&&a.metadata.isEqual(e.metadata)&&a._snapshot.isEqual(e._snapshot)}function ig(a){a=Rn(a,oi);const e=Rn(a.firestore,Er);return Im(br(e),a._key).then(r=>Yd(e,a,r))}class Bu extends ng{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dc(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new oi(this.firestore,null,r)}}function fE(a){a=Rn(a,oi);const e=Rn(a.firestore,Er),r=br(e),s=new Bu(e);return function jp(a,e){const r=new ve;return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(s=(0,_.Z)(function*(h,g,w){try{const S=yield function(z,Q){const ue=ze(z);return ue.persistence.runTransaction("read document","readonly",xe=>ue.localDocuments.getDocument(xe,Q))}(h,g);S.isFoundDocument()?w.resolve(S):S.isNoDocument()?w.resolve(null):w.reject(new Z(he.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const N=fl(S,`Failed to get document '${g} from cache`);w.reject(N)}}),function c(h,g,w){return s.apply(this,arguments)})(yield Ic(a),e,r);var s})),r.promise}(r,a._key).then(c=>new Oi(e,s,a._key,c,new Vu(null!==c&&c.hasLocalMutations,!0),a.converter))}function My(a){a=Rn(a,oi);const e=Rn(a.firestore,Er);return Im(br(e),a._key,{source:"server"}).then(r=>Yd(e,a,r))}function sg(a){a=Rn(a,hi);const e=Rn(a.firestore,Er),r=br(e),s=new Bu(e);return eg(a._query),Tm(r,a._query).then(c=>new kl(e,s,a,c))}function la(a){a=Rn(a,hi);const e=Rn(a.firestore,Er),r=br(e),s=new Bu(e);return function wl(a,e){const r=new ve;return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return(s=(0,_.Z)(function*(h,g,w){try{const S=yield pc(h,g,!0),N=new Nd(g,S.Is),z=N.Va(S.documents),Q=N.applyChanges(z,!1);w.resolve(Q.snapshot)}catch(S){const N=fl(S,`Failed to execute query '${g} against cache`);w.reject(N)}}),function c(h,g,w){return s.apply(this,arguments)})(yield Ic(a),e,r);var s})),r.promise}(r,a._query).then(c=>new kl(e,s,a,c))}function Vm(a){a=Rn(a,hi);const e=Rn(a.firestore,Er),r=br(e),s=new Bu(e);return Tm(r,a._query,{source:"server"}).then(c=>new kl(e,s,a,c))}function xy(a,e,r){a=Rn(a,oi);const s=Rn(a.firestore,Er),c=Qd(a.converter,e,r);return Ll(s,[Nu(Wa(s),"setDoc",a._key,c,null!==a.converter,r).toMutation(a._key,D.none())])}function pE(a,e,r,...s){a=Rn(a,oi);const c=Rn(a.firestore,Er),h=Wa(c);let g;return g="string"==typeof(e=(0,ae.m9)(e))||e instanceof xu?Ac(h,"updateDoc",a._key,e,r,s):Wd(h,"updateDoc",a._key,e),Ll(c,[g.toMutation(a._key,D.exists(!0))])}function Di(a){return Ll(Rn(a.firestore,Er),[new xn(a._key,D.none())])}function Ny(a,e){const r=Rn(a.firestore,Er),s=Gp(a),c=Qd(a.converter,e);return Ll(r,[Nu(Wa(a.firestore),"addDoc",s._key,c,null!==a.converter,{}).toMutation(s._key,D.exists(!1))]).then(()=>s)}function og(a,...e){var r,s,c;a=(0,ae.m9)(a);let h={includeMetadataChanges:!1,source:"default"},g=0;"object"!=typeof e[g]||$d(e[g])||(h=e[g],g++);const w={includeMetadataChanges:h.includeMetadataChanges,source:h.source};if($d(e[g])){const Q=e[g];e[g]=null===(r=Q.next)||void 0===r?void 0:r.bind(Q),e[g+1]=null===(s=Q.error)||void 0===s?void 0:s.bind(Q),e[g+2]=null===(c=Q.complete)||void 0===c?void 0:c.bind(Q)}let S,N,z;if(a instanceof oi)N=Rn(a.firestore,Er),z=us(a._key.path),S={next:Q=>{e[g]&&e[g](Yd(N,a,Q))},error:e[g+1],complete:e[g+2]};else{const Q=Rn(a,hi);N=Rn(Q.firestore,Er),z=Q._query;const ue=new Bu(N);S={next:xe=>{e[g]&&e[g](new kl(N,ue,Q,xe))},error:e[g+1],complete:e[g+2]},eg(a._query)}return function(ue,xe,tt,pt){const ct=new lf(pt),zt=new vp(xe,ct,tt);return ue.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return yp(yield Dl(ue),zt)})),()=>{ct.Ga(),ue.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return Gh(yield Dl(ue),zt)}))}}(br(N),z,w,S)}function Oy(a,e){return function Dm(a,e){const r=new lf(e);return a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return c=yield Dl(a),h=r,ze(c).J_.add(h),void h.next();var c,h})),()=>{r.Ga(),a.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return c=yield Dl(a),h=r,void ze(c).J_.delete(h);var c,h}))}}(br(a=Rn(a,Er)),$d(e)?e:{next:e})}function Ll(a,e){return function(s,c){const h=new ve;return s.asyncQueue.enqueueAndForget((0,_.Z)(function*(){return function um(a,e,r){return kd.apply(this,arguments)}(yield Bp(s),c,h)})),h.promise}(br(a),e)}function Yd(a,e,r){const s=r.docs.get(e._key),c=new Bu(a);return new Oi(a,c,e._key,s,new Vu(r.hasPendingWrites,r.fromCache),e.converter)}const $m={maxAttempts:5};class ag{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=Wa(e)}set(e,r,s){this._verifyNotCommitted();const c=da(e,this._firestore),h=Qd(c.converter,r,s),g=Nu(this._dataReader,"WriteBatch.set",c._key,h,null!==c.converter,s);return this._mutations.push(g.toMutation(c._key,D.none())),this}update(e,r,s,...c){this._verifyNotCommitted();const h=da(e,this._firestore);let g;return g="string"==typeof(r=(0,ae.m9)(r))||r instanceof xu?Ac(this._dataReader,"WriteBatch.update",h._key,r,s,c):Wd(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(g.toMutation(h._key,D.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=da(e,this._firestore);return this._mutations=this._mutations.concat(new xn(r._key,D.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Z(he.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function da(a,e){if((a=(0,ae.m9)(a)).firestore!==e)throw new Z(he.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return a}class Xd extends class{constructor(r,s){this._firestore=r,this._transaction=s,this._dataReader=Wa(r)}get(r){const s=da(r,this._firestore),c=new by(this._firestore);return this._transaction.lookup([s._key]).then(h=>{if(!h||1!==h.length)return gt();const g=h[0];if(g.isFoundDocument())return new Lu(this._firestore,c,g.key,g,s.converter);if(g.isNoDocument())return new Lu(this._firestore,c,s._key,null,s.converter);throw gt()})}set(r,s,c){const h=da(r,this._firestore),g=Qd(h.converter,s,c),w=Nu(this._dataReader,"Transaction.set",h._key,g,null!==h.converter,c);return this._transaction.set(h._key,w),this}update(r,s,c,...h){const g=da(r,this._firestore);let w;return w="string"==typeof(s=(0,ae.m9)(s))||s instanceof xu?Ac(this._dataReader,"Transaction.update",g._key,s,c,h):Wd(this._dataReader,"Transaction.update",g._key,s),this._transaction.update(g._key,w),this}delete(r){const s=da(r,this._firestore);return this._transaction.delete(s._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=da(e,this._firestore),s=new Bu(this._firestore);return super.get(e).then(c=>new Oi(this._firestore,s,r._key,c._document,new Vu(!1,!1),r.converter))}}function Cf(a,e,r){a=Rn(a,Er);const s=Object.assign(Object.assign({},$m),r);return function(h){if(h.maxAttempts<1)throw new Z(he.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(h,g,w){const S=new ve;return h.asyncQueue.enqueueAndForget((0,_.Z)(function*(){const N=yield function Em(a){return Tl(a).then(e=>e.datastore)}(h);new $a(h.asyncQueue,N,w,g,S).nu()})),S.promise}(br(a),c=>e(new Xd(a,c)),s)}function zm(){return new Ou("deleteField")}function Hm(){return new zd("serverTimestamp")}function $y(...a){return new Hd("arrayUnion",a)}function zy(...a){return new Pl("arrayRemove",a)}function Hy(a){return new Pm("increment",a)}!function(e,r=!0){we=G.SDK_VERSION,(0,G._registerComponent)(new Y.wA("firestore",(s,{instanceIdentifier:c,options:h})=>{const g=s.getProvider("app").getImmediate(),w=new Er(new Ge(s.getProvider("auth-internal")),new Vt(s.getProvider("app-check-internal")),function(N,z){if(!Object.prototype.hasOwnProperty.apply(N.options,["projectId"]))throw new Z(he.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nr(N.options.projectId,z)}(g,c),g);return h=Object.assign({useFetchStreams:r},h),w._setSettings(h),w},"PUBLIC").setMultipleInstances(!0)),(0,G.registerVersion)(me,"4.6.5",e),(0,G.registerVersion)(me,"4.6.5","esm2017")}()},9058:(Tt,Se,L)=>{L.d(Se,{BH:()=>we,G6:()=>Z,L:()=>Ae,LL:()=>Mt,P0:()=>wt,Pz:()=>Ne,Sg:()=>Be,UG:()=>ie,ZB:()=>_e,ZR:()=>Ge,aH:()=>me,b$:()=>gt,eu:()=>Ve,hl:()=>ve,jU:()=>ut,m9:()=>Xr,n2:()=>Pt,ne:()=>zn,pd:()=>Bt,q4:()=>Ft,r3:()=>mt,ru:()=>ar,tV:()=>ee,uI:()=>lt,vZ:()=>Wr,w1:()=>_t,xO:()=>Ut,xb:()=>Hr,z$:()=>Qe,zd:()=>Kt});const le=function(W){const B=[];let V=0;for(let q=0;q<W.length;q++){let J=W.charCodeAt(q);J<128?B[V++]=J:J<2048?(B[V++]=J>>6|192,B[V++]=63&J|128):55296==(64512&J)&&q+1<W.length&&56320==(64512&W.charCodeAt(q+1))?(J=65536+((1023&J)<<10)+(1023&W.charCodeAt(++q)),B[V++]=J>>18|240,B[V++]=J>>12&63|128,B[V++]=J>>6&63|128,B[V++]=63&J|128):(B[V++]=J>>12|224,B[V++]=J>>6&63|128,B[V++]=63&J|128)}return B},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,B){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let J=0;J<W.length;J+=3){const $e=W[J],st=J+1<W.length,It=st?W[J+1]:0,Xt=J+2<W.length,kt=Xt?W[J+2]:0;let cr=(15&It)<<2|kt>>6,fr=63&kt;Xt||(fr=64,st||(cr=64)),q.push(V[$e>>2],V[(3&$e)<<4|It>>4],V[cr],V[fr])}return q.join("")},encodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(W):this.encodeByteArray(le(W),B)},decodeString(W,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(W):function(W){const B=[];let V=0,q=0;for(;V<W.length;){const J=W[V++];if(J<128)B[q++]=String.fromCharCode(J);else if(J>191&&J<224){const $e=W[V++];B[q++]=String.fromCharCode((31&J)<<6|63&$e)}else if(J>239&&J<365){const Xt=((7&J)<<18|(63&W[V++])<<12|(63&W[V++])<<6|63&W[V++])-65536;B[q++]=String.fromCharCode(55296+(Xt>>10)),B[q++]=String.fromCharCode(56320+(1023&Xt))}else{const $e=W[V++],st=W[V++];B[q++]=String.fromCharCode((15&J)<<12|(63&$e)<<6|63&st)}}return B.join("")}(this.decodeStringToByteArray(W,B))},decodeStringToByteArray(W,B){this.init_();const V=B?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let J=0;J<W.length;){const $e=V[W.charAt(J++)],It=J<W.length?V[W.charAt(J)]:0;++J;const kt=J<W.length?V[W.charAt(J)]:64;++J;const en=J<W.length?V[W.charAt(J)]:64;if(++J,null==$e||null==It||null==kt||null==en)throw new ye;q.push($e<<2|It>>4),64!==kt&&(q.push(It<<4&240|kt>>2),64!==en&&q.push(kt<<6&192|en))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}};class ye extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ae=function(W){return function(W){const B=le(W);return ce.encodeByteArray(B,!0)}(W).replace(/\./g,"")},ee=function(W){try{return ce.decodeString(W,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function _e(W,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return B}for(const V in B)!B.hasOwnProperty(V)||!Je(V)||(W[V]=_e(W[V],B[V]));return W}function Je(W){return"__proto__"!==W}const et=()=>{try{return function qe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const W=process.env.__FIREBASE_DEFAULTS__;return W?JSON.parse(W):void 0})()||(()=>{if(typeof document>"u")return;let W;try{W=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=W&&ee(W[1]);return B&&JSON.parse(B)})()}catch(W){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${W}`)}},Ft=W=>{var B,V;return null===(V=null===(B=et())||void 0===B?void 0:B.emulatorHosts)||void 0===V?void 0:V[W]},wt=W=>{const B=Ft(W);if(!B)return;const V=B.lastIndexOf(":");if(V<=0||V+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const q=parseInt(B.substring(V+1),10);return"["===B[0]?[B.substring(1,V-1),q]:[B.substring(0,V),q]},me=()=>{var W;return null===(W=et())||void 0===W?void 0:W.config},Ne=W=>{var B;return null===(B=et())||void 0===B?void 0:B[`_${W}`]};class we{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,V)=>{this.resolve=B,this.reject=V})}wrapCallback(B){return(V,q)=>{V?this.reject(V):this.resolve(q),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(V):B(V,q))}}}function Be(W,B){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=B||"demo-project",J=W.iat||0,$e=W.sub||W.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const st=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:J,exp:J+3600,auth_time:J,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},W);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(st)),""].join(".")}function Qe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function ie(){var W;const B=null===(W=et())||void 0===W?void 0:W.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ut(){return typeof window<"u"||Pt()}function Pt(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ar(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function gt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _t(){const W=Qe();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Z(){return!ie()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ve(){try{return"object"==typeof indexedDB}catch{return!1}}function Ve(){return new Promise((W,B)=>{try{let V=!0;const q="validate-browser-context-for-indexeddb-analytics-module",J=self.indexedDB.open(q);J.onsuccess=()=>{J.result.close(),V||self.indexedDB.deleteDatabase(q),W(!0)},J.onupgradeneeded=()=>{V=!1},J.onerror=()=>{var $e;B((null===($e=J.error)||void 0===$e?void 0:$e.message)||"")}}catch(V){B(V)}})}class Ge extends Error{constructor(B,V,q){super(V),this.code=B,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mt.prototype.create)}}class Mt{constructor(B,V,q){this.service=B,this.serviceName=V,this.errors=q}create(B,...V){const q=V[0]||{},J=`${this.service}/${B}`,$e=this.errors[B],st=$e?function yt(W,B){return W.replace(qn,(V,q)=>{const J=B[q];return null!=J?String(J):`<${q}?>`})}($e,q):"Error";return new Ge(J,`${this.serviceName}: ${st} (${J}).`,q)}}const qn=/\{\$([^}]+)}/g;function mt(W,B){return Object.prototype.hasOwnProperty.call(W,B)}function Hr(W){for(const B in W)if(Object.prototype.hasOwnProperty.call(W,B))return!1;return!0}function Wr(W,B){if(W===B)return!0;const V=Object.keys(W),q=Object.keys(B);for(const J of V){if(!q.includes(J))return!1;const $e=W[J],st=B[J];if(rn($e)&&rn(st)){if(!Wr($e,st))return!1}else if($e!==st)return!1}for(const J of q)if(!V.includes(J))return!1;return!0}function rn(W){return null!==W&&"object"==typeof W}function Ut(W){const B=[];for(const[V,q]of Object.entries(W))Array.isArray(q)?q.forEach(J=>{B.push(encodeURIComponent(V)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(V)+"="+encodeURIComponent(q));return B.length?"&"+B.join("&"):""}function Kt(W){const B={};return W.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[J,$e]=q.split("=");B[decodeURIComponent(J)]=decodeURIComponent($e)}}),B}function Bt(W){const B=W.indexOf("?");if(!B)return"";const V=W.indexOf("#",B);return W.substring(B,V>0?V:void 0)}function zn(W,B){const V=new Jn(W,B);return V.subscribe.bind(V)}class Jn{constructor(B,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{B(this)}).catch(q=>{this.error(q)})}next(B){this.forEachObserver(V=>{V.next(B)})}error(B){this.forEachObserver(V=>{V.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,V,q){let J;if(void 0===B&&void 0===V&&void 0===q)throw new Error("Missing Observer.");J=function Tr(W,B){if("object"!=typeof W||null===W)return!1;for(const V of B)if(V in W&&"function"==typeof W[V])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:V,complete:q},void 0===J.next&&(J.next=Gr),void 0===J.error&&(J.error=Gr),void 0===J.complete&&(J.complete=Gr);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch{}}),this.observers.push(J),$e}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,B)}sendOne(B,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{V(this.observers[B])}catch(q){typeof console<"u"&&console.error&&console.error(q)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gr(){}function Xr(W){return W&&W._delegate?W._delegate:W}},6358:(Tt,Se,L)=>{L.d(Se,{N:()=>_});const _={production:!1,backendUrl:"http://127.0.0.1:4200",firebase:{apiKey:"AIzaSyD6a8rYKNNenlks02UDgFDcHG8Wk5cNM6c",authDomain:"catcher-game-cf1a5.firebaseapp.com",projectId:"catcher-game-cf1a5",storageBucket:"catcher-game-cf1a5.appspot.com",messagingSenderId:"778442507147",appId:"1:778442507147:web:93d2327fa33fd391b5658e",measurementId:"G-PKPY5YS4GT"}}},6984:(Tt,Se,L)=>{var _=L(6593),G=L(5879),Y=L(8878);const ae=[{path:"",component:(()=>{class Oe{static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)};static#t=this.\u0275cmp=G.Xpm({type:Oe,selectors:[["app-home"]],decls:8,vars:0,consts:[[1,"home-section"],[1,"home-container"],[1,"mb-4"],["href","/game",1,"btn","custom-btn"],["href","/leaderboard",1,"btn","custom-btn"]],template:function(Dt,jt){1&Dt&&(G.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),G._uU(4," Start "),G.qZA()(),G.TgZ(5,"div")(6,"a",4),G._uU(7," Leaderboard "),G.qZA()()()())},styles:[".home-section[_ngcontent-%COMP%]{min-height:100vh;width:100%;background-image:url(bg2.c3b88afb52159d87.png);text-align:center;padding:10%;display:flex;justify-content:center;align-items:center}.home-section[_ngcontent-%COMP%]   .home-container[_ngcontent-%COMP%]   .custom-btn[_ngcontent-%COMP%]{width:220px;padding:24px 12px}"]})}return Oe})()},{path:"game",loadChildren:()=>Promise.all([L.e(390),L.e(561)]).then(L.bind(L,561)).then(Oe=>Oe.GameModule)},{path:"leaderboard",loadChildren:()=>L.e(390).then(L.bind(L,2390)).then(Oe=>Oe.LeaderboardModule)}];let ce=(()=>{class Oe{static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)};static#t=this.\u0275mod=G.oAB({type:Oe});static#n=this.\u0275inj=G.cJS({imports:[Y.Bz.forRoot(ae),Y.Bz]})}return Oe})(),ye=(()=>{class Oe{constructor(){this.title="zoe-catcher-app"}static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)};static#t=this.\u0275cmp=G.Xpm({type:Oe,selectors:[["app-root"]],decls:1,vars:0,template:function(Dt,jt){1&Dt&&G._UZ(0,"router-outlet")},dependencies:[Y.lC]})}return Oe})();var Te=L(6814),Ae=L(4911),ee=L(8504),re=L(4829),_e=L(5592),Je=L(1631),qe=L(4266),at=L(4674),Ze=L(7400);const dt=["addListener","removeListener"],et=["addEventListener","removeEventListener"],Ft=["on","off"];function wt(Oe,xt,te,Dt){if((0,at.m)(te)&&(Dt=te,te=void 0),Dt)return wt(Oe,xt,te).pipe((0,Ze.Z)(Dt));const[jt,sn]=function Be(Oe){return(0,at.m)(Oe.addEventListener)&&(0,at.m)(Oe.removeEventListener)}(Oe)?et.map(on=>Hn=>Oe[on](xt,Hn,te)):function Ne(Oe){return(0,at.m)(Oe.addListener)&&(0,at.m)(Oe.removeListener)}(Oe)?dt.map(me(Oe,xt)):function we(Oe){return(0,at.m)(Oe.on)&&(0,at.m)(Oe.off)}(Oe)?Ft.map(me(Oe,xt)):[];if(!jt&&(0,qe.z)(Oe))return(0,Je.z)(on=>wt(on,xt,te))((0,re.Xf)(Oe));if(!jt)throw new TypeError("Invalid event target");return new _e.y(on=>{const Hn=(...Kn)=>on.next(1<Kn.length?Kn:Kn[0]);return jt(Hn),()=>sn(Hn)})}function me(Oe,xt){return te=>Dt=>Oe[te](xt,Dt)}var Qe=L(2096),lt=L(5211),ie=L(8645),ut=L(2420);const Pt=new _e.y(ut.Z);var gt=L(3019),ft=L(7398),_t=L(2181),ze=L(4664),he=L(3168),Z=L(9360);const Ve={connector:()=>new ie.x};function je(Oe,xt=Ve){const{connector:te}=xt;return(0,Z.e)((Dt,jt)=>{const sn=te();(0,re.Xf)(Oe(function ve(Oe){return new _e.y(xt=>Oe.subscribe(xt))}(sn))).subscribe(jt),jt.add(Dt.subscribe(sn))})}var Mt=L(8180),yt=L(9397),qn=L(6321),Vt=L(8251),qt=L(975);function zr(Oe,xt){return xt?te=>(0,lt.z)(xt.pipe((0,Mt.q)(1),function An(){return(0,Z.e)((Oe,xt)=>{Oe.subscribe((0,Vt.x)(xt,ut.Z))})}()),te.pipe(zr(Oe))):(0,Je.z)((te,Dt)=>(0,re.Xf)(Oe(te,Dt)).pipe((0,Mt.q)(1),(0,qt.h)(te)))}var Et=L(671);const vt="Service workers are disabled or not supported by this browser";class $t{constructor(xt){if(this.serviceWorker=xt,xt){const Dt=wt(xt,"controllerchange").pipe((0,ft.U)(()=>xt.controller)),jt=(0,Ae.P)(()=>(0,Qe.of)(xt.controller)),sn=(0,lt.z)(jt,Dt);this.worker=sn.pipe((0,_t.h)(ur=>!!ur)),this.registration=this.worker.pipe((0,ze.w)(()=>xt.getRegistration()));const qr=wt(xt,"message").pipe((0,ft.U)(ur=>ur.data)).pipe((0,_t.h)(ur=>ur&&ur.type)).pipe(function Ge(Oe){return Oe?xt=>je(Oe)(xt):xt=>function We(Oe,xt){const te=(0,at.m)(Oe)?Oe:()=>Oe;return(0,at.m)(xt)?je(xt,{connector:te}):Dt=>new he.c(Dt,te)}(new ie.x)(xt)}());qr.connect(),this.events=qr}else this.worker=this.events=this.registration=function Hr(Oe){return(0,Ae.P)(()=>(0,ee._)(new Error(Oe)))}(vt)}postMessage(xt,te){return this.worker.pipe((0,Mt.q)(1),(0,yt.b)(Dt=>{Dt.postMessage({action:xt,...te})})).toPromise().then(()=>{})}postMessageWithOperation(xt,te,Dt){const jt=this.waitForOperationCompleted(Dt),sn=this.postMessage(xt,te);return Promise.all([sn,jt]).then(([,on])=>on)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(xt){let te;return te="string"==typeof xt?Dt=>Dt.type===xt:Dt=>xt.includes(Dt.type),this.events.pipe((0,_t.h)(te))}nextEventOfType(xt){return this.eventsOfType(xt).pipe((0,Mt.q)(1))}waitForOperationCompleted(xt){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,_t.h)(te=>te.nonce===xt),(0,Mt.q)(1),(0,ft.U)(te=>{if(void 0!==te.result)return te.result;throw new Error(te.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let Wr=(()=>{class Oe{get isEnabled(){return this.sw.isEnabled}constructor(te){if(this.sw=te,this.pushManager=null,this.subscriptionChanges=new ie.x,!te.isEnabled)return this.messages=Pt,this.notificationClicks=Pt,void(this.subscription=Pt);this.messages=this.sw.eventsOfType("PUSH").pipe((0,ft.U)(jt=>jt.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,ft.U)(jt=>jt.data)),this.pushManager=this.sw.registration.pipe((0,ft.U)(jt=>jt.pushManager));const Dt=this.pushManager.pipe((0,ze.w)(jt=>jt.getSubscription()));this.subscription=(0,gt.T)(Dt,this.subscriptionChanges)}requestSubscription(te){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(vt));const Dt={userVisibleOnly:!0};let jt=this.decodeBase64(te.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),sn=new Uint8Array(new ArrayBuffer(jt.length));for(let on=0;on<jt.length;on++)sn[on]=jt.charCodeAt(on);return Dt.applicationServerKey=sn,this.pushManager.pipe((0,ze.w)(on=>on.subscribe(Dt)),(0,Mt.q)(1)).toPromise().then(on=>(this.subscriptionChanges.next(on),on))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe((0,Mt.q)(1),(0,ze.w)(Dt=>{if(null===Dt)throw new Error("Not subscribed to push notifications.");return Dt.unsubscribe().then(jt=>{if(!jt)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(vt))}decodeBase64(te){return atob(te)}static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)(G.LFG($t))};static#t=this.\u0275prov=G.Yz7({token:Oe,factory:Oe.\u0275fac})}return Oe})(),rn=(()=>{class Oe{get isEnabled(){return this.sw.isEnabled}constructor(te){if(this.sw=te,!te.isEnabled)return this.versionUpdates=Pt,this.available=Pt,this.activated=Pt,void(this.unrecoverable=Pt);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe((0,_t.h)(Dt=>"VERSION_READY"===Dt.type),(0,ft.U)(Dt=>({type:"UPDATE_AVAILABLE",current:Dt.currentVersion,available:Dt.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(vt));const te=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:te},te)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(vt));const te=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:te},te)}static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)(G.LFG($t))};static#t=this.\u0275prov=G.Yz7({token:Oe,factory:Oe.\u0275fac})}return Oe})();const it=new G.OlP("NGSW_REGISTER_SCRIPT");function Ut(Oe,xt,te,Dt){return()=>{if(!(0,Te.NF)(Dt)||!("serviceWorker"in navigator)||!1===te.enabled)return;let jt;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof te.registrationStrategy)jt=te.registrationStrategy();else{const[on,...Hn]=(te.registrationStrategy||"registerWhenStable:30000").split(":");switch(on){case"registerImmediately":jt=(0,Qe.of)(null);break;case"registerWithDelay":jt=Kt(+Hn[0]||0);break;case"registerWhenStable":jt=Hn[0]?(0,gt.T)(Bt(Oe),Kt(+Hn[0])):Bt(Oe);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${te.registrationStrategy}`)}}Oe.get(G.R0b).runOutsideAngular(()=>jt.pipe((0,Mt.q)(1)).subscribe(()=>navigator.serviceWorker.register(xt,{scope:te.scope}).catch(on=>console.error("Service worker registration failed with:",on))))}}function Kt(Oe){return(0,Qe.of)(null).pipe(function mt(Oe,xt=qn.z){const te=function Cn(Oe=0,xt,te=qn.P){let Dt=-1;return null!=xt&&((0,Et.K)(xt)?te=xt:Dt=xt),new _e.y(jt=>{let sn=function yn(Oe){return Oe instanceof Date&&!isNaN(Oe)}(Oe)?+Oe-te.now():Oe;sn<0&&(sn=0);let on=0;return te.schedule(function(){jt.closed||(jt.next(on++),0<=Dt?this.schedule(void 0,Dt):jt.complete())},sn)})}(Oe,xt);return zr(()=>te)}(Oe))}function Bt(Oe){return Oe.get(G.z2F).isStable.pipe((0,_t.h)(te=>te))}function kn(Oe,xt){return new $t((0,Te.NF)(xt)&&!1!==Oe.enabled?navigator.serviceWorker:void 0)}class zn{}function Jn(Oe,xt={}){return(0,G.MR2)([Wr,rn,{provide:it,useValue:Oe},{provide:zn,useValue:xt},{provide:$t,useFactory:kn,deps:[zn,G.Lbi]},{provide:G.ip1,useFactory:Ut,deps:[G.zs3,it,zn,G.Lbi],multi:!0}])}let Dn=(()=>{class Oe{static register(te,Dt={}){return{ngModule:Oe,providers:[Jn(te,Dt)]}}static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)};static#t=this.\u0275mod=G.oAB({type:Oe});static#n=this.\u0275inj=G.cJS({providers:[Wr,rn]})}return Oe})();var Tr=L(6358),Gr=L(7217),Ct=L(721),Pr=L(4162),cn=L(4643);let hr=(()=>{class Oe{static#e=this.\u0275fac=function(Dt){return new(Dt||Oe)};static#t=this.\u0275mod=G.oAB({type:Oe,bootstrap:[ye]});static#n=this.\u0275inj=G.cJS({providers:[{provide:Gr.Dh,useValue:Tr.N.firebase}],imports:[_.b2,ce,Dn.register("ngsw-worker.js",{enabled:!(0,G.X6Q)(),registrationStrategy:"registerWhenStable:30000"}),(0,Ct.hX)(()=>(0,Ct.ZF)(Tr.N.firebase)),(0,Pr.AR)(()=>(0,Pr.v0)()),(0,cn.Cm)(()=>(0,cn.ad)())]})}return Oe})();_.q6().bootstrapModule(hr).catch(Oe=>console.error(Oe))},5619:(Tt,Se,L)=>{L.d(Se,{X:()=>G});var _=L(8645);class G extends _.x{constructor(le){super(),this._value=le}get value(){return this.getValue()}_subscribe(le){const ae=super._subscribe(le);return!ae.closed&&le.next(this._value),ae}getValue(){const{hasError:le,thrownError:ae,_value:ce}=this;if(le)throw ae;return this._throwIfClosed(),ce}next(le){super.next(this._value=le)}}},5592:(Tt,Se,L)=>{L.d(Se,{y:()=>Te});var _=L(305),G=L(7394),Y=L(4850),le=L(8407),ae=L(2653),ce=L(4674),ye=L(1441);let Te=(()=>{class _e{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const at=new _e;return at.source=this,at.operator=qe,at}subscribe(qe,at,Ze){const dt=function re(_e){return _e&&_e instanceof _.Lv||function ee(_e){return _e&&(0,ce.m)(_e.next)&&(0,ce.m)(_e.error)&&(0,ce.m)(_e.complete)}(_e)&&(0,G.Nn)(_e)}(qe)?qe:new _.Hp(qe,at,Ze);return(0,ye.x)(()=>{const{operator:et,source:Ft}=this;dt.add(et?et.call(dt,Ft):Ft?this._subscribe(dt):this._trySubscribe(dt))}),dt}_trySubscribe(qe){try{return this._subscribe(qe)}catch(at){qe.error(at)}}forEach(qe,at){return new(at=Ae(at))((Ze,dt)=>{const et=new _.Hp({next:Ft=>{try{qe(Ft)}catch(wt){dt(wt),et.unsubscribe()}},error:dt,complete:Ze});this.subscribe(et)})}_subscribe(qe){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(qe)}[Y.L](){return this}pipe(...qe){return(0,le.U)(qe)(this)}toPromise(qe){return new(qe=Ae(qe))((at,Ze)=>{let dt;this.subscribe(et=>dt=et,et=>Ze(et),()=>at(dt))})}}return _e.create=Je=>new _e(Je),_e})();function Ae(_e){var Je;return null!==(Je=_e??ae.config.Promise)&&void 0!==Je?Je:Promise}},8645:(Tt,Se,L)=>{L.d(Se,{x:()=>ye});var _=L(5592),G=L(7394);const le=(0,L(2306).d)(Ae=>function(){Ae(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=L(9039),ce=L(1441);let ye=(()=>{class Ae extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(re){const _e=new Te(this,this);return _e.operator=re,_e}_throwIfClosed(){if(this.closed)throw new le}next(re){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(re)}})}error(re){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=re;const{observers:_e}=this;for(;_e.length;)_e.shift().error(re)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:re}=this;for(;re.length;)re.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var re;return(null===(re=this.observers)||void 0===re?void 0:re.length)>0}_trySubscribe(re){return this._throwIfClosed(),super._trySubscribe(re)}_subscribe(re){return this._throwIfClosed(),this._checkFinalizedStatuses(re),this._innerSubscribe(re)}_innerSubscribe(re){const{hasError:_e,isStopped:Je,observers:qe}=this;return _e||Je?G.Lc:(this.currentObservers=null,qe.push(re),new G.w0(()=>{this.currentObservers=null,(0,ae.P)(qe,re)}))}_checkFinalizedStatuses(re){const{hasError:_e,thrownError:Je,isStopped:qe}=this;_e?re.error(Je):qe&&re.complete()}asObservable(){const re=new _.y;return re.source=this,re}}return Ae.create=(ee,re)=>new Te(ee,re),Ae})();class Te extends ye{constructor(ee,re){super(),this.destination=ee,this.source=re}next(ee){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.next)||void 0===_e||_e.call(re,ee)}error(ee){var re,_e;null===(_e=null===(re=this.destination)||void 0===re?void 0:re.error)||void 0===_e||_e.call(re,ee)}complete(){var ee,re;null===(re=null===(ee=this.destination)||void 0===ee?void 0:ee.complete)||void 0===re||re.call(ee)}_subscribe(ee){var re,_e;return null!==(_e=null===(re=this.source)||void 0===re?void 0:re.subscribe(ee))&&void 0!==_e?_e:G.Lc}}},305:(Tt,Se,L)=>{L.d(Se,{Hp:()=>Ze,Lv:()=>_e});var _=L(4674),G=L(7394),Y=L(2653),le=L(3894),ae=L(2420);const ce=Ae("C",void 0,void 0);function Ae(me,Ne,we){return{kind:me,value:Ne,error:we}}var ee=L(7599),re=L(1441);class _e extends G.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,G.Nn)(Ne)&&Ne.add(this)):this.destination=wt}static create(Ne,we,Be){return new Ze(Ne,we,Be)}next(Ne){this.isStopped?Ft(function Te(me){return Ae("N",me,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?Ft(function ye(me){return Ae("E",void 0,me)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?Ft(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Je=Function.prototype.bind;function qe(me,Ne){return Je.call(me,Ne)}class at{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:we}=this;if(we.next)try{we.next(Ne)}catch(Be){dt(Be)}}error(Ne){const{partialObserver:we}=this;if(we.error)try{we.error(Ne)}catch(Be){dt(Be)}else dt(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(we){dt(we)}}}class Ze extends _e{constructor(Ne,we,Be){let Qe;if(super(),(0,_.m)(Ne)||!Ne)Qe={next:Ne??void 0,error:we??void 0,complete:Be??void 0};else{let lt;this&&Y.config.useDeprecatedNextContext?(lt=Object.create(Ne),lt.unsubscribe=()=>this.unsubscribe(),Qe={next:Ne.next&&qe(Ne.next,lt),error:Ne.error&&qe(Ne.error,lt),complete:Ne.complete&&qe(Ne.complete,lt)}):Qe=Ne}this.destination=new at(Qe)}}function dt(me){Y.config.useDeprecatedSynchronousErrorHandling?(0,re.O)(me):(0,le.h)(me)}function Ft(me,Ne){const{onStoppedNotification:we}=Y.config;we&&ee.z.setTimeout(()=>we(me,Ne))}const wt={closed:!0,next:ae.Z,error:function et(me){throw me},complete:ae.Z}},7394:(Tt,Se,L)=>{L.d(Se,{Lc:()=>ce,w0:()=>ae,Nn:()=>ye});var _=L(4674);const Y=(0,L(2306).d)(Ae=>function(re){Ae(this),this.message=re?`${re.length} errors occurred during unsubscription:\n${re.map((_e,Je)=>`${Je+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=re});var le=L(9039);class ae{constructor(ee){this.initialTeardown=ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ee;if(!this.closed){this.closed=!0;const{_parentage:re}=this;if(re)if(this._parentage=null,Array.isArray(re))for(const qe of re)qe.remove(this);else re.remove(this);const{initialTeardown:_e}=this;if((0,_.m)(_e))try{_e()}catch(qe){ee=qe instanceof Y?qe.errors:[qe]}const{_finalizers:Je}=this;if(Je){this._finalizers=null;for(const qe of Je)try{Te(qe)}catch(at){ee=ee??[],at instanceof Y?ee=[...ee,...at.errors]:ee.push(at)}}if(ee)throw new Y(ee)}}add(ee){var re;if(ee&&ee!==this)if(this.closed)Te(ee);else{if(ee instanceof ae){if(ee.closed||ee._hasParent(this))return;ee._addParent(this)}(this._finalizers=null!==(re=this._finalizers)&&void 0!==re?re:[]).push(ee)}}_hasParent(ee){const{_parentage:re}=this;return re===ee||Array.isArray(re)&&re.includes(ee)}_addParent(ee){const{_parentage:re}=this;this._parentage=Array.isArray(re)?(re.push(ee),re):re?[re,ee]:ee}_removeParent(ee){const{_parentage:re}=this;re===ee?this._parentage=null:Array.isArray(re)&&(0,le.P)(re,ee)}remove(ee){const{_finalizers:re}=this;re&&(0,le.P)(re,ee),ee instanceof ae&&ee._removeParent(this)}}ae.EMPTY=(()=>{const Ae=new ae;return Ae.closed=!0,Ae})();const ce=ae.EMPTY;function ye(Ae){return Ae instanceof ae||Ae&&"closed"in Ae&&(0,_.m)(Ae.remove)&&(0,_.m)(Ae.add)&&(0,_.m)(Ae.unsubscribe)}function Te(Ae){(0,_.m)(Ae)?Ae():Ae.unsubscribe()}},2653:(Tt,Se,L)=>{L.d(Se,{config:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},3168:(Tt,Se,L)=>{L.d(Se,{c:()=>ce});var _=L(5592),G=L(7394),Y=L(6196),le=L(8251),ae=L(9360);class ce extends _.y{constructor(Te,Ae){super(),this.source=Te,this.subjectFactory=Ae,this._subject=null,this._refCount=0,this._connection=null,(0,ae.A)(Te)&&(this.lift=Te.lift)}_subscribe(Te){return this.getSubject().subscribe(Te)}getSubject(){const Te=this._subject;return(!Te||Te.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:Te}=this;this._subject=this._connection=null,Te?.unsubscribe()}connect(){let Te=this._connection;if(!Te){Te=this._connection=new G.w0;const Ae=this.getSubject();Te.add(this.source.subscribe((0,le.x)(Ae,void 0,()=>{this._teardown(),Ae.complete()},ee=>{this._teardown(),Ae.error(ee)},()=>this._teardown()))),Te.closed&&(this._connection=null,Te=G.w0.EMPTY)}return Te}refCount(){return(0,Y.x)()(this)}}},5211:(Tt,Se,L)=>{L.d(Se,{z:()=>ae});var _=L(7537),Y=L(9940),le=L(2459);function ae(...ce){return function G(){return(0,_.J)(1)}()((0,le.D)(ce,(0,Y.yG)(ce)))}},4911:(Tt,Se,L)=>{L.d(Se,{P:()=>Y});var _=L(5592),G=L(4829);function Y(le){return new _.y(ae=>{(0,G.Xf)(le()).subscribe(ae)})}},6232:(Tt,Se,L)=>{L.d(Se,{E:()=>G});const G=new(L(5592).y)(ae=>ae.complete())},2459:(Tt,Se,L)=>{L.d(Se,{D:()=>Ne});var _=L(4829),G=L(3093),Y=L(5137),ce=L(5592),Te=L(4971),Ae=L(4674),ee=L(7103);function _e(we,Be){if(!we)throw new Error("Iterable cannot be null");return new ce.y(Qe=>{(0,ee.f)(Qe,Be,()=>{const lt=we[Symbol.asyncIterator]();(0,ee.f)(Qe,Be,()=>{lt.next().then(ie=>{ie.done?Qe.complete():Qe.next(ie.value)})},0,!0)})})}var Je=L(8382),qe=L(4026),at=L(4266),Ze=L(3664),dt=L(5726),et=L(9853),Ft=L(541);function Ne(we,Be){return Be?function me(we,Be){if(null!=we){if((0,Je.c)(we))return function le(we,Be){return(0,_.Xf)(we).pipe((0,Y.R)(Be),(0,G.Q)(Be))}(we,Be);if((0,at.z)(we))return function ye(we,Be){return new ce.y(Qe=>{let lt=0;return Be.schedule(function(){lt===we.length?Qe.complete():(Qe.next(we[lt++]),Qe.closed||this.schedule())})})}(we,Be);if((0,qe.t)(we))return function ae(we,Be){return(0,_.Xf)(we).pipe((0,Y.R)(Be),(0,G.Q)(Be))}(we,Be);if((0,dt.D)(we))return _e(we,Be);if((0,Ze.T)(we))return function re(we,Be){return new ce.y(Qe=>{let lt;return(0,ee.f)(Qe,Be,()=>{lt=we[Te.h](),(0,ee.f)(Qe,Be,()=>{let ie,ut;try{({value:ie,done:ut}=lt.next())}catch(Pt){return void Qe.error(Pt)}ut?Qe.complete():Qe.next(ie)},0,!0)}),()=>(0,Ae.m)(lt?.return)&&lt.return()})}(we,Be);if((0,Ft.L)(we))return function wt(we,Be){return _e((0,Ft.Q)(we),Be)}(we,Be)}throw(0,et.z)(we)}(we,Be):(0,_.Xf)(we)}},4829:(Tt,Se,L)=>{L.d(Se,{Xf:()=>Je});var _=L(7582),G=L(4266),Y=L(4026),le=L(5592),ae=L(8382),ce=L(5726),ye=L(9853),Te=L(3664),Ae=L(541),ee=L(4674),re=L(3894),_e=L(4850);function Je(me){if(me instanceof le.y)return me;if(null!=me){if((0,ae.c)(me))return function qe(me){return new le.y(Ne=>{const we=me[_e.L]();if((0,ee.m)(we.subscribe))return we.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(me);if((0,G.z)(me))return function at(me){return new le.y(Ne=>{for(let we=0;we<me.length&&!Ne.closed;we++)Ne.next(me[we]);Ne.complete()})}(me);if((0,Y.t)(me))return function Ze(me){return new le.y(Ne=>{me.then(we=>{Ne.closed||(Ne.next(we),Ne.complete())},we=>Ne.error(we)).then(null,re.h)})}(me);if((0,ce.D)(me))return et(me);if((0,Te.T)(me))return function dt(me){return new le.y(Ne=>{for(const we of me)if(Ne.next(we),Ne.closed)return;Ne.complete()})}(me);if((0,Ae.L)(me))return function Ft(me){return et((0,Ae.Q)(me))}(me)}throw(0,ye.z)(me)}function et(me){return new le.y(Ne=>{(function wt(me,Ne){var we,Be,Qe,lt;return(0,_.mG)(this,void 0,void 0,function*(){try{for(we=(0,_.KL)(me);!(Be=yield we.next()).done;)if(Ne.next(Be.value),Ne.closed)return}catch(ie){Qe={error:ie}}finally{try{Be&&!Be.done&&(lt=we.return)&&(yield lt.call(we))}finally{if(Qe)throw Qe.error}}Ne.complete()})})(me,Ne).catch(we=>Ne.error(we))})}},3019:(Tt,Se,L)=>{L.d(Se,{T:()=>ce});var _=L(7537),G=L(4829),Y=L(6232),le=L(9940),ae=L(2459);function ce(...ye){const Te=(0,le.yG)(ye),Ae=(0,le._6)(ye,1/0),ee=ye;return ee.length?1===ee.length?(0,G.Xf)(ee[0]):(0,_.J)(Ae)((0,ae.D)(ee,Te)):Y.E}},2096:(Tt,Se,L)=>{L.d(Se,{of:()=>Y});var _=L(9940),G=L(2459);function Y(...le){const ae=(0,_.yG)(le);return(0,G.D)(le,ae)}},8504:(Tt,Se,L)=>{L.d(Se,{_:()=>Y});var _=L(5592),G=L(4674);function Y(le,ae){const ce=(0,G.m)(le)?le:()=>le,ye=Te=>Te.error(ce());return new _.y(ae?Te=>ae.schedule(ye,0,Te):ye)}},8251:(Tt,Se,L)=>{L.d(Se,{x:()=>G});var _=L(305);function G(le,ae,ce,ye,Te){return new Y(le,ae,ce,ye,Te)}class Y extends _.Lv{constructor(ae,ce,ye,Te,Ae,ee){super(ae),this.onFinalize=Ae,this.shouldUnsubscribe=ee,this._next=ce?function(re){try{ce(re)}catch(_e){ae.error(_e)}}:super._next,this._error=Te?function(re){try{Te(re)}catch(_e){ae.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(re){ae.error(re)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},3572:(Tt,Se,L)=>{L.d(Se,{d:()=>Y});var _=L(9360),G=L(8251);function Y(le){return(0,_.e)((ae,ce)=>{let ye=!1;ae.subscribe((0,G.x)(ce,Te=>{ye=!0,ce.next(Te)},()=>{ye||ce.next(le),ce.complete()}))})}},3997:(Tt,Se,L)=>{L.d(Se,{x:()=>le});var _=L(2737),G=L(9360),Y=L(8251);function le(ce,ye=_.y){return ce=ce??ae,(0,G.e)((Te,Ae)=>{let ee,re=!0;Te.subscribe((0,Y.x)(Ae,_e=>{const Je=ye(_e);(re||!ce(ee,Je))&&(re=!1,ee=Je,Ae.next(_e))}))})}function ae(ce,ye){return ce===ye}},2181:(Tt,Se,L)=>{L.d(Se,{h:()=>Y});var _=L(9360),G=L(8251);function Y(le,ae){return(0,_.e)((ce,ye)=>{let Te=0;ce.subscribe((0,G.x)(ye,Ae=>le.call(ae,Ae,Te++)&&ye.next(Ae)))})}},1374:(Tt,Se,L)=>{L.d(Se,{P:()=>ye});var _=L(6973),G=L(2181),Y=L(8180),le=L(3572),ae=L(3026),ce=L(2737);function ye(Te,Ae){const ee=arguments.length>=2;return re=>re.pipe(Te?(0,G.h)((_e,Je)=>Te(_e,Je,re)):ce.y,(0,Y.q)(1),ee?(0,le.d)(Ae):(0,ae.T)(()=>new _.K))}},7398:(Tt,Se,L)=>{L.d(Se,{U:()=>Y});var _=L(9360),G=L(8251);function Y(le,ae){return(0,_.e)((ce,ye)=>{let Te=0;ce.subscribe((0,G.x)(ye,Ae=>{ye.next(le.call(ae,Ae,Te++))}))})}},975:(Tt,Se,L)=>{L.d(Se,{h:()=>G});var _=L(7398);function G(Y){return(0,_.U)(()=>Y)}},7537:(Tt,Se,L)=>{L.d(Se,{J:()=>Y});var _=L(1631),G=L(2737);function Y(le=1/0){return(0,_.z)(G.y,le)}},1631:(Tt,Se,L)=>{L.d(Se,{z:()=>Te});var _=L(7398),G=L(4829),Y=L(9360),le=L(7103),ae=L(8251),ye=L(4674);function Te(Ae,ee,re=1/0){return(0,ye.m)(ee)?Te((_e,Je)=>(0,_.U)((qe,at)=>ee(_e,qe,Je,at))((0,G.Xf)(Ae(_e,Je))),re):("number"==typeof ee&&(re=ee),(0,Y.e)((_e,Je)=>function ce(Ae,ee,re,_e,Je,qe,at,Ze){const dt=[];let et=0,Ft=0,wt=!1;const me=()=>{wt&&!dt.length&&!et&&ee.complete()},Ne=Be=>et<_e?we(Be):dt.push(Be),we=Be=>{qe&&ee.next(Be),et++;let Qe=!1;(0,G.Xf)(re(Be,Ft++)).subscribe((0,ae.x)(ee,lt=>{Je?.(lt),qe?Ne(lt):ee.next(lt)},()=>{Qe=!0},void 0,()=>{if(Qe)try{for(et--;dt.length&&et<_e;){const lt=dt.shift();at?(0,le.f)(ee,at,()=>we(lt)):we(lt)}me()}catch(lt){ee.error(lt)}}))};return Ae.subscribe((0,ae.x)(ee,Ne,()=>{wt=!0,me()})),()=>{Ze?.()}}(_e,Je,Ae,re)))}},3093:(Tt,Se,L)=>{L.d(Se,{Q:()=>le});var _=L(7103),G=L(9360),Y=L(8251);function le(ae,ce=0){return(0,G.e)((ye,Te)=>{ye.subscribe((0,Y.x)(Te,Ae=>(0,_.f)(Te,ae,()=>Te.next(Ae),ce),()=>(0,_.f)(Te,ae,()=>Te.complete(),ce),Ae=>(0,_.f)(Te,ae,()=>Te.error(Ae),ce)))})}},6196:(Tt,Se,L)=>{L.d(Se,{x:()=>Y});var _=L(9360),G=L(8251);function Y(){return(0,_.e)((le,ae)=>{let ce=null;le._refCount++;const ye=(0,G.x)(ae,void 0,void 0,void 0,()=>{if(!le||le._refCount<=0||0<--le._refCount)return void(ce=null);const Te=le._connection,Ae=ce;ce=null,Te&&(!Ae||Te===Ae)&&Te.unsubscribe(),ae.unsubscribe()});le.subscribe(ye),ye.closed||(ce=le.connect())})}},6699:(Tt,Se,L)=>{L.d(Se,{R:()=>le});var _=L(9360),G=L(8251);function le(ae,ce){return(0,_.e)(function Y(ae,ce,ye,Te,Ae){return(ee,re)=>{let _e=ye,Je=ce,qe=0;ee.subscribe((0,G.x)(re,at=>{const Ze=qe++;Je=_e?ae(Je,at,Ze):(_e=!0,at),Te&&re.next(Je)},Ae&&(()=>{_e&&re.next(Je),re.complete()})))}}(ae,ce,arguments.length>=2,!0))}},3020:(Tt,Se,L)=>{L.d(Se,{B:()=>ae});var _=L(4829),G=L(8645),Y=L(305),le=L(9360);function ae(ye={}){const{connector:Te=(()=>new G.x),resetOnError:Ae=!0,resetOnComplete:ee=!0,resetOnRefCountZero:re=!0}=ye;return _e=>{let Je,qe,at,Ze=0,dt=!1,et=!1;const Ft=()=>{qe?.unsubscribe(),qe=void 0},wt=()=>{Ft(),Je=at=void 0,dt=et=!1},me=()=>{const Ne=Je;wt(),Ne?.unsubscribe()};return(0,le.e)((Ne,we)=>{Ze++,!et&&!dt&&Ft();const Be=at=at??Te();we.add(()=>{Ze--,0===Ze&&!et&&!dt&&(qe=ce(me,re))}),Be.subscribe(we),!Je&&Ze>0&&(Je=new Y.Hp({next:Qe=>Be.next(Qe),error:Qe=>{et=!0,Ft(),qe=ce(wt,Ae,Qe),Be.error(Qe)},complete:()=>{dt=!0,Ft(),qe=ce(wt,ee),Be.complete()}}),(0,_.Xf)(Ne).subscribe(Je))})(_e)}}function ce(ye,Te,...Ae){if(!0===Te)return void ye();if(!1===Te)return;const ee=new Y.Hp({next:()=>{ee.unsubscribe(),ye()}});return(0,_.Xf)(Te(...Ae)).subscribe(ee)}},7921:(Tt,Se,L)=>{L.d(Se,{O:()=>le});var _=L(5211),G=L(9940),Y=L(9360);function le(...ae){const ce=(0,G.yG)(ae);return(0,Y.e)((ye,Te)=>{(ce?(0,_.z)(ae,ye,ce):(0,_.z)(ae,ye)).subscribe(Te)})}},5137:(Tt,Se,L)=>{L.d(Se,{R:()=>G});var _=L(9360);function G(Y,le=0){return(0,_.e)((ae,ce)=>{ce.add(Y.schedule(()=>ae.subscribe(ce),le))})}},4664:(Tt,Se,L)=>{L.d(Se,{w:()=>le});var _=L(4829),G=L(9360),Y=L(8251);function le(ae,ce){return(0,G.e)((ye,Te)=>{let Ae=null,ee=0,re=!1;const _e=()=>re&&!Ae&&Te.complete();ye.subscribe((0,Y.x)(Te,Je=>{Ae?.unsubscribe();let qe=0;const at=ee++;(0,_.Xf)(ae(Je,at)).subscribe(Ae=(0,Y.x)(Te,Ze=>Te.next(ce?ce(Je,Ze,at,qe++):Ze),()=>{Ae=null,_e()}))},()=>{re=!0,_e()}))})}},8180:(Tt,Se,L)=>{L.d(Se,{q:()=>le});var _=L(6232),G=L(9360),Y=L(8251);function le(ae){return ae<=0?()=>_.E:(0,G.e)((ce,ye)=>{let Te=0;ce.subscribe((0,Y.x)(ye,Ae=>{++Te<=ae&&(ye.next(Ae),ae<=Te&&ye.complete())}))})}},9397:(Tt,Se,L)=>{L.d(Se,{b:()=>ae});var _=L(4674),G=L(9360),Y=L(8251),le=L(2737);function ae(ce,ye,Te){const Ae=(0,_.m)(ce)||ye||Te?{next:ce,error:ye,complete:Te}:ce;return Ae?(0,G.e)((ee,re)=>{var _e;null===(_e=Ae.subscribe)||void 0===_e||_e.call(Ae);let Je=!0;ee.subscribe((0,Y.x)(re,qe=>{var at;null===(at=Ae.next)||void 0===at||at.call(Ae,qe),re.next(qe)},()=>{var qe;Je=!1,null===(qe=Ae.complete)||void 0===qe||qe.call(Ae),re.complete()},qe=>{var at;Je=!1,null===(at=Ae.error)||void 0===at||at.call(Ae,qe),re.error(qe)},()=>{var qe,at;Je&&(null===(qe=Ae.unsubscribe)||void 0===qe||qe.call(Ae)),null===(at=Ae.finalize)||void 0===at||at.call(Ae)}))}):le.y}},3026:(Tt,Se,L)=>{L.d(Se,{T:()=>le});var _=L(6973),G=L(9360),Y=L(8251);function le(ce=ae){return(0,G.e)((ye,Te)=>{let Ae=!1;ye.subscribe((0,Y.x)(Te,ee=>{Ae=!0,Te.next(ee)},()=>Ae?Te.complete():Te.error(ce())))})}function ae(){return new _.K}},1954:(Tt,Se,L)=>{L.d(Se,{o:()=>ae});var _=L(7394);class G extends _.w0{constructor(ye,Te){super()}schedule(ye,Te=0){return this}}const Y={setInterval(ce,ye,...Te){const{delegate:Ae}=Y;return Ae?.setInterval?Ae.setInterval(ce,ye,...Te):setInterval(ce,ye,...Te)},clearInterval(ce){const{delegate:ye}=Y;return(ye?.clearInterval||clearInterval)(ce)},delegate:void 0};var le=L(9039);class ae extends G{constructor(ye,Te){super(ye,Te),this.scheduler=ye,this.work=Te,this.pending=!1}schedule(ye,Te=0){var Ae;if(this.closed)return this;this.state=ye;const ee=this.id,re=this.scheduler;return null!=ee&&(this.id=this.recycleAsyncId(re,ee,Te)),this.pending=!0,this.delay=Te,this.id=null!==(Ae=this.id)&&void 0!==Ae?Ae:this.requestAsyncId(re,this.id,Te),this}requestAsyncId(ye,Te,Ae=0){return Y.setInterval(ye.flush.bind(ye,this),Ae)}recycleAsyncId(ye,Te,Ae=0){if(null!=Ae&&this.delay===Ae&&!1===this.pending)return Te;null!=Te&&Y.clearInterval(Te)}execute(ye,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ae=this._execute(ye,Te);if(Ae)return Ae;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ye,Te){let ee,Ae=!1;try{this.work(ye)}catch(re){Ae=!0,ee=re||new Error("Scheduled action threw falsy error")}if(Ae)return this.unsubscribe(),ee}unsubscribe(){if(!this.closed){const{id:ye,scheduler:Te}=this,{actions:Ae}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(Ae,this),null!=ye&&(this.id=this.recycleAsyncId(Te,ye,null)),this.delay=null,super.unsubscribe()}}}},2631:(Tt,Se,L)=>{L.d(Se,{v:()=>Y});var _=L(4552);class G{constructor(ae,ce=G.now){this.schedulerActionCtor=ae,this.now=ce}schedule(ae,ce=0,ye){return new this.schedulerActionCtor(this,ae).schedule(ye,ce)}}G.now=_.l.now;class Y extends G{constructor(ae,ce=G.now){super(ae,ce),this.actions=[],this._active=!1}flush(ae){const{actions:ce}=this;if(this._active)return void ce.push(ae);let ye;this._active=!0;do{if(ye=ae.execute(ae.state,ae.delay))break}while(ae=ce.shift());if(this._active=!1,ye){for(;ae=ce.shift();)ae.unsubscribe();throw ye}}}},6321:(Tt,Se,L)=>{L.d(Se,{P:()=>le,z:()=>Y});var _=L(1954);const Y=new(L(2631).v)(_.o),le=Y},4552:(Tt,Se,L)=>{L.d(Se,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},7599:(Tt,Se,L)=>{L.d(Se,{z:()=>_});const _={setTimeout(G,Y,...le){const{delegate:ae}=_;return ae?.setTimeout?ae.setTimeout(G,Y,...le):setTimeout(G,Y,...le)},clearTimeout(G){const{delegate:Y}=_;return(Y?.clearTimeout||clearTimeout)(G)},delegate:void 0}},4971:(Tt,Se,L)=>{L.d(Se,{h:()=>G});const G=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(Tt,Se,L)=>{L.d(Se,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(Tt,Se,L)=>{L.d(Se,{K:()=>G});const G=(0,L(2306).d)(Y=>function(){Y(this),this.name="EmptyError",this.message="no elements in sequence"})},9940:(Tt,Se,L)=>{L.d(Se,{_6:()=>ce,jO:()=>le,yG:()=>ae});var _=L(4674),G=L(671);function Y(ye){return ye[ye.length-1]}function le(ye){return(0,_.m)(Y(ye))?ye.pop():void 0}function ae(ye){return(0,G.K)(Y(ye))?ye.pop():void 0}function ce(ye,Te){return"number"==typeof Y(ye)?ye.pop():Te}},7453:(Tt,Se,L)=>{L.d(Se,{D:()=>ae});const{isArray:_}=Array,{getPrototypeOf:G,prototype:Y,keys:le}=Object;function ae(ye){if(1===ye.length){const Te=ye[0];if(_(Te))return{args:Te,keys:null};if(function ce(ye){return ye&&"object"==typeof ye&&G(ye)===Y}(Te)){const Ae=le(Te);return{args:Ae.map(ee=>Te[ee]),keys:Ae}}}return{args:ye,keys:null}}},9039:(Tt,Se,L)=>{function _(G,Y){if(G){const le=G.indexOf(Y);0<=le&&G.splice(le,1)}}L.d(Se,{P:()=>_})},2306:(Tt,Se,L)=>{function _(G){const le=G(ae=>{Error.call(ae),ae.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}L.d(Se,{d:()=>_})},2714:(Tt,Se,L)=>{function _(G,Y){return G.reduce((le,ae,ce)=>(le[ae]=Y[ce],le),{})}L.d(Se,{n:()=>_})},1441:(Tt,Se,L)=>{L.d(Se,{O:()=>le,x:()=>Y});var _=L(2653);let G=null;function Y(ae){if(_.config.useDeprecatedSynchronousErrorHandling){const ce=!G;if(ce&&(G={errorThrown:!1,error:null}),ae(),ce){const{errorThrown:ye,error:Te}=G;if(G=null,ye)throw Te}}else ae()}function le(ae){_.config.useDeprecatedSynchronousErrorHandling&&G&&(G.errorThrown=!0,G.error=ae)}},7103:(Tt,Se,L)=>{function _(G,Y,le,ae=0,ce=!1){const ye=Y.schedule(function(){le(),ce?G.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(G.add(ye),!ce)return ye}L.d(Se,{f:()=>_})},2737:(Tt,Se,L)=>{function _(G){return G}L.d(Se,{y:()=>_})},4266:(Tt,Se,L)=>{L.d(Se,{z:()=>_});const _=G=>G&&"number"==typeof G.length&&"function"!=typeof G},5726:(Tt,Se,L)=>{L.d(Se,{D:()=>G});var _=L(4674);function G(Y){return Symbol.asyncIterator&&(0,_.m)(Y?.[Symbol.asyncIterator])}},4674:(Tt,Se,L)=>{function _(G){return"function"==typeof G}L.d(Se,{m:()=>_})},8382:(Tt,Se,L)=>{L.d(Se,{c:()=>Y});var _=L(4850),G=L(4674);function Y(le){return(0,G.m)(le[_.L])}},3664:(Tt,Se,L)=>{L.d(Se,{T:()=>Y});var _=L(4971),G=L(4674);function Y(le){return(0,G.m)(le?.[_.h])}},4026:(Tt,Se,L)=>{L.d(Se,{t:()=>G});var _=L(4674);function G(Y){return(0,_.m)(Y?.then)}},541:(Tt,Se,L)=>{L.d(Se,{L:()=>le,Q:()=>Y});var _=L(7582),G=L(4674);function Y(ae){return(0,_.FC)(this,arguments,function*(){const ye=ae.getReader();try{for(;;){const{value:Te,done:Ae}=yield(0,_.qq)(ye.read());if(Ae)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Te)}}finally{ye.releaseLock()}})}function le(ae){return(0,G.m)(ae?.getReader)}},671:(Tt,Se,L)=>{L.d(Se,{K:()=>G});var _=L(4674);function G(Y){return Y&&(0,_.m)(Y.schedule)}},9360:(Tt,Se,L)=>{L.d(Se,{A:()=>G,e:()=>Y});var _=L(4674);function G(le){return(0,_.m)(le?.lift)}function Y(le){return ae=>{if(G(ae))return ae.lift(function(ce){try{return le(ce,this)}catch(ye){this.error(ye)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(Tt,Se,L)=>{L.d(Se,{Z:()=>le});var _=L(7398);const{isArray:G}=Array;function le(ae){return(0,_.U)(ce=>function Y(ae,ce){return G(ce)?ae(...ce):ae(ce)}(ae,ce))}},2420:(Tt,Se,L)=>{function _(){}L.d(Se,{Z:()=>_})},8407:(Tt,Se,L)=>{L.d(Se,{U:()=>Y,z:()=>G});var _=L(2737);function G(...le){return Y(le)}function Y(le){return 0===le.length?_.y:1===le.length?le[0]:function(ce){return le.reduce((ye,Te)=>Te(ye),ce)}}},3894:(Tt,Se,L)=>{L.d(Se,{h:()=>Y});var _=L(2653),G=L(7599);function Y(le){G.z.setTimeout(()=>{const{onUnhandledError:ae}=_.config;if(!ae)throw le;ae(le)})}},9853:(Tt,Se,L)=>{function _(G){return new TypeError(`You provided ${null!==G&&"object"==typeof G?"an invalid object":`'${G}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>_})},6814:(Tt,Se,L)=>{L.d(Se,{Do:()=>Ze,EM:()=>ir,HT:()=>le,JF:()=>Ci,K0:()=>ce,Mx:()=>Ht,NF:()=>Zi,O5:()=>nu,PM:()=>Ns,S$:()=>Je,V_:()=>Te,Ye:()=>dt,b0:()=>at,bD:()=>Gn,ez:()=>Gi,q:()=>Y,sg:()=>$n,w_:()=>ae});var _=L(5879);let G=null;function Y(){return G}function le(D){G||(G=D)}class ae{}const ce=new _.OlP("DocumentToken");let ye=(()=>{class D{historyGo(P){throw new Error("Not implemented")}static#e=this.\u0275fac=function(F){return new(F||D)};static#t=this.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(Ae)},providedIn:"platform"})}return D})();const Te=new _.OlP("Location Initialized");let Ae=(()=>{class D extends ye{constructor(){super(),this._doc=(0,_.f3M)(ce),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState(P){const F=Y().getGlobalEventTarget(this._doc,"window");return F.addEventListener("popstate",P,!1),()=>F.removeEventListener("popstate",P)}onHashChange(P){const F=Y().getGlobalEventTarget(this._doc,"window");return F.addEventListener("hashchange",P,!1),()=>F.removeEventListener("hashchange",P)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(P){this._location.pathname=P}pushState(P,F,se){this._history.pushState(P,F,se)}replaceState(P,F,se){this._history.replaceState(P,F,se)}forward(){this._history.forward()}back(){this._history.back()}historyGo(P=0){this._history.go(P)}getState(){return this._history.state}static#e=this.\u0275fac=function(F){return new(F||D)};static#t=this.\u0275prov=_.Yz7({token:D,factory:function(){return new D},providedIn:"platform"})}return D})();function ee(D,U){if(0==D.length)return U;if(0==U.length)return D;let P=0;return D.endsWith("/")&&P++,U.startsWith("/")&&P++,2==P?D+U.substring(1):1==P?D+U:D+"/"+U}function re(D){const U=D.match(/#|\?|$/),P=U&&U.index||D.length;return D.slice(0,P-("/"===D[P-1]?1:0))+D.slice(P)}function _e(D){return D&&"?"!==D[0]?"?"+D:D}let Je=(()=>{class D{historyGo(P){throw new Error("Not implemented")}static#e=this.\u0275fac=function(F){return new(F||D)};static#t=this.\u0275prov=_.Yz7({token:D,factory:function(){return(0,_.f3M)(at)},providedIn:"root"})}return D})();const qe=new _.OlP("appBaseHref");let at=(()=>{class D extends Je{constructor(P,F){super(),this._platformLocation=P,this._removeListenerFns=[],this._baseHref=F??this._platformLocation.getBaseHrefFromDOM()??(0,_.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}prepareExternalUrl(P){return ee(this._baseHref,P)}path(P=!1){const F=this._platformLocation.pathname+_e(this._platformLocation.search),se=this._platformLocation.hash;return se&&P?`${F}${se}`:F}pushState(P,F,se,Le){const Xe=this.prepareExternalUrl(se+_e(Le));this._platformLocation.pushState(P,F,Xe)}replaceState(P,F,se,Le){const Xe=this.prepareExternalUrl(se+_e(Le));this._platformLocation.replaceState(P,F,Xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static#e=this.\u0275fac=function(F){return new(F||D)(_.LFG(ye),_.LFG(qe,8))};static#t=this.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}return D})(),Ze=(()=>{class D extends Je{constructor(P,F){super(),this._platformLocation=P,this._baseHref="",this._removeListenerFns=[],null!=F&&(this._baseHref=F)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(P){this._removeListenerFns.push(this._platformLocation.onPopState(P),this._platformLocation.onHashChange(P))}getBaseHref(){return this._baseHref}path(P=!1){let F=this._platformLocation.hash;return null==F&&(F="#"),F.length>0?F.substring(1):F}prepareExternalUrl(P){const F=ee(this._baseHref,P);return F.length>0?"#"+F:F}pushState(P,F,se,Le){let Xe=this.prepareExternalUrl(se+_e(Le));0==Xe.length&&(Xe=this._platformLocation.pathname),this._platformLocation.pushState(P,F,Xe)}replaceState(P,F,se,Le){let Xe=this.prepareExternalUrl(se+_e(Le));0==Xe.length&&(Xe=this._platformLocation.pathname),this._platformLocation.replaceState(P,F,Xe)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(P=0){this._platformLocation.historyGo?.(P)}static#e=this.\u0275fac=function(F){return new(F||D)(_.LFG(ye),_.LFG(qe,8))};static#t=this.\u0275prov=_.Yz7({token:D,factory:D.\u0275fac})}return D})(),dt=(()=>{class D{constructor(P){this._subject=new _.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=P;const F=this._locationStrategy.getBaseHref();this._basePath=function me(D){if(new RegExp("^(https?:)?//").test(D)){const[,P]=D.split(/\/\/[^\/]+/);return P}return D}(re(wt(F))),this._locationStrategy.onPopState(se=>{this._subject.emit({url:this.path(!0),pop:!0,state:se.state,type:se.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(P=!1){return this.normalize(this._locationStrategy.path(P))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(P,F=""){return this.path()==this.normalize(P+_e(F))}normalize(P){return D.stripTrailingSlash(function Ft(D,U){if(!D||!U.startsWith(D))return U;const P=U.substring(D.length);return""===P||["/",";","?","#"].includes(P[0])?P:U}(this._basePath,wt(P)))}prepareExternalUrl(P){return P&&"/"!==P[0]&&(P="/"+P),this._locationStrategy.prepareExternalUrl(P)}go(P,F="",se=null){this._locationStrategy.pushState(se,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+_e(F)),se)}replaceState(P,F="",se=null){this._locationStrategy.replaceState(se,"",P,F),this._notifyUrlChangeListeners(this.prepareExternalUrl(P+_e(F)),se)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(P=0){this._locationStrategy.historyGo?.(P)}onUrlChange(P){return this._urlChangeListeners.push(P),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(F=>{this._notifyUrlChangeListeners(F.url,F.state)})),()=>{const F=this._urlChangeListeners.indexOf(P);this._urlChangeListeners.splice(F,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(P="",F){this._urlChangeListeners.forEach(se=>se(P,F))}subscribe(P,F,se){return this._subject.subscribe({next:P,error:F,complete:se})}static#e=this.normalizeQueryParams=_e;static#t=this.joinWithSlash=ee;static#n=this.stripTrailingSlash=re;static#r=this.\u0275fac=function(F){return new(F||D)(_.LFG(Je))};static#i=this.\u0275prov=_.Yz7({token:D,factory:function(){return function et(){return new dt((0,_.LFG)(Je))}()},providedIn:"root"})}return D})();function wt(D){return D.replace(/\/index.html$/,"")}function Ht(D,U){U=encodeURIComponent(U);for(const P of D.split(";")){const F=P.indexOf("="),[se,Le]=-1==F?[P,""]:[P.slice(0,F),P.slice(F+1)];if(se.trim()===U)return decodeURIComponent(Le)}return null}class ns{constructor(U,P,F,se){this.$implicit=U,this.ngForOf=P,this.index=F,this.count=se}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class D{set ngForOf(P){this._ngForOf=P,this._ngForOfDirty=!0}set ngForTrackBy(P){this._trackByFn=P}get ngForTrackBy(){return this._trackByFn}constructor(P,F,se){this._viewContainer=P,this._template=F,this._differs=se,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(P){P&&(this._template=P)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const P=this._ngForOf;!this._differ&&P&&(this._differ=this._differs.find(P).create(this.ngForTrackBy))}if(this._differ){const P=this._differ.diff(this._ngForOf);P&&this._applyChanges(P)}}_applyChanges(P){const F=this._viewContainer;P.forEachOperation((se,Le,Xe)=>{if(null==se.previousIndex)F.createEmbeddedView(this._template,new ns(se.item,this._ngForOf,-1,-1),null===Xe?void 0:Xe);else if(null==Xe)F.remove(null===Le?void 0:Le);else if(null!==Le){const Lt=F.get(Le);F.move(Lt,Xe),Ms(Lt,se)}});for(let se=0,Le=F.length;se<Le;se++){const Lt=F.get(se).context;Lt.index=se,Lt.count=Le,Lt.ngForOf=this._ngForOf}P.forEachIdentityChange(se=>{Ms(F.get(se.currentIndex),se)})}static ngTemplateContextGuard(P,F){return!0}static#e=this.\u0275fac=function(F){return new(F||D)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))};static#t=this.\u0275dir=_.lG2({type:D,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return D})();function Ms(D,U){D.context.$implicit=U.item}let nu=(()=>{class D{constructor(P,F){this._viewContainer=P,this._context=new Is,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=F}set ngIf(P){this._context.$implicit=this._context.ngIf=P,this._updateView()}set ngIfThen(P){Lr("ngIfThen",P),this._thenTemplateRef=P,this._thenViewRef=null,this._updateView()}set ngIfElse(P){Lr("ngIfElse",P),this._elseTemplateRef=P,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(P,F){return!0}static#e=this.\u0275fac=function(F){return new(F||D)(_.Y36(_.s_b),_.Y36(_.Rgc))};static#t=this.\u0275dir=_.lG2({type:D,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return D})();class Is{constructor(){this.$implicit=null,this.ngIf=null}}function Lr(D,U){if(U&&!U.createEmbeddedView)throw new Error(`${D} must be a TemplateRef, but received '${(0,_.AaK)(U)}'.`)}let Gi=(()=>{class D{static#e=this.\u0275fac=function(F){return new(F||D)};static#t=this.\u0275mod=_.oAB({type:D});static#n=this.\u0275inj=_.cJS({})}return D})();const Gn="browser",qi="server";function Zi(D){return D===Gn}function Ns(D){return D===qi}let ir=(()=>{class D{static#e=this.\u0275prov=(0,_.Yz7)({token:D,providedIn:"root",factory:()=>new Ai((0,_.LFG)(ce),window)})}return D})();class Ai{constructor(U,P){this.document=U,this.window=P,this.offset=()=>[0,0]}setOffset(U){this.offset=Array.isArray(U)?()=>U:U}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(U){this.supportsScrolling()&&this.window.scrollTo(U[0],U[1])}scrollToAnchor(U){if(!this.supportsScrolling())return;const P=function ws(D,U){const P=D.getElementById(U)||D.getElementsByName(U)[0];if(P)return P;if("function"==typeof D.createTreeWalker&&D.body&&"function"==typeof D.body.attachShadow){const F=D.createTreeWalker(D.body,NodeFilter.SHOW_ELEMENT);let se=F.currentNode;for(;se;){const Le=se.shadowRoot;if(Le){const Xe=Le.getElementById(U)||Le.querySelector(`[name="${U}"]`);if(Xe)return Xe}se=F.nextNode()}}return null}(this.document,U);P&&(this.scrollToElement(P),P.focus())}setHistoryScrollRestoration(U){this.supportsScrolling()&&(this.window.history.scrollRestoration=U)}scrollToElement(U){const P=U.getBoundingClientRect(),F=P.left+this.window.pageXOffset,se=P.top+this.window.pageYOffset,Le=this.offset();this.window.scrollTo(F-Le[0],se-Le[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Ci{}},5879:(Tt,Se,L)=>{L.d(Se,{$8M:()=>na,$WT:()=>ss,$Z:()=>c,AFp:()=>Rm,AaK:()=>_e,Akn:()=>Xa,BQk:()=>vh,CRH:()=>_0,EJc:()=>PA,F4k:()=>He,FYo:()=>Zd,FiY:()=>oa,GfV:()=>km,Gpc:()=>at,HDt:()=>U0,JOm:()=>Vh,Jf7:()=>Vy,LFG:()=>It,Lbi:()=>Tc,Lck:()=>fw,MMx:()=>$I,MR2:()=>gf,NdJ:()=>Rt,Ojb:()=>xu,OlP:()=>Ct,Oqu:()=>Dv,P3R:()=>$p,PXZ:()=>sC,Q6J:()=>nd,QGY:()=>Re,Qsj:()=>wy,R0b:()=>Di,RDi:()=>Np,Rgc:()=>jg,SBq:()=>Kd,Sil:()=>NA,Suo:()=>m0,TTD:()=>gn,TgZ:()=>fa,Tol:()=>FE,VKq:()=>QI,VuI:()=>jC,WLB:()=>YI,X6Q:()=>fC,XFs:()=>Ut,Xpm:()=>ru,Xq5:()=>Wl,Xts:()=>Cl,Y36:()=>s,YKP:()=>BI,YNc:()=>bg,Yjl:()=>Ds,Yz7:()=>qt,Z0I:()=>Cn,ZZ4:()=>rE,_Bn:()=>UI,_UZ:()=>qf,_c5:()=>RC,_uU:()=>HE,aQg:()=>iE,c2e:()=>V0,cJS:()=>Et,cg1:()=>wv,dDg:()=>tC,dqk:()=>Dn,eFA:()=>Z0,eJc:()=>jv,ekj:()=>Iv,eoX:()=>W0,evT:()=>Uy,f3M:()=>kt,g9A:()=>Zp,h0i:()=>Th,hGG:()=>PC,hij:()=>A_,iGM:()=>g0,ifc:()=>wi,ip1:()=>F0,jDz:()=>zI,kL8:()=>dI,lG2:()=>Hi,lqb:()=>ca,lri:()=>z0,n5z:()=>cc,oAB:()=>gr,oxw:()=>Lc,q4F:()=>Lm,qFp:()=>zC,qLn:()=>Uu,qOj:()=>zl,qZA:()=>_h,rWj:()=>H0,rg0:()=>Le,sBO:()=>pC,s_b:()=>x_,soG:()=>O_,tb:()=>Yv,tp0:()=>Fo,uIk:()=>jf,vHH:()=>me,vpe:()=>la,wAp:()=>Jf,xp6:()=>e,ynx:()=>yh,z2F:()=>np,zSh:()=>$d,zs3:()=>Oi});var _=L(8645),G=L(7394),Y=L(5592),le=L(3019),ae=L(5619),ce=L(2096),ye=L(3020),Te=L(4664),Ae=L(3997);function ee(t){for(let n in t)if(t[n]===ee)return n;throw Error("Could not find renamed property on target object.")}function re(t,n){for(const i in n)n.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n[i])}function _e(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(_e).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const i=n.indexOf("\n");return-1===i?n:n.substring(0,i)}function Je(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const qe=ee({__forward_ref__:ee});function at(t){return t.__forward_ref__=at,t.toString=function(){return _e(this())},t}function Ze(t){return dt(t)?t():t}function dt(t){return"function"==typeof t&&t.hasOwnProperty(qe)&&t.__forward_ref__===at}function et(t){return t&&!!t.\u0275providers}const wt="https://g.co/ng/security#xss";class me extends Error{constructor(n,i){super(function Ne(t,n){return`NG0${Math.abs(t)}${n?": "+n:""}`}(n,i)),this.code=n}}function we(t){return"string"==typeof t?t:null==t?"":String(t)}function ut(t,n){throw new me(-201,!1)}function Mt(t,n){null==t&&function yt(t,n,i,o){throw new Error(`ASSERTION ERROR: ${t}`+(null==o?"":` [Expected=> ${i} ${o} ${n} <=Actual]`))}(n,t,null,"!=")}function qt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Et(t){return{providers:t.providers||[],imports:t.imports||[]}}function yn(t){return mt(t,$t)||mt(t,rn)}function Cn(t){return null!==yn(t)}function mt(t,n){return t.hasOwnProperty(n)?t[n]:null}function Hr(t){return t&&(t.hasOwnProperty(Wr)||t.hasOwnProperty(it))?t[Wr]:null}const $t=ee({\u0275prov:ee}),Wr=ee({\u0275inj:ee}),rn=ee({ngInjectableDef:ee}),it=ee({ngInjectorDef:ee});var Ut=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ut||{});let Kt;function kn(t){const n=Kt;return Kt=t,n}function zn(t,n,i){const o=yn(t);return o&&"root"==o.providedIn?void 0===o.value?o.value=o.factory():o.value:i&Ut.Optional?null:void 0!==n?n:void ut(_e(t))}const Dn=globalThis;class Ct{constructor(n,i){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof i?this.__NG_ELEMENT_ID__=i:void 0!==i&&(this.\u0275prov=qt({token:this,providedIn:i.providedIn||"root",factory:i.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Kn={},qr="__NG_DI_FLAG__",ur="ngTempTokenPath",W=/\n/gm,V="__source";let q;function $e(t){const n=q;return q=t,n}function st(t,n=Ut.Default){if(void 0===q)throw new me(-203,!1);return null===q?zn(t,void 0,n):q.get(t,n&Ut.Optional?null:void 0,n)}function It(t,n=Ut.Default){return(function Bt(){return Kt}()||st)(Ze(t),n)}function kt(t,n=Ut.Default){return It(t,mn(n))}function mn(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function en(t){const n=[];for(let i=0;i<t.length;i++){const o=Ze(t[i]);if(Array.isArray(o)){if(0===o.length)throw new me(900,!1);let u,l=Ut.Default;for(let m=0;m<o.length;m++){const E=o[m],A=fr(E);"number"==typeof A?-1===A?u=E.token:l|=A:u=E}n.push(It(u,l))}else n.push(It(o))}return n}function cr(t,n){return t[qr]=n,t.prototype[qr]=n,t}function fr(t){return t[qr]}function Mr(t){return{toString:t}.toString()}var Es=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Es||{}),wi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(wi||{});const Dr={},wn=[],Ue=ee({\u0275cmp:ee}),De=ee({\u0275dir:ee}),Ke=ee({\u0275pipe:ee}),At=ee({\u0275mod:ee}),Ht=ee({\u0275fac:ee}),Zt=ee({__NG_ELEMENT_ID__:ee}),fn=ee({__NG_ENV_ID__:ee});function Xn(t,n,i){let o=t.length;for(;;){const u=t.indexOf(n,i);if(-1===u)return u;if(0===u||t.charCodeAt(u-1)<=32){const l=n.length;if(u+l===o||t.charCodeAt(u+l)<=32)return u}i=u+1}}function Wn(t,n,i){let o=0;for(;o<i.length;){const u=i[o];if("number"==typeof u){if(0!==u)break;o++;const l=i[o++],m=i[o++],E=i[o++];t.setAttribute(n,m,E,l)}else{const l=u,m=i[++o];ns(l)?t.setProperty(n,l,m):t.setAttribute(n,l,m),o++}}return o}function ei(t){return 3===t||4===t||6===t}function ns(t){return 64===t.charCodeAt(0)}function $n(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let i=-1;for(let o=0;o<n.length;o++){const u=n[o];"number"==typeof u?i=u:0===i||Ms(t,i,u,null,-1===i||2===i?n[++o]:null)}}return t}function Ms(t,n,i,o,u){let l=0,m=t.length;if(-1===n)m=-1;else for(;l<t.length;){const E=t[l++];if("number"==typeof E){if(E===n){m=-1;break}if(E>n){m=l-1;break}}}for(;l<t.length;){const E=t[l];if("number"==typeof E)break;if(E===i){if(null===o)return void(null!==u&&(t[l+1]=u));if(o===t[l+1])return void(t[l+2]=u)}l++,null!==o&&l++,null!==u&&l++}-1!==m&&(t.splice(m,0,n),l=m+1),t.splice(l++,0,i),null!==o&&t.splice(l++,0,o),null!==u&&t.splice(l++,0,u)}const rs="ng-template";function nu(t,n,i){let o=0,u=!0;for(;o<t.length;){let l=t[o++];if("string"==typeof l&&u){const m=t[o++];if(i&&"class"===l&&-1!==Xn(m.toLowerCase(),n,0))return!0}else{if(1===l){for(;o<t.length&&"string"==typeof(l=t[o++]);)if(l.toLowerCase()===n)return!0;return!1}"number"==typeof l&&(u=!1)}}return!1}function Is(t){return 4===t.type&&t.value!==rs}function Lr(t,n,i){return n===(4!==t.type||i?t.value:rs)}function vo(t,n,i){let o=4;const u=t.attrs||[],l=function fi(t){for(let n=0;n<t.length;n++)if(ei(t[n]))return n;return t.length}(u);let m=!1;for(let E=0;E<n.length;E++){const A=n[E];if("number"!=typeof A){if(!m)if(4&o){if(o=2|1&o,""!==A&&!Lr(t,A,i)||""===A&&1===n.length){if(xr(o))return!1;m=!0}}else{const x=8&o?A:n[++E];if(8&o&&null!==t.attrs){if(!nu(t.attrs,x,i)){if(xr(o))return!1;m=!0}continue}const X=xs(8&o?"class":A,u,Is(t),i);if(-1===X){if(xr(o))return!1;m=!0;continue}if(""!==x){let ge;ge=X>l?"":u[X+1].toLowerCase();const Ce=8&o?ge:null;if(Ce&&-1!==Xn(Ce,x,0)||2&o&&x!==ge){if(xr(o))return!1;m=!0}}}}else{if(!m&&!xr(o)&&!xr(A))return!1;if(m&&xr(A))continue;m=!1,o=A|1&o}}return xr(o)||m}function xr(t){return 0==(1&t)}function xs(t,n,i,o){if(null===n)return-1;let u=0;if(o||!i){let l=!1;for(;u<n.length;){const m=n[u];if(m===t)return u;if(3===m||6===m)l=!0;else{if(1===m||2===m){let E=n[++u];for(;"string"==typeof E;)E=n[++u];continue}if(4===m)break;if(0===m){u+=4;continue}}u+=l?1:2}return-1}return function Nr(t,n){let i=t.indexOf(4);if(i>-1)for(i++;i<t.length;){const o=t[i];if("number"==typeof o)return-1;if(o===n)return i;i++}return-1}(n,t)}function mi(t,n,i=!1){for(let o=0;o<n.length;o++)if(vo(t,n[o],i))return!0;return!1}function is(t,n){return t?":not("+n.trim()+")":n}function Ts(t){let n=t[0],i=1,o=2,u="",l=!1;for(;i<t.length;){let m=t[i];if("string"==typeof m)if(2&o){const E=t[++i];u+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&o?u+="."+m:4&o&&(u+=" "+m);else""!==u&&!xr(m)&&(n+=is(l,u),u=""),o=m,l=l||!xr(o);i++}return""!==u&&(n+=is(l,u)),n}function ru(t){return Mr(()=>{const n=_i(t),i={...n,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Es.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wi.Emulated,styles:t.styles||wn,_:null,schemas:t.schemas||null,tView:null,id:""};Wi(i);const o=t.dependencies;return i.directiveDefs=pi(o,!1),i.pipeDefs=pi(o,!0),i.id=function ti(t){let n=0;const i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const u of i)n=Math.imul(31,n)+u.charCodeAt(0)<<0;return n+=2147483648,"c"+n}(i),i})}function iu(t){return In(t)||nr(t)}function $i(t){return null!==t}function gr(t){return Mr(()=>({type:t.type,bootstrap:t.bootstrap||wn,declarations:t.declarations||wn,imports:t.imports||wn,exports:t.exports||wn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Eo(t,n){if(null==t)return Dr;const i={};for(const o in t)if(t.hasOwnProperty(o)){let u=t[o],l=u;Array.isArray(u)&&(l=u[1],u=u[0]),i[u]=o,n&&(n[u]=l)}return i}function Hi(t){return Mr(()=>{const n=_i(t);return Wi(n),n})}function Ds(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function In(t){return t[Ue]||null}function nr(t){return t[De]||null}function wr(t){return t[Ke]||null}function ss(t){const n=In(t)||nr(t)||wr(t);return null!==n&&n.standalone}function rr(t,n){const i=t[At]||null;if(!i&&!0===n)throw new Error(`Type ${_e(t)} does not have '\u0275mod' property.`);return i}function _i(t){const n={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputTransforms:null,inputConfig:t.inputs||Dr,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||wn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Eo(t.inputs,n),outputs:Eo(t.outputs)}}function Wi(t){t.features?.forEach(n=>n(t))}function pi(t,n){if(!t)return null;const i=n?wr:iu;return()=>("function"==typeof t?t():t).map(o=>i(o)).filter($i)}const er=0,bt=1,Qt=2,Ln=3,Fr=4,Io=5,Or=6,Gi=7,Gn=8,qi=9,Ki=10,tn=11,Zi=12,Ns=13,Un=14,mr=15,Yn=16,ir=17,Ai=18,ws=19,Os=20,Ci=21,Qi=22,un=23,Fn=24,ln=25,Yi=1,To=2,bi=7,Ys=9,_r=11;function Vr(t){return Array.isArray(t)&&"object"==typeof t[Yi]}function sr(t){return Array.isArray(t)&&!0===t[Yi]}function pa(t){return 0!=(4&t.flags)}function Si(t){return t.componentOffset>-1}function su(t){return 1==(1&t.flags)}function Qr(t){return!!t.template}function ga(t){return 0!=(512&t[Qt])}function Ji(t,n){return t.hasOwnProperty(Ht)?t[Ht]:null}let jr=null,$r=!1;function Jr(t){const n=jr;return jr=t,n}const wo={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function ni(t){if(!bs(t)||t.dirty){if(!t.producerMustRecompute(t)&&!Ku(t))return void(t.dirty=!1);t.producerRecomputeValue(t),t.dirty=!1}}function ds(t){t.dirty=!0,function cs(t){if(void 0===t.liveConsumerNode)return;const n=$r;$r=!0;try{for(const i of t.liveConsumerNode)i.dirty||ds(i)}finally{$r=n}}(t),t.consumerMarkedDirty?.(t)}function Co(t){return t&&(t.nextProducerIndex=0),Jr(t)}function an(t,n){if(Jr(n),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(bs(t))for(let i=t.nextProducerIndex;i<t.producerNode.length;i++)no(t.producerNode[i],t.producerIndexOfThis[i]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Ku(t){Ri(t);for(let n=0;n<t.producerNode.length;n++){const i=t.producerNode[n],o=t.producerLastReadVersion[n];if(o!==i.version||(ni(i),o!==i.version))return!0}return!1}function bo(t){if(Ri(t),bs(t))for(let n=0;n<t.producerNode.length;n++)no(t.producerNode[n],t.producerIndexOfThis[n]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function no(t,n){if(function ya(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}(t),Ri(t),1===t.liveConsumerNode.length)for(let o=0;o<t.producerNode.length;o++)no(t.producerNode[o],t.producerIndexOfThis[o]);const i=t.liveConsumerNode.length-1;if(t.liveConsumerNode[n]=t.liveConsumerNode[i],t.liveConsumerIndexOfThis[n]=t.liveConsumerIndexOfThis[i],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,n<t.liveConsumerNode.length){const o=t.liveConsumerIndexOfThis[n],u=t.liveConsumerNode[n];Ri(u),u.producerIndexOfThis[o]=n}}function bs(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ri(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}let uu=null;function Le(t){const n=Jr(null);try{return t()}finally{Jr(n)}}const Lt=()=>{},Mn=(()=>({...wo,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule(t.ref)},hasRun:!1,cleanupFn:Lt}))();class Vn{constructor(n,i,o){this.previousValue=n,this.currentValue=i,this.firstChange=o}isFirstChange(){return this.firstChange}}function gn(){return yr}function yr(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ar),xn}function xn(){const t=ui(this),n=t?.current;if(n){const i=t.previous;if(i===Dr)t.previous=n;else for(let o in n)i[o]=n[o];t.current=null,this.ngOnChanges(n)}}function Ar(t,n,i,o){const u=this.declaredInputs[i],l=ui(t)||function Ss(t,n){return t[Kr]=n}(t,{previous:Dr,current:null}),m=l.current||(l.current={}),E=l.previous,A=E[u];m[u]=new Vn(A&&A.currentValue,n,E===Dr),t[o]=n}gn.ngInherit=!0;const Kr="__ngSimpleChanges__";function ui(t){return t[Kr]||null}const bn=function(t,n,i){};function vr(t){for(;Array.isArray(t);)t=t[er];return t}function so(t,n){return vr(n[t])}function Ei(t,n){return vr(n[t.index])}function $c(t,n){return t.data[n]}function lr(t,n){const i=n[t];return Vr(i)?i:i[er]}function ps(t,n){return null==n?null:t[n]}function js(t){t[ir]=0}function wa(t){1024&t[Qt]||(t[Qt]|=1024,zc(t,1))}function sd(t){1024&t[Qt]&&(t[Qt]&=-1025,zc(t,-1))}function zc(t,n){let i=t[Ln];if(null===i)return;i[Io]+=n;let o=i;for(i=i[Ln];null!==i&&(1===n&&1===o[Io]||-1===n&&0===o[Io]);)i[Io]+=n,o=i,i=i[Ln]}const nn={lFrame:$(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Wc(){return nn.bindingsEnabled}function nt(){return nn.lFrame.lView}function Nn(){return nn.lFrame.tView}function ri(){let t=Br();for(;null!==t&&64===t.type;)t=t.parent;return t}function Br(){return nn.lFrame.currentTNode}function gs(t,n){const i=nn.lFrame;i.currentTNode=t,i.isParent=n}function oo(){return nn.lFrame.isParent}function Po(){nn.lFrame.isParent=!1}function li(){const t=nn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function ms(){return nn.lFrame.bindingIndex++}function xi(t){const n=nn.lFrame,i=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,i}function ao(t,n){const i=nn.lFrame;i.bindingIndex=i.bindingRootIndex=t,nc(n)}function nc(t){nn.lFrame.currentDirectiveIndex=t}function rc(){return nn.lFrame.currentQueryIndex}function I(t){nn.lFrame.currentQueryIndex=t}function b(t){const n=t[bt];return 2===n.type?n.declTNode:1===n.type?t[Or]:null}function v(t,n,i){if(i&Ut.SkipSelf){let u=n,l=t;for(;!(u=u.parent,null!==u||i&Ut.Host||(u=b(l),null===u||(l=l[Un],10&u.type))););if(null===u)return!1;n=u,t=l}const o=nn.lFrame=M();return o.currentTNode=n,o.lView=t,!0}function C(t){const n=M(),i=t[bt];nn.lFrame=n,n.currentTNode=i.firstChild,n.lView=t,n.tView=i,n.contextLView=t,n.bindingIndex=i.bindingStartIndex,n.inI18n=!1}function M(){const t=nn.lFrame,n=null===t?null:t.child;return null===n?$(t):n}function $(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function ne(){const t=nn.lFrame;return nn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ke=ne;function Me(){const t=ne();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function _n(){return nn.lFrame.selectedIndex}function Tn(t){nn.lFrame.selectedIndex=t}function Bn(){const t=nn.lFrame;return $c(t.tView,t.selectedIndex)}let wh=!0;function uo(){return wh}function Yo(t){wh=t}function qc(t,n){for(let i=n.directiveStart,o=n.directiveEnd;i<o;i++){const l=t.data[i].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:A,ngAfterViewChecked:x,ngOnDestroy:j}=l;m&&(t.contentHooks??=[]).push(-i,m),E&&((t.contentHooks??=[]).push(i,E),(t.contentCheckHooks??=[]).push(i,E)),A&&(t.viewHooks??=[]).push(-i,A),x&&((t.viewHooks??=[]).push(i,x),(t.viewCheckHooks??=[]).push(i,x)),null!=j&&(t.destroyHooks??=[]).push(i,j)}}function mu(t,n,i){Jo(t,n,3,i)}function Kc(t,n,i,o){(3&t[Qt])===i&&Jo(t,n,i,o)}function No(t,n){let i=t[Qt];(3&i)===n&&(i&=8191,i+=1,t[Qt]=i)}function Jo(t,n,i,o){const l=o??-1,m=n.length-1;let E=0;for(let A=void 0!==o?65535&t[ir]:0;A<m;A++)if("number"==typeof n[A+1]){if(E=n[A],null!=o&&E>=o)break}else n[A]<0&&(t[ir]+=65536),(E<l||-1==l)&&(ic(t,i,n,A),t[ir]=(4294901760&t[ir])+A+2),A++}function Hs(t,n){bn(4,t,n);const i=Jr(null);try{n.call(t)}finally{Jr(i),bn(5,t,n)}}function ic(t,n,i,o){const u=i[o]<0,l=i[o+1],E=t[u?-i[o]:i[o]];u?t[Qt]>>13<t[ir]>>16&&(3&t[Qt])===n&&(t[Qt]+=8192,Hs(E,l)):Hs(E,l)}const Oo=-1;class _u{constructor(n,i,o){this.factory=n,this.resolving=!1,this.canSeeViewProviders=i,this.injectImpl=o}}function Zc(t){return t!==Oo}function Sa(t){return 32767&t}function Ra(t,n){let i=function Qc(t){return t>>16}(t),o=n;for(;i>0;)o=o[Un],i--;return o}let Yc=!0;function Gs(t){const n=Yc;return Yc=t,n}const ko=255,oc=5;let Ch=0;const dr={};function Pa(t,n){const i=ac(t,n);if(-1!==i)return i;const o=n[bt];o.firstCreatePass&&(t.injectorIndex=n.length,Xo(o.data,t),Xo(n,null),Xo(o.blueprint,null));const u=_s(t,n),l=t.injectorIndex;if(Zc(u)){const m=Sa(u),E=Ra(u,n),A=E[bt].data;for(let x=0;x<8;x++)n[l+x]=E[m+x]|A[m+x]}return n[l+8]=u,l}function Xo(t,n){t.push(0,0,0,0,0,0,0,0,n)}function ac(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function _s(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let i=0,o=null,u=n;for(;null!==u;){if(o=ta(u),null===o)return Oo;if(i++,u=u[Un],-1!==o.injectorIndex)return o.injectorIndex|i<<16}return Oo}function ea(t,n,i){!function bh(t,n,i){let o;"string"==typeof i?o=i.charCodeAt(0)||0:i.hasOwnProperty(Zt)&&(o=i[Zt]),null==o&&(o=i[Zt]=Ch++);const u=o&ko;n.data[t+(u>>oc)]|=1<<u}(t,n,i)}function Lo(t,n,i){if(i&Ut.Optional||void 0!==t)return t;ut()}function gd(t,n,i,o){if(i&Ut.Optional&&void 0===o&&(o=null),!(i&(Ut.Self|Ut.Host))){const u=t[qi],l=kn(void 0);try{return u?u.get(n,o,i&Ut.Optional):zn(n,o,i&Ut.Optional)}finally{kn(l)}}return Lo(o,0,i)}function Ma(t,n,i,o=Ut.Default,u){if(null!==t){if(2048&n[Qt]&&!(o&Ut.Self)){const m=function nl(t,n,i,o,u){let l=t,m=n;for(;null!==l&&null!==m&&2048&m[Qt]&&!(512&m[Qt]);){const E=md(l,m,i,o|Ut.Self,dr);if(E!==dr)return E;let A=l.parent;if(!A){const x=m[Os];if(x){const j=x.get(i,dr,o);if(j!==dr)return j}A=ta(m),m=m[Un]}l=A}return u}(t,n,i,o,dr);if(m!==dr)return m}const l=md(t,n,i,o,dr);if(l!==dr)return l}return gd(n,i,o,u)}function md(t,n,i,o,u){const l=function Xc(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(Zt)?t[Zt]:void 0;return"number"==typeof n?n>=0?n&ko:yd:n}(i);if("function"==typeof l){if(!v(n,t,o))return o&Ut.Host?Lo(u,0,o):gd(n,i,o,u);try{let m;if(m=l(o),null!=m||o&Ut.Optional)return m;ut()}finally{ke()}}else if("number"==typeof l){let m=null,E=ac(t,n),A=Oo,x=o&Ut.Host?n[mr][Or]:null;for((-1===E||o&Ut.SkipSelf)&&(A=-1===E?_s(t,n):n[E+8],A!==Oo&&_d(o,!1)?(m=n[bt],E=Sa(A),n=Ra(A,n)):E=-1);-1!==E;){const j=n[bt];if(Sh(l,E,j.data)){const X=co(E,n,i,m,o,x);if(X!==dr)return X}A=n[E+8],A!==Oo&&_d(o,n[bt].data[E+8]===x)&&Sh(l,E,n)?(m=j,E=Sa(A),n=Ra(A,n)):E=-1}}return u}function co(t,n,i,o,u,l){const m=n[bt],E=m.data[t+8],j=uc(E,m,i,null==o?Si(E)&&Yc:o!=m&&0!=(3&E.type),u&Ut.Host&&l===E);return null!==j?xa(n,m,j,E):dr}function uc(t,n,i,o,u){const l=t.providerIndexes,m=n.data,E=1048575&l,A=t.directiveStart,j=l>>20,ge=u?E+j:t.directiveEnd;for(let Ce=o?E:E+j;Ce<ge;Ce++){const Ye=m[Ce];if(Ce<A&&i===Ye||Ce>=A&&Ye.type===i)return Ce}if(u){const Ce=m[A];if(Ce&&Qr(Ce)&&Ce.type===i)return A}return null}function xa(t,n,i,o){let u=t[i];const l=n.data;if(function ld(t){return t instanceof _u}(u)){const m=u;m.resolving&&function Qe(t,n){const i=n?`. Dependency path: ${n.join(" > ")} > ${t}`:"";throw new me(-200,`Circular dependency in DI detected for ${t}${i}`)}(function Be(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():we(t)}(l[i]));const E=Gs(m.canSeeViewProviders);m.resolving=!0;const x=m.injectImpl?kn(m.injectImpl):null;v(t,o,Ut.Default);try{u=t[i]=m.factory(void 0,l,t,o),n.firstCreatePass&&i>=o.directiveStart&&function Gc(t,n,i){const{ngOnChanges:o,ngOnInit:u,ngDoCheck:l}=n.type.prototype;if(o){const m=yr(n);(i.preOrderHooks??=[]).push(t,m),(i.preOrderCheckHooks??=[]).push(t,m)}u&&(i.preOrderHooks??=[]).push(0-t,u),l&&((i.preOrderHooks??=[]).push(t,l),(i.preOrderCheckHooks??=[]).push(t,l))}(i,l[i],n)}finally{null!==x&&kn(x),Gs(E),m.resolving=!1,ke()}}return u}function Sh(t,n,i){return!!(i[n+(t>>oc)]&1<<t)}function _d(t,n){return!(t&Ut.Self||t&Ut.Host&&n)}class di{constructor(n,i){this._tNode=n,this._lView=i}get(n,i,o){return Ma(this._tNode,this._lView,n,mn(o),i)}}function yd(){return new di(ri(),nt())}function cc(t){return Mr(()=>{const n=t.prototype.constructor,i=n[Ht]||tl(n),o=Object.prototype;let u=Object.getPrototypeOf(t.prototype).constructor;for(;u&&u!==o;){const l=u[Ht]||tl(u);if(l&&l!==i)return l;u=Object.getPrototypeOf(u)}return l=>new l})}function tl(t){return dt(t)?()=>{const n=tl(Ze(t));return n&&n()}:Ji(t)}function ta(t){const n=t[bt],i=n.type;return 2===i?n.declTNode:1===i?t[Or]:null}function na(t){return function pd(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const i=t.attrs;if(i){const o=i.length;let u=0;for(;u<o;){const l=i[u];if(ei(l))break;if(0===l)u+=2;else if("number"==typeof l)for(u++;u<o&&"string"==typeof i[u];)u++;else{if(l===n)return i[u+1];u+=2}}}return null}(ri(),t)}const ia="__parameters__";function vu(t,n,i){return Mr(()=>{const o=function lc(t){return function(...i){if(t){const o=t(...i);for(const u in o)this[u]=o[u]}}}(n);function u(...l){if(this instanceof u)return o.apply(this,l),this;const m=new u(...l);return E.annotation=m,E;function E(A,x,j){const X=A.hasOwnProperty(ia)?A[ia]:Object.defineProperty(A,ia,{value:[]})[ia];for(;X.length<=j;)X.push(null);return(X[j]=X[j]||[]).push(m),A}}return i&&(u.prototype=Object.create(i.prototype)),u.prototype.ngMetadataName=t,u.annotationCls=u,u})}function qs(t,n){t.forEach(i=>Array.isArray(i)?qs(i,n):n(i))}function ol(t,n,i){n>=t.length?t.push(i):t.splice(n,0,i)}function Iu(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Ni(t,n,i){let o=ka(t,n);return o>=0?t[1|o]=i:(o=~o,function Id(t,n,i,o){let u=t.length;if(u==n)t.push(i,o);else if(1===u)t.push(o,t[0]),t[0]=i;else{for(u--,t.push(t[u-1],t[u]);u>n;)t[u]=t[u-2],u--;t[n]=i,t[n+1]=o}}(t,o,n,i)),o}function Td(t,n){const i=ka(t,n);if(i>=0)return t[1|i]}function ka(t,n){return function fc(t,n,i){let o=0,u=t.length>>i;for(;u!==o;){const l=o+(u-o>>1),m=t[l<<i];if(n===m)return l<<i;m>n?u=l:o=l+1}return~(u<<i)}(t,n,1)}const oa=cr(vu("Optional"),8),Fo=cr(vu("SkipSelf"),4);function Fh(t){return 128==(128&t.flags)}var Vh=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Vh||{});const up=/^>|^->|<!--|-->|--!>|<!-$/g,Uh=/(<|>)/g,cp="\u200b$1\u200b";const Su=new Map;let dp=0;const pp="__ngContext__";function Ti(t,n){Vr(n)?(t[pp]=n[ws],function j_(t){Su.set(t[ws],t)}(n)):t[pp]=n}let Hh;function Pu(t,n){return Hh(t,n)}function Pd(t){const n=t[Ln];return sr(n)?n[Ln]:n}function Wh(t){return qh(t[Zi])}function Gh(t){return qh(t[Fr])}function qh(t){for(;null!==t&&!sr(t);)t=t[Fr];return t}function gl(t,n,i,o,u){if(null!=o){let l,m=!1;sr(o)?l=o:Vr(o)&&(m=!0,o=o[er]);const E=vr(o);0===t&&null!==i?null==u?Dp(n,i,E):ja(n,i,E,u||null,!0):1===t&&null!==i?ja(n,i,E,u||null,!0):2===t?function Xh(t,n,i){const o=Yh(t,n);o&&function wp(t,n,i,o){t.removeChild(n,i,o)}(t,o,n,i)}(n,E,m):3===t&&n.destroyNode(E),null!=l&&function Sp(t,n,i,o,u){const l=i[bi];l!==vr(i)&&gl(n,t,o,l,u);for(let E=_r;E<i.length;E++){const A=i[E];vc(A[bt],A,t,n,o,l)}}(n,t,l,i,u)}}function Md(t,n){return t.createComment(function lp(t){return t.replace(up,n=>n.replace(Uh,cp))}(n))}function xd(t,n,i){return t.createElement(n,i)}function Ep(t,n){const i=t[Ys],o=i.indexOf(n);sd(n),i.splice(o,1)}function Nd(t,n){if(t.length<=_r)return;const i=_r+n,o=t[i];if(o){const u=o[Yn];null!==u&&u!==t&&Ep(u,o),n>0&&(t[i-1][Fr]=o[Fr]);const l=Iu(t,_r+n);!function vp(t,n){vc(t,n,n[tn],2,null,null),n[er]=null,n[Or]=null}(o[bt],o);const m=l[Ai];null!==m&&m.detachView(l[bt]),o[Ln]=null,o[Fr]=null,o[Qt]&=-129}return o}function Ip(t,n){if(!(256&n[Qt])){const i=n[tn];n[un]&&bo(n[un]),n[Fn]&&bo(n[Fn]),i.destroyNode&&vc(t,n,i,3,null,null),function W_(t){let n=t[Zi];if(!n)return Tp(t[bt],t);for(;n;){let i=null;if(Vr(n))i=n[Zi];else{const o=n[_r];o&&(i=o)}if(!i){for(;n&&!n[Fr]&&n!==t;)Vr(n)&&Tp(n[bt],n),n=n[Ln];null===n&&(n=t),Vr(n)&&Tp(n[bt],n),i=n&&n[Fr]}n=i}}(n)}}function Tp(t,n){if(!(256&n[Qt])){n[Qt]&=-129,n[Qt]|=256,function q_(t,n){let i;if(null!=t&&null!=(i=t.destroyHooks))for(let o=0;o<i.length;o+=2){const u=n[i[o]];if(!(u instanceof _u)){const l=i[o+1];if(Array.isArray(l))for(let m=0;m<l.length;m+=2){const E=u[l[m]],A=l[m+1];bn(4,E,A);try{A.call(E)}finally{bn(5,E,A)}}else{bn(4,u,l);try{l.call(u)}finally{bn(5,u,l)}}}}}(t,n),function G_(t,n){const i=t.cleanup,o=n[Gi];if(null!==i)for(let l=0;l<i.length-1;l+=2)if("string"==typeof i[l]){const m=i[l+3];m>=0?o[m]():o[-m].unsubscribe(),l+=2}else i[l].call(o[i[l+1]]);null!==o&&(n[Gi]=null);const u=n[Ci];if(null!==u){n[Ci]=null;for(let l=0;l<u.length;l++)(0,u[l])()}}(t,n),1===n[bt].type&&n[tn].destroy();const i=n[Yn];if(null!==i&&sr(n[Ln])){i!==n[Ln]&&Ep(i,n);const o=n[Ai];null!==o&&o.detachView(t)}!function em(t){Su.delete(t[ws])}(n)}}function Od(t,n,i){return function sm(t,n,i){let o=n;for(;null!==o&&40&o.type;)o=(n=o).parent;if(null===o)return i[er];{const{componentOffset:u}=o;if(u>-1){const{encapsulation:l}=t.data[o.directiveStart+u];if(l===wi.None||l===wi.Emulated)return null}return Ei(o,i)}}(t,n.parent,i)}function ja(t,n,i,o,u){t.insertBefore(n,i,o,u)}function Dp(t,n,i){t.appendChild(n,i)}function Qh(t,n,i,o,u){null!==o?ja(t,n,i,o,u):Dp(t,n,i)}function Yh(t,n){return t.parentNode(n)}let kd,xp,El,um=function Jh(t,n,i){return 40&t.type?Ei(t,i):null};function ml(t,n,i,o){const u=Od(t,o,n),l=n[tn],E=function am(t,n,i){return um(t,n,i)}(o.parent||n[Or],o,n);if(null!=u)if(Array.isArray(i))for(let A=0;A<i.length;A++)Qh(l,u,i[A],E,!1);else Qh(l,u,i,E,!1);void 0!==kd&&kd(l,o,n,i,u)}function _l(t,n){if(null!==n){const i=n.type;if(3&i)return Ei(n,t);if(4&i)return Ld(-1,t[n.index]);if(8&i){const o=n.child;if(null!==o)return _l(t,o);{const u=t[n.index];return sr(u)?Ld(-1,u):vr(u)}}if(32&i)return Pu(n,t)()||vr(t[n.index]);{const o=cm(t,n);return null!==o?Array.isArray(o)?o[0]:_l(Pd(t[mr]),o):_l(t,n.next)}}return null}function cm(t,n){return null!==n?t[mr][Or].projection[n.projection]:null}function Ld(t,n){const i=_r+t+1;if(i<n.length){const o=n[i],u=o[bt].firstChild;if(null!==u)return _l(o,u)}return n[bi]}function bp(t,n,i,o,u,l,m){for(;null!=i;){const E=o[i.index],A=i.type;if(m&&0===n&&(E&&Ti(vr(E),o),i.flags|=2),32!=(32&i.flags))if(8&A)bp(t,n,i.child,o,u,l,!1),gl(n,t,u,E,l);else if(32&A){const x=Pu(i,o);let j;for(;j=x();)gl(n,t,u,j,l);gl(n,t,u,E,l)}else 16&A?tf(t,n,o,i,u,l):gl(n,t,u,E,l);i=m?i.projectionNext:i.next}}function vc(t,n,i,o,u,l){bp(i,o,t.firstChild,n,u,l,!1)}function tf(t,n,i,o,u,l){const m=i[mr],A=m[Or].projection[o.projection];if(Array.isArray(A))for(let x=0;x<A.length;x++)gl(n,t,u,A[x],l);else{let x=A;const j=m[Ln];Fh(o)&&(x.flags|=128),bp(t,n,x,j,u,l,!0)}}function Pp(t,n,i){""===i?t.removeAttribute(n,"class"):t.setAttribute(n,"class",i)}function nf(t,n,i){const{mergedAttrs:o,classes:u,styles:l}=i;null!==o&&Wn(t,n,o),null!==u&&Pp(t,n,u),null!==l&&function yl(t,n,i){t.setAttribute(n,"style",i)}(t,n,l)}function Np(t){xp=t}function af(t){return function Op(){if(void 0===El&&(El=null,Dn.trustedTypes))try{El=Dn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return El}()?.createScriptURL(t)||t}class kp{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wt})`}}function Mu(t){return t instanceof kp?t.changingThisBreaksApplicationSecurity:t}function Ec(t,n){const i=function uf(t){return t instanceof kp&&t.getTypeName()||null}(t);if(null!=i&&i!==n){if("ResourceURL"===i&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${i} (see ${wt})`)}return i===n}const X_=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var wl=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(wl||{});function Dm(t){const n=Al();return n?n.sanitize(wl.URL,t)||"":Ec(t,"URL")?Mu(t):function Up(t){return(t=String(t)).match(X_)?t:"unsafe:"+t}(we(t))}function wm(t){const n=Al();if(n)return af(n.sanitize(wl.RESOURCE_URL,t)||"");if(Ec(t,"ResourceURL"))return af(Mu(t));throw new me(904,!1)}function $p(t,n,i){return function ay(t,n){return"src"===n&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===n&&("base"===t||"link"===t)?wm:Dm}(n,i)(t)}function Al(){const t=nt();return t&&t[Ki].sanitizer}const Cl=new Ct("ENVIRONMENT_INITIALIZER"),zp=new Ct("INJECTOR",-1),jd=new Ct("INJECTOR_DEF_TYPES");class Rn{get(n,i=Kn){if(i===Kn){const o=new Error(`NullInjectorError: No provider for ${_e(n)}!`);throw o.name="NullInjectorError",o}return i}}function gf(t){return{\u0275providers:t}}function Cm(...t){return{\u0275providers:bl(0,t),\u0275fromNgModule:!0}}function bl(t,...n){const i=[],o=new Set;let u;const l=m=>{i.push(m)};return qs(n,m=>{const E=m;hi(E,l,[],o)&&(u||=[],u.push(E))}),void 0!==u&&Hp(u,l),i}function Hp(t,n){for(let i=0;i<t.length;i++){const{ngModule:o,providers:u}=t[i];lo(u,l=>{n(l,o)})}}function hi(t,n,i,o){if(!(t=Ze(t)))return!1;let u=null,l=Hr(t);const m=!l&&In(t);if(l||m){if(m&&!m.standalone)return!1;u=t}else{const A=t.ngModule;if(l=Hr(A),!l)return!1;u=A}const E=o.has(u);if(m){if(E)return!1;if(o.add(u),m.dependencies){const A="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const x of A)hi(x,n,i,o)}}else{if(!l)return!1;{if(null!=l.imports&&!E){let x;o.add(u);try{qs(l.imports,j=>{hi(j,n,i,o)&&(x||=[],x.push(j))})}finally{}void 0!==x&&Hp(x,n)}if(!E){const x=Ji(u)||(()=>new u);n({provide:u,useFactory:x,deps:wn},u),n({provide:jd,useValue:u,multi:!0},u),n({provide:Cl,useValue:()=>It(u),multi:!0},u)}const A=l.providers;if(null!=A&&!E){const x=t;lo(A,j=>{n(j,x)})}}}return u!==t&&void 0!==t.providers}function lo(t,n){for(let i of t)et(i)&&(i=i.\u0275providers),Array.isArray(i)?lo(i,n):n(i)}const cy=ee({provide:String,useValue:ee});function Wp(t){return null!==t&&"object"==typeof t&&cy in t}function za(t){return"function"==typeof t}const $d=new Ct("Set Injector scope."),mf={},dy={};let Er;function qp(){return void 0===Er&&(Er=new Rn),Er}class ca{}class br extends ca{get destroyed(){return this._destroyed}constructor(n,i,o,u){super(),this.parent=i,this.source=o,this.scopes=u,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sm(n,m=>this.processProvider(m)),this.records.set(zp,Sl(void 0,this)),u.has("environment")&&this.records.set(ca,Sl(void 0,this));const l=this.records.get($d);null!=l&&"string"==typeof l.value&&this.scopes.add(l.value),this.injectorDefTypes=new Set(this.get(jd.multi,wn,Ut.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const i of this._ngOnDestroyHooks)i.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(n){return this.assertNotDestroyed(),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){this.assertNotDestroyed();const i=$e(this),o=kn(void 0);try{return n()}finally{$e(i),kn(o)}}get(n,i=Kn,o=Ut.Default){if(this.assertNotDestroyed(),n.hasOwnProperty(fn))return n[fn](this);o=mn(o);const l=$e(this),m=kn(void 0);try{if(!(o&Ut.SkipSelf)){let A=this.records.get(n);if(void 0===A){const x=function my(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ct}(n)&&yn(n);A=x&&this.injectableDefInScope(x)?Sl(_f(n),mf):null,this.records.set(n,A)}if(null!=A)return this.hydrate(n,A)}return(o&Ut.Self?qp():this.parent).get(n,i=o&Ut.Optional&&i===Kn?null:i)}catch(E){if("NullInjectorError"===E.name){if((E[ur]=E[ur]||[]).unshift(_e(n)),l)throw E;return function ai(t,n,i,o){const u=t[ur];throw n[V]&&u.unshift(n[V]),t.message=function ji(t,n,i,o=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let u=_e(n);if(Array.isArray(n))u=n.map(_e).join(" -> ");else if("object"==typeof n){let l=[];for(let m in n)if(n.hasOwnProperty(m)){let E=n[m];l.push(m+":"+("string"==typeof E?JSON.stringify(E):_e(E)))}u=`{${l.join(", ")}}`}return`${i}${o?"("+o+")":""}[${u}]: ${t.replace(W,"\n  ")}`}("\n"+t.message,u,i,o),t.ngTokenPath=u,t[ur]=null,t}(E,n,"R3InjectorError",this.source)}throw E}finally{kn(m),$e(l)}}resolveInjectorInitializers(){const n=$e(this),i=kn(void 0);try{const u=this.get(Cl.multi,wn,Ut.Self);for(const l of u)l()}finally{$e(n),kn(i)}}toString(){const n=[],i=this.records;for(const o of i.keys())n.push(_e(o));return`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new me(205,!1)}processProvider(n){let i=za(n=Ze(n))?n:Ze(n&&n.provide);const o=function fy(t){return Wp(t)?Sl(void 0,t.useValue):Sl(Kp(t),mf)}(n);if(za(n)||!0!==n.multi)this.records.get(i);else{let u=this.records.get(i);u||(u=Sl(void 0,mf,!0),u.factory=()=>en(u.multi),this.records.set(i,u)),i=n,u.multi.push(n)}this.records.set(i,o)}hydrate(n,i){return i.value===mf&&(i.value=dy,i.value=i.factory()),"object"==typeof i.value&&i.value&&function gy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(i.value)&&this._ngOnDestroyHooks.add(i.value),i.value}injectableDefInScope(n){if(!n.providedIn)return!1;const i=Ze(n.providedIn);return"string"==typeof i?"any"===i||this.scopes.has(i):this.injectorDefTypes.has(i)}removeOnDestroy(n){const i=this._onDestroyHooks.indexOf(n);-1!==i&&this._onDestroyHooks.splice(i,1)}}function _f(t){const n=yn(t),i=null!==n?n.factory:Ji(t);if(null!==i)return i;if(t instanceof Ct)throw new me(204,!1);if(t instanceof Function)return function hy(t){const n=t.length;if(n>0)throw function hc(t,n){const i=[];for(let o=0;o<t;o++)i.push(n);return i}(n,"?"),new me(204,!1);const i=function vt(t){return t&&(t[$t]||t[rn])||null}(t);return null!==i?()=>i.factory(t):()=>new t}(t);throw new me(204,!1)}function Kp(t,n,i){let o;if(za(t)){const u=Ze(t);return Ji(u)||_f(u)}if(Wp(t))o=()=>Ze(t.useValue);else if(function bm(t){return!(!t||!t.useFactory)}(t))o=()=>t.useFactory(...en(t.deps||[]));else if(function Gp(t){return!(!t||!t.useExisting)}(t))o=()=>It(Ze(t.useExisting));else{const u=Ze(t&&(t.useClass||t.provide));if(!function py(t){return!!t.deps}(t))return Ji(u)||_f(u);o=()=>new u(...en(t.deps))}return o}function Sl(t,n,i=!1){return{factory:t,value:n,multi:i?[]:void 0}}function Sm(t,n){for(const i of t)Array.isArray(i)?Sm(i,n):i&&et(i)?Sm(i.\u0275providers,n):n(i)}const Rm=new Ct("AppId",{providedIn:"root",factory:()=>_y}),_y="ng",Zp=new Ct("Platform Initializer"),Tc=new Ct("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xu=new Ct("CSP nonce",{providedIn:"root",factory:()=>function vl(){if(void 0!==xp)return xp;if(typeof document<"u")return document;throw new me(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ku=(t,n,i)=>null;function Gd(t,n,i=!1){return ku(t,n,i)}class Ey{}class xl{}class dE{resolveComponentFactory(n){throw function Iy(t){const n=Error(`No component factory found for ${_e(t)}.`);return n.ngComponent=t,n}(n)}}let Nl=(()=>{class t{static#e=this.NULL=new dE}return t})();function Ty(){return Ga(ri(),nt())}function Ga(t,n){return new Kd(Ei(t,n))}let Kd=(()=>{class t{constructor(i){this.nativeElement=i}static#e=this.__NG_ELEMENT_ID__=Ty}return t})();function Dy(t){return t instanceof Kd?t.nativeElement:t}class Zd{}let wy=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function Ay(){const t=nt(),i=lr(ri().index,t);return(Vr(i)?i:t)[tn]}()}return t})(),Df=(()=>{class t{static#e=this.\u0275prov=qt({token:t,providedIn:"root",factory:()=>null})}return t})();class km{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Lm=new km("16.2.12"),wf={};function Py(t,n=null,i=null,o){const u=Vu(t,n,i,o);return u.resolveInjectorInitializers(),u}function Vu(t,n=null,i=null,o,u=new Set){const l=[i||wn,Cm(t)];return o=o||("object"==typeof t?void 0:_e(t)),new br(l,n||qp(),o||null,u)}let Oi=(()=>{class t{static#e=this.THROW_IF_NOT_FOUND=Kn;static#t=this.NULL=new Rn;static create(i,o){if(Array.isArray(i))return Py({name:""},o,i,"");{const u=i.name??"";return Py({name:u},i.parent,i.providers,u)}}static#n=this.\u0275prov=qt({token:t,providedIn:"any",factory:()=>It(zp)});static#r=this.__NG_ELEMENT_ID__=-1}return t})();function rg(t){return t.ngOriginalError}class Uu{constructor(){this._console=console}handleError(n){const i=this._findOriginalError(n);this._console.error("ERROR",n),i&&this._console.error("ORIGINAL ERROR",i)}_findOriginalError(n){let i=n&&rg(n);for(;i&&rg(i);)i=rg(i);return i||null}}function sg(t){return n=>{setTimeout(t,void 0,n)}}const la=class My extends _.x{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,i,o){let u=n,l=i||(()=>null),m=o;if(n&&"object"==typeof n){const A=n;u=A.next?.bind(A),l=A.error?.bind(A),m=A.complete?.bind(A)}this.__isAsync&&(l=sg(l),u&&(u=sg(u)),m&&(m=sg(m)));const E=super.subscribe({next:u,error:l,complete:m});return n instanceof G.w0&&n.add(E),E}};function Vm(...t){}class Di{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),typeof Zone>"u")throw new me(908,!1);Zone.assertZonePatched();const u=this;u._nesting=0,u._outer=u._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(u._inner=u._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(u._inner=u._inner.fork(Zone.longStackTraceZoneSpec)),u.shouldCoalesceEventChangeDetection=!o&&i,u.shouldCoalesceRunChangeDetection=o,u.lastRequestAnimationFrameId=-1,u.nativeRequestAnimationFrame=function xy(){const t="function"==typeof Dn.requestAnimationFrame;let n=Dn[t?"requestAnimationFrame":"setTimeout"],i=Dn[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&n&&i){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const u=i[Zone.__symbol__("OriginalDelegate")];u&&(i=u)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:i}}().nativeRequestAnimationFrame,function Ll(t){const n=()=>{!function Oy(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Dn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Yd(t),t.isCheckStableRunning=!0,og(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Yd(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(i,o,u,l,m,E)=>{if(function Fy(t){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0].data?.__ignore_ng_zone__}(E))return i.invokeTask(u,l,m,E);try{return ky(t),i.invokeTask(u,l,m,E)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===l.type||t.shouldCoalesceRunChangeDetection)&&n(),Um(t)}},onInvoke:(i,o,u,l,m,E,A)=>{try{return ky(t),i.invoke(u,l,m,E,A)}finally{t.shouldCoalesceRunChangeDetection&&n(),Um(t)}},onHasTask:(i,o,u,l)=>{i.hasTask(u,l),o===u&&("microTask"==l.change?(t._hasPendingMicrotasks=l.microTask,Yd(t),og(t)):"macroTask"==l.change&&(t.hasPendingMacrotasks=l.macroTask))},onHandleError:(i,o,u,l)=>(i.handleError(u,l),t.runOutsideAngular(()=>t.onError.emit(l)),!1)})}(u)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Di.isInAngularZone())throw new me(909,!1)}static assertNotInAngularZone(){if(Di.isInAngularZone())throw new me(909,!1)}run(n,i,o){return this._inner.run(n,i,o)}runTask(n,i,o,u){const l=this._inner,m=l.scheduleEventTask("NgZoneEvent: "+u,n,Ny,Vm,Vm);try{return l.runTask(m,i,o)}finally{l.cancelTask(m)}}runGuarded(n,i,o){return this._inner.runGuarded(n,i,o)}runOutsideAngular(n){return this._outer.run(n)}}const Ny={};function og(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Yd(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ky(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Um(t){t._nesting--,og(t)}class Ly{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(n,i,o){return n.apply(i,o)}runGuarded(n,i,o){return n.apply(i,o)}runOutsideAngular(n){return n()}runTask(n,i,o,u){return n.apply(i,o)}}const Bm=new Ct("",{providedIn:"root",factory:jm});function jm(){const t=kt(Di);let n=!0;const i=new Y.y(u=>{n=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{u.next(n),u.complete()})}),o=new Y.y(u=>{let l;t.runOutsideAngular(()=>{l=t.onStable.subscribe(()=>{Di.assertNotInAngularZone(),queueMicrotask(()=>{!n&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(n=!0,u.next(!0))})})});const m=t.onUnstable.subscribe(()=>{Di.assertInAngularZone(),n&&(n=!1,t.runOutsideAngular(()=>{u.next(!1)}))});return()=>{l.unsubscribe(),m.unsubscribe()}});return(0,le.T)(i,o.pipe((0,ye.B)()))}function Vy(t){return t.ownerDocument.defaultView}function Uy(t){return t.ownerDocument}function qa(t){return t instanceof Function?t():t}let da=(()=>{class t{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=qt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Xd(t){for(;t;){t[Qt]|=64;const n=Pd(t);if(ga(t)&&!n)return t;t=n}return null}const Hm=new Ct("",{providedIn:"root",factory:()=>!1});let eh=null;function Yy(t,n){return t[n]??th()}function Jy(t,n){const i=th();i.producerNode?.length&&(t[n]=eh,i.lView=t,eh=bf())}const _E={...wo,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Xd(t.lView)},lView:null};function bf(){return Object.create(_E)}function th(){return eh??=bf(),eh}const a={};function e(t){r(Nn(),nt(),_n()+t,!1)}function r(t,n,i,o){if(!o)if(3==(3&n[Qt])){const l=t.preOrderCheckHooks;null!==l&&mu(n,l,i)}else{const l=t.preOrderHooks;null!==l&&Kc(n,l,0,i)}Tn(i)}function s(t,n=Ut.Default){const i=nt();return null===i?It(t,n):Ma(ri(),i,Ze(t),n)}function c(){throw new Error("invalid")}function g(t,n,i,o,u,l,m,E,A,x,j){const X=n.blueprint.slice();return X[er]=u,X[Qt]=140|o,(null!==x||t&&2048&t[Qt])&&(X[Qt]|=2048),js(X),X[Ln]=X[Un]=t,X[Gn]=i,X[Ki]=m||t&&t[Ki],X[tn]=E||t&&t[tn],X[qi]=A||t&&t[qi]||null,X[Or]=l,X[ws]=function B_(){return dp++}(),X[Qi]=j,X[Os]=x,X[mr]=2==n.type?t[mr]:X,X}function w(t,n,i,o,u){let l=t.data[n];if(null===l)l=function S(t,n,i,o,u){const l=Br(),m=oo(),A=t.data[n]=function Ee(t,n,i,o,u,l){let m=n?n.injectorIndex:-1,E=0;return function Cr(){return null!==nn.skipHydrationRootTNode}()&&(E|=128),{type:i,index:o,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:u,attrs:l,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?l:l&&l.parent,i,n,o,u);return null===t.firstChild&&(t.firstChild=A),null!==l&&(m?null==l.child&&null!==A.parent&&(l.child=A):null===l.next&&(l.next=A,A.prev=l)),A}(t,n,i,o,u),function cd(){return nn.lFrame.inI18n}()&&(l.flags|=32);else if(64&l.type){l.type=i,l.value=o,l.attrs=u;const m=function Ca(){const t=nn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();l.injectorIndex=null===m?-1:m.injectorIndex}return gs(l,!0),l}function N(t,n,i,o){if(0===i)return-1;const u=n.length;for(let l=0;l<i;l++)n.push(o),t.blueprint.push(o),t.data.push(null);return u}function z(t,n,i,o,u){const l=Yy(n,un),m=_n(),E=2&o;try{Tn(-1),E&&n.length>ln&&r(t,n,ln,!1),bn(E?2:0,u);const x=E?l:null,j=Co(x);try{null!==x&&(x.dirty=!1),i(o,u)}finally{an(x,j)}}finally{E&&null===n[un]&&Jy(n,un),Tn(m),bn(E?3:1,u)}}function Q(t,n,i){if(pa(n)){const o=Jr(null);try{const l=n.directiveEnd;for(let m=n.directiveStart;m<l;m++){const E=t.data[m];E.contentQueries&&E.contentQueries(1,i[m],m)}}finally{Jr(o)}}}function ue(t,n,i){Wc()&&(function Wm(t,n,i,o){const u=i.directiveStart,l=i.directiveEnd;Si(i)&&function tv(t,n,i){const o=Ei(n,t),u=tt(i);let m=16;i.signals?m=4096:i.onPush&&(m=64);const E=sh(t,g(t,u,null,m,o,n,null,t[Ki].rendererFactory.createRenderer(o,i),null,null,null));t[n.index]=E}(n,i,t.data[u+i.componentOffset]),t.firstCreatePass||Pa(i,n),Ti(o,n);const m=i.initialInputs;for(let E=u;E<l;E++){const A=t.data[E],x=xa(n,t,E,i);Ti(x,n),null!==m&&dg(0,E-u,x,A,0,m),Qr(A)&&(lr(i.index,n)[Gn]=xa(n,t,E,i))}}(t,n,i,Ei(i,n)),64==(64&i.flags)&&Gm(t,n,i))}function xe(t,n,i=Ei){const o=n.localNames;if(null!==o){let u=n.index+1;for(let l=0;l<o.length;l+=2){const m=o[l+1],E=-1===m?i(n,t):t[m];t[u++]=E}}}function tt(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=pt(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):n}function pt(t,n,i,o,u,l,m,E,A,x,j){const X=ln+o,ge=X+u,Ce=function ct(t,n){const i=[];for(let o=0;o<n;o++)i.push(o<t?null:a);return i}(X,ge),Ye="function"==typeof x?x():x;return Ce[bt]={type:t,blueprint:Ce,template:i,queries:null,viewQuery:E,declTNode:n,data:Ce.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:ge,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof l?l():l,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:A,consts:Ye,incompleteFirstPass:!1,ssrId:j}}let Wt=t=>null;function oe(t,n,i,o){for(let u in t)if(t.hasOwnProperty(u)){i=null===i?{}:i;const l=t[u];null===o?pe(i,n,u,l):o.hasOwnProperty(u)&&pe(i,n,o[u],l)}return i}function pe(t,n,i,o){t.hasOwnProperty(i)?t[i].push(n,o):t[i]=[n,o]}function ug(t,n,i,o){if(Wc()){const u=null===o?null:{"":-1},l=function es(t,n){const i=t.directiveRegistry;let o=null,u=null;if(i)for(let l=0;l<i.length;l++){const m=i[l];if(mi(n,m.selectors,!1))if(o||(o=[]),Qr(m))if(null!==m.findHostDirectiveDefs){const E=[];u=u||new Map,m.findHostDirectiveDefs(m,E,u),o.unshift(...E,m),lg(t,n,E.length)}else o.unshift(m),lg(t,n,0);else u=u||new Map,m.findHostDirectiveDefs?.(m,o,u),o.push(m)}return null===o?null:[o,u]}(t,i);let m,E;null===l?m=E=null:[m,E]=l,null!==m&&Vl(t,n,i,m,u,E),u&&function rh(t,n,i){if(n){const o=t.localNames=[];for(let u=0;u<n.length;u+=2){const l=i[n[u+1]];if(null==l)throw new me(-301,!1);o.push(n[u],l)}}}(i,o,u)}i.mergedAttrs=$n(i.mergedAttrs,i.attrs)}function Vl(t,n,i,o,u,l){for(let x=0;x<o.length;x++)ea(Pa(i,n),t,o[x].type);!function ih(t,n,i){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+i,t.providerIndexes=n}(i,t.data.length,o.length);for(let x=0;x<o.length;x++){const j=o[x];j.providersResolver&&j.providersResolver(j)}let m=!1,E=!1,A=N(t,n,o.length,null);for(let x=0;x<o.length;x++){const j=o[x];i.mergedAttrs=$n(i.mergedAttrs,j.hostAttrs),ev(t,i,n,A,j),Xy(A,j,u),null!==j.contentQueries&&(i.flags|=4),(null!==j.hostBindings||null!==j.hostAttrs||0!==j.hostVars)&&(i.flags|=64);const X=j.type.prototype;!m&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((t.preOrderHooks??=[]).push(i.index),m=!0),!E&&(X.ngOnChanges||X.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(i.index),E=!0),A++}!function Ie(t,n,i){const u=n.directiveEnd,l=t.data,m=n.attrs,E=[];let A=null,x=null;for(let j=n.directiveStart;j<u;j++){const X=l[j],ge=i?i.get(X):null,Ye=ge?ge.outputs:null;A=oe(X.inputs,j,A,ge?ge.inputs:null),x=oe(X.outputs,j,x,Ye);const ht=null===A||null===m||Is(n)?null:hg(A,j,m);E.push(ht)}null!==A&&(A.hasOwnProperty("class")&&(n.flags|=8),A.hasOwnProperty("style")&&(n.flags|=16)),n.initialInputs=E,n.inputs=A,n.outputs=x}(t,i,l)}function Gm(t,n,i){const o=i.directiveStart,u=i.directiveEnd,l=i.index,m=function Mo(){return nn.lFrame.currentDirectiveIndex}();try{Tn(l);for(let E=o;E<u;E++){const A=t.data[E],x=n[E];nc(E),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&ju(A,x)}}finally{Tn(-1),nc(m)}}function ju(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function lg(t,n,i){n.componentOffset=i,(t.components??=[]).push(n.index)}function Xy(t,n,i){if(i){if(n.exportAs)for(let o=0;o<n.exportAs.length;o++)i[n.exportAs[o]]=t;Qr(n)&&(i[""]=t)}}function ev(t,n,i,o,u){t.data[o]=u;const l=u.factory||(u.factory=Ji(u.type)),m=new _u(l,Qr(u),s);t.blueprint[o]=m,i[o]=m,function nh(t,n,i,o,u){const l=u.hostBindings;if(l){let m=t.hostBindingOpCodes;null===m&&(m=t.hostBindingOpCodes=[]);const E=~n.index;(function cg(t){let n=t.length;for(;n>0;){const i=t[--n];if("number"==typeof i&&i<0)return i}return 0})(m)!=E&&m.push(E),m.push(i,o,l)}}(t,n,o,N(t,i,u.hostVars,a),u)}function Ks(t,n,i,o,u,l){const m=Ei(t,n);!function Ul(t,n,i,o,u,l,m){if(null==l)t.removeAttribute(n,u,i);else{const E=null==m?we(l):m(l,o||"",u);t.setAttribute(n,u,E,i)}}(n[tn],m,l,t.value,i,o,u)}function dg(t,n,i,o,u,l){const m=l[n];if(null!==m)for(let E=0;E<m.length;)Rf(o,i,m[E++],m[E++],m[E++])}function Rf(t,n,i,o,u){const l=Jr(null);try{const m=t.inputTransforms;null!==m&&m.hasOwnProperty(o)&&(u=m[o].call(n,u)),null!==t.setInput?t.setInput(n,u,i,o):n[o]=u}finally{Jr(l)}}function hg(t,n,i){let o=null,u=0;for(;u<i.length;){const l=i[u];if(0!==l)if(5!==l){if("number"==typeof l)break;if(t.hasOwnProperty(l)){null===o&&(o=[]);const m=t[l];for(let E=0;E<m.length;E+=2)if(m[E]===n){o.push(l,m[E+1],i[u+1]);break}}u+=2}else u+=2;else u+=4}return o}function Pf(t,n,i,o){return[t,!0,!1,n,null,0,o,i,null,null,null]}function fg(t,n){const i=t.contentQueries;if(null!==i)for(let o=0;o<i.length;o+=2){const l=i[o+1];if(-1!==l){const m=t.data[l];I(i[o]),m.contentQueries(2,n[l],l)}}}function sh(t,n){return t[Zi]?t[Ns][Fr]=n:t[Zi]=n,t[Ns]=n,n}function pg(t,n,i){I(0);const o=Jr(null);try{n(t,i)}finally{Jr(o)}}function gg(t){return t[Gi]||(t[Gi]=[])}function Mf(t){return t.cleanup||(t.cleanup=[])}function qm(t,n){const i=t[qi],o=i?i.get(Uu,null):null;o&&o.handleError(n)}function oh(t,n,i,o,u){for(let l=0;l<i.length;){const m=i[l++],E=i[l++];Rf(t.data[m],n[m],o,E,u)}}function _g(t,n){const i=lr(n,t),o=i[bt];!function ts(t,n){for(let i=n.length;i<t.blueprint.length;i++)n.push(t.blueprint[i])}(o,i);const u=i[er];null!==u&&null===i[Qi]&&(i[Qi]=Gd(u,i[qi])),ki(o,i,i[Gn])}function ki(t,n,i){C(n);try{const o=t.viewQuery;null!==o&&pg(1,o,i);const u=t.template;null!==u&&z(t,n,u,1,i),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&fg(t,n),t.staticViewQueries&&pg(2,t.viewQuery,i);const l=t.components;null!==l&&function xf(t,n){for(let i=0;i<n.length;i++)_g(t,n[i])}(n,l)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{n[Qt]&=-5,Me()}}let yg=(()=>{class t{constructor(){this.all=new Set,this.queue=new Map}create(i,o,u){const l=typeof Zone>"u"?null:Zone.current,m=function Xe(t,n,i){const o=Object.create(Mn);i&&(o.consumerAllowSignalWrites=!0),o.fn=t,o.schedule=n;const u=m=>{o.cleanupFn=m};return o.ref={notify:()=>ds(o),run:()=>{if(o.dirty=!1,o.hasRun&&!Ku(o))return;o.hasRun=!0;const m=Co(o);try{o.cleanupFn(),o.cleanupFn=Lt,o.fn(u)}finally{an(o,m)}},cleanup:()=>o.cleanupFn()},o.ref}(i,x=>{this.all.has(x)&&this.queue.set(x,l)},u);let E;this.all.add(m),m.notify();const A=()=>{m.cleanup(),E?.(),this.all.delete(m),this.queue.delete(m)};return E=o?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[i,o]of this.queue)this.queue.delete(i),o?o.run(()=>i.run()):i.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=qt({token:t,providedIn:"root",factory:()=>new t})}return t})();function Nf(t,n,i){let o=i?t.styles:null,u=i?t.classes:null,l=0;if(null!==n)for(let m=0;m<n.length;m++){const E=n[m];"number"==typeof E?l=E:1==l?u=Je(u,E):2==l&&(o=Je(o,E+": "+n[++m]+";"))}i?t.styles=o:t.stylesWithoutHost=o,i?t.classes=u:t.classesWithoutHost=u}function Za(t,n,i,o,u=!1){for(;null!==i;){const l=n[i.index];null!==l&&o.push(vr(l)),sr(l)&&vg(l,o);const m=i.type;if(8&m)Za(t,n,i.child,o);else if(32&m){const E=Pu(i,n);let A;for(;A=E();)o.push(A)}else if(16&m){const E=cm(n,i);if(Array.isArray(E))o.push(...E);else{const A=Pd(n[mr]);Za(A[bt],A,E,o,!0)}}i=u?i.projectionNext:i.next}return o}function vg(t,n){for(let i=_r;i<t.length;i++){const o=t[i],u=o[bt].firstChild;null!==u&&Za(o[bt],o,u,n)}t[bi]!==t[er]&&n.push(t[bi])}function ah(t,n,i,o=!0){const u=n[Ki],l=u.rendererFactory,m=u.afterRenderEventManager;l.begin?.(),m?.begin();try{Qm(t,n,t.template,i)}catch(A){throw o&&qm(n,A),A}finally{l.end?.(),u.effectManager?.flush(),m?.end()}}function Qm(t,n,i,o){const u=n[Qt];if(256!=(256&u)){n[Ki].effectManager?.flush(),C(n);try{js(n),function ec(t){return nn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==i&&z(t,n,i,2,o);const m=3==(3&u);if(m){const x=t.preOrderCheckHooks;null!==x&&mu(n,x,null)}else{const x=t.preOrderHooks;null!==x&&Kc(n,x,0,null),No(n,0)}if(function Ym(t){for(let n=Wh(t);null!==n;n=Gh(n)){if(!n[To])continue;const i=n[Ys];for(let o=0;o<i.length;o++){wa(i[o])}}}(n),Of(n,2),null!==t.contentQueries&&fg(t,n),m){const x=t.contentCheckHooks;null!==x&&mu(n,x)}else{const x=t.contentHooks;null!==x&&Kc(n,x,1),No(n,1)}!function h(t,n){const i=t.hostBindingOpCodes;if(null===i)return;const o=Yy(n,Fn);try{for(let u=0;u<i.length;u++){const l=i[u];if(l<0)Tn(~l);else{const m=l,E=i[++u],A=i[++u];ao(E,m),o.dirty=!1;const x=Co(o);try{A(2,n[m])}finally{an(o,x)}}}}finally{null===n[Fn]&&Jy(n,Fn),Tn(-1)}}(t,n);const E=t.components;null!==E&&kf(n,E,0);const A=t.viewQuery;if(null!==A&&pg(2,A,o),m){const x=t.viewCheckHooks;null!==x&&mu(n,x)}else{const x=t.viewHooks;null!==x&&Kc(n,x,2),No(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),n[Qt]&=-73,sd(n)}finally{Me()}}}function Of(t,n){for(let i=Wh(t);null!==i;i=Gh(i))for(let o=_r;o<i.length;o++)Bl(i[o],n)}function Jm(t,n,i){Bl(lr(n,t),i)}function Bl(t,n){if(!function Ta(t){return 128==(128&t[Qt])}(t))return;const i=t[bt],o=t[Qt];if(80&o&&0===n||1024&o||2===n)Qm(i,t,i.template,t[Gn]);else if(t[Io]>0){Of(t,1);const u=i.components;null!==u&&kf(t,u,1)}}function kf(t,n,i){for(let o=0;o<n.length;o++)Jm(t,n[o],i)}class bc{get rootNodes(){const n=this._lView,i=n[bt];return Za(i,n,i.firstChild,[])}constructor(n,i){this._lView=n,this._cdRefInjectingView=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Gn]}set context(n){this._lView[Gn]=n}get destroyed(){return 256==(256&this._lView[Qt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[Ln];if(sr(n)){const i=n[8],o=i?i.indexOf(this):-1;o>-1&&(Nd(n,o),Iu(i,o))}this._attachedToViewContainer=!1}Ip(this._lView[bt],this._lView)}onDestroy(n){!function Qu(t,n){if(256==(256&t[Qt]))throw new me(911,!1);null===t[Ci]&&(t[Ci]=[]),t[Ci].push(n)}(this._lView,n)}markForCheck(){Xd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qt]&=-129}reattach(){this._lView[Qt]|=128}detectChanges(){ah(this._lView[bt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new me(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nm(t,n){vc(t,n,n[tn],2,null,null)}(this._lView[bt],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new me(902,!1);this._appRef=n}}class Sc extends bc{constructor(n){super(n),this._view=n}detectChanges(){const n=this._view;ah(n[bt],n,n[Gn],!1)}checkNoChanges(){}get context(){return null}}class Eg extends Nl{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const i=In(n);return new jl(i,this.ngModule)}}function uh(t){const n=[];for(let i in t)t.hasOwnProperty(i)&&n.push({propName:t[i],templateName:i});return n}class ch{constructor(n,i){this.injector=n,this.parentInjector=i}get(n,i,o){o=mn(o);const u=this.injector.get(n,wf,o);return u!==wf||i===wf?u:this.parentInjector.get(n,i,o)}}class jl extends xl{get inputs(){const n=this.componentDef,i=n.inputTransforms,o=uh(n.inputs);if(null!==i)for(const u of o)i.hasOwnProperty(u.propName)&&(u.transform=i[u.propName]);return o}get outputs(){return uh(this.componentDef.outputs)}constructor(n,i){super(),this.componentDef=n,this.ngModule=i,this.componentType=n.type,this.selector=function pr(t){return t.map(Ts).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!i}create(n,i,o,u){let l=(u=u||this.ngModule)instanceof ca?u:u?.injector;l&&null!==this.componentDef.getStandaloneInjector&&(l=this.componentDef.getStandaloneInjector(l)||l);const m=l?new ch(n,l):n,E=m.get(Zd,null);if(null===E)throw new me(407,!1);const X={rendererFactory:E,sanitizer:m.get(Df,null),effectManager:m.get(yg,null),afterRenderEventManager:m.get(da,null)},ge=E.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",Ye=o?function zt(t,n,i,o){const l=o.get(Hm,!1)||i===wi.ShadowDom,m=t.selectRootElement(n,l);return function Jt(t){Wt(t)}(m),m}(ge,o,this.componentDef.encapsulation,m):xd(ge,Ce,function Xm(t){const n=t.toLowerCase();return"svg"===n?"svg":"math"===n?"math":null}(Ce)),Yt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ot=null;null!==Ye&&(ot=Gd(Ye,m,!0));const En=pt(0,null,null,1,0,null,null,null,null,null,null),jn=g(null,En,null,Yt,null,null,X,ge,m,null,ot);let kr,yo;C(jn);try{const Fc=this.componentDef;let rp,oE=null;Fc.findHostDirectiveDefs?(rp=[],oE=new Map,Fc.findHostDirectiveDefs(Fc,rp,oE),rp.push(Fc)):rp=[Fc];const HC=function e_(t,n){const i=t[bt],o=ln;return t[o]=n,w(i,o,2,"#host",null)}(jn,Ye),WC=function lh(t,n,i,o,u,l,m){const E=u[bt];!function dh(t,n,i,o){for(const u of t)n.mergedAttrs=$n(n.mergedAttrs,u.hostAttrs);null!==n.mergedAttrs&&(Nf(n,n.mergedAttrs,!0),null!==i&&nf(o,i,n))}(o,t,n,m);let A=null;null!==n&&(A=Gd(n,u[qi]));const x=l.rendererFactory.createRenderer(n,i);let j=16;i.signals?j=4096:i.onPush&&(j=64);const X=g(u,tt(i),null,j,u[t.index],t,l,x,null,null,A);return E.firstCreatePass&&lg(E,t,o.length-1),sh(u,X),u[t.index]=X}(HC,Ye,Fc,rp,jn,X,ge);yo=$c(En,ln),Ye&&function sv(t,n,i,o){if(o)Wn(t,i,["ng-version",Lm.full]);else{const{attrs:u,classes:l}=function jo(t){const n=[],i=[];let o=1,u=2;for(;o<t.length;){let l=t[o];if("string"==typeof l)2===u?""!==l&&n.push(l,t[++o]):8===u&&i.push(l);else{if(!xr(u))break;u=l}o++}return{attrs:n,classes:i}}(n.selectors[0]);u&&Wn(t,i,u),l&&l.length>0&&Pp(t,i,l.join(" "))}}(ge,Fc,Ye,o),void 0!==i&&function $l(t,n,i){const o=t.projection=[];for(let u=0;u<n.length;u++){const l=i[u];o.push(null!=l?Array.from(l):null)}}(yo,this.ngContentSelectors,i),kr=function iv(t,n,i,o,u,l){const m=ri(),E=u[bt],A=Ei(m,u);Vl(E,u,m,i,null,o);for(let j=0;j<i.length;j++)Ti(xa(u,E,m.directiveStart+j,m),u);Gm(E,u,m),A&&Ti(A,u);const x=xa(u,E,m.directiveStart+m.componentOffset,m);if(t[Gn]=u[Gn]=x,null!==l)for(const j of l)j(x,n);return Q(E,m,t),x}(WC,Fc,rp,oE,jn,[ov]),ki(En,jn,null)}finally{Me()}return new vs(this.componentType,kr,Ga(yo,jn),jn,yo)}}class vs extends Ey{constructor(n,i,o,u,l){super(),this.location=o,this._rootLView=u,this._tNode=l,this.previousInputValues=null,this.instance=i,this.hostView=this.changeDetectorRef=new Sc(u),this.componentType=n}setInput(n,i){const o=this._tNode.inputs;let u;if(null!==o&&(u=o[n])){if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),i))return;const l=this._rootLView;oh(l[bt],l,u,n,i),this.previousInputValues.set(n,i),Xd(lr(this._tNode.index,l))}}get injector(){return new di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}function ov(){const t=ri();qc(nt()[bt],t)}function zl(t){let n=function t_(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),i=!0;const o=[t];for(;n;){let u;if(Qr(t))u=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new me(903,!1);u=n.\u0275dir}if(u){if(i){o.push(u);const m=t;m.inputs=Hl(t.inputs),m.inputTransforms=Hl(t.inputTransforms),m.declaredInputs=Hl(t.declaredInputs),m.outputs=Hl(t.outputs);const E=u.hostBindings;E&&r_(t,E);const A=u.viewQuery,x=u.contentQueries;if(A&&Lf(t,A),x&&$u(t,x),re(t.inputs,u.inputs),re(t.declaredInputs,u.declaredInputs),re(t.outputs,u.outputs),null!==u.inputTransforms&&(null===m.inputTransforms&&(m.inputTransforms={}),re(m.inputTransforms,u.inputTransforms)),Qr(u)&&u.data.animation){const j=t.data;j.animation=(j.animation||[]).concat(u.data.animation)}}const l=u.features;if(l)for(let m=0;m<l.length;m++){const E=l[m];E&&E.ngInherit&&E(t),E===zl&&(i=!1)}}n=Object.getPrototypeOf(n)}!function n_(t){let n=0,i=null;for(let o=t.length-1;o>=0;o--){const u=t[o];u.hostVars=n+=u.hostVars,u.hostAttrs=$n(u.hostAttrs,i=$n(i,u.hostAttrs))}}(o)}function Hl(t){return t===Dr?{}:t===wn?[]:t}function Lf(t,n){const i=t.viewQuery;t.viewQuery=i?(o,u)=>{n(o,u),i(o,u)}:n}function $u(t,n){const i=t.contentQueries;t.contentQueries=i?(o,u,l)=>{n(o,u,l),i(o,u,l)}:n}function r_(t,n){const i=t.hostBindings;t.hostBindings=i?(o,u)=>{n(o,u),i(o,u)}:n}function Wl(t){const n=t.inputConfig,i={};for(const o in n)if(n.hasOwnProperty(o)){const u=n[o];Array.isArray(u)&&u[2]&&(i[o]=u[2])}t.inputTransforms=i}function ql(t){return!!Uf(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Uf(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ho(t,n,i){return t[n]=i}function Li(t,n,i){return!Object.is(t[n],i)&&(t[n]=i,!0)}function jf(t,n,i,o){const u=nt();return Li(u,ms(),n)&&(Nn(),Ks(Bn(),u,t,n,i,o)),jf}function bg(t,n,i,o,u,l,m,E){const A=nt(),x=Nn(),j=t+ln,X=x.firstCreatePass?function mv(t,n,i,o,u,l,m,E,A){const x=n.consts,j=w(n,t,4,m||null,ps(x,E));ug(n,i,j,ps(x,A)),qc(n,j);const X=j.tView=pt(2,j,o,u,l,n.directiveRegistry,n.pipeRegistry,null,n.schemas,x,null);return null!==n.queries&&(n.queries.template(n,j),X.queries=n.queries.embeddedTView(j)),j}(j,x,A,n,i,o,u,l,m):x.data[j];gs(X,!1);const ge=td(x,A,X,t);uo()&&ml(x,A,ge,X),Ti(ge,A),sh(A,A[j]=Pf(ge,A,ge,X)),su(X)&&ue(x,A,X),null!=m&&xe(A,X,E)}let td=function Sg(t,n,i,o){return Yo(!0),n[tn].createComment("")};function nd(t,n,i){const o=nt();return Li(o,ms(),n)&&function Pe(t,n,i,o,u,l,m,E){const A=Ei(n,i);let j,x=n.inputs;!E&&null!=x&&(j=x[o])?(oh(t,i,j,o,u),Si(n)&&function de(t,n){const i=lr(n,t);16&i[Qt]||(i[Qt]|=64)}(i,n.index)):3&n.type&&(o=function be(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(o),u=null!=m?m(u,n.value||"",o):u,l.setProperty(A,o,u))}(Nn(),Bn(),o,t,n,o[tn],i,!1),nd}function Gf(t,n,i,o,u){const m=u?"class":"style";oh(t,i,n.inputs[m],m,o)}function fa(t,n,i,o){const u=nt(),l=Nn(),m=ln+t,E=u[tn],A=l.firstCreatePass?function I_(t,n,i,o,u,l){const m=n.consts,A=w(n,t,2,o,ps(m,u));return ug(n,i,A,ps(m,l)),null!==A.attrs&&Nf(A,A.attrs,!1),null!==A.mergedAttrs&&Nf(A,A.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,A),A}(m,l,u,n,i,o):l.data[m],x=Mg(l,u,A,E,n,t);u[m]=x;const j=su(A);return gs(A,!0),nf(E,x,A),32!=(32&A.flags)&&uo()&&ml(l,u,x,A),0===function Pi(){return nn.lFrame.elementDepthCount}()&&Ti(x,u),function qo(){nn.lFrame.elementDepthCount++}(),j&&(ue(l,u,A),Q(l,A,u)),null!==o&&xe(u,A),fa}function _h(){let t=ri();oo()?Po():(t=t.parent,gs(t,!1));const n=t;(function hu(t){return nn.skipHydrationRootTNode===t})(n)&&function $s(){nn.skipHydrationRootTNode=null}(),function du(){nn.lFrame.elementDepthCount--}();const i=Nn();return i.firstCreatePass&&(qc(i,t),pa(t)&&i.queries.elementEnd(t)),null!=n.classesWithoutHost&&function hd(t){return 0!=(8&t.flags)}(n)&&Gf(i,n,nt(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function fd(t){return 0!=(16&t.flags)}(n)&&Gf(i,n,nt(),n.stylesWithoutHost,!1),_h}function qf(t,n,i,o){return fa(t,n,i,o),_h(),qf}let Mg=(t,n,i,o,u,l)=>(Yo(!0),xd(o,u,function xo(){return nn.lFrame.currentNamespace}()));function yh(t,n,i){const o=nt(),u=Nn(),l=t+ln,m=u.firstCreatePass?function Zs(t,n,i,o,u){const l=n.consts,m=ps(l,o),E=w(n,t,8,"ng-container",m);return null!==m&&Nf(E,m,!0),ug(n,i,E,ps(l,u)),null!==n.queries&&n.queries.elementStart(n,E),E}(l,u,o,n,i):u.data[l];gs(m,!0);const E=p(u,o,m,t);return o[l]=E,uo()&&ml(u,o,E,m),Ti(E,o),su(m)&&(ue(u,o,m),Q(u,m,o)),null!=i&&xe(o,m),yh}function vh(){let t=ri();const n=Nn();return oo()?Po():(t=t.parent,gs(t,!1)),n.firstCreatePass&&(qc(n,t),pa(t)&&n.queries.elementEnd(t)),vh}let p=(t,n,i,o)=>(Yo(!0),Md(n[tn],""));function Re(t){return!!t&&"function"==typeof t.then}function He(t){return!!t&&"function"==typeof t.subscribe}function Rt(t,n,i,o){const u=nt(),l=Nn(),m=ri();return function tr(t,n,i,o,u,l,m){const E=su(o),x=t.firstCreatePass&&Mf(t),j=n[Gn],X=gg(n);let ge=!0;if(3&o.type||m){const ht=Ei(o,n),Ot=m?m(ht):ht,Yt=X.length,ot=m?jn=>m(vr(jn[o.index])):o.index;let En=null;if(!m&&E&&(En=function Fi(t,n,i,o){const u=t.cleanup;if(null!=u)for(let l=0;l<u.length-1;l+=2){const m=u[l];if(m===i&&u[l+1]===o){const E=n[Gi],A=u[l+2];return E.length>A?E[A]:null}"string"==typeof m&&(l+=2)}return null}(t,n,u,o.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=l,En.__ngLastListenerFn__=l,ge=!1;else{l=Ui(o,n,j,l,!1);const jn=i.listen(Ot,u,l);X.push(l,jn),x&&x.push(u,ot,Yt,Yt+1)}}else l=Ui(o,n,j,l,!1);const Ce=o.outputs;let Ye;if(ge&&null!==Ce&&(Ye=Ce[u])){const ht=Ye.length;if(ht)for(let Ot=0;Ot<ht;Ot+=2){const kr=n[Ye[Ot]][Ye[Ot+1]].subscribe(l),yo=X.length;X.push(l,kr),x&&x.push(u,o.index,yo,-(yo+1))}}}(l,u,u[tn],m,t,n,o),Rt}function Vi(t,n,i,o){try{return bn(6,n,i),!1!==i(o)}catch(u){return qm(t,u),!1}finally{bn(7,n,i)}}function Ui(t,n,i,o,u){return function l(m){if(m===Function)return o;Xd(t.componentOffset>-1?lr(t.index,n):n);let A=Vi(n,i,o,m),x=l.__ngNextListenerFn__;for(;x;)A=Vi(n,i,x,m)&&A,x=x.__ngNextListenerFn__;return u&&!1===A&&m.preventDefault(),A}}function Lc(t=1){return function St(t){return(nn.lFrame.contextLView=function hn(t,n){for(;t>0;)n=n[Un],t--;return n}(t,nn.lFrame.contextLView))[Gn]}(t)}function D_(t,n){return t<<17|n<<2}function rd(t){return t>>17&32767}function yv(t){return 2|t}function Eh(t){return(131068&t)>>2}function vv(t,n){return-131069&t|n<<2}function Ev(t){return 1|t}function RE(t,n,i,o,u){const l=t[i+1],m=null===n;let E=o?rd(l):Eh(l),A=!1;for(;0!==E&&(!1===A||m);){const j=t[E+1];PT(t[E],n)&&(A=!0,t[E+1]=o?Ev(j):yv(j)),E=o?rd(j):Eh(j)}A&&(t[i+1]=o?yv(l):Ev(l))}function PT(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&ka(t,n)>=0}const Bi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function PE(t){return t.substring(Bi.key,Bi.keyEnd)}function MT(t){return t.substring(Bi.value,Bi.valueEnd)}function ME(t,n){const i=Bi.textEnd;return i===n?-1:(n=Bi.keyEnd=function OT(t,n,i){for(;n<i&&t.charCodeAt(n)>32;)n++;return n}(t,Bi.key=n,i),Qf(t,n,i))}function xE(t,n){const i=Bi.textEnd;let o=Bi.key=Qf(t,n,i);return i===o?-1:(o=Bi.keyEnd=function kT(t,n,i){let o;for(;n<i&&(45===(o=t.charCodeAt(n))||95===o||(-33&o)>=65&&(-33&o)<=90||o>=48&&o<=57);)n++;return n}(t,o,i),o=OE(t,o,i),o=Bi.value=Qf(t,o,i),o=Bi.valueEnd=function LT(t,n,i){let o=-1,u=-1,l=-1,m=n,E=m;for(;m<i;){const A=t.charCodeAt(m++);if(59===A)return E;34===A||39===A?E=m=kE(t,A,m,i):n===m-4&&85===l&&82===u&&76===o&&40===A?E=m=kE(t,41,m,i):A>32&&(E=m),l=u,u=o,o=-33&A}return E}(t,o,i),OE(t,o,i))}function NE(t){Bi.key=0,Bi.keyEnd=0,Bi.value=0,Bi.valueEnd=0,Bi.textEnd=t.length}function Qf(t,n,i){for(;n<i&&t.charCodeAt(n)<=32;)n++;return n}function OE(t,n,i,o){return(n=Qf(t,n,i))<i&&n++,n}function kE(t,n,i,o){let u=-1,l=i;for(;l<o;){const m=t.charCodeAt(l++);if(m==n&&92!==u)return l;u=92==m&&92===u?0:m}throw new Error}function Iv(t,n){return function eu(t,n,i,o){const u=nt(),l=Nn(),m=xi(2);l.firstUpdatePass&&UE(l,t,m,o),n!==a&&Li(u,m,n)&&jE(l,l.data[_n()],u,u[tn],t,u[m+1]=function WT(t,n){return null==t||""===t||("string"==typeof n?t+=n:"object"==typeof t&&(t=_e(Mu(t)))),t}(n,i),o,m)}(t,n,null,!0),Iv}function Xa(t){tu(BE,FT,t,!1)}function FT(t,n){for(let i=function NT(t){return NE(t),xE(t,Qf(t,0,Bi.textEnd))}(n);i>=0;i=xE(n,i))BE(t,PE(n),MT(n))}function FE(t){tu(zT,Wu,t,!0)}function Wu(t,n){for(let i=function xT(t){return NE(t),ME(t,Qf(t,0,Bi.textEnd))}(n);i>=0;i=ME(n,i))Ni(t,PE(n),!0)}function tu(t,n,i,o){const u=Nn(),l=xi(2);u.firstUpdatePass&&UE(u,null,l,o);const m=nt();if(i!==a&&Li(m,l,i)){const E=u.data[_n()];if(zE(E,o)&&!VE(u,l)){let A=o?E.classesWithoutHost:E.stylesWithoutHost;null!==A&&(i=Je(A,i||"")),Gf(u,E,m,i,o)}else!function HT(t,n,i,o,u,l,m,E){u===a&&(u=wn);let A=0,x=0,j=0<u.length?u[0]:null,X=0<l.length?l[0]:null;for(;null!==j||null!==X;){const ge=A<u.length?u[A+1]:void 0,Ce=x<l.length?l[x+1]:void 0;let ht,Ye=null;j===X?(A+=2,x+=2,ge!==Ce&&(Ye=X,ht=Ce)):null===X||null!==j&&j<X?(A+=2,Ye=j):(x+=2,Ye=X,ht=Ce),null!==Ye&&jE(t,n,i,o,Ye,ht,m,E),j=A<u.length?u[A]:null,X=x<l.length?l[x]:null}}(u,E,m,m[tn],m[l+1],m[l+1]=function $T(t,n,i){if(null==i||""===i)return wn;const o=[],u=Mu(i);if(Array.isArray(u))for(let l=0;l<u.length;l++)t(o,u[l],!0);else if("object"==typeof u)for(const l in u)u.hasOwnProperty(l)&&t(o,l,u[l]);else"string"==typeof u&&n(o,u);return o}(t,n,i),o,l)}}function VE(t,n){return n>=t.expandoStartIndex}function UE(t,n,i,o){const u=t.data;if(null===u[i+1]){const l=u[_n()],m=VE(t,i);zE(l,o)&&null===n&&!m&&(n=!1),n=function VT(t,n,i,o){const u=function pu(t){const n=nn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let l=o?n.residualClasses:n.residualStyles;if(null===u)0===(o?n.classBindings:n.styleBindings)&&(i=Ng(i=Tv(null,t,n,i,o),n.attrs,o),l=null);else{const m=n.directiveStylingLast;if(-1===m||t[m]!==u)if(i=Tv(u,t,n,i,o),null===l){let A=function UT(t,n,i){const o=i?n.classBindings:n.styleBindings;if(0!==Eh(o))return t[rd(o)]}(t,n,o);void 0!==A&&Array.isArray(A)&&(A=Tv(null,t,n,A[1],o),A=Ng(A,n.attrs,o),function BT(t,n,i,o){t[rd(i?n.classBindings:n.styleBindings)]=o}(t,n,o,A))}else l=function jT(t,n,i){let o;const u=n.directiveEnd;for(let l=1+n.directiveStylingLast;l<u;l++)o=Ng(o,t[l].hostAttrs,i);return Ng(o,n.attrs,i)}(t,n,o)}return void 0!==l&&(o?n.residualClasses=l:n.residualStyles=l),i}(u,l,n,o),function ST(t,n,i,o,u,l){let m=l?n.classBindings:n.styleBindings,E=rd(m),A=Eh(m);t[o]=i;let j,x=!1;if(Array.isArray(i)?(j=i[1],(null===j||ka(i,j)>0)&&(x=!0)):j=i,u)if(0!==A){const ge=rd(t[E+1]);t[o+1]=D_(ge,E),0!==ge&&(t[ge+1]=vv(t[ge+1],o)),t[E+1]=function CT(t,n){return 131071&t|n<<17}(t[E+1],o)}else t[o+1]=D_(E,0),0!==E&&(t[E+1]=vv(t[E+1],o)),E=o;else t[o+1]=D_(A,0),0===E?E=o:t[A+1]=vv(t[A+1],o),A=o;x&&(t[o+1]=yv(t[o+1])),RE(t,j,o,!0),RE(t,j,o,!1),function RT(t,n,i,o,u){const l=u?t.residualClasses:t.residualStyles;null!=l&&"string"==typeof n&&ka(l,n)>=0&&(i[o+1]=Ev(i[o+1]))}(n,j,t,o,l),m=D_(E,A),l?n.classBindings=m:n.styleBindings=m}(u,l,n,i,m,o)}}function Tv(t,n,i,o,u){let l=null;const m=i.directiveEnd;let E=i.directiveStylingLast;for(-1===E?E=i.directiveStart:E++;E<m&&(l=n[E],o=Ng(o,l.hostAttrs,u),l!==t);)E++;return null!==t&&(i.directiveStylingLast=E),o}function Ng(t,n,i){const o=i?1:2;let u=-1;if(null!==n)for(let l=0;l<n.length;l++){const m=n[l];"number"==typeof m?u=m:u===o&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Ni(t,m,!!i||n[++l]))}return void 0===t?null:t}function BE(t,n,i){Ni(t,n,Mu(i))}function zT(t,n,i){const o=String(n);""!==o&&!o.includes(" ")&&Ni(t,o,i)}function jE(t,n,i,o,u,l,m,E){if(!(3&n.type))return;const A=t.data,x=A[E+1],j=function bT(t){return 1==(1&t)}(x)?$E(A,n,i,u,Eh(x),m):void 0;w_(j)||(w_(l)||function AT(t){return 2==(2&t)}(x)&&(l=$E(A,null,i,u,E,m)),function Rp(t,n,i,o,u){if(n)u?t.addClass(i,o):t.removeClass(i,o);else{let l=-1===o.indexOf("-")?void 0:Vh.DashCase;null==u?t.removeStyle(i,o,l):("string"==typeof u&&u.endsWith("!important")&&(u=u.slice(0,-10),l|=Vh.Important),t.setStyle(i,o,u,l))}}(o,m,so(_n(),i),u,l))}function $E(t,n,i,o,u,l){const m=null===n;let E;for(;u>0;){const A=t[u],x=Array.isArray(A),j=x?A[1]:A,X=null===j;let ge=i[u+1];ge===a&&(ge=X?wn:void 0);let Ce=X?Td(ge,o):j===o?ge:void 0;if(x&&!w_(Ce)&&(Ce=Td(A,o)),w_(Ce)&&(E=Ce,m))return E;const Ye=t[u+1];u=m?rd(Ye):Eh(Ye)}if(null!==n){let A=l?n.residualClasses:n.residualStyles;null!=A&&(E=Td(A,o))}return E}function w_(t){return void 0!==t}function zE(t,n){return 0!=(t.flags&(n?8:16))}function HE(t,n=""){const i=nt(),o=Nn(),u=t+ln,l=o.firstCreatePass?w(o,u,1,n,null):o.data[u],m=WE(o,i,l,n,t);i[u]=m,uo()&&ml(o,i,m,l),gs(l,!1)}let WE=(t,n,i,o,u)=>(Yo(!0),function Kh(t,n){return t.createText(n)}(n[tn],o));function Dv(t){return A_("",t,""),Dv}function A_(t,n,i){const o=nt(),u=function Kl(t,n,i,o){return Li(t,ms(),i)?n+we(i)+o:a}(o,t,n,i);return u!==a&&function Uo(t,n,i){const o=so(n,t);!function Zh(t,n,i){t.setValue(n,i)}(t[tn],o,i)}(o,_n(),u),A_}const Ih=void 0;var fD=["en",[["a","p"],["AM","PM"],Ih],[["AM","PM"],Ih,Ih],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ih,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ih,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ih,"{1} 'at' {0}",Ih],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function hD(t){const i=Math.floor(Math.abs(t)),o=t.toString().replace(/^[^.]*\.?/,"").length;return 1===i&&0===o?1:5}];let Yf={};function wv(t){const n=function pD(t){return t.toLowerCase().replace(/_/g,"-")}(t);let i=hI(n);if(i)return i;const o=n.split("-")[0];if(i=hI(o),i)return i;if("en"===o)return fD;throw new me(701,!1)}function dI(t){return wv(t)[Jf.PluralCase]}function hI(t){return t in Yf||(Yf[t]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[t]),Yf[t]}var Jf=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Jf||{});const Xf="en-US";let fI=Xf;function bv(t,n,i,o,u){if(t=Ze(t),Array.isArray(t))for(let l=0;l<t.length;l++)bv(t[l],n,i,o,u);else{const l=Nn(),m=nt(),E=ri();let A=za(t)?t:Ze(t.provide);const x=Kp(t),j=1048575&E.providerIndexes,X=E.directiveStart,ge=E.providerIndexes>>20;if(za(t)||!t.multi){const Ce=new _u(x,u,s),Ye=Rv(A,n,u?j:j+ge,X);-1===Ye?(ea(Pa(E,m),l,A),Sv(l,t,n.length),n.push(A),E.directiveStart++,E.directiveEnd++,u&&(E.providerIndexes+=1048576),i.push(Ce),m.push(Ce)):(i[Ye]=Ce,m[Ye]=Ce)}else{const Ce=Rv(A,n,j+ge,X),Ye=Rv(A,n,j,j+ge),Ot=Ye>=0&&i[Ye];if(u&&!Ot||!u&&!(Ce>=0&&i[Ce])){ea(Pa(E,m),l,A);const Yt=function hw(t,n,i,o,u){const l=new _u(t,i,s);return l.multi=[],l.index=n,l.componentProviders=0,VI(l,u,o&&!i),l}(u?dw:lw,i.length,u,o,x);!u&&Ot&&(i[Ye].providerFactory=Yt),Sv(l,t,n.length,0),n.push(A),E.directiveStart++,E.directiveEnd++,u&&(E.providerIndexes+=1048576),i.push(Yt),m.push(Yt)}else Sv(l,t,Ce>-1?Ce:Ye,VI(i[u?Ye:Ce],x,!u&&o));!u&&o&&Ot&&i[Ye].componentProviders++}}}function Sv(t,n,i,o){const u=za(n),l=function ly(t){return!!t.useClass}(n);if(u||l){const A=(l?Ze(n.useClass):n).prototype.ngOnDestroy;if(A){const x=t.destroyHooks||(t.destroyHooks=[]);if(!u&&n.multi){const j=x.indexOf(i);-1===j?x.push(i,[o,A]):x[j+1].push(o,A)}else x.push(i,A)}}}function VI(t,n,i){return i&&t.componentProviders++,t.multi.push(n)-1}function Rv(t,n,i,o){for(let u=i;u<o;u++)if(n[u]===t)return u;return-1}function lw(t,n,i,o){return Pv(this.multi,[])}function dw(t,n,i,o){const u=this.multi;let l;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=xa(i,i[bt],this.providerFactory.index,o);l=E.slice(0,m),Pv(u,l);for(let A=m;A<E.length;A++)l.push(E[A])}else l=[],Pv(u,l);return l}function Pv(t,n){for(let i=0;i<t.length;i++)n.push((0,t[i])());return n}function UI(t,n=[]){return i=>{i.providersResolver=(o,u)=>function cw(t,n,i){const o=Nn();if(o.firstCreatePass){const u=Qr(t);bv(i,o.data,o.blueprint,u,!0),bv(n,o.data,o.blueprint,u,!1)}}(o,u?u(t):t,n)}}class Th{}class BI{}function fw(t,n){return new Mv(t,n??null,[])}class Mv extends Th{constructor(n,i,o){super(),this._parent=i,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Eg(this);const u=rr(n);this._bootstrapComponents=qa(u.bootstrap),this._r3Injector=Vu(n,i,[{provide:Th,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver},...o],_e(n),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(n)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(i=>i()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class xv extends BI{constructor(n){super(),this.moduleType=n}create(n){return new Mv(this.moduleType,n,[])}}class jI extends Th{constructor(n){super(),this.componentFactoryResolver=new Eg(this),this.instance=null;const i=new br([...n.providers,{provide:Th,useValue:this},{provide:Nl,useValue:this.componentFactoryResolver}],n.parent||qp(),n.debugName,new Set(["environment"]));this.injector=i,n.runEnvironmentInitializers&&i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function $I(t,n,i=null){return new jI({providers:t,parent:n,debugName:i,runEnvironmentInitializers:!0}).injector}let gw=(()=>{class t{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){const o=bl(0,i.type),u=o.length>0?$I([o],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,u)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(const i of this.cachedInjectors.values())null!==i&&i.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=qt({token:t,providedIn:"environment",factory:()=>new t(It(ca))})}return t})();function zI(t){t.getStandaloneInjector=n=>n.get(gw).getOrCreateStandaloneInjector(t)}function QI(t,n,i,o){return function JI(t,n,i,o,u,l){const m=n+i;return Li(t,m,u)?ho(t,m+1,l?o.call(l,u):o(u)):Ug(t,m+1)}(nt(),li(),t,n,i,o)}function YI(t,n,i,o,u){return function XI(t,n,i,o,u,l,m){const E=n+i;return function zu(t,n,i,o){const u=Li(t,n,i);return Li(t,n+1,o)||u}(t,E,u,l)?ho(t,E+2,m?o.call(m,u,l):o(u,l)):Ug(t,E+2)}(nt(),li(),t,n,i,o,u)}function Ug(t,n){const i=t[n];return i===a?void 0:i}function Uw(){return this._results[Symbol.iterator]()}class Ov{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new la)}constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const i=Ov.prototype;i[Symbol.iterator]||(i[Symbol.iterator]=Uw)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,i){return this._results.reduce(n,i)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,i){const o=this;o.dirty=!1;const u=function Ii(t){return t.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function Ed(t,n,i){if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++){let u=t[o],l=n[o];if(i&&(u=i(u),l=i(l)),l!==u)return!1}return!0}(o._results,u,i))&&(o._results=u,o.length=u.length,o.last=u[this.length-1],o.first=u[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function jw(t,n,i,o=!0){const u=n[bt];if(function rm(t,n,i,o){const u=_r+o,l=i.length;o>0&&(i[u-1][Fr]=n),o<l-_r?(n[Fr]=i[u],ol(i,_r+o,n)):(i.push(n),n[Fr]=null),n[Ln]=i;const m=n[Yn];null!==m&&i!==m&&function im(t,n){const i=t[Ys];n[mr]!==n[Ln][Ln][mr]&&(t[To]=!0),null===i?t[Ys]=[n]:i.push(n)}(m,n);const E=n[Ai];null!==E&&E.insertView(t),n[Qt]|=128}(u,n,t,i),o){const l=Ld(i,t),m=n[tn],E=Yh(m,t[bi]);null!==E&&function H_(t,n,i,o,u,l){o[er]=u,o[Or]=n,vc(t,o,i,1,u,l)}(u,t[Or],m,n,E,l)}}let jg=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Hw}return t})();const $w=jg,zw=class extends $w{constructor(n,i,o){super(),this._declarationLView=n,this._declarationTContainer=i,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,o){const u=function Bw(t,n,i,o){const u=n.tView,E=g(t,u,i,4096&t[Qt]?4096:16,null,n,null,null,null,o?.injector??null,o?.hydrationInfo??null);E[Yn]=t[n.index];const x=t[Ai];return null!==x&&(E[Ai]=x.createEmbeddedView(u)),ki(u,E,i),E}(this._declarationLView,this._declarationTContainer,n,{injector:i,hydrationInfo:o});return new bc(u)}};function Hw(){return P_(ri(),nt())}function P_(t,n){return 4&t.type?new zw(n,t,Ga(t,n)):null}let x_=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Qw}return t})();function Qw(){return l0(ri(),nt())}const Yw=x_,u0=class extends Yw{constructor(n,i,o){super(),this._lContainer=n,this._hostTNode=i,this._hostLView=o}get element(){return Ga(this._hostTNode,this._hostLView)}get injector(){return new di(this._hostTNode,this._hostLView)}get parentInjector(){const n=_s(this._hostTNode,this._hostLView);if(Zc(n)){const i=Ra(n,this._hostLView),o=Sa(n);return new di(i[bt].data[o+8],i)}return new di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const i=c0(this._lContainer);return null!==i&&i[n]||null}get length(){return this._lContainer.length-_r}createEmbeddedView(n,i,o){let u,l;"number"==typeof o?u=o:null!=o&&(u=o.index,l=o.injector);const E=n.createEmbeddedViewImpl(i||{},l,null);return this.insertImpl(E,u,false),E}createComponent(n,i,o,u,l){const m=n&&!function Oa(t){return"function"==typeof t}(n);let E;if(m)E=i;else{const ht=i||{};E=ht.index,o=ht.injector,u=ht.projectableNodes,l=ht.environmentInjector||ht.ngModuleRef}const A=m?n:new jl(In(n)),x=o||this.parentInjector;if(!l&&null==A.ngModule){const Ot=(m?x:this.parentInjector).get(ca,null);Ot&&(l=Ot)}In(A.componentType??{});const Ce=A.create(x,u,null,l);return this.insertImpl(Ce.hostView,E,false),Ce}insert(n,i){return this.insertImpl(n,i,!1)}insertImpl(n,i,o){const u=n._lView;if(function Da(t){return sr(t[Ln])}(u)){const A=this.indexOf(n);if(-1!==A)this.detach(A);else{const x=u[Ln],j=new u0(x,x[Or],x[Ln]);j.detach(j.indexOf(n))}}const m=this._adjustIndex(i),E=this._lContainer;return jw(E,u,m,!o),n.attachToViewContainerRef(),ol(kv(E),m,n),n}move(n,i){return this.insert(n,i)}indexOf(n){const i=c0(this._lContainer);return null!==i?i.indexOf(n):-1}remove(n){const i=this._adjustIndex(n,-1),o=Nd(this._lContainer,i);o&&(Iu(kv(this._lContainer),i),Ip(o[bt],o))}detach(n){const i=this._adjustIndex(n,-1),o=Nd(this._lContainer,i);return o&&null!=Iu(kv(this._lContainer),i)?new bc(o):null}_adjustIndex(n,i=0){return n??this.length+i}};function c0(t){return t[8]}function kv(t){return t[8]||(t[8]=[])}function l0(t,n){let i;const o=n[t.index];return sr(o)?i=o:(i=Pf(o,n,null,t),n[t.index]=i,sh(n,i)),d0(i,n,t,o),new u0(i,t,n)}let d0=function h0(t,n,i,o){if(t[bi])return;let u;u=8&i.type?vr(o):function Jw(t,n){const i=t[tn],o=i.createComment(""),u=Ei(n,t);return ja(i,Yh(i,u),o,function Ap(t,n){return t.nextSibling(n)}(i,u),!1),o}(n,i),t[bi]=u};class Lv{constructor(n){this.queryList=n,this.matches=null}clone(){return new Lv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Fv{constructor(n=[]){this.queries=n}createEmbeddedView(n){const i=n.queries;if(null!==i){const o=null!==n.contentQueries?n.contentQueries[0]:i.length,u=[];for(let l=0;l<o;l++){const m=i.getByIndex(l);u.push(this.queries[m.indexInDeclarationView].clone())}return new Fv(u)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let i=0;i<this.queries.length;i++)null!==E0(n,i).matches&&this.queries[i].setDirty()}}class f0{constructor(n,i,o=null){this.predicate=n,this.flags=i,this.read=o}}class Vv{constructor(n=[]){this.queries=n}elementStart(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(n,i)}elementEnd(n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementEnd(n)}embeddedTView(n){let i=null;for(let o=0;o<this.length;o++){const u=null!==i?i.length:0,l=this.getByIndex(o).embeddedTView(n,u);l&&(l.indexInDeclarationView=o,null!==i?i.push(l):i=[l])}return null!==i?new Vv(i):null}template(n,i){for(let o=0;o<this.queries.length;o++)this.queries[o].template(n,i)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Uv{constructor(n,i=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=i}elementStart(n,i){this.isApplyingToNode(i)&&this.matchTNode(n,i)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,i){this.elementStart(n,i)}embeddedTView(n,i){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,i),new Uv(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const i=this._declarationNodeIndex;let o=n.parent;for(;null!==o&&8&o.type&&o.index!==i;)o=o.parent;return i===(null!==o?o.index:-1)}return this._appliesToNextNode}matchTNode(n,i){const o=this.metadata.predicate;if(Array.isArray(o))for(let u=0;u<o.length;u++){const l=o[u];this.matchTNodeWithReadOption(n,i,tA(i,l)),this.matchTNodeWithReadOption(n,i,uc(i,n,l,!1,!1))}else o===jg?4&i.type&&this.matchTNodeWithReadOption(n,i,-1):this.matchTNodeWithReadOption(n,i,uc(i,n,o,!1,!1))}matchTNodeWithReadOption(n,i,o){if(null!==o){const u=this.metadata.read;if(null!==u)if(u===Kd||u===x_||u===jg&&4&i.type)this.addMatch(i.index,-2);else{const l=uc(i,n,u,!1,!1);null!==l&&this.addMatch(i.index,l)}else this.addMatch(i.index,o)}}addMatch(n,i){null===this.matches?this.matches=[n,i]:this.matches.push(n,i)}}function tA(t,n){const i=t.localNames;if(null!==i)for(let o=0;o<i.length;o+=2)if(i[o]===n)return i[o+1];return null}function rA(t,n,i,o){return-1===i?function nA(t,n){return 11&t.type?Ga(t,n):4&t.type?P_(t,n):null}(n,t):-2===i?function iA(t,n,i){return i===Kd?Ga(n,t):i===jg?P_(n,t):i===x_?l0(n,t):void 0}(t,n,o):xa(t,t[bt],i,n)}function p0(t,n,i,o){const u=n[Ai].queries[o];if(null===u.matches){const l=t.data,m=i.matches,E=[];for(let A=0;A<m.length;A+=2){const x=m[A];E.push(x<0?null:rA(n,l[x],m[A+1],i.metadata.read))}u.matches=E}return u.matches}function Bv(t,n,i,o){const u=t.queries.getByIndex(i),l=u.matches;if(null!==l){const m=p0(t,n,u,i);for(let E=0;E<l.length;E+=2){const A=l[E];if(A>0)o.push(m[E/2]);else{const x=l[E+1],j=n[-A];for(let X=_r;X<j.length;X++){const ge=j[X];ge[Yn]===ge[Ln]&&Bv(ge[bt],ge,x,o)}if(null!==j[Ys]){const X=j[Ys];for(let ge=0;ge<X.length;ge++){const Ce=X[ge];Bv(Ce[bt],Ce,x,o)}}}}}return o}function g0(t){const n=nt(),i=Nn(),o=rc();I(o+1);const u=E0(i,o);if(t.dirty&&function lu(t){return 4==(4&t[Qt])}(n)===(2==(2&u.metadata.flags))){if(null===u.matches)t.reset([]);else{const l=u.crossesNgTemplate?Bv(i,n,o,[]):p0(i,n,u,o);t.reset(l,Dy),t.notifyOnChanges()}return!0}return!1}function m0(t,n,i,o){const u=Nn();if(u.firstCreatePass){const l=ri();(function v0(t,n,i){null===t.queries&&(t.queries=new Vv),t.queries.track(new Uv(n,i))})(u,new f0(n,i,o),l.index),function aA(t,n){const i=t.contentQueries||(t.contentQueries=[]);n!==(i.length?i[i.length-1]:-1)&&i.push(t.queries.length-1,n)}(u,t),2==(2&i)&&(u.staticContentQueries=!0)}!function y0(t,n,i){const o=new Ov(4==(4&i));(function On(t,n,i,o){const u=gg(n);u.push(i),t.firstCreatePass&&Mf(t).push(o,u.length-1)})(t,n,o,o.destroy),null===n[Ai]&&(n[Ai]=new Fv),n[Ai].queries.push(new Lv(o))}(u,nt(),i)}function _0(){return function oA(t,n){return t[Ai].queries[n].queryList}(nt(),rc())}function E0(t,n){return t.queries.getByIndex(n)}function jv(t){return!!rr(t)}const F0=new Ct("Application Initializer");let Gv=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,o)=>{this.resolve=i,this.reject=o}),this.appInits=kt(F0,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const i=[];for(const u of this.appInits){const l=u();if(Re(l))i.push(l);else if(He(l)){const m=new Promise((E,A)=>{l.subscribe({complete:E,error:A})});i.push(m)}}const o=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{o()}).catch(u=>{this.reject(u)}),0===i.length&&o(),this.initialized=!0}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),V0=(()=>{class t{log(i){console.log(i)}warn(i){console.warn(i)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const O_=new Ct("LocaleId",{providedIn:"root",factory:()=>kt(O_,Ut.Optional|Ut.SkipSelf)||function RA(){return typeof $localize<"u"&&$localize.locale||Xf}()}),PA=new Ct("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let U0=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ae.X(!1)}add(){this.hasPendingTasks.next(!0);const i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class xA{constructor(n,i){this.ngModuleFactory=n,this.componentFactories=i}}let NA=(()=>{class t{compileModuleSync(i){return new xv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){const o=this.compileModuleSync(i),l=qa(rr(i).declarations).reduce((m,E)=>{const A=In(E);return A&&m.push(new jl(A)),m},[]);return new xA(o,l)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const z0=new Ct(""),H0=new Ct("");let Zv,tC=(()=>{class t{constructor(i,o,u){this._ngZone=i,this.registry=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Zv||(function nC(t){Zv=t}(u),u.addToWindow(o)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Di.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(o=>!o.updateCb||!o.updateCb(i)||(clearTimeout(o.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,o,u){let l=-1;o&&o>0&&(l=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==l),i(this._didWork,this.getPendingTasks())},o)),this._callbacks.push({doneCb:i,timeoutId:l,updateCb:u})}whenStable(i,o,u){if(u&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,o,u),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,o,u){return[]}static#e=this.\u0275fac=function(o){return new(o||t)(It(Di),It(W0),It(H0))};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac})}return t})(),W0=(()=>{class t{constructor(){this._applications=new Map}registerApplication(i,o){this._applications.set(i,o)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,o=!0){return Zv?.findTestabilityInTree(this,i,o)??null}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),id=null;const G0=new Ct("AllowMultipleToken"),Qv=new Ct("PlatformDestroyListeners"),Yv=new Ct("appBootstrapListener");class sC{constructor(n,i){this.name=n,this.token=i}}function Z0(t,n,i=[]){const o=`Platform: ${n}`,u=new Ct(o);return(l=[])=>{let m=Jv();if(!m||m.injector.get(G0,!1)){const E=[...i,...l,{provide:u,useValue:!0}];t?t(E):function oC(t){if(id&&!id.get(G0,!1))throw new me(400,!1);(function q0(){!function Zu(t){uu=t}(()=>{throw new me(600,!1)})})(),id=t;const n=t.get(Y0);(function K0(t){t.get(Zp,null)?.forEach(i=>i())})(t)}(function Q0(t=[],n){return Oi.create({name:n,providers:[{provide:$d,useValue:"platform"},{provide:Qv,useValue:new Set([()=>id=null])},...t]})}(E,o))}return function uC(t){const n=Jv();if(!n)throw new me(401,!1);return n}()}}function Jv(){return id?.get(Y0)??null}let Y0=(()=>{class t{constructor(i){this._injector=i,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(i,o){const u=function cC(t="zone.js",n){return"noop"===t?new Ly:"zone.js"===t?new Di(n):t}(o?.ngZone,function J0(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}({eventCoalescing:o?.ngZoneEventCoalescing,runCoalescing:o?.ngZoneRunCoalescing}));return u.run(()=>{const l=function pw(t,n,i){return new Mv(t,n,i)}(i.moduleType,this.injector,function rT(t){return[{provide:Di,useFactory:t},{provide:Cl,multi:!0,useFactory:()=>{const n=kt(dC,{optional:!0});return()=>n.initialize()}},{provide:nT,useFactory:lC},{provide:Bm,useFactory:jm}]}(()=>u)),m=l.injector.get(Uu,null);return u.runOutsideAngular(()=>{const E=u.onError.subscribe({next:A=>{m.handleError(A)}});l.onDestroy(()=>{L_(this._modules,l),E.unsubscribe()})}),function X0(t,n,i){try{const o=i();return Re(o)?o.catch(u=>{throw n.runOutsideAngular(()=>t.handleError(u)),u}):o}catch(o){throw n.runOutsideAngular(()=>t.handleError(o)),o}}(m,u,()=>{const E=l.injector.get(Gv);return E.runInitializers(),E.donePromise.then(()=>(function pI(t){Mt(t,"Expected localeId to be defined"),"string"==typeof t&&(fI=t.toLowerCase().replace(/_/g,"-"))}(l.injector.get(O_,Xf)||Xf),this._moduleDoBootstrap(l),l))})})}bootstrapModule(i,o=[]){const u=eT({},o);return function rC(t,n,i){const o=new xv(i);return Promise.resolve(o)}(0,0,i).then(l=>this.bootstrapModuleFactory(l,u))}_moduleDoBootstrap(i){const o=i.injector.get(np);if(i._bootstrapComponents.length>0)i._bootstrapComponents.forEach(u=>o.bootstrap(u));else{if(!i.instance.ngDoBootstrap)throw new me(-403,!1);i.instance.ngDoBootstrap(o)}this._modules.push(i)}onDestroy(i){this._destroyListeners.push(i)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new me(404,!1);this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o());const i=this._injector.get(Qv,null);i&&(i.forEach(o=>o()),i.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(o){return new(o||t)(It(Oi))};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function eT(t,n){return Array.isArray(n)?n.reduce(eT,t):{...t,...n}}let np=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=kt(nT),this.zoneIsStable=kt(Bm),this.componentTypes=[],this.components=[],this.isStable=kt(U0).hasPendingTasks.pipe((0,Te.w)(i=>i?(0,ce.of)(!1):this.zoneIsStable),(0,Ae.x)(),(0,ye.B)()),this._injector=kt(ca)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,o){const u=i instanceof xl;if(!this._injector.get(Gv).done)throw!u&&ss(i),new me(405,!1);let m;m=u?i:this._injector.get(Nl).resolveComponentFactory(i),this.componentTypes.push(m.componentType);const E=function iC(t){return t.isBoundToModule}(m)?void 0:this._injector.get(Th),x=m.create(Oi.NULL,[],o||m.selector,E),j=x.location.nativeElement,X=x.injector.get(z0,null);return X?.registerApplication(j),x.onDestroy(()=>{this.detachView(x.hostView),L_(this.components,x),X?.unregisterApplication(j)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new me(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){const o=i;this._views.push(o),o.attachToAppRef(this)}detachView(i){const o=i;L_(this._views,o),o.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);const o=this._injector.get(Yv,[]);o.push(...this._bootstrapListeners),o.forEach(u=>u(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>L_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new me(406,!1);const i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function L_(t,n){const i=t.indexOf(n);i>-1&&t.splice(i,1)}const nT=new Ct("",{providedIn:"root",factory:()=>kt(Uu).handleError.bind(void 0)});function lC(){const t=kt(Di),n=kt(Uu);return i=>t.runOutsideAngular(()=>n.handleError(i))}let dC=(()=>{class t{constructor(){this.zone=kt(Di),this.applicationRef=kt(np)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275prov=qt({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function fC(){return!1}let pC=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=gC}return t})();function gC(t){return function mC(t,n,i){if(Si(t)&&!i){const o=lr(t.index,n);return new bc(o,o)}return 47&t.type?new bc(n[mr],n):null}(ri(),nt(),16==(16&t))}class aT{constructor(){}supports(n){return ql(n)}create(n){return new TC(n)}}const IC=(t,n)=>n;class TC{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||IC}forEachItem(n){let i;for(i=this._itHead;null!==i;i=i._next)n(i)}forEachOperation(n){let i=this._itHead,o=this._removalsHead,u=0,l=null;for(;i||o;){const m=!o||i&&i.currentIndex<cT(o,u,l)?i:o,E=cT(m,u,l),A=m.currentIndex;if(m===o)u--,o=o._nextRemoved;else if(i=i._next,null==m.previousIndex)u++;else{l||(l=[]);const x=E-u,j=A-u;if(x!=j){for(let ge=0;ge<x;ge++){const Ce=ge<l.length?l[ge]:l[ge]=0,Ye=Ce+ge;j<=Ye&&Ye<x&&(l[ge]=Ce+1)}l[m.previousIndex]=j-x}}E!==A&&n(m,E,A)}}forEachPreviousItem(n){let i;for(i=this._previousItHead;null!==i;i=i._nextPrevious)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachMovedItem(n){let i;for(i=this._movesHead;null!==i;i=i._nextMoved)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}forEachIdentityChange(n){let i;for(i=this._identityChangesHead;null!==i;i=i._nextIdentityChange)n(i)}diff(n){if(null==n&&(n=[]),!ql(n))throw new me(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let u,l,m,i=this._itHead,o=!1;if(Array.isArray(n)){this.length=n.length;for(let E=0;E<this.length;E++)l=n[E],m=this._trackByFn(E,l),null!==i&&Object.is(i.trackById,m)?(o&&(i=this._verifyReinsertion(i,l,m,E)),Object.is(i.item,l)||this._addIdentityChange(i,l)):(i=this._mismatch(i,l,m,E),o=!0),i=i._next}else u=0,function a_(t,n){if(Array.isArray(t))for(let i=0;i<t.length;i++)n(t[i]);else{const i=t[Symbol.iterator]();let o;for(;!(o=i.next()).done;)n(o.value)}}(n,E=>{m=this._trackByFn(u,E),null!==i&&Object.is(i.trackById,m)?(o&&(i=this._verifyReinsertion(i,E,m,u)),Object.is(i.item,E)||this._addIdentityChange(i,E)):(i=this._mismatch(i,E,m,u),o=!0),i=i._next,u++}),this.length=u;return this._truncate(i),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,i,o,u){let l;return null===n?l=this._itTail:(l=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._reinsertAfter(n,l,u)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(o,u))?(Object.is(n.item,i)||this._addIdentityChange(n,i),this._moveAfter(n,l,u)):n=this._addAfter(new DC(i,o),l,u),n}_verifyReinsertion(n,i,o,u){let l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(o,null);return null!==l?n=this._reinsertAfter(l,n._prev,u):n.currentIndex!=u&&(n.currentIndex=u,this._addToMoves(n,u)),n}_truncate(n){for(;null!==n;){const i=n._next;this._addToRemovals(this._unlink(n)),n=i}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,i,o){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const u=n._prevRemoved,l=n._nextRemoved;return null===u?this._removalsHead=l:u._nextRemoved=l,null===l?this._removalsTail=u:l._prevRemoved=u,this._insertAfter(n,i,o),this._addToMoves(n,o),n}_moveAfter(n,i,o){return this._unlink(n),this._insertAfter(n,i,o),this._addToMoves(n,o),n}_addAfter(n,i,o){return this._insertAfter(n,i,o),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,i,o){const u=null===i?this._itHead:i._next;return n._next=u,n._prev=i,null===u?this._itTail=n:u._prev=n,null===i?this._itHead=n:i._next=n,null===this._linkedRecords&&(this._linkedRecords=new uT),this._linkedRecords.put(n),n.currentIndex=o,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const i=n._prev,o=n._next;return null===i?this._itHead=o:i._next=o,null===o?this._itTail=i:o._prev=i,n}_addToMoves(n,i){return n.previousIndex===i||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new uT),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,i){return n.item=i,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class DC{constructor(n,i){this.item=n,this.trackById=i,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class wC{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,i){let o;for(o=this._head;null!==o;o=o._nextDup)if((null===i||i<=o.currentIndex)&&Object.is(o.trackById,n))return o;return null}remove(n){const i=n._prevDup,o=n._nextDup;return null===i?this._head=o:i._nextDup=o,null===o?this._tail=i:o._prevDup=i,null===this._head}}class uT{constructor(){this.map=new Map}put(n){const i=n.trackById;let o=this.map.get(i);o||(o=new wC,this.map.set(i,o)),o.add(n)}get(n,i){const u=this.map.get(n);return u?u.get(n,i):null}remove(n){const i=n.trackById;return this.map.get(i).remove(n)&&this.map.delete(i),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cT(t,n,i){const o=t.previousIndex;if(null===o)return o;let u=0;return i&&o<i.length&&(u=i[o]),o+n+u}class lT{constructor(){}supports(n){return n instanceof Map||Uf(n)}create(){return new AC}}class AC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let i;for(i=this._mapHead;null!==i;i=i._next)n(i)}forEachPreviousItem(n){let i;for(i=this._previousMapHead;null!==i;i=i._nextPrevious)n(i)}forEachChangedItem(n){let i;for(i=this._changesHead;null!==i;i=i._nextChanged)n(i)}forEachAddedItem(n){let i;for(i=this._additionsHead;null!==i;i=i._nextAdded)n(i)}forEachRemovedItem(n){let i;for(i=this._removalsHead;null!==i;i=i._nextRemoved)n(i)}diff(n){if(n){if(!(n instanceof Map||Uf(n)))throw new me(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i=this._mapHead;if(this._appendAfter=null,this._forEach(n,(o,u)=>{if(i&&i.key===u)this._maybeAddToChanges(i,o),this._appendAfter=i,i=i._next;else{const l=this._getOrCreateRecordForKey(u,o);i=this._insertBeforeOrAppend(i,l)}}),i){i._prev&&(i._prev._next=null),this._removalsHead=i;for(let o=i;null!==o;o=o._nextRemoved)o===this._mapHead&&(this._mapHead=null),this._records.delete(o.key),o._nextRemoved=o._next,o.previousValue=o.currentValue,o.currentValue=null,o._prev=null,o._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,i){if(n){const o=n._prev;return i._next=n,i._prev=o,n._prev=i,o&&(o._next=i),n===this._mapHead&&(this._mapHead=i),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=i,i._prev=this._appendAfter):this._mapHead=i,this._appendAfter=i,null}_getOrCreateRecordForKey(n,i){if(this._records.has(n)){const u=this._records.get(n);this._maybeAddToChanges(u,i);const l=u._prev,m=u._next;return l&&(l._next=m),m&&(m._prev=l),u._next=null,u._prev=null,u}const o=new CC(n);return this._records.set(n,o),o.currentValue=i,this._addToAdditions(o),o}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,i){Object.is(i,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=i,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,i){n instanceof Map?n.forEach(i):Object.keys(n).forEach(o=>i(n[o],o))}}class CC{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dT(){return new rE([new aT])}let rE=(()=>{class t{static#e=this.\u0275prov=qt({token:t,providedIn:"root",factory:dT});constructor(i){this.factories=i}static create(i,o){if(null!=o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||dT()),deps:[[t,new Fo,new oa]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(null!=o)return o;throw new me(901,!1)}}return t})();function hT(){return new iE([new lT])}let iE=(()=>{class t{static#e=this.\u0275prov=qt({token:t,providedIn:"root",factory:hT});constructor(i){this.factories=i}static create(i,o){if(o){const u=o.factories.slice();i=i.concat(u)}return new t(i)}static extend(i){return{provide:t,useFactory:o=>t.create(i,o||hT()),deps:[[t,new Fo,new oa]]}}find(i){const o=this.factories.find(u=>u.supports(i));if(o)return o;throw new me(901,!1)}}return t})();const RC=Z0(null,"core",[]);let PC=(()=>{class t{constructor(i){}static#e=this.\u0275fac=function(o){return new(o||t)(It(np))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=Et({})}return t})();function jC(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function zC(t){const n=In(t);if(!n)return null;const i=new jl(n);return{get selector(){return i.selector},get type(){return i.componentType},get inputs(){return i.inputs},get outputs(){return i.outputs},get ngContentSelectors(){return i.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}},721:(Tt,Se,L)=>{L.d(Se,{Ot:()=>le,ZF:()=>dt,hX:()=>Je,z6:()=>ae});var _=L(3182),G=L(5879),Y=L(1920);class le{constructor(Ne){return Ne}}class ae{constructor(){return(0,_.C6)()}}const Te=new G.OlP("angularfire2._apps"),Ae={provide:le,useFactory:function ye(me){return me&&1===me.length?me[0]:new le((0,_.Mq)())},deps:[[new G.FiY,Te]]},ee={provide:ae,deps:[[new G.FiY,Te]]};function re(me){return(Ne,we)=>{const Be=Ne.runOutsideAngular(()=>me(we));return new le(Be)}}let _e=(()=>{class me{constructor(we){(0,_.KN)("angularfire",Y.q4.full,"core"),(0,_.KN)("angularfire",Y.q4.full,"app"),(0,_.KN)("angular",G.q4F.full,we.toString())}static \u0275fac=function(Be){return new(Be||me)(G.LFG(G.Lbi))};static \u0275mod=G.oAB({type:me});static \u0275inj=G.cJS({providers:[Ae,ee]})}return me})();function Je(me,...Ne){return{ngModule:_e,providers:[{provide:Te,useFactory:re(me),multi:!0,deps:[G.R0b,G.zs3,Y.HU,...Ne]}]}}const dt=(0,Y.u3)(_.ZF,!0)},4162:(Tt,Se,L)=>{L.d(Se,{dh:()=>_e,v0:()=>_t,AR:()=>wt});var _=L(1920),G=L(5879),Y=L(721),le=L(3182),ae=L(6376);L(534),L(9058),L(7879),L(4537);class re{constructor(on){return on}}class _e{constructor(){return(0,_.vb)("auth")}}const qe=new G.OlP("angularfire2.auth-instances");function Ze(sn){return(on,Hn)=>{const Kn=on.runOutsideAngular(()=>sn(Hn));return new re(Kn)}}const dt={provide:_e,deps:[[new G.FiY,qe]]},et={provide:re,useFactory:function at(sn,on){const Hn=(0,_.JM)("auth",sn,on);return Hn&&new re(Hn)},deps:[[new G.FiY,qe],Y.Ot]};let Ft=(()=>{class sn{constructor(){(0,le.KN)("angularfire",_.q4.full,"auth")}static \u0275fac=function(Kn){return new(Kn||sn)};static \u0275mod=G.oAB({type:sn});static \u0275inj=G.cJS({providers:[et,dt]})}return sn})();function wt(sn,...on){return{ngModule:Ft,providers:[{provide:qe,useFactory:Ze(sn),multi:!0,deps:[G.R0b,G.zs3,_.HU,Y.z6,[new G.FiY,_.Rf],...on]}]}}const _t=(0,_.u3)(ae.o,!0)},7217:(Tt,Se,L)=>{L.d(Se,{Dh:()=>Te,GT:()=>ce,cc:()=>qe,hO:()=>Je,on:()=>ee,pX:()=>ae,xv:()=>Ae});var _=L(5879),G=L(1920),Y=L(7142);const le=["ngOnDestroy"],ae=(et,Ft,wt,me={})=>new Proxy(et,{get:(Ne,we)=>wt.runOutsideAngular(()=>{if(et[we])return me?.spy?.get&&me.spy.get(we,et[we]),et[we];if(le.indexOf(we)>-1)return()=>{};const Be=Ft.toPromise().then(Qe=>{const lt=Qe?.[we];return"function"==typeof lt?lt.bind(Qe):lt?.then?lt.then(ie=>wt.run(()=>ie)):wt.run(()=>lt)});return new Proxy(()=>{},{get:(Qe,lt)=>Be[lt],apply:(Qe,lt,ie)=>Be.then(ut=>{const Pt=ut?.(...ie);return me?.spy?.apply&&me.spy.apply(we,ie,Pt),Pt})})})}),ce=(et,Ft)=>{Ft.forEach(wt=>{Object.getOwnPropertyNames(wt.prototype||wt).forEach(me=>{Object.defineProperty(et.prototype,me,Object.getOwnPropertyDescriptor(wt.prototype||wt,me))})})};class ye{constructor(Ft){return Ft}}const Te=new _.OlP("angularfire2.app.options"),Ae=new _.OlP("angularfire2.app.name");function ee(et,Ft,wt){const Ne="object"==typeof wt&&wt||{};Ne.name=Ne.name||"string"==typeof wt&&wt||"[DEFAULT]";const Be=Y.Z.apps.filter(Qe=>Qe&&Qe.name===Ne.name)[0]||Ft.runOutsideAngular(()=>Y.Z.initializeApp(et,Ne));try{if(JSON.stringify(et)!==JSON.stringify(Be.options)){const Qe=!!module.hot;re("error",`${Be.name} Firebase App already initialized with different options${Qe?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ye(Be)}const re=(et,...Ft)=>{(0,_.X6Q)()&&typeof console<"u"&&console[et](...Ft)},_e={provide:ye,useFactory:ee,deps:[Te,_.R0b,[new _.FiY,Ae]]};let Je=(()=>{class et{static initializeApp(wt,me){return{ngModule:et,providers:[{provide:Te,useValue:wt},{provide:Ae,useValue:me}]}}constructor(wt){Y.Z.registerVersion("angularfire",G.q4.full,"core"),Y.Z.registerVersion("angularfire",G.q4.full,"app-compat"),Y.Z.registerVersion("angular",_.q4F.full,wt.toString())}static \u0275fac=function(me){return new(me||et)(_.LFG(_.Lbi))};static \u0275mod=_.oAB({type:et});static \u0275inj=_.cJS({providers:[_e]})}return et})();function qe(et,Ft,wt,me,Ne){const[,we,Be]=globalThis.\u0275AngularfireInstanceCache.find(Qe=>Qe[0]===et)||[];if(we)return function at(et,Ft){try{return et.toString()===Ft.toString()}catch{return et===Ft}}(Ne,Be)||(dt("error",`${Ft} was already initialized on the ${wt} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),dt("warn",{is:Ne,was:Be})),we;{const Qe=me();return globalThis.\u0275AngularfireInstanceCache.push([et,Qe,Ne]),Qe}}const Ze=typeof module<"u"&&!!module.hot,dt=(et,...Ft)=>{(0,_.X6Q)()&&typeof console<"u"&&console[et](...Ft)};globalThis.\u0275AngularfireInstanceCache||=[]},4643:(Tt,Se,L)=>{L.d(Se,{ad:()=>kn,Cm:()=>dt});var _=L(1920),G=L(5879),Y=L(721),le=L(4162),ae=L(3182),ce=L(5588);class ye{constructor(ai){return ai}}const Te="firestore",re=new G.OlP("angularfire2.firestore-instances");function Je(fr){return(ai,ji)=>{const Mr=ai.runOutsideAngular(()=>fr(ji));return new ye(Mr)}}const qe={provide:class Ae{constructor(){return(0,_.vb)(Te)}},deps:[[new G.FiY,re]]},at={provide:ye,useFactory:function _e(fr,ai){const ji=(0,_.JM)(Te,fr,ai);return ji&&new ye(ji)},deps:[[new G.FiY,re],Y.Ot]};let Ze=(()=>{class fr{constructor(){(0,ae.KN)("angularfire",_.q4.full,"fst")}static \u0275fac=function(Mr){return new(Mr||fr)};static \u0275mod=G.oAB({type:fr});static \u0275inj=G.cJS({providers:[at,qe]})}return fr})();function dt(fr,...ai){return{ngModule:Ze,providers:[{provide:re,useFactory:Je(fr),multi:!0,deps:[G.R0b,G.zs3,_.HU,Y.z6,[new G.FiY,le.dh],[new G.FiY,_.Rf],...ai]}]}}const kn=(0,_.u3)(ce.ad,!0)},1920:(Tt,Se,L)=>{L.d(Se,{q4:()=>qe,iC:()=>Pt,HU:()=>we,Rf:()=>et,vb:()=>dt,JM:()=>Ze,u3:()=>ft});var _=L(5879),G=L(3182),Y=L(1954),ae=L(2631);const ye=new class ce extends ae.v{}(class le extends Y.o{constructor(ze,he){super(ze,he),this.scheduler=ze,this.work=he}schedule(ze,he=0){return he>0?super.schedule(ze,he):(this.delay=he,this.state=ze,this.scheduler.flush(this),this)}execute(ze,he){return he>0||this.closed?super.execute(ze,he):this._execute(ze,he)}requestAsyncId(ze,he,Z=0){return null!=Z&&Z>0||null==Z&&this.delay>0?super.requestAsyncId(ze,he,Z):(ze.flush(this),0)}});var Ae=L(6321),ee=L(5592),re=L(9397),_e=L(5137),Je=L(3093);const qe=new _.GfV("ANGULARFIRE2_VERSION");function Ze(_t,ze,he){if(ze){if(1===ze.length)return ze[0];const Ve=ze.filter(je=>je.app===he);if(1===Ve.length)return Ve[0]}return he.container.getProvider(_t).getImmediate({optional:!0})}const dt=(_t,ze)=>{const he=ze?[ze]:(0,G.C6)(),Z=[];return he.forEach(ve=>{ve.container.getProvider(_t).instances.forEach(je=>{Z.includes(je)||Z.push(je)})}),Z};class et{constructor(){return dt(Ft)}}const Ft="app-check";function wt(){}class me{zone;delegate;constructor(ze,he=ye){this.zone=ze,this.delegate=he}now(){return this.delegate.now()}schedule(ze,he,Z){const ve=this.zone;return this.delegate.schedule(function(je){ve.runGuarded(()=>{ze.apply(this,[je])})},he,Z)}}class Ne{zone;task=null;constructor(ze){this.zone=ze}call(ze,he){const Z=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wt,{},wt,wt)),he.pipe((0,re.b)({next:Z,complete:Z,error:Z})).subscribe(ze).add(Z)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let we=(()=>{class _t{ngZone;outsideAngular;insideAngular;constructor(he){this.ngZone=he,this.outsideAngular=he.runOutsideAngular(()=>new me(Zone.current)),this.insideAngular=he.run(()=>new me(Zone.current,Ae.z)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(Z){return new(Z||_t)(_.LFG(_.R0b))};static \u0275prov=_.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"root"})}return _t})();function Be(){const _t=globalThis.\u0275AngularFireScheduler;if(!_t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return _t}function lt(_t){return Be().ngZone.run(()=>_t())}function Pt(_t){return function ar(_t){return function(he){return(he=he.lift(new Ne(_t.ngZone))).pipe((0,_e.R)(_t.outsideAngular),(0,Je.Q)(_t.insideAngular))}}(Be())(_t)}const gt=(_t,ze)=>function(){const Z=arguments;return ze&&setTimeout(()=>{"scheduled"===ze.state&&ze.invoke()},10),lt(()=>_t.apply(void 0,Z))},ft=(_t,ze)=>function(){let he;const Z=arguments;for(let Ve=0;Ve<arguments.length;Ve++)"function"==typeof Z[Ve]&&(ze&&(he||=lt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wt,{},wt,wt))),Z[Ve]=gt(Z[Ve],he));const ve=function Qe(_t){return Be().ngZone.runOutsideAngular(()=>_t())}(()=>_t.apply(this,Z));if(!ze){if(ve instanceof ee.y){const Ve=Be();return ve.pipe((0,_e.R)(Ve.outsideAngular),(0,Je.Q)(Ve.insideAngular))}return lt(()=>ve)}return ve instanceof ee.y?ve.pipe(Pt):ve instanceof Promise?lt(()=>new Promise((Ve,je)=>ve.then(We=>lt(()=>Ve(We)),We=>lt(()=>je(We))))):"function"==typeof ve&&he?function(){return setTimeout(()=>{he&&"scheduled"===he.state&&he.invoke()},10),ve.apply(this,arguments)}:lt(()=>ve)}},6593:(Tt,Se,L)=>{L.d(Se,{Dx:()=>Wr,b2:()=>Cn,q6:()=>qt});var _=L(5879),G=L(6814);class Y extends G.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class le extends Y{static makeCurrent(){(0,G.HT)(new le)}onAndCancel(B,V,q){return B.addEventListener(V,q),()=>{B.removeEventListener(V,q)}}dispatchEvent(B,V){B.dispatchEvent(V)}remove(B){B.parentNode&&B.parentNode.removeChild(B)}createElement(B,V){return(V=V||this.getDefaultDocument()).createElement(B)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(B){return B.nodeType===Node.ELEMENT_NODE}isShadowRoot(B){return B instanceof DocumentFragment}getGlobalEventTarget(B,V){return"window"===V?window:"document"===V?B:"body"===V?B.body:null}getBaseHref(B){const V=function ce(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==V?null:function Te(W){ye=ye||document.createElement("a"),ye.setAttribute("href",W);const B=ye.pathname;return"/"===B.charAt(0)?B:`/${B}`}(V)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(B){return(0,G.Mx)(document.cookie,B)}}let ye,ae=null,ee=(()=>{class W{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(q){return new(q||W)};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();const re=new _.OlP("EventManagerPlugins");let _e=(()=>{class W{constructor(V,q){this._zone=q,this._eventNameToPlugin=new Map,V.forEach(J=>{J.manager=this}),this._plugins=V.slice().reverse()}addEventListener(V,q,J){return this._findPluginFor(q).addEventListener(V,q,J)}getZone(){return this._zone}_findPluginFor(V){let q=this._eventNameToPlugin.get(V);if(q)return q;if(q=this._plugins.find($e=>$e.supports(V)),!q)throw new _.vHH(5101,!1);return this._eventNameToPlugin.set(V,q),q}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(re),_.LFG(_.R0b))};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();class Je{constructor(B){this._doc=B}}const qe="ng-app-id";let at=(()=>{class W{constructor(V,q,J,$e={}){this.doc=V,this.appId=q,this.nonce=J,this.platformId=$e,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,G.PM)($e),this.resetHostNodes()}addStyles(V){for(const q of V)1===this.changeUsageCount(q,1)&&this.onStyleAdded(q)}removeStyles(V){for(const q of V)this.changeUsageCount(q,-1)<=0&&this.onStyleRemoved(q)}ngOnDestroy(){const V=this.styleNodesInDOM;V&&(V.forEach(q=>q.remove()),V.clear());for(const q of this.getAllStyles())this.onStyleRemoved(q);this.resetHostNodes()}addHost(V){this.hostNodes.add(V);for(const q of this.getAllStyles())this.addStyleToHost(V,q)}removeHost(V){this.hostNodes.delete(V)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(V){for(const q of this.hostNodes)this.addStyleToHost(q,V)}onStyleRemoved(V){const q=this.styleRef;q.get(V)?.elements?.forEach(J=>J.remove()),q.delete(V)}collectServerRenderedStyles(){const V=this.doc.head?.querySelectorAll(`style[${qe}="${this.appId}"]`);if(V?.length){const q=new Map;return V.forEach(J=>{null!=J.textContent&&q.set(J.textContent,J)}),q}return null}changeUsageCount(V,q){const J=this.styleRef;if(J.has(V)){const $e=J.get(V);return $e.usage+=q,$e.usage}return J.set(V,{usage:q,elements:[]}),q}getStyleElement(V,q){const J=this.styleNodesInDOM,$e=J?.get(q);if($e?.parentNode===V)return J.delete(q),$e.removeAttribute(qe),$e;{const st=this.doc.createElement("style");return this.nonce&&st.setAttribute("nonce",this.nonce),st.textContent=q,this.platformIsServer&&st.setAttribute(qe,this.appId),st}}addStyleToHost(V,q){const J=this.getStyleElement(V,q);V.appendChild(J);const $e=this.styleRef,st=$e.get(q)?.elements;st?st.push(J):$e.set(q,{elements:[J],usage:1})}resetHostNodes(){const V=this.hostNodes;V.clear(),V.add(this.doc.head)}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(G.K0),_.LFG(_.AFp),_.LFG(_.Ojb,8),_.LFG(_.Lbi))};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();const Ze={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},dt=/%COMP%/g,Ne=new _.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function Qe(W,B){return B.map(V=>V.replace(dt,W))}let lt=(()=>{class W{constructor(V,q,J,$e,st,It,Xt,kt=null){this.eventManager=V,this.sharedStylesHost=q,this.appId=J,this.removeStylesOnCompDestroy=$e,this.doc=st,this.platformId=It,this.ngZone=Xt,this.nonce=kt,this.rendererByCompId=new Map,this.platformIsServer=(0,G.PM)(It),this.defaultRenderer=new ie(V,st,Xt,this.platformIsServer)}createRenderer(V,q){if(!V||!q)return this.defaultRenderer;this.platformIsServer&&q.encapsulation===_.ifc.ShadowDom&&(q={...q,encapsulation:_.ifc.Emulated});const J=this.getOrCreateRenderer(V,q);return J instanceof _t?J.applyToHost(V):J instanceof ft&&J.applyStyles(),J}getOrCreateRenderer(V,q){const J=this.rendererByCompId;let $e=J.get(q.id);if(!$e){const st=this.doc,It=this.ngZone,Xt=this.eventManager,kt=this.sharedStylesHost,mn=this.removeStylesOnCompDestroy,en=this.platformIsServer;switch(q.encapsulation){case _.ifc.Emulated:$e=new _t(Xt,kt,q,this.appId,mn,st,It,en);break;case _.ifc.ShadowDom:return new gt(Xt,kt,V,q,st,It,this.nonce,en);default:$e=new ft(Xt,kt,q,mn,st,It,en)}J.set(q.id,$e)}return $e}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(_e),_.LFG(at),_.LFG(_.AFp),_.LFG(Ne),_.LFG(G.K0),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(_.Ojb))};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();class ie{constructor(B,V,q,J){this.eventManager=B,this.doc=V,this.ngZone=q,this.platformIsServer=J,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(B,V){return V?this.doc.createElementNS(Ze[V]||V,B):this.doc.createElement(B)}createComment(B){return this.doc.createComment(B)}createText(B){return this.doc.createTextNode(B)}appendChild(B,V){(ar(B)?B.content:B).appendChild(V)}insertBefore(B,V,q){B&&(ar(B)?B.content:B).insertBefore(V,q)}removeChild(B,V){B&&B.removeChild(V)}selectRootElement(B,V){let q="string"==typeof B?this.doc.querySelector(B):B;if(!q)throw new _.vHH(-5104,!1);return V||(q.textContent=""),q}parentNode(B){return B.parentNode}nextSibling(B){return B.nextSibling}setAttribute(B,V,q,J){if(J){V=J+":"+V;const $e=Ze[J];$e?B.setAttributeNS($e,V,q):B.setAttribute(V,q)}else B.setAttribute(V,q)}removeAttribute(B,V,q){if(q){const J=Ze[q];J?B.removeAttributeNS(J,V):B.removeAttribute(`${q}:${V}`)}else B.removeAttribute(V)}addClass(B,V){B.classList.add(V)}removeClass(B,V){B.classList.remove(V)}setStyle(B,V,q,J){J&(_.JOm.DashCase|_.JOm.Important)?B.style.setProperty(V,q,J&_.JOm.Important?"important":""):B.style[V]=q}removeStyle(B,V,q){q&_.JOm.DashCase?B.style.removeProperty(V):B.style[V]=""}setProperty(B,V,q){B[V]=q}setValue(B,V){B.nodeValue=V}listen(B,V,q){if("string"==typeof B&&!(B=(0,G.q)().getGlobalEventTarget(this.doc,B)))throw new Error(`Unsupported event target ${B} for event ${V}`);return this.eventManager.addEventListener(B,V,this.decoratePreventDefault(q))}decoratePreventDefault(B){return V=>{if("__ngUnwrap__"===V)return B;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>B(V)):B(V))&&V.preventDefault()}}}function ar(W){return"TEMPLATE"===W.tagName&&void 0!==W.content}class gt extends ie{constructor(B,V,q,J,$e,st,It,Xt){super(B,$e,st,Xt),this.sharedStylesHost=V,this.hostEl=q,this.shadowRoot=q.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const kt=Qe(J.id,J.styles);for(const mn of kt){const en=document.createElement("style");It&&en.setAttribute("nonce",It),en.textContent=mn,this.shadowRoot.appendChild(en)}}nodeOrShadowRoot(B){return B===this.hostEl?this.shadowRoot:B}appendChild(B,V){return super.appendChild(this.nodeOrShadowRoot(B),V)}insertBefore(B,V,q){return super.insertBefore(this.nodeOrShadowRoot(B),V,q)}removeChild(B,V){return super.removeChild(this.nodeOrShadowRoot(B),V)}parentNode(B){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(B)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ft extends ie{constructor(B,V,q,J,$e,st,It,Xt){super(B,$e,st,It),this.sharedStylesHost=V,this.removeStylesOnCompDestroy=J,this.styles=Xt?Qe(Xt,q.styles):q.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class _t extends ft{constructor(B,V,q,J,$e,st,It,Xt){const kt=J+"-"+q.id;super(B,V,q,$e,st,It,Xt,kt),this.contentAttr=function we(W){return"_ngcontent-%COMP%".replace(dt,W)}(kt),this.hostAttr=function Be(W){return"_nghost-%COMP%".replace(dt,W)}(kt)}applyToHost(B){this.applyStyles(),this.setAttribute(B,this.hostAttr,"")}createElement(B,V){const q=super.createElement(B,V);return super.setAttribute(q,this.contentAttr,""),q}}let ze=(()=>{class W extends Je{constructor(V){super(V)}supports(V){return!0}addEventListener(V,q,J){return V.addEventListener(q,J,!1),()=>this.removeEventListener(V,q,J)}removeEventListener(V,q,J){return V.removeEventListener(q,J)}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(G.K0))};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();const he=["alt","control","meta","shift"],Z={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ve={alt:W=>W.altKey,control:W=>W.ctrlKey,meta:W=>W.metaKey,shift:W=>W.shiftKey};let Ve=(()=>{class W extends Je{constructor(V){super(V)}supports(V){return null!=W.parseEventName(V)}addEventListener(V,q,J){const $e=W.parseEventName(q),st=W.eventCallback($e.fullKey,J,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,G.q)().onAndCancel(V,$e.domEventName,st))}static parseEventName(V){const q=V.toLowerCase().split("."),J=q.shift();if(0===q.length||"keydown"!==J&&"keyup"!==J)return null;const $e=W._normalizeKey(q.pop());let st="",It=q.indexOf("code");if(It>-1&&(q.splice(It,1),st="code."),he.forEach(kt=>{const mn=q.indexOf(kt);mn>-1&&(q.splice(mn,1),st+=kt+".")}),st+=$e,0!=q.length||0===$e.length)return null;const Xt={};return Xt.domEventName=J,Xt.fullKey=st,Xt}static matchEventFullKeyCode(V,q){let J=Z[V.key]||V.key,$e="";return q.indexOf("code.")>-1&&(J=V.code,$e="code."),!(null==J||!J)&&(J=J.toLowerCase()," "===J?J="space":"."===J&&(J="dot"),he.forEach(st=>{st!==J&&(0,ve[st])(V)&&($e+=st+".")}),$e+=J,$e===q)}static eventCallback(V,q,J){return $e=>{W.matchEventFullKeyCode($e,V)&&J.runGuarded(()=>q($e))}}static _normalizeKey(V){return"esc"===V?"escape":V}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(G.K0))};static#t=this.\u0275prov=_.Yz7({token:W,factory:W.\u0275fac})}return W})();const qt=(0,_.eFA)(_._c5,"browser",[{provide:_.Lbi,useValue:G.bD},{provide:_.g9A,useValue:function yt(){le.makeCurrent()},multi:!0},{provide:G.K0,useFactory:function Vt(){return(0,_.RDi)(document),document},deps:[]}]),zr=new _.OlP(""),Et=[{provide:_.rWj,useClass:class Ae{addToWindow(B){_.dqk.getAngularTestability=(q,J=!0)=>{const $e=B.findTestabilityInTree(q,J);if(null==$e)throw new _.vHH(5103,!1);return $e},_.dqk.getAllAngularTestabilities=()=>B.getAllTestabilities(),_.dqk.getAllAngularRootElements=()=>B.getAllRootElements(),_.dqk.frameworkStabilizers||(_.dqk.frameworkStabilizers=[]),_.dqk.frameworkStabilizers.push(q=>{const J=_.dqk.getAllAngularTestabilities();let $e=J.length,st=!1;const It=function(Xt){st=st||Xt,$e--,0==$e&&q(st)};J.forEach(Xt=>{Xt.whenStable(It)})})}findTestabilityInTree(B,V,q){return null==V?null:B.getTestability(V)??(q?(0,G.q)().isShadowRoot(V)?this.findTestabilityInTree(B,V.host,!0):this.findTestabilityInTree(B,V.parentElement,!0):null)}},deps:[]},{provide:_.lri,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]},{provide:_.dDg,useClass:_.dDg,deps:[_.R0b,_.eoX,_.rWj]}],yn=[{provide:_.zSh,useValue:"root"},{provide:_.qLn,useFactory:function qn(){return new _.qLn},deps:[]},{provide:re,useClass:ze,multi:!0,deps:[G.K0,_.R0b,_.Lbi]},{provide:re,useClass:Ve,multi:!0,deps:[G.K0]},lt,at,_e,{provide:_.FYo,useExisting:lt},{provide:G.JF,useClass:ee,deps:[]},[]];let Cn=(()=>{class W{constructor(V){}static withServerTransition(V){return{ngModule:W,providers:[{provide:_.AFp,useValue:V.appId}]}}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(zr,12))};static#t=this.\u0275mod=_.oAB({type:W});static#n=this.\u0275inj=_.cJS({providers:[...yn,...Et],imports:[G.ez,_.hGG]})}return W})(),Wr=(()=>{class W{constructor(V){this._doc=V}getTitle(){return this._doc.title}setTitle(V){this._doc.title=V||""}static#e=this.\u0275fac=function(q){return new(q||W)(_.LFG(G.K0))};static#t=this.\u0275prov=_.Yz7({token:W,factory:function(q){let J=null;return J=q?new q:function $t(){return new Wr((0,_.LFG)(G.K0))}(),J},providedIn:"root"})}return W})();typeof window<"u"&&window},8878:(Tt,Se,L)=>{L.d(Se,{Bz:()=>ud,lC:()=>Zi});var _=L(5879),G=L(5592),Y=L(4674),ae=L(2459),ce=L(2096),ye=L(5619),Te=L(7453),Ae=L(2737),ee=L(7400),re=L(9940),_e=L(2714),Je=L(8251),qe=L(7103);function at(...I){const b=(0,re.yG)(I),v=(0,re.jO)(I),{args:C,keys:M}=(0,Te.D)(I);if(0===C.length)return(0,ae.D)([],b);const $=new G.y(function Ze(I,b,v=Ae.y){return C=>{dt(b,()=>{const{length:M}=I,$=new Array(M);let ne=M,ke=M;for(let Me=0;Me<M;Me++)dt(b,()=>{const St=(0,ae.D)(I[Me],b);let hn=!1;St.subscribe((0,Je.x)(C,_n=>{$[Me]=_n,hn||(hn=!0,ke--),ke||C.next(v($.slice()))},()=>{--ne||C.complete()}))},C)},C)}}(C,b,M?ne=>(0,_e.n)(M,ne):Ae.y));return v?$.pipe((0,ee.Z)(v)):$}function dt(I,b,v){I?(0,qe.f)(v,I,b):b()}var et=L(6973),Ft=L(5211),wt=L(4911),me=L(8407),Ne=L(8504),we=L(6232),Be=L(3168),Qe=L(8645),lt=L(7394),ie=L(6814),ut=L(7398),Pt=L(4664),ar=L(8180),gt=L(7921),ft=L(2181),_t=L(1631),ze=L(1374);function he(I,b){return(0,Y.m)(b)?(0,_t.z)(I,b,1):(0,_t.z)(I,1)}var Z=L(9397),ve=L(4829),Ve=L(9360);function je(I){return(0,Ve.e)((b,v)=>{let $,C=null,M=!1;C=b.subscribe((0,Je.x)(v,void 0,void 0,ne=>{$=(0,ve.Xf)(I(ne,je(I)(b))),C?(C.unsubscribe(),C=null,$.subscribe(v)):M=!0})),M&&(C.unsubscribe(),C=null,$.subscribe(v))})}var We=L(6699),Ge=L(3572);function Mt(I){return I<=0?()=>we.E:(0,Ve.e)((b,v)=>{let C=[];b.subscribe((0,Je.x)(v,M=>{C.push(M),I<C.length&&C.shift()},()=>{for(const M of C)v.next(M);v.complete()},void 0,()=>{C=null}))})}var yt=L(3026),Vt=L(975);function An(I){return(0,Ve.e)((b,v)=>{try{b.subscribe(v)}finally{v.add(I)}})}var qt=L(6196),zr=L(2420),yn=L(7537),Cn=L(6593);const mt="primary",vt=Symbol("RouteTitle");class Hr{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const v=this.params[b];return Array.isArray(v)?v[0]:v}return null}getAll(b){if(this.has(b)){const v=this.params[b];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function $t(I){return new Hr(I)}function Wr(I,b,v){const C=v.path.split("/");if(C.length>I.length||"full"===v.pathMatch&&(b.hasChildren()||C.length<I.length))return null;const M={};for(let $=0;$<C.length;$++){const ne=C[$],ke=I[$];if(ne.startsWith(":"))M[ne.substring(1)]=ke;else if(ne!==ke.path)return null}return{consumed:I.slice(0,C.length),posParams:M}}function it(I,b){const v=I?Object.keys(I):void 0,C=b?Object.keys(b):void 0;if(!v||!C||v.length!=C.length)return!1;let M;for(let $=0;$<v.length;$++)if(M=v[$],!Ut(I[M],b[M]))return!1;return!0}function Ut(I,b){if(Array.isArray(I)&&Array.isArray(b)){if(I.length!==b.length)return!1;const v=[...I].sort(),C=[...b].sort();return v.every((M,$)=>C[$]===M)}return I===b}function Kt(I){return I.length>0?I[I.length-1]:null}function Bt(I){return function le(I){return!!I&&(I instanceof G.y||(0,Y.m)(I.lift)&&(0,Y.m)(I.subscribe))}(I)?I:(0,_.QGY)(I)?(0,ae.D)(Promise.resolve(I)):(0,ce.of)(I)}const kn={exact:function Tr(I,b,v){if(!Dt(I.segments,b.segments)||!cn(I.segments,b.segments,v)||I.numberOfChildren!==b.numberOfChildren)return!1;for(const C in b.children)if(!I.children[C]||!Tr(I.children[C],b.children[C],v))return!1;return!0},subset:Ct},zn={exact:function Dn(I,b){return it(I,b)},subset:function Gr(I,b){return Object.keys(b).length<=Object.keys(I).length&&Object.keys(b).every(v=>Ut(I[v],b[v]))},ignored:()=>!0};function Jn(I,b,v){return kn[v.paths](I.root,b.root,v.matrixParams)&&zn[v.queryParams](I.queryParams,b.queryParams)&&!("exact"===v.fragment&&I.fragment!==b.fragment)}function Ct(I,b,v){return Pr(I,b,b.segments,v)}function Pr(I,b,v,C){if(I.segments.length>v.length){const M=I.segments.slice(0,v.length);return!(!Dt(M,v)||b.hasChildren()||!cn(M,v,C))}if(I.segments.length===v.length){if(!Dt(I.segments,v)||!cn(I.segments,v,C))return!1;for(const M in b.children)if(!I.children[M]||!Ct(I.children[M],b.children[M],C))return!1;return!0}{const M=v.slice(0,I.segments.length),$=v.slice(I.segments.length);return!!(Dt(I.segments,M)&&cn(I.segments,M,C)&&I.children[mt])&&Pr(I.children[mt],b,$,C)}}function cn(I,b,v){return b.every((C,M)=>zn[v](I[M].parameters,C.parameters))}class hr{constructor(b=new Oe([],{}),v={},C=null){this.root=b,this.queryParams=v,this.fragment=C}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$t(this.queryParams)),this._queryParamMap}toString(){return Hn.serialize(this)}}class Oe{constructor(b,v){this.segments=b,this.children=v,this.parent=null,Object.values(v).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kn(this)}}class xt{constructor(b,v){this.path=b,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=$t(this.parameters)),this._parameterMap}toString(){return J(this)}}function Dt(I,b){return I.length===b.length&&I.every((v,C)=>v.path===b[C].path)}let sn=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:function(){return new on},providedIn:"root"})}return I})();class on{parse(b){const v=new ji(b);return new hr(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(b){const v=`/${qr(b.root,!0)}`,C=function st(I){const b=Object.keys(I).map(v=>{const C=I[v];return Array.isArray(C)?C.map(M=>`${Xr(v)}=${Xr(M)}`).join("&"):`${Xr(v)}=${Xr(C)}`}).filter(v=>!!v);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${v}${C}${"string"==typeof b.fragment?`#${function W(I){return encodeURI(I)}(b.fragment)}`:""}`}}const Hn=new on;function Kn(I){return I.segments.map(b=>J(b)).join("/")}function qr(I,b){if(!I.hasChildren())return Kn(I);if(b){const v=I.children[mt]?qr(I.children[mt],!1):"",C=[];return Object.entries(I.children).forEach(([M,$])=>{M!==mt&&C.push(`${M}:${qr($,!1)}`)}),C.length>0?`${v}(${C.join("//")})`:v}{const v=function jt(I,b){let v=[];return Object.entries(I.children).forEach(([C,M])=>{C===mt&&(v=v.concat(b(M,C)))}),Object.entries(I.children).forEach(([C,M])=>{C!==mt&&(v=v.concat(b(M,C)))}),v}(I,(C,M)=>M===mt?[qr(I.children[mt],!1)]:[`${M}:${qr(C,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[mt]?`${Kn(I)}/${v[0]}`:`${Kn(I)}/(${v.join("//")})`}}function ur(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xr(I){return ur(I).replace(/%3B/gi,";")}function B(I){return ur(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function V(I){return decodeURIComponent(I)}function q(I){return V(I.replace(/\+/g,"%20"))}function J(I){return`${B(I.path)}${function $e(I){return Object.keys(I).map(b=>`;${B(b)}=${B(I[b])}`).join("")}(I.parameters)}`}const It=/^[^\/()?;#]+/;function Xt(I){const b=I.match(It);return b?b[0]:""}const kt=/^[^\/()?;=#]+/,en=/^[^=?&#]+/,fr=/^[^&#]+/;class ji{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(b.length>0||Object.keys(v).length>0)&&(C[mt]=new Oe(b,v)),C}parseSegment(){const b=Xt(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new _.vHH(4009,!1);return this.capture(b),new xt(V(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const v=function mn(I){const b=I.match(kt);return b?b[0]:""}(this.remaining);if(!v)return;this.capture(v);let C="";if(this.consumeOptional("=")){const M=Xt(this.remaining);M&&(C=M,this.capture(C))}b[V(v)]=V(C)}parseQueryParam(b){const v=function cr(I){const b=I.match(en);return b?b[0]:""}(this.remaining);if(!v)return;this.capture(v);let C="";if(this.consumeOptional("=")){const ne=function ai(I){const b=I.match(fr);return b?b[0]:""}(this.remaining);ne&&(C=ne,this.capture(C))}const M=q(v),$=q(C);if(b.hasOwnProperty(M)){let ne=b[M];Array.isArray(ne)||(ne=[ne],b[M]=ne),ne.push($)}else b[M]=$}parseParens(b){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Xt(this.remaining),M=this.remaining[C.length];if("/"!==M&&")"!==M&&";"!==M)throw new _.vHH(4010,!1);let $;C.indexOf(":")>-1?($=C.slice(0,C.indexOf(":")),this.capture($),this.capture(":")):b&&($=mt);const ne=this.parseChildren();v[$]=1===Object.keys(ne).length?ne[mt]:new Oe([],ne),this.consumeOptional("//")}return v}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new _.vHH(4011,!1)}}function Mr(I){return I.segments.length>0?new Oe([],{[mt]:I}):I}function Es(I){const b={};for(const C of Object.keys(I.children)){const $=Es(I.children[C]);if(C===mt&&0===$.segments.length&&$.hasChildren())for(const[ne,ke]of Object.entries($.children))b[ne]=ke;else($.segments.length>0||$.hasChildren())&&(b[C]=$)}return function wi(I){if(1===I.numberOfChildren&&I.children[mt]){const b=I.children[mt];return new Oe(I.segments.concat(b.segments),b.children)}return I}(new Oe(I.segments,b))}function Dr(I){return I instanceof hr}function Ue(I){let b;const M=Mr(function v($){const ne={};for(const Me of $.children){const St=v(Me);ne[Me.outlet]=St}const ke=new Oe($.url,ne);return $===I&&(b=ke),ke}(I.root));return b??M}function De(I,b,v,C){let M=I;for(;M.parent;)M=M.parent;if(0===b.length)return Ht(M,M,M,v,C);const $=function Xn(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new fn(!0,0,I);let b=0,v=!1;const C=I.reduce((M,$,ne)=>{if("object"==typeof $&&null!=$){if($.outlets){const ke={};return Object.entries($.outlets).forEach(([Me,St])=>{ke[Me]="string"==typeof St?St.split("/"):St}),[...M,{outlets:ke}]}if($.segmentPath)return[...M,$.segmentPath]}return"string"!=typeof $?[...M,$]:0===ne?($.split("/").forEach((ke,Me)=>{0==Me&&"."===ke||(0==Me&&""===ke?v=!0:".."===ke?b++:""!=ke&&M.push(ke))}),M):[...M,$]},[]);return new fn(v,b,C)}(b);if($.toRoot())return Ht(M,M,new Oe([],{}),v,C);const ne=function ei(I,b,v){if(I.isAbsolute)return new Wn(b,!0,0);if(!v)return new Wn(b,!1,NaN);if(null===v.parent)return new Wn(v,!0,0);const C=Ke(I.commands[0])?0:1;return function ns(I,b,v){let C=I,M=b,$=v;for(;$>M;){if($-=M,C=C.parent,!C)throw new _.vHH(4005,!1);M=C.segments.length}return new Wn(C,!1,M-$)}(v,v.segments.length-1+C,I.numberOfDoubleDots)}($,M,I),ke=ne.processChildren?rs(ne.segmentGroup,ne.index,$.commands):Ms(ne.segmentGroup,ne.index,$.commands);return Ht(M,ne.segmentGroup,ke,v,C)}function Ke(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function At(I){return"object"==typeof I&&null!=I&&I.outlets}function Ht(I,b,v,C,M){let ne,$={};C&&Object.entries(C).forEach(([Me,St])=>{$[Me]=Array.isArray(St)?St.map(hn=>`${hn}`):`${St}`}),ne=I===b?v:Zt(I,b,v);const ke=Mr(Es(ne));return new hr(ke,$,M)}function Zt(I,b,v){const C={};return Object.entries(I.children).forEach(([M,$])=>{C[M]=$===b?v:Zt($,b,v)}),new Oe(I.segments,C)}class fn{constructor(b,v,C){if(this.isAbsolute=b,this.numberOfDoubleDots=v,this.commands=C,b&&C.length>0&&Ke(C[0]))throw new _.vHH(4003,!1);const M=C.find(At);if(M&&M!==Kt(C))throw new _.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Wn{constructor(b,v,C){this.segmentGroup=b,this.processChildren=v,this.index=C}}function Ms(I,b,v){if(I||(I=new Oe([],{})),0===I.segments.length&&I.hasChildren())return rs(I,b,v);const C=function nu(I,b,v){let C=0,M=b;const $={match:!1,pathIndex:0,commandIndex:0};for(;M<I.segments.length;){if(C>=v.length)return $;const ne=I.segments[M],ke=v[C];if(At(ke))break;const Me=`${ke}`,St=C<v.length-1?v[C+1]:null;if(M>0&&void 0===Me)break;if(Me&&St&&"object"==typeof St&&void 0===St.outlets){if(!xr(Me,St,ne))return $;C+=2}else{if(!xr(Me,{},ne))return $;C++}M++}return{match:!0,pathIndex:M,commandIndex:C}}(I,b,v),M=v.slice(C.commandIndex);if(C.match&&C.pathIndex<I.segments.length){const $=new Oe(I.segments.slice(0,C.pathIndex),{});return $.children[mt]=new Oe(I.segments.slice(C.pathIndex),I.children),rs($,0,M)}return C.match&&0===M.length?new Oe(I.segments,{}):C.match&&!I.hasChildren()?Is(I,b,v):C.match?rs(I,0,M):Is(I,b,v)}function rs(I,b,v){if(0===v.length)return new Oe(I.segments,{});{const C=function $n(I){return At(I[0])?I[0].outlets:{[mt]:I}}(v),M={};if(Object.keys(C).some($=>$!==mt)&&I.children[mt]&&1===I.numberOfChildren&&0===I.children[mt].segments.length){const $=rs(I.children[mt],b,v);return new Oe(I.segments,$.children)}return Object.entries(C).forEach(([$,ne])=>{"string"==typeof ne&&(ne=[ne]),null!==ne&&(M[$]=Ms(I.children[$],b,ne))}),Object.entries(I.children).forEach(([$,ne])=>{void 0===C[$]&&(M[$]=ne)}),new Oe(I.segments,M)}}function Is(I,b,v){const C=I.segments.slice(0,b);let M=0;for(;M<v.length;){const $=v[M];if(At($)){const Me=Lr($.outlets);return new Oe(C,Me)}if(0===M&&Ke(v[0])){C.push(new xt(I.segments[b].path,vo(v[0]))),M++;continue}const ne=At($)?$.outlets[mt]:`${$}`,ke=M<v.length-1?v[M+1]:null;ne&&ke&&Ke(ke)?(C.push(new xt(ne,vo(ke))),M+=2):(C.push(new xt(ne,{})),M++)}return new Oe(C,{})}function Lr(I){const b={};return Object.entries(I).forEach(([v,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(b[v]=Is(new Oe([],{}),0,C))}),b}function vo(I){const b={};return Object.entries(I).forEach(([v,C])=>b[v]=`${C}`),b}function xr(I,b,v){return I==v.path&&it(b,v.parameters)}const xs="imperative";class mi{constructor(b,v){this.id=b,this.url=v}}class Qn extends mi{constructor(b,v,C="imperative",M=null){super(b,v),this.type=0,this.navigationTrigger=C,this.restoredState=M}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fi extends mi{constructor(b,v,C){super(b,v),this.urlAfterRedirects=C,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nr extends mi{constructor(b,v,C,M){super(b,v),this.reason=C,this.code=M,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Pn extends mi{constructor(b,v,C,M){super(b,v),this.reason=C,this.code=M,this.type=16}}class is extends mi{constructor(b,v,C,M){super(b,v),this.error=C,this.target=M,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ts extends mi{constructor(b,v,C,M){super(b,v),this.urlAfterRedirects=C,this.state=M,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pr extends mi{constructor(b,v,C,M){super(b,v),this.urlAfterRedirects=C,this.state=M,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jo extends mi{constructor(b,v,C,M,$){super(b,v),this.urlAfterRedirects=C,this.state=M,this.shouldActivate=$,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ru extends mi{constructor(b,v,C,M){super(b,v),this.urlAfterRedirects=C,this.state=M,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends mi{constructor(b,v,C,M){super(b,v),this.urlAfterRedirects=C,this.state=M,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iu{constructor(b){this.route=b,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $i{constructor(b){this.route=b,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gr{constructor(b){this.snapshot=b,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zi{constructor(b){this.snapshot=b,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Eo{constructor(b){this.snapshot=b,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hi{constructor(b){this.snapshot=b,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ds{constructor(b,v,C){this.routerEvent=b,this.position=v,this.anchor=C,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class In{}class nr{constructor(b){this.url=b}}class ss{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new rr,this.attachRef=null}}let rr=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,C){const M=this.getOrCreateContext(v);M.outlet=C,this.contexts.set(v,M)}onChildOutletDestroyed(v){const C=this.getContext(v);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let C=this.getContext(v);return C||(C=new ss,this.contexts.set(v,C)),C}getContext(v){return this.contexts.get(v)||null}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();class _i{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const v=this.pathFromRoot(b);return v.length>1?v[v.length-2]:null}children(b){const v=Wi(b,this._root);return v?v.children.map(C=>C.value):[]}firstChild(b){const v=Wi(b,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(b){const v=pi(b,this._root);return v.length<2?[]:v[v.length-2].children.map(M=>M.value).filter(M=>M!==b)}pathFromRoot(b){return pi(b,this._root).map(v=>v.value)}}function Wi(I,b){if(I===b.value)return b;for(const v of b.children){const C=Wi(I,v);if(C)return C}return null}function pi(I,b){if(I===b.value)return[b];for(const v of b.children){const C=pi(I,v);if(C.length)return C.unshift(b),C}return[]}class yi{constructor(b,v){this.value=b,this.children=v}toString(){return`TreeNode(${this.value})`}}function ti(I){const b={};return I&&I.children.forEach(v=>b[v.value.outlet]=v),b}class er extends _i{constructor(b,v){super(b),this.snapshot=v,Gn(this,b)}toString(){return this.snapshot.toString()}}function bt(I,b){const v=function Qt(I,b){const ne=new Or([],{},{},"",{},mt,b,null,{});return new Gi("",new yi(ne,[]))}(0,b),C=new ye.X([new xt("",{})]),M=new ye.X({}),$=new ye.X({}),ne=new ye.X({}),ke=new ye.X(""),Me=new Ln(C,M,ne,ke,$,mt,b,v.root);return Me.snapshot=v.root,new er(new yi(Me,[]),v)}class Ln{constructor(b,v,C,M,$,ne,ke,Me){this.urlSubject=b,this.paramsSubject=v,this.queryParamsSubject=C,this.fragmentSubject=M,this.dataSubject=$,this.outlet=ne,this.component=ke,this._futureSnapshot=Me,this.title=this.dataSubject?.pipe((0,ut.U)(St=>St[vt]))??(0,ce.of)(void 0),this.url=b,this.params=v,this.queryParams=C,this.fragment=M,this.data=$}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(b=>$t(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(b=>$t(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fr(I,b="emptyOnly"){const v=I.pathFromRoot;let C=0;if("always"!==b)for(C=v.length-1;C>=1;){const M=v[C],$=v[C-1];if(M.routeConfig&&""===M.routeConfig.path)C--;else{if($.component)break;C--}}return function Io(I){return I.reduce((b,v)=>({params:{...b.params,...v.params},data:{...b.data,...v.data},resolve:{...v.data,...b.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(C))}class Or{get title(){return this.data?.[vt]}constructor(b,v,C,M,$,ne,ke,Me,St){this.url=b,this.params=v,this.queryParams=C,this.fragment=M,this.data=$,this.outlet=ne,this.component=ke,this.routeConfig=Me,this._resolve=St}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$t(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$t(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(C=>C.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Gi extends _i{constructor(b,v){super(v),this.url=b,Gn(this,v)}toString(){return qi(this._root)}}function Gn(I,b){b.value._routerState=I,b.children.forEach(v=>Gn(I,v))}function qi(I){const b=I.children.length>0?` { ${I.children.map(qi).join(", ")} } `:"";return`${I.value}${b}`}function Ki(I){if(I.snapshot){const b=I.snapshot,v=I._futureSnapshot;I.snapshot=v,it(b.queryParams,v.queryParams)||I.queryParamsSubject.next(v.queryParams),b.fragment!==v.fragment&&I.fragmentSubject.next(v.fragment),it(b.params,v.params)||I.paramsSubject.next(v.params),function rn(I,b){if(I.length!==b.length)return!1;for(let v=0;v<I.length;++v)if(!it(I[v],b[v]))return!1;return!0}(b.url,v.url)||I.urlSubject.next(v.url),it(b.data,v.data)||I.dataSubject.next(v.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function tn(I,b){const v=it(I.params,b.params)&&function te(I,b){return Dt(I,b)&&I.every((v,C)=>it(v.parameters,b[C].parameters))}(I.url,b.url);return v&&!(!I.parent!=!b.parent)&&(!I.parent||tn(I.parent,b.parent))}let Zi=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=mt,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.parentContexts=(0,_.f3M)(rr),this.location=(0,_.f3M)(_.s_b),this.changeDetector=(0,_.f3M)(_.sBO),this.environmentInjector=(0,_.f3M)(_.lqb),this.inputBinder=(0,_.f3M)(Un,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:C,previousValue:M}=v.name;if(C)return;this.isTrackedInParentContexts(M)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(M)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,C){this.activated=v,this._activatedRoute=C,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,C){if(this.isActivated)throw new _.vHH(4013,!1);this._activatedRoute=v;const M=this.location,ne=v.snapshot.component,ke=this.parentContexts.getOrCreateContext(this.name).children,Me=new Ns(v,ke,M.injector);this.activated=M.createComponent(ne,{index:M.length,injector:Me,environmentInjector:C??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275dir=_.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[_.TTD]})}return I})();class Ns{constructor(b,v,C){this.route=b,this.childContexts=v,this.parent=C}get(b,v){return b===Ln?this.route:b===rr?this.childContexts:this.parent.get(b,v)}}const Un=new _.OlP("");let mr=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:C}=v,M=at([C.queryParams,C.params,C.data]).pipe((0,Pt.w)(([$,ne,ke],Me)=>(ke={...$,...ne,...ke},0===Me?(0,ce.of)(ke):Promise.resolve(ke)))).subscribe($=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==C||null===C.component)return void this.unsubscribeFromRouteData(v);const ne=(0,_.qFp)(C.component);if(ne)for(const{templateName:ke}of ne.inputs)v.activatedComponentRef.setInput(ke,$[ke]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,M)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac})}return I})();function ir(I,b,v){if(v&&I.shouldReuseRoute(b.value,v.value.snapshot)){const C=v.value;C._futureSnapshot=b.value;const M=function Ai(I,b,v){return b.children.map(C=>{for(const M of v.children)if(I.shouldReuseRoute(C.value,M.value.snapshot))return ir(I,C,M);return ir(I,C)})}(I,b,v);return new yi(C,M)}{if(I.shouldAttach(b.value)){const $=I.retrieve(b.value);if(null!==$){const ne=$.route;return ne.value._futureSnapshot=b.value,ne.children=b.children.map(ke=>ir(I,ke)),ne}}const C=function ws(I){return new Ln(new ye.X(I.url),new ye.X(I.params),new ye.X(I.queryParams),new ye.X(I.fragment),new ye.X(I.data),I.outlet,I.component,I)}(b.value),M=b.children.map($=>ir(I,$));return new yi(C,M)}}const Os="ngNavigationCancelingError";function Ci(I,b){const{redirectTo:v,navigationBehaviorOptions:C}=Dr(b)?{redirectTo:b,navigationBehaviorOptions:void 0}:b,M=Qi(!1,0,b);return M.url=v,M.navigationBehaviorOptions=C,M}function Qi(I,b,v){const C=new Error("NavigationCancelingError: "+(I||""));return C[Os]=!0,C.cancellationCode=b,v&&(C.url=v),C}function Fn(I){return I&&I[Os]}let ln=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275cmp=_.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[_.jDz],decls:1,vars:0,template:function(C,M){1&C&&_._UZ(0,"router-outlet")},dependencies:[Zi],encapsulation:2})}return I})();function Vr(I){const b=I.children&&I.children.map(Vr),v=b?{...I,children:b}:{...I};return!v.component&&!v.loadComponent&&(b||v.loadChildren)&&v.outlet&&v.outlet!==mt&&(v.component=ln),v}function sr(I){return I.outlet||mt}function Si(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let b=I.parent;b;b=b.parent){const v=b.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class ga{constructor(b,v,C,M,$){this.routeReuseStrategy=b,this.futureState=v,this.currState=C,this.forwardEvent=M,this.inputBindingEnabled=$}activate(b){const v=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,C,b),Ki(this.futureState.root),this.activateChildRoutes(v,C,b)}deactivateChildRoutes(b,v,C){const M=ti(v);b.children.forEach($=>{const ne=$.value.outlet;this.deactivateRoutes($,M[ne],C),delete M[ne]}),Object.values(M).forEach($=>{this.deactivateRouteAndItsChildren($,C)})}deactivateRoutes(b,v,C){const M=b.value,$=v?v.value:null;if(M===$)if(M.component){const ne=C.getContext(M.outlet);ne&&this.deactivateChildRoutes(b,v,ne.children)}else this.deactivateChildRoutes(b,v,C);else $&&this.deactivateRouteAndItsChildren(v,C)}deactivateRouteAndItsChildren(b,v){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,v):this.deactivateRouteAndOutlet(b,v)}detachAndStoreRouteSubtree(b,v){const C=v.getContext(b.value.outlet),M=C&&b.value.component?C.children:v,$=ti(b);for(const ne of Object.keys($))this.deactivateRouteAndItsChildren($[ne],M);if(C&&C.outlet){const ne=C.outlet.detach(),ke=C.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:ne,route:b,contexts:ke})}}deactivateRouteAndOutlet(b,v){const C=v.getContext(b.value.outlet),M=C&&b.value.component?C.children:v,$=ti(b);for(const ne of Object.keys($))this.deactivateRouteAndItsChildren($[ne],M);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(b,v,C){const M=ti(v);b.children.forEach($=>{this.activateRoutes($,M[$.value.outlet],C),this.forwardEvent(new Hi($.value.snapshot))}),b.children.length&&this.forwardEvent(new zi(b.value.snapshot))}activateRoutes(b,v,C){const M=b.value,$=v?v.value:null;if(Ki(M),M===$)if(M.component){const ne=C.getOrCreateContext(M.outlet);this.activateChildRoutes(b,v,ne.children)}else this.activateChildRoutes(b,v,C);else if(M.component){const ne=C.getOrCreateContext(M.outlet);if(this.routeReuseStrategy.shouldAttach(M.snapshot)){const ke=this.routeReuseStrategy.retrieve(M.snapshot);this.routeReuseStrategy.store(M.snapshot,null),ne.children.onOutletReAttached(ke.contexts),ne.attachRef=ke.componentRef,ne.route=ke.route.value,ne.outlet&&ne.outlet.attach(ke.componentRef,ke.route.value),Ki(ke.route.value),this.activateChildRoutes(b,null,ne.children)}else{const ke=Si(M.snapshot);ne.attachRef=null,ne.route=M,ne.injector=ke,ne.outlet&&ne.outlet.activateWith(M,ne.injector),this.activateChildRoutes(b,null,ne.children)}}else this.activateChildRoutes(b,null,C)}}class Fs{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class os{constructor(b,v){this.component=b,this.route=v}}function Ho(I,b,v){const C=I._root;return Xs(C,b?b._root:null,v,[C.value])}function Ur(I,b){const v=Symbol(),C=b.get(I,v);return C===v?"function"!=typeof I||(0,_.Z0I)(I)?b.get(I):I:C}function Xs(I,b,v,C,M={canDeactivateChecks:[],canActivateChecks:[]}){const $=ti(b);return I.children.forEach(ne=>{(function Vc(I,b,v,C,M={canDeactivateChecks:[],canActivateChecks:[]}){const $=I.value,ne=b?b.value:null,ke=v?v.getContext(I.value.outlet):null;if(ne&&$.routeConfig===ne.routeConfig){const Me=function as(I,b,v){if("function"==typeof v)return v(I,b);switch(v){case"pathParamsChange":return!Dt(I.url,b.url);case"pathParamsOrQueryParamsChange":return!Dt(I.url,b.url)||!it(I.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tn(I,b)||!it(I.queryParams,b.queryParams);default:return!tn(I,b)}}(ne,$,$.routeConfig.runGuardsAndResolvers);Me?M.canActivateChecks.push(new Fs(C)):($.data=ne.data,$._resolvedData=ne._resolvedData),Xs(I,b,$.component?ke?ke.children:null:v,C,M),Me&&ke&&ke.outlet&&ke.outlet.isActivated&&M.canDeactivateChecks.push(new os(ke.outlet.component,ne))}else ne&&Zn(b,ke,M),M.canActivateChecks.push(new Fs(C)),Xs(I,null,$.component?ke?ke.children:null:v,C,M)})(ne,$[ne.value.outlet],v,C.concat([ne.value]),M),delete $[ne.value.outlet]}),Object.entries($).forEach(([ne,ke])=>Zn(ke,v.getContext(ne),M)),M}function Zn(I,b,v){const C=ti(I),M=I.value;Object.entries(C).forEach(([$,ne])=>{Zn(ne,M.component?b?b.children.getContext($):null:b,v)}),v.canDeactivateChecks.push(new os(M.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,M))}function us(I){return"function"==typeof I}function As(I){return I instanceof et.K||"EmptyError"===I?.name}const Wo=Symbol("INITIAL_VALUE");function gi(){return(0,Pt.w)(I=>at(I.map(b=>b.pipe((0,ar.q)(1),(0,gt.O)(Wo)))).pipe((0,ut.U)(b=>{for(const v of b)if(!0!==v){if(v===Wo)return Wo;if(!1===v||v instanceof hr)return v}return!0}),(0,ft.h)(b=>b!==Wo),(0,ar.q)(1)))}function Ao(I){return(0,me.z)((0,Z.b)(b=>{if(Dr(b))throw Ci(0,b)}),(0,ut.U)(b=>!0===b))}class cs{constructor(b){this.segmentGroup=b||null}}class ls{constructor(b){this.urlTree=b}}function ds(I){return(0,Ne._)(new cs(I))}function Co(I){return(0,Ne._)(new ls(I))}class bo{constructor(b,v){this.urlSerializer=b,this.urlTree=v}noMatchError(b){return new _.vHH(4002,!1)}lineralizeSegments(b,v){let C=[],M=v.root;for(;;){if(C=C.concat(M.segments),0===M.numberOfChildren)return(0,ce.of)(C);if(M.numberOfChildren>1||!M.children[mt])return(0,Ne._)(new _.vHH(4e3,!1));M=M.children[mt]}}applyRedirectCommands(b,v,C){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),b,C)}applyRedirectCreateUrlTree(b,v,C,M){const $=this.createSegmentGroup(b,v.root,C,M);return new hr($,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(b,v){const C={};return Object.entries(b).forEach(([M,$])=>{if("string"==typeof $&&$.startsWith(":")){const ke=$.substring(1);C[M]=v[ke]}else C[M]=$}),C}createSegmentGroup(b,v,C,M){const $=this.createSegments(b,v.segments,C,M);let ne={};return Object.entries(v.children).forEach(([ke,Me])=>{ne[ke]=this.createSegmentGroup(b,Me,C,M)}),new Oe($,ne)}createSegments(b,v,C,M){return v.map($=>$.path.startsWith(":")?this.findPosParam(b,$,M):this.findOrReturn($,C))}findPosParam(b,v,C){const M=C[v.path.substring(1)];if(!M)throw new _.vHH(4001,!1);return M}findOrReturn(b,v){let C=0;for(const M of v){if(M.path===b.path)return v.splice(C),M;C++}return b}}const Go={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function no(I,b,v,C,M){const $=bs(I,b,v);return $.matched?(C=function $o(I,b){return I.providers&&!I._injector&&(I._injector=(0,_.MMx)(I.providers,b,`Route: ${I.path}`)),I._injector??b}(b,C),function ni(I,b,v,C){const M=b.canMatch;if(!M||0===M.length)return(0,ce.of)(!0);const $=M.map(ne=>{const ke=Ur(ne,I);return Bt(function ma(I){return I&&us(I.canMatch)}(ke)?ke.canMatch(b,v):I.runInContext(()=>ke(b,v)))});return(0,ce.of)($).pipe(gi(),Ao())}(C,b,v).pipe((0,ut.U)(ne=>!0===ne?$:{...Go}))):(0,ce.of)($)}function bs(I,b,v){if(""===b.path)return"full"===b.pathMatch&&(I.hasChildren()||v.length>0)?{...Go}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const M=(b.matcher||Wr)(v,I,b);if(!M)return{...Go};const $={};Object.entries(M.posParams??{}).forEach(([ke,Me])=>{$[ke]=Me.path});const ne=M.consumed.length>0?{...$,...M.consumed[M.consumed.length-1].parameters}:$;return{matched:!0,consumedSegments:M.consumed,remainingSegments:v.slice(M.consumed.length),parameters:ne,positionalParamSegments:M.posParams??{}}}function Ri(I,b,v,C){return v.length>0&&function Uc(I,b,v){return v.some(C=>hs(I,b,C)&&sr(C)!==mt)}(I,v,C)?{segmentGroup:new Oe(b,au(C,new Oe(v,I.children))),slicedSegments:[]}:0===v.length&&function ro(I,b,v){return v.some(C=>hs(I,b,C))}(I,v,C)?{segmentGroup:new Oe(I.segments,ya(I,0,v,C,I.children)),slicedSegments:v}:{segmentGroup:new Oe(I.segments,I.children),slicedSegments:v}}function ya(I,b,v,C,M){const $={};for(const ne of C)if(hs(I,v,ne)&&!M[sr(ne)]){const ke=new Oe([],{});$[sr(ne)]=ke}return{...M,...$}}function au(I,b){const v={};v[mt]=b;for(const C of I)if(""===C.path&&sr(C)!==mt){const M=new Oe([],{});v[sr(C)]=M}return v}function hs(I,b,v){return(!(I.hasChildren()||b.length>0)||"full"!==v.pathMatch)&&""===v.path}class fs{constructor(b,v,C,M,$,ne,ke){this.injector=b,this.configLoader=v,this.rootComponentType=C,this.config=M,this.urlTree=$,this.paramsInheritanceStrategy=ne,this.urlSerializer=ke,this.allowRedirects=!0,this.applyRedirects=new bo(this.urlSerializer,this.urlTree)}noMatchError(b){return new _.vHH(4002,!1)}recognize(){const b=Ri(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,b,mt).pipe(je(v=>{if(v instanceof ls)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof cs?this.noMatchError(v):v}),(0,ut.U)(v=>{const C=new Or([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},mt,this.rootComponentType,null,{}),M=new yi(C,v),$=new Gi("",M),ne=function wn(I,b,v=null,C=null){return De(Ue(I),b,v,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return ne.queryParams=this.urlTree.queryParams,$.url=this.urlSerializer.serialize(ne),this.inheritParamsAndData($._root),{state:$,tree:ne}}))}match(b){return this.processSegmentGroup(this.injector,this.config,b.root,mt).pipe(je(C=>{throw C instanceof cs?this.noMatchError(C):C}))}inheritParamsAndData(b){const v=b.value,C=Fr(v,this.paramsInheritanceStrategy);v.params=Object.freeze(C.params),v.data=Object.freeze(C.data),b.children.forEach(M=>this.inheritParamsAndData(M))}processSegmentGroup(b,v,C,M){return 0===C.segments.length&&C.hasChildren()?this.processChildren(b,v,C):this.processSegment(b,v,C,C.segments,M,!0)}processChildren(b,v,C){const M=[];for(const $ of Object.keys(C.children))"primary"===$?M.unshift($):M.push($);return(0,ae.D)(M).pipe(he($=>{const ne=C.children[$],ke=function pa(I,b){const v=I.filter(C=>sr(C)===b);return v.push(...I.filter(C=>sr(C)!==b)),v}(v,$);return this.processSegmentGroup(b,ke,ne,$)}),(0,We.R)(($,ne)=>($.push(...ne),$)),(0,Ge.d)(null),function qn(I,b){const v=arguments.length>=2;return C=>C.pipe(I?(0,ft.h)((M,$)=>I(M,$,C)):Ae.y,Mt(1),v?(0,Ge.d)(b):(0,yt.T)(()=>new et.K))}(),(0,_t.z)($=>{if(null===$)return ds(C);const ne=io($);return function Zu(I){I.sort((b,v)=>b.value.outlet===mt?-1:v.value.outlet===mt?1:b.value.outlet.localeCompare(v.value.outlet))}(ne),(0,ce.of)(ne)}))}processSegment(b,v,C,M,$,ne){return(0,ae.D)(v).pipe(he(ke=>this.processSegmentAgainstRoute(ke._injector??b,v,ke,C,M,$,ne).pipe(je(Me=>{if(Me instanceof cs)return(0,ce.of)(null);throw Me}))),(0,ze.P)(ke=>!!ke),je(ke=>{if(As(ke))return function So(I,b,v){return 0===b.length&&!I.children[v]}(C,M,$)?(0,ce.of)([]):ds(C);throw ke}))}processSegmentAgainstRoute(b,v,C,M,$,ne,ke){return function va(I,b,v,C){return!!(sr(I)===C||C!==mt&&hs(b,v,I))&&("**"===I.path||bs(b,I,v).matched)}(C,M,$,ne)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(b,M,C,$,ne,ke):ke&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,M,v,C,$,ne):ds(M):ds(M)}expandSegmentAgainstRouteUsingRedirect(b,v,C,M,$,ne){return"**"===M.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,C,M,ne):this.expandRegularSegmentAgainstRouteUsingRedirect(b,v,C,M,$,ne)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,v,C,M){const $=this.applyRedirects.applyRedirectCommands([],C.redirectTo,{});return C.redirectTo.startsWith("/")?Co($):this.applyRedirects.lineralizeSegments(C,$).pipe((0,_t.z)(ne=>{const ke=new Oe(ne,{});return this.processSegment(b,v,ke,ne,M,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,v,C,M,$,ne){const{matched:ke,consumedSegments:Me,remainingSegments:St,positionalParamSegments:hn}=bs(v,M,$);if(!ke)return ds(v);const _n=this.applyRedirects.applyRedirectCommands(Me,M.redirectTo,hn);return M.redirectTo.startsWith("/")?Co(_n):this.applyRedirects.lineralizeSegments(M,_n).pipe((0,_t.z)(Tn=>this.processSegment(b,C,v,Tn.concat(St),ne,!1)))}matchSegmentAgainstRoute(b,v,C,M,$,ne){let ke;if("**"===C.path){const Me=M.length>0?Kt(M).parameters:{},St=new Or(M,Me,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ia(C),sr(C),C.component??C._loadedComponent??null,C,D(C));ke=(0,ce.of)({snapshot:St,consumedSegments:[],remainingSegments:[]}),v.children={}}else ke=no(v,C,M,b).pipe((0,ut.U)(({matched:Me,consumedSegments:St,remainingSegments:hn,parameters:_n})=>Me?{snapshot:new Or(St,_n,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ia(C),sr(C),C.component??C._loadedComponent??null,C,D(C)),consumedSegments:St,remainingSegments:hn}:null));return ke.pipe((0,Pt.w)(Me=>null===Me?ds(v):this.getChildConfig(b=C._injector??b,C,M).pipe((0,Pt.w)(({routes:St})=>{const hn=C._loadedInjector??b,{snapshot:_n,consumedSegments:Tn,remainingSegments:Bn}=Me,{segmentGroup:ba,slicedSegments:Qo}=Ri(v,Tn,Bn,St);if(0===Qo.length&&ba.hasChildren())return this.processChildren(hn,St,ba).pipe((0,ut.U)(zs=>null===zs?null:[new yi(_n,zs)]));if(0===St.length&&0===Qo.length)return(0,ce.of)([new yi(_n,[])]);const gu=sr(C)===$;return this.processSegment(hn,St,ba,Qo,gu?mt:$,!0).pipe((0,ut.U)(zs=>[new yi(_n,zs)]))}))))}getChildConfig(b,v,C){return v.children?(0,ce.of)({routes:v.children,injector:b}):v.loadChildren?void 0!==v._loadedRoutes?(0,ce.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function wo(I,b,v,C){const M=b.canLoad;if(void 0===M||0===M.length)return(0,ce.of)(!0);const $=M.map(ne=>{const ke=Ur(ne,I);return Bt(function qu(I){return I&&us(I.canLoad)}(ke)?ke.canLoad(b,v):I.runInContext(()=>ke(b,v)))});return(0,ce.of)($).pipe(gi(),Ao())}(b,v,C).pipe((0,_t.z)(M=>M?this.configLoader.loadChildren(b,v).pipe((0,Z.b)($=>{v._loadedRoutes=$.routes,v._loadedInjector=$.injector})):function Ku(I){return(0,Ne._)(Qi(!1,3))}())):(0,ce.of)({routes:[],injector:b})}}function Ea(I){const b=I.value.routeConfig;return b&&""===b.path}function io(I){const b=[],v=new Set;for(const C of I){if(!Ea(C)){b.push(C);continue}const M=b.find($=>C.value.routeConfig===$.value.routeConfig);void 0!==M?(M.children.push(...C.children),v.add(M)):b.push(C)}for(const C of v){const M=io(C.children);b.push(new yi(C.value,M))}return b.filter(C=>!v.has(C))}function Ia(I){return I.data||{}}function D(I){return I.resolve||{}}function Lt(I){return"string"==typeof I.title||null===I.title}function Mn(I){return(0,Pt.w)(b=>{const v=I(b);return v?(0,ae.D)(v).pipe((0,ut.U)(()=>b)):(0,ce.of)(b)})}const pn=new _.OlP("ROUTES");let Vn=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,_.f3M)(_.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,ce.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const C=Bt(v.loadComponent()).pipe((0,ut.U)(xn),(0,Z.b)($=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=$}),An(()=>{this.componentLoaders.delete(v)})),M=new Be.c(C,()=>new Qe.x).pipe((0,qt.x)());return this.componentLoaders.set(v,M),M}loadChildren(v,C){if(this.childrenLoaders.get(C))return this.childrenLoaders.get(C);if(C._loadedRoutes)return(0,ce.of)({routes:C._loadedRoutes,injector:C._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(C);const $=function gn(I,b,v,C){return Bt(I.loadChildren()).pipe((0,ut.U)(xn),(0,_t.z)(M=>M instanceof _.YKP||Array.isArray(M)?(0,ce.of)(M):(0,ae.D)(b.compileModuleAsync(M))),(0,ut.U)(M=>{C&&C(I);let $,ne,ke=!1;return Array.isArray(M)?(ne=M,!0):($=M.create(v).injector,ne=$.get(pn,[],{optional:!0,self:!0}).flat()),{routes:ne.map(Vr),injector:$}}))}(C,this.compiler,v,this.onLoadEndListener).pipe(An(()=>{this.childrenLoaders.delete(C)})),ne=new Be.c($,()=>new Qe.x).pipe((0,qt.x)());return this.childrenLoaders.set(C,ne),ne}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function xn(I){return function yr(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Ar=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Qe.x,this.transitionAbortSubject=new Qe.x,this.configLoader=(0,_.f3M)(Vn),this.environmentInjector=(0,_.f3M)(_.lqb),this.urlSerializer=(0,_.f3M)(sn),this.rootContexts=(0,_.f3M)(rr),this.inputBindingEnabled=null!==(0,_.f3M)(Un,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ce.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=M=>this.events.next(new $i(M)),this.configLoader.onLoadStartListener=M=>this.events.next(new iu(M))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const C=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:C})}setupNavigations(v,C,M){return this.transitions=new ye.X({id:0,currentUrlTree:C,currentRawUrl:C,currentBrowserUrl:C,extractedUrl:v.urlHandlingStrategy.extract(C),urlAfterRedirects:v.urlHandlingStrategy.extract(C),rawUrl:C,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:xs,restoredState:null,currentSnapshot:M.snapshot,targetSnapshot:null,currentRouterState:M,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,ft.h)($=>0!==$.id),(0,ut.U)($=>({...$,extractedUrl:v.urlHandlingStrategy.extract($.rawUrl)})),(0,Pt.w)($=>{this.currentTransition=$;let ne=!1,ke=!1;return(0,ce.of)($).pipe((0,Z.b)(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.rawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Pt.w)(Me=>{const St=Me.currentBrowserUrl.toString(),hn=!v.navigated||Me.extractedUrl.toString()!==St||St!==Me.currentUrlTree.toString();if(!hn&&"reload"!==(Me.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const Tn="";return this.events.next(new Pn(Me.id,this.urlSerializer.serialize(Me.rawUrl),Tn,0)),Me.resolve(null),we.E}if(v.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return(0,ce.of)(Me).pipe((0,Pt.w)(Tn=>{const Bn=this.transitions?.getValue();return this.events.next(new Qn(Tn.id,this.urlSerializer.serialize(Tn.extractedUrl),Tn.source,Tn.restoredState)),Bn!==this.transitions?.getValue()?we.E:Promise.resolve(Tn)}),function U(I,b,v,C,M,$){return(0,_t.z)(ne=>function uu(I,b,v,C,M,$,ne="emptyOnly"){return new fs(I,b,v,C,M,ne,$).recognize()}(I,b,v,C,ne.extractedUrl,M,$).pipe((0,ut.U)(({state:ke,tree:Me})=>({...ne,targetSnapshot:ke,urlAfterRedirects:Me}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,Z.b)(Tn=>{$.targetSnapshot=Tn.targetSnapshot,$.urlAfterRedirects=Tn.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Tn.urlAfterRedirects};const Bn=new Ts(Tn.id,this.urlSerializer.serialize(Tn.extractedUrl),this.urlSerializer.serialize(Tn.urlAfterRedirects),Tn.targetSnapshot);this.events.next(Bn)}));if(hn&&v.urlHandlingStrategy.shouldProcessUrl(Me.currentRawUrl)){const{id:Tn,extractedUrl:Bn,source:ba,restoredState:Qo,extras:gu}=Me,zs=new Qn(Tn,this.urlSerializer.serialize(Bn),ba,Qo);this.events.next(zs);const xo=bt(0,this.rootComponentType).snapshot;return this.currentTransition=$={...Me,targetSnapshot:xo,urlAfterRedirects:Bn,extras:{...gu,skipLocationChange:!1,replaceUrl:!1}},(0,ce.of)($)}{const Tn="";return this.events.next(new Pn(Me.id,this.urlSerializer.serialize(Me.extractedUrl),Tn,1)),Me.resolve(null),we.E}}),(0,Z.b)(Me=>{const St=new pr(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot);this.events.next(St)}),(0,ut.U)(Me=>(this.currentTransition=$={...Me,guards:Ho(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)},$)),function Vs(I,b){return(0,_t.z)(v=>{const{targetSnapshot:C,currentSnapshot:M,guards:{canActivateChecks:$,canDeactivateChecks:ne}}=v;return 0===ne.length&&0===$.length?(0,ce.of)({...v,guardsResult:!0}):function Ji(I,b,v,C){return(0,ae.D)(I).pipe((0,_t.z)(M=>function Jr(I,b,v,C,M){const $=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!$||0===$.length)return(0,ce.of)(!0);const ne=$.map(ke=>{const Me=Si(b)??M,St=Ur(ke,Me);return Bt(function ou(I){return I&&us(I.canDeactivate)}(St)?St.canDeactivate(I,b,v,C):Me.runInContext(()=>St(I,b,v,C))).pipe((0,ze.P)())});return(0,ce.of)(ne).pipe(gi())}(M.component,M.route,v,b,C)),(0,ze.P)(M=>!0!==M,!0))}(ne,C,M,I).pipe((0,_t.z)(ke=>ke&&function Gu(I){return"boolean"==typeof I}(ke)?function vi(I,b,v,C){return(0,ae.D)(b).pipe(he(M=>(0,Ft.z)(function Cs(I,b){return null!==I&&b&&b(new gr(I)),(0,ce.of)(!0)}(M.route.parent,C),function to(I,b){return null!==I&&b&&b(new Eo(I)),(0,ce.of)(!0)}(M.route,C),function $r(I,b,v){const C=b[b.length-1],$=b.slice(0,b.length-1).reverse().map(ne=>function Js(I){const b=I.routeConfig?I.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:I,guards:b}:null}(ne)).filter(ne=>null!==ne).map(ne=>(0,wt.P)(()=>{const ke=ne.guards.map(Me=>{const St=Si(ne.node)??v,hn=Ur(Me,St);return Bt(function Yr(I){return I&&us(I.canActivateChild)}(hn)?hn.canActivateChild(C,I):St.runInContext(()=>hn(C,I))).pipe((0,ze.P)())});return(0,ce.of)(ke).pipe(gi())}));return(0,ce.of)($).pipe(gi())}(I,M.path,v),function jr(I,b,v){const C=b.routeConfig?b.routeConfig.canActivate:null;if(!C||0===C.length)return(0,ce.of)(!0);const M=C.map($=>(0,wt.P)(()=>{const ne=Si(b)??v,ke=Ur($,ne);return Bt(function eo(I){return I&&us(I.canActivate)}(ke)?ke.canActivate(b,I):ne.runInContext(()=>ke(b,I))).pipe((0,ze.P)())}));return(0,ce.of)(M).pipe(gi())}(I,M.route,v))),(0,ze.P)(M=>!0!==M,!0))}(C,$,I,b):(0,ce.of)(ke)),(0,ut.U)(ke=>({...v,guardsResult:ke})))})}(this.environmentInjector,Me=>this.events.next(Me)),(0,Z.b)(Me=>{if($.guardsResult=Me.guardsResult,Dr(Me.guardsResult))throw Ci(0,Me.guardsResult);const St=new jo(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.events.next(St)}),(0,ft.h)(Me=>!!Me.guardsResult||(this.cancelNavigationTransition(Me,"",3),!1)),Mn(Me=>{if(Me.guards.canActivateChecks.length)return(0,ce.of)(Me).pipe((0,Z.b)(St=>{const hn=new ru(St.id,this.urlSerializer.serialize(St.extractedUrl),this.urlSerializer.serialize(St.urlAfterRedirects),St.targetSnapshot);this.events.next(hn)}),(0,Pt.w)(St=>{let hn=!1;return(0,ce.of)(St).pipe(function P(I,b){return(0,_t.z)(v=>{const{targetSnapshot:C,guards:{canActivateChecks:M}}=v;if(!M.length)return(0,ce.of)(v);let $=0;return(0,ae.D)(M).pipe(he(ne=>function F(I,b,v,C){const M=I.routeConfig,$=I._resolve;return void 0!==M?.title&&!Lt(M)&&($[vt]=M.title),function se(I,b,v,C){const M=function Le(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===M.length)return(0,ce.of)({});const $={};return(0,ae.D)(M).pipe((0,_t.z)(ne=>function Xe(I,b,v,C){const M=Si(b)??C,$=Ur(I,M);return Bt($.resolve?$.resolve(b,v):M.runInContext(()=>$(b,v)))}(I[ne],b,v,C).pipe((0,ze.P)(),(0,Z.b)(ke=>{$[ne]=ke}))),Mt(1),(0,Vt.h)($),je(ne=>As(ne)?we.E:(0,Ne._)(ne)))}($,I,b,C).pipe((0,ut.U)(ne=>(I._resolvedData=ne,I.data=Fr(I,v).resolve,M&&Lt(M)&&(I.data[vt]=M.title),null)))}(ne.route,C,I,b)),(0,Z.b)(()=>$++),Mt(1),(0,_t.z)(ne=>$===M.length?(0,ce.of)(v):we.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,Z.b)({next:()=>hn=!0,complete:()=>{hn||this.cancelNavigationTransition(St,"",2)}}))}),(0,Z.b)(St=>{const hn=new Sr(St.id,this.urlSerializer.serialize(St.extractedUrl),this.urlSerializer.serialize(St.urlAfterRedirects),St.targetSnapshot);this.events.next(hn)}))}),Mn(Me=>{const St=hn=>{const _n=[];hn.routeConfig?.loadComponent&&!hn.routeConfig._loadedComponent&&_n.push(this.configLoader.loadComponent(hn.routeConfig).pipe((0,Z.b)(Tn=>{hn.component=Tn}),(0,ut.U)(()=>{})));for(const Tn of hn.children)_n.push(...St(Tn));return _n};return at(St(Me.targetSnapshot.root)).pipe((0,Ge.d)(),(0,ar.q)(1))}),Mn(()=>this.afterPreactivation()),(0,ut.U)(Me=>{const St=function Yn(I,b,v){const C=ir(I,b._root,v?v._root:void 0);return new er(C,b)}(v.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return this.currentTransition=$={...Me,targetRouterState:St},$}),(0,Z.b)(()=>{this.events.next(new In)}),((I,b,v,C)=>(0,ut.U)(M=>(new ga(b,M.targetRouterState,M.currentRouterState,v,C).activate(I),M)))(this.rootContexts,v.routeReuseStrategy,Me=>this.events.next(Me),this.inputBindingEnabled),(0,ar.q)(1),(0,Z.b)({next:Me=>{ne=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fi(Me.id,this.urlSerializer.serialize(Me.extractedUrl),this.urlSerializer.serialize(Me.urlAfterRedirects))),v.titleStrategy?.updateTitle(Me.targetRouterState.snapshot),Me.resolve(!0)},complete:()=>{ne=!0}}),function Et(I){return(0,Ve.e)((b,v)=>{(0,ve.Xf)(I).subscribe((0,Je.x)(v,()=>v.complete(),zr.Z)),!v.closed&&b.subscribe(v)})}(this.transitionAbortSubject.pipe((0,Z.b)(Me=>{throw Me}))),An(()=>{ne||ke||this.cancelNavigationTransition($,"",1),this.currentNavigation?.id===$.id&&(this.currentNavigation=null)}),je(Me=>{if(ke=!0,Fn(Me))this.events.next(new Nr($.id,this.urlSerializer.serialize($.extractedUrl),Me.message,Me.cancellationCode)),function un(I){return Fn(I)&&Dr(I.url)}(Me)?this.events.next(new nr(Me.url)):$.resolve(!1);else{this.events.next(new is($.id,this.urlSerializer.serialize($.extractedUrl),Me,$.targetSnapshot??void 0));try{$.resolve(v.errorHandler(Me))}catch(St){$.reject(St)}}return we.E}))}))}cancelNavigationTransition(v,C,M){const $=new Nr(v.id,this.urlSerializer.serialize(v.extractedUrl),C,M);this.events.next($),v.resolve(!1)}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Kr(I){return I!==xs}let ui=(()=>{class I{buildTitle(v){let C,M=v.root;for(;void 0!==M;)C=this.getResolvedTitleForRoute(M)??C,M=M.children.find($=>$.outlet===mt);return C}getResolvedTitleForRoute(v){return v.data[vt]}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:function(){return(0,_.f3M)(Ss)},providedIn:"root"})}return I})(),Ss=(()=>{class I extends ui{constructor(v){super(),this.title=v}updateTitle(v){const C=this.buildTitle(v);void 0!==C&&this.title.setTitle(C)}static#e=this.\u0275fac=function(C){return new(C||I)(_.LFG(Cn.Dx))};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})(),ci=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:function(){return(0,_.f3M)(bn)},providedIn:"root"})}return I})();class Us{shouldDetach(b){return!1}store(b,v){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,v){return b.routeConfig===v.routeConfig}}let bn=(()=>{class I extends Us{static#e=this.\u0275fac=function(){let v;return function(M){return(v||(v=_.n5z(I)))(M||I)}}();static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const dn=new _.OlP("",{providedIn:"root",factory:()=>({})});let Bc=(()=>{class I{static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:function(){return(0,_.f3M)(vr)},providedIn:"root"})}return I})(),vr=(()=>{class I{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,C){return v}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();var Bs=function(I){return I[I.COMPLETE=0]="COMPLETE",I[I.FAILED=1]="FAILED",I[I.REDIRECTING=2]="REDIRECTING",I}(Bs||{});function so(I,b){I.events.pipe((0,ft.h)(v=>v instanceof fi||v instanceof Nr||v instanceof is||v instanceof Pn),(0,ut.U)(v=>v instanceof fi||v instanceof Pn?Bs.COMPLETE:v instanceof Nr&&(0===v.code||1===v.code)?Bs.REDIRECTING:Bs.FAILED),(0,ft.h)(v=>v!==Bs.REDIRECTING),(0,ar.q)(1)).subscribe(()=>{b()})}function Ei(I){throw I}function jc(I,b,v){return b.parse("/")}const $c={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ro={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let lr=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,_.f3M)(_.c2e),this.isNgZoneEnabled=!1,this._events=new Qe.x,this.options=(0,_.f3M)(dn,{optional:!0})||{},this.pendingTasks=(0,_.f3M)(_.HDt),this.errorHandler=this.options.errorHandler||Ei,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||jc,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,_.f3M)(Bc),this.routeReuseStrategy=(0,_.f3M)(ci),this.titleStrategy=(0,_.f3M)(ui),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,_.f3M)(pn,{optional:!0})?.flat()??[],this.navigationTransitions=(0,_.f3M)(Ar),this.urlSerializer=(0,_.f3M)(sn),this.location=(0,_.f3M)(ie.Ye),this.componentInputBindingEnabled=!!(0,_.f3M)(Un,{optional:!0}),this.eventsSubscription=new lt.w0,this.isNgZoneEnabled=(0,_.f3M)(_.R0b)instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new hr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=bt(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const v=this.navigationTransitions.events.subscribe(C=>{try{const{currentTransition:M}=this.navigationTransitions;if(null===M)return void(Ta(C)&&this._events.next(C));if(C instanceof Qn)Kr(M.source)&&(this.browserUrlTree=M.extractedUrl);else if(C instanceof Pn)this.rawUrlTree=M.rawUrl;else if(C instanceof Ts){if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const $=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl($,M)}this.browserUrlTree=M.urlAfterRedirects}}else if(C instanceof In)this.currentUrlTree=M.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl),this.routerState=M.targetRouterState,"deferred"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,M),this.browserUrlTree=M.urlAfterRedirects);else if(C instanceof Nr)0!==C.code&&1!==C.code&&(this.navigated=!0),(3===C.code||2===C.code)&&this.restoreHistory(M);else if(C instanceof nr){const $=this.urlHandlingStrategy.merge(C.url,M.currentRawUrl),ne={skipLocationChange:M.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Kr(M.source)};this.scheduleNavigation($,xs,null,ne,{resolve:M.resolve,reject:M.reject,promise:M.promise})}C instanceof is&&this.restoreHistory(M,!0),C instanceof fi&&(this.navigated=!0),Ta(C)&&this._events.next(C)}catch(M){this.navigationTransitions.transitionAbortSubject.next(M)}});this.eventsSubscription.add(v)}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),xs,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const C="popstate"===v.type?"popstate":"hashchange";"popstate"===C&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,C,v.state)},0)}))}navigateToSyncWithBrowser(v,C,M){const $={replaceUrl:!0},ne=M?.navigationId?M:null;if(M){const Me={...M};delete Me.navigationId,delete Me.\u0275routerPageId,0!==Object.keys(Me).length&&($.state=Me)}const ke=this.parseUrl(v);this.scheduleNavigation(ke,C,ne,$)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(Vr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(v,C={}){const{relativeTo:M,queryParams:$,fragment:ne,queryParamsHandling:ke,preserveFragment:Me}=C,St=Me?this.currentUrlTree.fragment:ne;let _n,hn=null;switch(ke){case"merge":hn={...this.currentUrlTree.queryParams,...$};break;case"preserve":hn=this.currentUrlTree.queryParams;break;default:hn=$||null}null!==hn&&(hn=this.removeEmptyProps(hn));try{_n=Ue(M?M.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),_n=this.currentUrlTree.root}return De(_n,v,hn,St??null)}navigateByUrl(v,C={skipLocationChange:!1}){const M=Dr(v)?v:this.parseUrl(v),$=this.urlHandlingStrategy.merge(M,this.rawUrlTree);return this.scheduleNavigation($,xs,null,C)}navigate(v,C={skipLocationChange:!1}){return function lu(I){for(let b=0;b<I.length;b++)if(null==I[b])throw new _.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,C),C)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let C;try{C=this.urlSerializer.parse(v)}catch(M){C=this.malformedUriErrorHandler(M,this.urlSerializer,v)}return C}isActive(v,C){let M;if(M=!0===C?{...$c}:!1===C?{...Ro}:C,Dr(v))return Jn(this.currentUrlTree,v,M);const $=this.parseUrl(v);return Jn(this.currentUrlTree,$,M)}removeEmptyProps(v){return Object.keys(v).reduce((C,M)=>{const $=v[M];return null!=$&&(C[M]=$),C},{})}scheduleNavigation(v,C,M,$,ne){if(this.disposed)return Promise.resolve(!1);let ke,Me,St;ne?(ke=ne.resolve,Me=ne.reject,St=ne.promise):St=new Promise((_n,Tn)=>{ke=_n,Me=Tn});const hn=this.pendingTasks.add();return so(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(hn))}),this.navigationTransitions.handleNavigationRequest({source:C,restoredState:M,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:v,extras:$,resolve:ke,reject:Me,promise:St,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),St.catch(_n=>Promise.reject(_n))}setBrowserUrl(v,C){const M=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(M)||C.extras.replaceUrl){const ne={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId)};this.location.replaceState(M,"",ne)}else{const $={...C.extras.state,...this.generateNgRouterState(C.id,this.browserPageId+1)};this.location.go(M,"",$)}}restoreHistory(v,C=!1){if("computed"===this.canceledNavigationResolution){const $=this.currentPageId-this.browserPageId;0!==$?this.location.historyGo($):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===$&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(C&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,C){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:C}:{navigationId:v}}static#e=this.\u0275fac=function(C){return new(C||I)};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();function Ta(I){return!(I instanceof In||I instanceof nr)}class wa{}let Qu=(()=>{class I{constructor(v,C,M,$,ne){this.router=v,this.injector=M,this.preloadingStrategy=$,this.loader=ne}setUpPreloading(){this.subscription=this.router.events.pipe((0,ft.h)(v=>v instanceof fi),he(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,C){const M=[];for(const $ of C){$.providers&&!$._injector&&($._injector=(0,_.MMx)($.providers,v,`Route: ${$.path}`));const ne=$._injector??v,ke=$._loadedInjector??ne;($.loadChildren&&!$._loadedRoutes&&void 0===$.canLoad||$.loadComponent&&!$._loadedComponent)&&M.push(this.preloadConfig(ne,$)),($.children||$._loadedRoutes)&&M.push(this.processRoutes(ke,$.children??$._loadedRoutes))}return(0,ae.D)(M).pipe((0,yn.J)())}preloadConfig(v,C){return this.preloadingStrategy.preload(C,()=>{let M;M=C.loadChildren&&void 0===C.canLoad?this.loader.loadChildren(v,C):(0,ce.of)(null);const $=M.pipe((0,_t.z)(ne=>null===ne?(0,ce.of)(void 0):(C._loadedRoutes=ne.routes,C._loadedInjector=ne.injector,this.processRoutes(ne.injector??v,ne.routes))));if(C.loadComponent&&!C._loadedComponent){const ne=this.loader.loadComponent(C);return(0,ae.D)([$,ne]).pipe((0,yn.J)())}return $})}static#e=this.\u0275fac=function(C){return new(C||I)(_.LFG(lr),_.LFG(_.Sil),_.LFG(_.lqb),_.LFG(wa),_.LFG(Vn))};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"})}return I})();const Hc=new _.OlP("");let nn=(()=>{class I{constructor(v,C,M,$,ne={}){this.urlSerializer=v,this.transitions=C,this.viewportScroller=M,this.zone=$,this.options=ne,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},ne.scrollPositionRestoration=ne.scrollPositionRestoration||"disabled",ne.anchorScrolling=ne.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Qn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof fi?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof Pn&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof Ds&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,C){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ds(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,C))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(C){_.$Z()};static#t=this.\u0275prov=_.Yz7({token:I,factory:I.\u0275fac})}return I})();function Pi(I,b){return{\u0275kind:I,\u0275providers:b}}function hu(){const I=(0,_.f3M)(_.zs3);return b=>{const v=I.get(_.z2F);if(b!==v.components[0])return;const C=I.get(lr),M=I.get(fu);1===I.get(Ju)&&C.initialNavigation(),I.get(Nn,null,_.XFs.Optional)?.setUpPreloading(),I.get(Hc,null,_.XFs.Optional)?.init(),C.resetRootComponentType(v.componentTypes[0]),M.closed||(M.next(),M.complete(),M.unsubscribe())}}const fu=new _.OlP("",{factory:()=>new Qe.x}),Ju=new _.OlP("",{providedIn:"root",factory:()=>1}),Nn=new _.OlP("");function Xu(I){return Pi(0,[{provide:Nn,useExisting:Qu},{provide:wa,useExisting:I}])}const oo=new _.OlP("ROUTER_FORROOT_GUARD"),Po=[ie.Ye,{provide:sn,useClass:on},lr,rr,{provide:Ln,useFactory:function Yu(I){return I.routerState.root},deps:[lr]},Vn,[]];function ad(){return new _.PXZ("Router",lr)}let ud=(()=>{class I{constructor(v){}static forRoot(v,C){return{ngModule:I,providers:[Po,[],{provide:pn,multi:!0,useValue:v},{provide:oo,useFactory:ec,deps:[[lr,new _.FiY,new _.tp0]]},{provide:dn,useValue:C||{}},C?.useHash?{provide:ie.S$,useClass:ie.Do}:{provide:ie.S$,useClass:ie.b0},{provide:Hc,useFactory:()=>{const I=(0,_.f3M)(ie.EM),b=(0,_.f3M)(_.R0b),v=(0,_.f3M)(dn),C=(0,_.f3M)(Ar),M=(0,_.f3M)(sn);return v.scrollOffset&&I.setOffset(v.scrollOffset),new nn(M,C,I,b,v)}},C?.preloadingStrategy?Xu(C.preloadingStrategy).\u0275providers:[],{provide:_.PXZ,multi:!0,useFactory:ad},C?.initialNavigation?ms(C):[],C?.bindToComponentInputs?Pi(8,[mr,{provide:Un,useExisting:mr}]).\u0275providers:[],[{provide:xi,useFactory:hu},{provide:_.tb,multi:!0,useExisting:xi}]]}}static forChild(v){return{ngModule:I,providers:[{provide:pn,multi:!0,useValue:v}]}}static#e=this.\u0275fac=function(C){return new(C||I)(_.LFG(oo,8))};static#t=this.\u0275mod=_.oAB({type:I});static#n=this.\u0275inj=_.cJS({})}return I})();function ec(I){return"guarded"}function ms(I){return["disabled"===I.initialNavigation?Pi(3,[{provide:_.ip1,multi:!0,useFactory:()=>{const b=(0,_.f3M)(lr);return()=>{b.setUpLocationChangeListener()}}},{provide:Ju,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?Pi(2,[{provide:Ju,useValue:0},{provide:_.ip1,multi:!0,deps:[_.zs3],useFactory:b=>{const v=b.get(ie.V_,Promise.resolve());return()=>v.then(()=>new Promise(C=>{const M=b.get(lr),$=b.get(fu);so(M,()=>{C(!0)}),b.get(Ar).afterPreactivation=()=>(C(!0),$.closed?(0,ce.of)(void 0):$),M.initialNavigation()}))}}]).\u0275providers:[]]}const xi=new _.OlP("")},3106:(Tt,Se,L)=>{L.d(Se,{Z:()=>at});var _=L(9058),G=L(4537),Y=L(534),le=L(7879);class ae{constructor(dt,et){this._delegate=dt,this.firebase=et,(0,Y._addComponent)(dt,new G.wA("app-compat",()=>this,"PUBLIC")),this.container=dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this._delegate.automaticDataCollectionEnabled=dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(dt=>{this._delegate.checkDestroyed(),dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(dt,et=Y._DEFAULT_ENTRY_NAME){var Ft;this._delegate.checkDestroyed();const wt=this._delegate.container.getProvider(dt);return!wt.isInitialized()&&"EXPLICIT"===(null===(Ft=wt.getComponent())||void 0===Ft?void 0:Ft.instantiationMode)&&wt.initialize(),wt.getImmediate({identifier:et})}_removeServiceInstance(dt,et=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(dt).clearInstance(et)}_addComponent(dt){(0,Y._addComponent)(this._delegate,dt)}_addOrOverwriteComponent(dt){(0,Y._addOrOverwriteComponent)(this._delegate,dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ye=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function Ae(){const Ze=function Te(Ze){const dt={},et={__esModule:!0,initializeApp:function me(Qe,lt={}){const ie=Y.initializeApp(Qe,lt);if((0,_.r3)(dt,ie.name))return dt[ie.name];const ut=new Ze(ie,et);return dt[ie.name]=ut,ut},app:wt,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function we(Qe){const lt=Qe.name,ie=lt.replace("-compat","");if(Y._registerComponent(Qe)&&"PUBLIC"===Qe.type){const ut=(Pt=wt())=>{if("function"!=typeof Pt[ie])throw ye.create("invalid-app-argument",{appName:lt});return Pt[ie]()};void 0!==Qe.serviceProps&&(0,_.ZB)(ut,Qe.serviceProps),et[ie]=ut,Ze.prototype[ie]=function(...Pt){return this._getService.bind(this,lt).apply(this,Qe.multipleInstances?Pt:[])}}return"PUBLIC"===Qe.type?et[ie]:null},removeApp:function Ft(Qe){delete dt[Qe]},useAsService:function Be(Qe,lt){return"serverAuth"===lt?null:lt},modularAPIs:Y}};function wt(Qe){if(!(0,_.r3)(dt,Qe=Qe||Y._DEFAULT_ENTRY_NAME))throw ye.create("no-app",{appName:Qe});return dt[Qe]}return et.default=et,Object.defineProperty(et,"apps",{get:function Ne(){return Object.keys(dt).map(Qe=>dt[Qe])}}),wt.App=Ze,et}(ae);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:Ae,extendNamespace:function dt(et){(0,_.ZB)(Ze,et)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),Ze}(),re=new le.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==window.firebase){re.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=window.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&re.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=ee;!function qe(Ze){(0,Y.registerVersion)("@firebase/app-compat","0.2.38",Ze)}()},534:(Tt,Se,L)=>{L.r(Se),L.d(Se,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>sn,_DEFAULT_ENTRY_NAME:()=>Kt,_addComponent:()=>Dn,_addOrOverwriteComponent:()=>Tr,_apps:()=>kn,_clearComponents:()=>Oe,_components:()=>Jn,_getProvider:()=>Ct,_isFirebaseApp:()=>cn,_isFirebaseServerApp:()=>hr,_registerComponent:()=>Gr,_removeServiceInstance:()=>Pr,_serverApps:()=>zn,deleteApp:()=>ur,getApp:()=>Kn,getApps:()=>qr,initializeApp:()=>on,initializeServerApp:()=>Hn,onLog:()=>B,registerVersion:()=>W,setLogLevel:()=>V});var _=L(5861),G=L(4537),Y=L(7879),le=L(9058);const ae=(Ue,De)=>De.some(Ke=>Ue instanceof Ke);let ce,ye;const ee=new WeakMap,re=new WeakMap,_e=new WeakMap,Je=new WeakMap,qe=new WeakMap;let dt={get(Ue,De,Ke){if(Ue instanceof IDBTransaction){if("done"===De)return re.get(Ue);if("objectStoreNames"===De)return Ue.objectStoreNames||_e.get(Ue);if("store"===De)return Ke.objectStoreNames[1]?void 0:Ke.objectStore(Ke.objectStoreNames[0])}return me(Ue[De])},set:(Ue,De,Ke)=>(Ue[De]=Ke,!0),has:(Ue,De)=>Ue instanceof IDBTransaction&&("done"===De||"store"===De)||De in Ue};function wt(Ue){return"function"==typeof Ue?function Ft(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...De){return Ue.apply(Ne(this),De),me(ee.get(this))}:function(...De){return me(Ue.apply(Ne(this),De))}:function(De,...Ke){const At=Ue.call(Ne(this),De,...Ke);return _e.set(At,De.sort?De.sort():[De]),me(At)}}(Ue):(Ue instanceof IDBTransaction&&function Ze(Ue){if(re.has(Ue))return;const De=new Promise((Ke,At)=>{const Ht=()=>{Ue.removeEventListener("complete",Zt),Ue.removeEventListener("error",fn),Ue.removeEventListener("abort",fn)},Zt=()=>{Ke(),Ht()},fn=()=>{At(Ue.error||new DOMException("AbortError","AbortError")),Ht()};Ue.addEventListener("complete",Zt),Ue.addEventListener("error",fn),Ue.addEventListener("abort",fn)});re.set(Ue,De)}(Ue),ae(Ue,function Te(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,dt):Ue)}function me(Ue){if(Ue instanceof IDBRequest)return function at(Ue){const De=new Promise((Ke,At)=>{const Ht=()=>{Ue.removeEventListener("success",Zt),Ue.removeEventListener("error",fn)},Zt=()=>{Ke(me(Ue.result)),Ht()},fn=()=>{At(Ue.error),Ht()};Ue.addEventListener("success",Zt),Ue.addEventListener("error",fn)});return De.then(Ke=>{Ke instanceof IDBCursor&&ee.set(Ke,Ue)}).catch(()=>{}),qe.set(De,Ue),De}(Ue);if(Je.has(Ue))return Je.get(Ue);const De=wt(Ue);return De!==Ue&&(Je.set(Ue,De),qe.set(De,Ue)),De}const Ne=Ue=>qe.get(Ue),Qe=["get","getKey","getAll","getAllKeys","count"],lt=["put","add","delete","clear"],ie=new Map;function ut(Ue,De){if(!(Ue instanceof IDBDatabase)||De in Ue||"string"!=typeof De)return;if(ie.get(De))return ie.get(De);const Ke=De.replace(/FromIndex$/,""),At=De!==Ke,Ht=lt.includes(Ke);if(!(Ke in(At?IDBIndex:IDBObjectStore).prototype)||!Ht&&!Qe.includes(Ke))return;const Zt=function(){var fn=(0,_.Z)(function*(Xn,...Wn){const ei=this.transaction(Xn,Ht?"readwrite":"readonly");let ns=ei.store;return At&&(ns=ns.index(Wn.shift())),(yield Promise.all([ns[Ke](...Wn),Ht&&ei.done]))[0]});return function(Wn){return fn.apply(this,arguments)}}();return ie.set(De,Zt),Zt}!function et(Ue){dt=Ue(dt)}(Ue=>({...Ue,get:(De,Ke,At)=>ut(De,Ke)||Ue.get(De,Ke,At),has:(De,Ke)=>!!ut(De,Ke)||Ue.has(De,Ke)}));class Pt{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function ar(Ue){const De=Ue.getComponent();return"VERSION"===De?.type}(Ke)){const At=Ke.getImmediate();return`${At.library}/${At.version}`}return null}).filter(Ke=>Ke).join(" ")}}const gt="@firebase/app",ft="0.10.8",_t=new Y.Yd("@firebase/app"),Kt="[DEFAULT]",Bt={[gt]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},kn=new Map,zn=new Map,Jn=new Map;function Dn(Ue,De){try{Ue.container.addComponent(De)}catch(Ke){_t.debug(`Component ${De.name} failed to register with FirebaseApp ${Ue.name}`,Ke)}}function Tr(Ue,De){Ue.container.addOrOverwriteComponent(De)}function Gr(Ue){const De=Ue.name;if(Jn.has(De))return _t.debug(`There were multiple attempts to register component ${De}.`),!1;Jn.set(De,Ue);for(const Ke of kn.values())Dn(Ke,Ue);for(const Ke of zn.values())Dn(Ke,Ue);return!0}function Ct(Ue,De){const Ke=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Ue.container.getProvider(De)}function Pr(Ue,De,Ke=Kt){Ct(Ue,De).clearInstance(Ke)}function cn(Ue){return void 0!==Ue.options}function hr(Ue){return void 0!==Ue.settings}function Oe(){Jn.clear()}const te=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dt{constructor(De,Ke,At){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new G.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw te.create("app-deleted",{appName:this._name})}}class jt extends Dt{constructor(De,Ke,At,Ht){const Zt=void 0!==Ke.automaticDataCollectionEnabled&&Ke.automaticDataCollectionEnabled,fn={name:At,automaticDataCollectionEnabled:Zt};super(void 0!==De.apiKey?De:De.options,fn,Ht),this._serverConfig=Object.assign({automaticDataCollectionEnabled:Zt},Ke),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,Ke.releaseOnDeref=void 0,W(gt,ft,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(De){this.isDeleted||(this._refCount++,void 0!==De&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(De,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ur(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw te.create("server-app-deleted")}}const sn="10.12.5";function on(Ue,De={}){let Ke=Ue;"object"!=typeof De&&(De={name:De});const At=Object.assign({name:Kt,automaticDataCollectionEnabled:!1},De),Ht=At.name;if("string"!=typeof Ht||!Ht)throw te.create("bad-app-name",{appName:String(Ht)});if(Ke||(Ke=(0,le.aH)()),!Ke)throw te.create("no-options");const Zt=kn.get(Ht);if(Zt){if((0,le.vZ)(Ke,Zt.options)&&(0,le.vZ)(At,Zt.config))return Zt;throw te.create("duplicate-app",{appName:Ht})}const fn=new G.H0(Ht);for(const Wn of Jn.values())fn.addComponent(Wn);const Xn=new Dt(Ke,At,fn);return kn.set(Ht,Xn),Xn}function Hn(Ue,De){if((0,le.jU)()&&!(0,le.n2)())throw te.create("invalid-server-app-environment");let Ke;void 0===De.automaticDataCollectionEnabled&&(De.automaticDataCollectionEnabled=!1),Ke=cn(Ue)?Ue.options:Ue;const At=Object.assign(Object.assign({},De),Ke);if(void 0!==At.releaseOnDeref&&delete At.releaseOnDeref,void 0!==De.releaseOnDeref&&typeof FinalizationRegistry>"u")throw te.create("finalization-registry-not-supported",{});const Zt=""+(ei=JSON.stringify(At),[...ei].reduce((ns,$n)=>Math.imul(31,ns)+$n.charCodeAt(0)|0,0)),fn=zn.get(Zt);var ei;if(fn)return fn.incRefCount(De.releaseOnDeref),fn;const Xn=new G.H0(Zt);for(const ei of Jn.values())Xn.addComponent(ei);const Wn=new jt(Ke,De,Zt,Xn);return zn.set(Zt,Wn),Wn}function Kn(Ue=Kt){const De=kn.get(Ue);if(!De&&Ue===Kt&&(0,le.aH)())return on();if(!De)throw te.create("no-app",{appName:Ue});return De}function qr(){return Array.from(kn.values())}function ur(Ue){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,_.Z)(function*(Ue){let De=!1;const Ke=Ue.name;kn.has(Ke)?(De=!0,kn.delete(Ke)):zn.has(Ke)&&Ue.decRefCount()<=0&&(zn.delete(Ke),De=!0),De&&(yield Promise.all(Ue.container.getProviders().map(At=>At.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function W(Ue,De,Ke){var At;let Ht=null!==(At=Bt[Ue])&&void 0!==At?At:Ue;Ke&&(Ht+=`-${Ke}`);const Zt=Ht.match(/\s|\//),fn=De.match(/\s|\//);if(Zt||fn){const Xn=[`Unable to register library "${Ht}" with version "${De}":`];return Zt&&Xn.push(`library name "${Ht}" contains illegal characters (whitespace or "/")`),Zt&&fn&&Xn.push("and"),fn&&Xn.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void _t.warn(Xn.join(" "))}Gr(new G.wA(`${Ht}-version`,()=>({library:Ht,version:De}),"VERSION"))}function B(Ue,De){if(null!==Ue&&"function"!=typeof Ue)throw te.create("invalid-log-argument");(0,Y.Am)(Ue,De)}function V(Ue){(0,Y.Ub)(Ue)}const q="firebase-heartbeat-database",J=1,$e="firebase-heartbeat-store";let st=null;function It(){return st||(st=function we(Ue,De,{blocked:Ke,upgrade:At,blocking:Ht,terminated:Zt}={}){const fn=indexedDB.open(Ue,De),Xn=me(fn);return At&&fn.addEventListener("upgradeneeded",Wn=>{At(me(fn.result),Wn.oldVersion,Wn.newVersion,me(fn.transaction),Wn)}),Ke&&fn.addEventListener("blocked",Wn=>Ke(Wn.oldVersion,Wn.newVersion,Wn)),Xn.then(Wn=>{Zt&&Wn.addEventListener("close",()=>Zt()),Ht&&Wn.addEventListener("versionchange",ei=>Ht(ei.oldVersion,ei.newVersion,ei))}).catch(()=>{}),Xn}(q,J,{upgrade:(Ue,De)=>{if(0===De)try{Ue.createObjectStore($e)}catch(Ke){console.warn(Ke)}}}).catch(Ue=>{throw te.create("idb-open",{originalErrorMessage:Ue.message})})),st}function kt(){return(kt=(0,_.Z)(function*(Ue){try{const Ke=(yield It()).transaction($e),At=yield Ke.objectStore($e).get(cr(Ue));return yield Ke.done,At}catch(De){if(De instanceof le.ZR)_t.warn(De.message);else{const Ke=te.create("idb-get",{originalErrorMessage:De?.message});_t.warn(Ke.message)}}})).apply(this,arguments)}function mn(Ue,De){return en.apply(this,arguments)}function en(){return(en=(0,_.Z)(function*(Ue,De){try{const At=(yield It()).transaction($e,"readwrite");yield At.objectStore($e).put(De,cr(Ue)),yield At.done}catch(Ke){if(Ke instanceof le.ZR)_t.warn(Ke.message);else{const At=te.create("idb-set",{originalErrorMessage:Ke?.message});_t.warn(At.message)}}})).apply(this,arguments)}function cr(Ue){return`${Ue.name}!${Ue.options.appId}`}class ji{constructor(De){this.container=De,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new wi(Ke),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var De=this;return(0,_.Z)(function*(){var Ke,At;const Zt=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),fn=Mr();if((null!=(null===(Ke=De._heartbeatsCache)||void 0===Ke?void 0:Ke.heartbeats)||(De._heartbeatsCache=yield De._heartbeatsCachePromise,null!=(null===(At=De._heartbeatsCache)||void 0===At?void 0:At.heartbeats)))&&De._heartbeatsCache.lastSentHeartbeatDate!==fn&&!De._heartbeatsCache.heartbeats.some(Xn=>Xn.date===fn))return De._heartbeatsCache.heartbeats.push({date:fn,agent:Zt}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Xn=>{const Wn=new Date(Xn.date).valueOf();return Date.now()-Wn<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,_.Z)(function*(){var Ke;if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null==(null===(Ke=De._heartbeatsCache)||void 0===Ke?void 0:Ke.heartbeats)||0===De._heartbeatsCache.heartbeats.length)return"";const At=Mr(),{heartbeatsToSend:Ht,unsentEntries:Zt}=function Es(Ue,De=1024){const Ke=[];let At=Ue.slice();for(const Ht of Ue){const Zt=Ke.find(fn=>fn.agent===Ht.agent);if(Zt){if(Zt.dates.push(Ht.date),Dr(Ke)>De){Zt.dates.pop();break}}else if(Ke.push({agent:Ht.agent,dates:[Ht.date]}),Dr(Ke)>De){Ke.pop();break}At=At.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:At}}(De._heartbeatsCache.heartbeats),fn=(0,le.L)(JSON.stringify({version:2,heartbeats:Ht}));return De._heartbeatsCache.lastSentHeartbeatDate=At,Zt.length>0?(De._heartbeatsCache.heartbeats=Zt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),fn})()}}function Mr(){return(new Date).toISOString().substring(0,10)}class wi{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,_.Z)(function*(){if(yield De._canUseIndexedDBPromise){const At=yield function Xt(Ue){return kt.apply(this,arguments)}(De.app);return At?.heartbeats?At:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(De){var Ke=this;return(0,_.Z)(function*(){var At;if(yield Ke._canUseIndexedDBPromise){const Zt=yield Ke.read();return mn(Ke.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:Zt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Ke=this;return(0,_.Z)(function*(){var At;if(yield Ke._canUseIndexedDBPromise){const Zt=yield Ke.read();return mn(Ke.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,...De.heartbeats]})}})()}}function Dr(Ue){return(0,le.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function wn(Ue){Gr(new G.wA("platform-logger",De=>new Pt(De),"PRIVATE")),Gr(new G.wA("heartbeat",De=>new ji(De),"PRIVATE")),W(gt,ft,Ue),W(gt,ft,"esm2017"),W("fire-js","")}("")},4537:(Tt,Se,L)=>{L.d(Se,{H0:()=>Te,wA:()=>Y});var _=L(5861),G=L(9058);class Y{constructor(ee,re,_e){this.name=ee,this.instanceFactory=re,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const le="[DEFAULT]";class ae{constructor(ee,re){this.name=ee,this.container=re,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const re=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(re)){const _e=new G.BH;if(this.instancesDeferred.set(re,_e),this.isInitialized(re)||this.shouldAutoInitialize())try{const Je=this.getOrInitializeService({instanceIdentifier:re});Je&&_e.resolve(Je)}catch{}}return this.instancesDeferred.get(re).promise}getImmediate(ee){var re;const _e=this.normalizeInstanceIdentifier(ee?.identifier),Je=null!==(re=ee?.optional)&&void 0!==re&&re;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(Je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(qe){if(Je)return null;throw qe}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function ye(Ae){return"EAGER"===Ae.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[re,_e]of this.instancesDeferred.entries()){const Je=this.normalizeInstanceIdentifier(re);try{const qe=this.getOrInitializeService({instanceIdentifier:Je});_e.resolve(qe)}catch{}}}}clearInstance(ee=le){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,_.Z)(function*(){const re=Array.from(ee.instances.values());yield Promise.all([...re.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...re.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=le){return this.instances.has(ee)}getOptions(ee=le){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:re={}}=ee,_e=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Je=this.getOrInitializeService({instanceIdentifier:_e,options:re});for(const[qe,at]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(qe)&&at.resolve(Je);return Je}onInit(ee,re){var _e;const Je=this.normalizeInstanceIdentifier(re),qe=null!==(_e=this.onInitCallbacks.get(Je))&&void 0!==_e?_e:new Set;qe.add(ee),this.onInitCallbacks.set(Je,qe);const at=this.instances.get(Je);return at&&ee(at,Je),()=>{qe.delete(ee)}}invokeOnInitCallbacks(ee,re){const _e=this.onInitCallbacks.get(re);if(_e)for(const Je of _e)try{Je(ee,re)}catch{}}getOrInitializeService({instanceIdentifier:ee,options:re={}}){let _e=this.instances.get(ee);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Ae=ee,Ae===le?void 0:Ae),options:re}),this.instances.set(ee,_e),this.instancesOptions.set(ee,re),this.invokeOnInitCallbacks(_e,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,_e)}catch{}var Ae;return _e||null}normalizeInstanceIdentifier(ee=le){return this.component?this.component.multipleInstances?ee:le:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const re=this.getProvider(ee.name);if(re.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);re.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const re=new ae(ee,this);return this.providers.set(ee,re),re}getProviders(){return Array.from(this.providers.values())}}},7879:(Tt,Se,L)=>{L.d(Se,{Am:()=>Ae,Ub:()=>Te,Yd:()=>ye,in:()=>G});const _=[];var G=function(ee){return ee[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",ee}(G||{});const Y={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},le=G.INFO,ae={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},ce=(ee,re,..._e)=>{if(re<ee.logLevel)return;const Je=(new Date).toISOString(),qe=ae[re];if(!qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${re})`);console[qe](`[${Je}]  ${ee.name}:`,..._e)};class ye{constructor(re){this.name=re,this._logLevel=le,this._logHandler=ce,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(re){if(!(re in G))throw new TypeError(`Invalid value "${re}" assigned to \`logLevel\``);this._logLevel=re}setLogLevel(re){this._logLevel="string"==typeof re?Y[re]:re}get logHandler(){return this._logHandler}set logHandler(re){if("function"!=typeof re)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=re}get userLogHandler(){return this._userLogHandler}set userLogHandler(re){this._userLogHandler=re}debug(...re){this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...re),this._logHandler(this,G.DEBUG,...re)}log(...re){this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...re),this._logHandler(this,G.VERBOSE,...re)}info(...re){this._userLogHandler&&this._userLogHandler(this,G.INFO,...re),this._logHandler(this,G.INFO,...re)}warn(...re){this._userLogHandler&&this._userLogHandler(this,G.WARN,...re),this._logHandler(this,G.WARN,...re)}error(...re){this._userLogHandler&&this._userLogHandler(this,G.ERROR,...re),this._logHandler(this,G.ERROR,...re)}}function Te(ee){_.forEach(re=>{re.setLogLevel(ee)})}function Ae(ee,re){for(const _e of _){let Je=null;re&&re.level&&(Je=Y[re.level]),_e.userLogHandler=null===ee?null:(qe,at,...Ze)=>{const dt=Ze.map(et=>{if(null==et)return null;if("string"==typeof et)return et;if("number"==typeof et||"boolean"==typeof et)return et.toString();if(et instanceof Error)return et.message;try{return JSON.stringify(et)}catch{return null}}).filter(et=>et).join(" ");at>=(Je??qe.logLevel)&&ee({level:G[at].toLowerCase(),message:dt,args:Ze,type:qe.name})}}}},3182:(Tt,Se,L)=>{L.d(Se,{C6:()=>_.getApps,KN:()=>_.registerVersion,Mq:()=>_.getApp,ZF:()=>_.initializeApp});var _=L(534);(0,_.registerVersion)("firebase","10.12.5","app")},7142:(Tt,Se,L)=>{L.d(Se,{Z:()=>_.Z});var _=L(3106);_.Z.registerVersion("firebase","10.12.5","app-compat")},5861:(Tt,Se,L)=>{function _(Y,le,ae,ce,ye,Te,Ae){try{var ee=Y[Te](Ae),re=ee.value}catch(_e){return void ae(_e)}ee.done?le(re):Promise.resolve(re).then(ce,ye)}function G(Y){return function(){var le=this,ae=arguments;return new Promise(function(ce,ye){var Te=Y.apply(le,ae);function Ae(re){_(Te,ce,ye,Ae,ee,"next",re)}function ee(re){_(Te,ce,ye,Ae,ee,"throw",re)}Ae(void 0)})}}L.d(Se,{Z:()=>G})},7582:(Tt,Se,L)=>{function le(Z,ve){var Ve={};for(var je in Z)Object.prototype.hasOwnProperty.call(Z,je)&&ve.indexOf(je)<0&&(Ve[je]=Z[je]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(je=Object.getOwnPropertySymbols(Z);We<je.length;We++)ve.indexOf(je[We])<0&&Object.prototype.propertyIsEnumerable.call(Z,je[We])&&(Ve[je[We]]=Z[je[We]])}return Ve}function _e(Z,ve,Ve,je){return new(Ve||(Ve=Promise))(function(Ge,Mt){function yt(An){try{Vt(je.next(An))}catch(qt){Mt(qt)}}function qn(An){try{Vt(je.throw(An))}catch(qt){Mt(qt)}}function Vt(An){An.done?Ge(An.value):function We(Ge){return Ge instanceof Ve?Ge:new Ve(function(Mt){Mt(Ge)})}(An.value).then(yt,qn)}Vt((je=je.apply(Z,ve||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function Ne(Z,ve,Ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,je=Ve.apply(Z,ve||[]),Ge=[];return We={},yt("next"),yt("throw"),yt("return",function Mt(Et){return function(yn){return Promise.resolve(yn).then(Et,qt)}}),We[Symbol.asyncIterator]=function(){return this},We;function yt(Et,yn){je[Et]&&(We[Et]=function(Cn){return new Promise(function(mt,vt){Ge.push([Et,Cn,mt,vt])>1||qn(Et,Cn)})},yn&&(We[Et]=yn(We[Et])))}function qn(Et,yn){try{!function Vt(Et){Et.value instanceof me?Promise.resolve(Et.value.v).then(An,qt):zr(Ge[0][2],Et)}(je[Et](yn))}catch(Cn){zr(Ge[0][3],Cn)}}function An(Et){qn("next",Et)}function qt(Et){qn("throw",Et)}function zr(Et,yn){Et(yn),Ge.shift(),Ge.length&&qn(Ge[0][0],Ge[0][1])}}function Be(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ve,ve=Z[Symbol.asyncIterator];return ve?ve.call(Z):(Z=function Ze(Z){var ve="function"==typeof Symbol&&Symbol.iterator,Ve=ve&&Z[ve],je=0;if(Ve)return Ve.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&je>=Z.length&&(Z=void 0),{value:Z&&Z[je++],done:!Z}}};throw new TypeError(ve?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),Ve={},je("next"),je("throw"),je("return"),Ve[Symbol.asyncIterator]=function(){return this},Ve);function je(Ge){Ve[Ge]=Z[Ge]&&function(Mt){return new Promise(function(yt,qn){!function We(Ge,Mt,yt,qn){Promise.resolve(qn).then(function(Vt){Ge({value:Vt,done:yt})},Mt)}(yt,qn,(Mt=Z[Ge](Mt)).done,Mt.value)})}}}L.d(Se,{FC:()=>Ne,KL:()=>Be,_T:()=>le,mG:()=>_e,qq:()=>me}),"function"==typeof SuppressedError&&SuppressedError}},Tt=>{Tt(Tt.s=6984)}]);